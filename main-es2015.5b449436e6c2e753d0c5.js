(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a}));var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:"[DEFAULT]",optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService(i);if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(s){if(n)return null;throw s}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService("[DEFAULT]")}catch(l){}try{for(var i=Object(r.h)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=Object(r.e)(o.value,2),a=s[1],c=this.normalizeInstanceIdentifier(s[0]);try{var u=this.getOrInitializeService(c);a.resolve(u)}catch(l){}}}catch(h){e={error:h}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,(function(){var t;return Object(r.d)(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}(),a=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new s(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}n.d(e,"a",(function(){return o}));class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("ZUHj"),i=n("l7GE"),o=n("51Dv"),s=n("lJxs"),a=n("Cfvw");function c(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(c((n,r)=>Object(a.a)(t(n,r)).pipe(Object(s.a)((t,i)=>e(n,t,r,i))),n)):("number"==typeof e&&(n=e),e=>e.lift(new u(t,n)))}class u{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new l(t,this.project,this.concurrent))}}class l extends i.a{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e,t,n)}_innerSub(t,e,n){const i=new o.a(this,e,n),s=this.destination;s.add(i);const a=Object(r.a)(this,t,void 0,void 0,i);a!==i&&s.add(a)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t,e,n,r,i){this.destination.next(e)}notifyComplete(t){const e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"51Dv":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");class i extends r.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}},"7Hc7":function(t,e,n){"use strict";let r=1;const i=(()=>Promise.resolve())(),o={};function s(t){return t in o&&(delete o[t],!0)}const a={setImmediate(t){const e=r++;return o[e]=!0,i.then(()=>s(e)&&t()),e},clearImmediate(t){s(t)}};var c=n("3N8a");class u extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=a.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(a.clearImmediate(e),t.scheduled=void 0)}}var l=n("IjjT");class h extends l.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}n.d(e,"a",(function(){return d}));const d=new h(u)},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),c=n("NJ4a");class u extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof u?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new u(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends u{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(c.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(c.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(c.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(c.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},By2D:function(t,e){t.exports=function(t){var e=function(e){this.manager=void 0!==e?e:t.DefaultLoadingManager};return e.prototype={constructor:t.STLLoader,load:function(e,n,r,i){var o=this,s=new t.FileLoader(o.manager);s.setResponseType("arraybuffer"),s.load(e,(function(t){n(o.parse(t))}),r,i)},parse:function(t){var e=this.ensureBinary(t);return function(){var t;if(84+50*(t=new DataView(e)).getUint32(80,!0)===t.byteLength)return!0;for(var n=[115,111,108,105,100],r=0;r<5;r++)if(n[r]!=t.getUint8(r,!1))return!0;return!1}()?this.parseBinary(e):this.parseASCII(this.ensureString(t))},parseBinary:function(e){for(var n,r,i,o,s,a,c,u,l=new DataView(e),h=l.getUint32(80,!0),d=!1,f=0;f<70;f++)1129270351==l.getUint32(f,!1)&&82==l.getUint8(f+4)&&61==l.getUint8(f+5)&&(d=!0,o=[],s=l.getUint8(f+6)/255,a=l.getUint8(f+7)/255,c=l.getUint8(f+8)/255,u=l.getUint8(f+9)/255);for(var p=new t.BufferGeometry,m=[],g=[],y=0;y<h;y++){var v=84+50*y,b=l.getFloat32(v,!0),_=l.getFloat32(v+4,!0),w=l.getFloat32(v+8,!0);if(d){var x=l.getUint16(v+48,!0);0==(32768&x)?(n=(31&x)/31,r=(x>>5&31)/31,i=(x>>10&31)/31):(n=s,r=a,i=c)}for(var S=1;S<=3;S++){var E=v+12*S;m.push(l.getFloat32(E,!0)),m.push(l.getFloat32(E+4,!0)),m.push(l.getFloat32(E+8,!0)),g.push(b,_,w),d&&o.push(n,r,i)}}return p.addAttribute("position",new t.BufferAttribute(new Float32Array(m),3)),p.addAttribute("normal",new t.BufferAttribute(new Float32Array(g),3)),d&&(p.addAttribute("color",new t.BufferAttribute(new Float32Array(o),3)),p.hasColors=!0,p.alpha=u),p},parseASCII:function(e){var n,r,i,o,s,a;n=new t.BufferGeometry,r=/facet([\s\S]*?)endfacet/g;for(var c=[],u=[],l=new t.Vector3;null!==(s=r.exec(e));){for(a=s[0],i=/normal[\s]+([\-+]?[0-9]+\.?[0-9]*([eE][\-+]?[0-9]+)?)+[\s]+([\-+]?[0-9]*\.?[0-9]+([eE][\-+]?[0-9]+)?)+[\s]+([\-+]?[0-9]*\.?[0-9]+([eE][\-+]?[0-9]+)?)+/g;null!==(s=i.exec(a));)l.x=parseFloat(s[1]),l.y=parseFloat(s[3]),l.z=parseFloat(s[5]);for(o=/vertex[\s]+([\-+]?[0-9]+\.?[0-9]*([eE][\-+]?[0-9]+)?)+[\s]+([\-+]?[0-9]*\.?[0-9]+([eE][\-+]?[0-9]+)?)+[\s]+([\-+]?[0-9]*\.?[0-9]+([eE][\-+]?[0-9]+)?)+/g;null!==(s=o.exec(a));)c.push(parseFloat(s[1]),parseFloat(s[3]),parseFloat(s[5])),u.push(l.x,l.y,l.z)}return n.addAttribute("position",new t.BufferAttribute(new Float32Array(c),3)),n.addAttribute("normal",new t.BufferAttribute(new Float32Array(u),3)),n},ensureString:function(t){if("string"!=typeof t){for(var e=new Uint8Array(t),n=[],r=0;r<t.byteLength;r++)n.push(String.fromCharCode(e[r]));return n.join("")}return t},ensureBinary:function(t){if("string"==typeof t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=255&t.charCodeAt(n);return e.buffer||e}return t}},e}},Cfvw:function(t,e,n){"use strict";var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),c=n("Lhse"),u=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(u.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[c.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[c.a](),r.add(e.schedule((function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())})))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}n.d(e,"a",(function(){return h}))},D0XW:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("3N8a");const i=new(n("IjjT").a)(r.a)},DH7j:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EY2u:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("mCNh"),c=n("2fFW");n.d(e,"a",(function(){return u}));let u=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||c.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),c.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){c.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:Object(a.b)(t)(this)}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=c.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();n.d(e,"a",(function(){return i}));class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",(function(){return r.a})),r.a.registerVersion("firebase","8.2.5","app")},LRne:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",(function(){return i}));const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",(function(){return r}))},SeVD:function(t,e,n){"use strict";var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),c=n("c2HN"),u=n("XoHu");n.d(e,"a",(function(){return l}));const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(c.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){const e=n.next();if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(u.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected.`+" You can provide an Observable, Promise, Array, or Iterable.")}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",(function(){return r}))},VRyK:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},WMd4:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("EY2u"),i=n("LRne"),o=n("z6cu");let s=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(i.a)(this.value);case"E":return Object(o.a)(this.error);case"C":return Object(r.b)()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})()},XNiG:function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return l}));var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),c=n("2QA8");class u extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[c.a](){return new u(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",(function(){return r}))},Y7HM:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("DH7j");function i(t){return!Object(r.a)(t)&&t-parseFloat(t)+1>=0}},Ylt2:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},Z8We:function(t){t.exports=JSON.parse('{"results":[{"gender":"male","name":{"title":"Mr","first":"Aur\xe9lien","last":"Leclerc"},"location":{"street":{"number":3834,"name":"Rue D\'Abbeville"},"city":"Aulnay-sous-Bois","state":"Charente","country":"France","postcode":92061,"coordinates":{"latitude":"-2.2577","longitude":"-163.8348"},"timezone":{"offset":"-10:00","description":"Hawaii"}},"email":"aurelien.leclerc@example.com","login":{"uuid":"1816712e-7c89-4334-ac1b-3eb9e9bab204","username":"beautifulpanda316","password":"season","salt":"BWGMpmrj","md5":"b121e21b1889010ad560f54d67d15ce9","sha1":"09b71d2fccc2fba3f81ac6f978265934ae8de669","sha256":"a706e6dd44dc2580bf97ca4e2ad4245efbc7ba44ef3e865a868b0ea722a1b4cb"},"dob":{"date":"1993-10-29T18:18:45.797Z","age":28},"registered":{"date":"2014-06-29T15:33:04.248Z","age":7},"phone":"05-57-67-10-24","cell":"06-85-94-55-60","id":{"name":"INSEE","value":"1NNaN72470045 03"},"picture":{"large":"https://randomuser.me/api/portraits/men/62.jpg","medium":"https://randomuser.me/api/portraits/med/men/62.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/men/62.jpg"},"nat":"FR"},{"gender":"female","name":{"title":"Ms","first":"Buse","last":"Ak\u0131\u015f\u0131k"},"location":{"street":{"number":9660,"name":"Vatan Cd"},"city":"Bitlis","state":"K\u0131r\u015fehir","country":"Turkey","postcode":76677,"coordinates":{"latitude":"9.8889","longitude":"18.7363"},"timezone":{"offset":"+5:30","description":"Bombay, Calcutta, Madras, New Delhi"}},"email":"buse.akisik@example.com","login":{"uuid":"9f4191f8-00e7-4f9d-aae3-2cbd01cb35ac","username":"blueelephant181","password":"gallaries","salt":"BZWbjOTx","md5":"4bcd981ced0daf3d3f3a5cb024608cd0","sha1":"55139f34a11a651cfce7596c981ba4f4dc760ef3","sha256":"2403fffb23b2b50923b9d4eb1411f5de8f0121731f84758ad78ff38abff8314b"},"dob":{"date":"1993-11-20T00:39:31.295Z","age":28},"registered":{"date":"2006-02-09T23:42:37.311Z","age":15},"phone":"(652)-398-7009","cell":"(416)-966-4327","id":{"name":"","value":null},"picture":{"large":"https://randomuser.me/api/portraits/women/23.jpg","medium":"https://randomuser.me/api/portraits/med/women/23.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/women/23.jpg"},"nat":"TR"},{"gender":"male","name":{"title":"Mr","first":"Alexander","last":"Matthews"},"location":{"street":{"number":6208,"name":"The Grove"},"city":"Carlisle","state":"Central","country":"United Kingdom","postcode":"ZB56 4AF","coordinates":{"latitude":"4.8183","longitude":"18.0389"},"timezone":{"offset":"-6:00","description":"Central Time (US & Canada), Mexico City"}},"email":"alexander.matthews@example.com","login":{"uuid":"fdda1398-cf7f-4465-86e5-ce921ebff27b","username":"angrytiger264","password":"bukkake","salt":"mR99K3HA","md5":"fc3d7707c27b6fe5e2f723d456259f11","sha1":"3e26baa9a1226e47417ca3d86083b01456daf593","sha256":"d1b76ef7dd44d6cdad86bf06dc4b2bd6f396580115fef5d92c6de0a79c531032"},"dob":{"date":"1980-06-23T02:45:19.651Z","age":41},"registered":{"date":"2012-12-09T00:22:24.177Z","age":9},"phone":"016973 04980","cell":"0790-367-269","id":{"name":"NINO","value":"RC 94 79 82 H"},"picture":{"large":"https://randomuser.me/api/portraits/men/9.jpg","medium":"https://randomuser.me/api/portraits/med/men/9.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/men/9.jpg"},"nat":"GB"},{"gender":"male","name":{"title":"Mr","first":"Dariusz","last":"Rie\xdf"},"location":{"street":{"number":4712,"name":"Lindenweg"},"city":"Steinheim","state":"Rheinland-Pfalz","country":"Germany","postcode":70739,"coordinates":{"latitude":"-10.3815","longitude":"125.5946"},"timezone":{"offset":"+8:00","description":"Beijing, Perth, Singapore, Hong Kong"}},"email":"dariusz.riess@example.com","login":{"uuid":"8e78991c-36b0-4178-8744-2bd79daace8b","username":"heavysnake558","password":"bbbbbb","salt":"W5IRwZs3","md5":"e231270f62b80177b007699dc737199f","sha1":"3a90785851c1d3e46b2e41d40af22ac6eef6557a","sha256":"de49961dfeb332876c4ce44f17d155d9104e8a98417d2cf0eaa964aed4195c00"},"dob":{"date":"1979-08-11T01:06:31.811Z","age":42},"registered":{"date":"2019-09-20T07:15:35.671Z","age":2},"phone":"0243-6324991","cell":"0178-6329913","id":{"name":"","value":null},"picture":{"large":"https://randomuser.me/api/portraits/men/91.jpg","medium":"https://randomuser.me/api/portraits/med/men/91.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/men/91.jpg"},"nat":"DE"},{"gender":"male","name":{"title":"Mr","first":"Jason","last":"Graves"},"location":{"street":{"number":6693,"name":"Herbert Road"},"city":"Arklow","state":"Kerry","country":"Ireland","postcode":78715,"coordinates":{"latitude":"-23.4911","longitude":"116.5968"},"timezone":{"offset":"0:00","description":"Western Europe Time, London, Lisbon, Casablanca"}},"email":"jason.graves@example.com","login":{"uuid":"4e17d8af-e375-4a54-aef2-ea63fe259075","username":"whiteleopard174","password":"augustus","salt":"pgrTn1ix","md5":"a27ed402a4fa7e35a287ef2c45778fd9","sha1":"33c0ee215a262057b995a8607c48a1479fd9bcce","sha256":"89c0a69194c372fbf13078acc911f2d5b0cfac042b71e82a6407af23c3d2cae7"},"dob":{"date":"1958-08-07T08:57:45.165Z","age":63},"registered":{"date":"2003-08-25T20:56:55.528Z","age":18},"phone":"031-441-7613","cell":"081-642-3556","id":{"name":"PPS","value":"9315095T"},"picture":{"large":"https://randomuser.me/api/portraits/men/35.jpg","medium":"https://randomuser.me/api/portraits/med/men/35.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/men/35.jpg"},"nat":"IE"},{"gender":"male","name":{"title":"Mr","first":"S\xedlvio","last":"Foga\xe7a"},"location":{"street":{"number":6031,"name":"Rua Tiradentes "},"city":"S\xe3o Paulo","state":"Piau\xed","country":"Brazil","postcode":91644,"coordinates":{"latitude":"-9.5767","longitude":"60.9515"},"timezone":{"offset":"+11:00","description":"Magadan, Solomon Islands, New Caledonia"}},"email":"silvio.fogaca@example.com","login":{"uuid":"405c314b-3d25-41f8-9415-6772ba249736","username":"browngoose663","password":"pinkfloy","salt":"mlXSYcgV","md5":"037303ba2e6394576147d91fab0058d8","sha1":"7c317bf28dc0c86a4d5cde47780155e7ada20778","sha256":"289775e2ceea235940f00fb37494e73d0fb4085497e62f7a84d322d868a8a53c"},"dob":{"date":"1985-04-25T15:01:06.299Z","age":36},"registered":{"date":"2011-06-12T07:55:07.396Z","age":10},"phone":"(98) 8611-5589","cell":"(49) 2437-3938","id":{"name":"","value":null},"picture":{"large":"https://randomuser.me/api/portraits/men/55.jpg","medium":"https://randomuser.me/api/portraits/med/men/55.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/men/55.jpg"},"nat":"BR"},{"gender":"female","name":{"title":"Miss","first":"Lena","last":"Sullivan"},"location":{"street":{"number":2025,"name":"Dogwood Ave"},"city":"Scurry","state":"Georgia","country":"United States","postcode":98668,"coordinates":{"latitude":"-9.7228","longitude":"116.4819"},"timezone":{"offset":"+9:00","description":"Tokyo, Seoul, Osaka, Sapporo, Yakutsk"}},"email":"lena.sullivan@example.com","login":{"uuid":"c02ab663-41e3-43a9-85fd-b01f71afaa75","username":"lazyduck391","password":"qiong","salt":"962xnusm","md5":"2c89c01e79900970b102981917e7c6f1","sha1":"8896ebdee16d381c330fd3295285821a8168bf1b","sha256":"3dc1d182446c8dbb55b22c92f1d4e8422c055b8a1f136f0f40db4116b76ae5de"},"dob":{"date":"1988-10-14T04:36:54.357Z","age":33},"registered":{"date":"2017-01-18T08:49:19.756Z","age":4},"phone":"(667)-157-3539","cell":"(112)-718-8010","id":{"name":"SSN","value":"653-56-3698"},"picture":{"large":"https://randomuser.me/api/portraits/women/67.jpg","medium":"https://randomuser.me/api/portraits/med/women/67.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/women/67.jpg"},"nat":"US"},{"gender":"female","name":{"title":"Miss","first":"Savannah","last":"Cooper"},"location":{"street":{"number":842,"name":"Moorhouse Avenue"},"city":"Napier","state":"Hawke\'S Bay","country":"New Zealand","postcode":85603,"coordinates":{"latitude":"-52.5621","longitude":"86.3168"},"timezone":{"offset":"0:00","description":"Western Europe Time, London, Lisbon, Casablanca"}},"email":"savannah.cooper@example.com","login":{"uuid":"960939e3-163b-4ff9-9862-0e2a91c1e3c0","username":"happyfrog460","password":"wilbur","salt":"16WJUqxG","md5":"7918e3030f6688db75f46427db701c9e","sha1":"d06aac21f53c4e5067fab27fbc5ff13fd44b121f","sha256":"0f2d34f9c879663b18683e0e1b8b96954912116d83f17316ac42a2cdf6704fe7"},"dob":{"date":"1963-08-12T00:19:16.357Z","age":58},"registered":{"date":"2017-06-18T04:04:43.991Z","age":4},"phone":"(403)-422-4497","cell":"(543)-177-5856","id":{"name":"","value":null},"picture":{"large":"https://randomuser.me/api/portraits/women/14.jpg","medium":"https://randomuser.me/api/portraits/med/women/14.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/women/14.jpg"},"nat":"NZ"},{"gender":"female","name":{"title":"Miss","first":"Melissa","last":"Ross"},"location":{"street":{"number":9035,"name":"Denny Street"},"city":"Kildare","state":"Mayo","country":"Ireland","postcode":45400,"coordinates":{"latitude":"36.6442","longitude":"2.6066"},"timezone":{"offset":"-4:00","description":"Atlantic Time (Canada), Caracas, La Paz"}},"email":"melissa.ross@example.com","login":{"uuid":"70609f48-4e28-493f-a842-5201dccb2f30","username":"purplefrog559","password":"houhou","salt":"AnSGYzwe","md5":"6a27cd02ba27d328582c424d03dd3e2e","sha1":"7af778fa867dac78ddbdfc6c88cb668bae8a0a88","sha256":"d69116f659586ddc3f4ee674f58e7ab9147c4672c939ca8388f65d69d50a759a"},"dob":{"date":"1977-03-16T06:32:28.309Z","age":44},"registered":{"date":"2012-08-28T23:41:14.400Z","age":9},"phone":"021-137-4918","cell":"081-997-9249","id":{"name":"PPS","value":"1795110T"},"picture":{"large":"https://randomuser.me/api/portraits/women/68.jpg","medium":"https://randomuser.me/api/portraits/med/women/68.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/women/68.jpg"},"nat":"IE"},{"gender":"male","name":{"title":"Mr","first":"Cohen","last":"Davies"},"location":{"street":{"number":1572,"name":"Wairakei Road"},"city":"Nelson","state":"Manawatu-Wanganui","country":"New Zealand","postcode":22065,"coordinates":{"latitude":"68.9791","longitude":"-66.1529"},"timezone":{"offset":"-3:30","description":"Newfoundland"}},"email":"cohen.davies@example.com","login":{"uuid":"3332461f-4000-41e2-8d44-507ee0bbdd6b","username":"ticklishmeercat699","password":"scrappy","salt":"hvTsCisT","md5":"6ccc47d5567cf9fcbca008d36f89bb14","sha1":"8e3c845a92aae00ea4fbede34dc8e857dc9f224e","sha256":"e72018e67c9fb104a029b26be86c83f1303a216c56e4177be87274710ed976fd"},"dob":{"date":"1988-03-25T09:50:46.989Z","age":33},"registered":{"date":"2017-02-06T07:02:03.510Z","age":4},"phone":"(631)-166-5585","cell":"(675)-339-5013","id":{"name":"","value":null},"picture":{"large":"https://randomuser.me/api/portraits/men/46.jpg","medium":"https://randomuser.me/api/portraits/med/men/46.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/men/46.jpg"},"nat":"NZ"},{"gender":"male","name":{"title":"Mr","first":"Caleb","last":"Harris"},"location":{"street":{"number":5196,"name":"Kaikorai Valley Road"},"city":"Lower Hutt","state":"Nelson","country":"New Zealand","postcode":76252,"coordinates":{"latitude":"20.5353","longitude":"-82.9309"},"timezone":{"offset":"+6:00","description":"Almaty, Dhaka, Colombo"}},"email":"caleb.harris@example.com","login":{"uuid":"05248a7f-df1a-499b-8186-1756b1578f89","username":"silverrabbit366","password":"passwor1","salt":"ztjraOwC","md5":"ad00c0cca82a05eb78bba32ebe12971e","sha1":"a4ffb625ed5465ccf6c2c69e8620598cf56a8dba","sha256":"a39d661b204250d9f3be5aa724bafa6e874536c7484fa0100547086b8c2a096d"},"dob":{"date":"1953-07-16T02:21:39.967Z","age":68},"registered":{"date":"2010-08-17T08:55:10.026Z","age":11},"phone":"(959)-376-8729","cell":"(668)-832-6690","id":{"name":"","value":null},"picture":{"large":"https://randomuser.me/api/portraits/men/46.jpg","medium":"https://randomuser.me/api/portraits/med/men/46.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/men/46.jpg"},"nat":"NZ"},{"gender":"male","name":{"title":"Mr","first":"\u0637\u0627\u0647\u0627","last":"\u0633\u0644\u0637\u0627\u0646\u06cc \u0646\u0698\u0627\u062f"},"location":{"street":{"number":1204,"name":"\u06a9\u0627\u0631\u06af\u0631 \u0634\u0645\u0627\u0644\u06cc"},"city":"\u06af\u0644\u0633\u062a\u0627\u0646","state":"\u06cc\u0632\u062f","country":"Iran","postcode":17794,"coordinates":{"latitude":"11.4632","longitude":"-151.5702"},"timezone":{"offset":"+5:30","description":"Bombay, Calcutta, Madras, New Delhi"}},"email":"th.sltnynjd@example.com","login":{"uuid":"5c8f15ab-4af3-49ec-985a-965a8dc7df19","username":"yellowcat375","password":"mookie","salt":"3Ka4wvaz","md5":"8e2170d949948c1535f190a10e894f22","sha1":"d81d015d968b1eac476342d8c545492fd12ab7d5","sha256":"a6365a8e57c3f52fcad5ae8384353838d2ec351c4fd28d164f1ec6997e17adbe"},"dob":{"date":"1991-09-27T20:54:01.408Z","age":30},"registered":{"date":"2014-10-09T03:46:38.320Z","age":7},"phone":"053-94723484","cell":"0971-811-3326","id":{"name":"","value":null},"picture":{"large":"https://randomuser.me/api/portraits/men/27.jpg","medium":"https://randomuser.me/api/portraits/med/men/27.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/men/27.jpg"},"nat":"IR"},{"gender":"male","name":{"title":"Mr","first":"Judd","last":"Lowe"},"location":{"street":{"number":2440,"name":"Ranchview Dr"},"city":"College Station","state":"Oregon","country":"United States","postcode":55769,"coordinates":{"latitude":"31.7977","longitude":"-20.5279"},"timezone":{"offset":"+4:30","description":"Kabul"}},"email":"judd.lowe@example.com","login":{"uuid":"03c70c80-0430-42d4-9a1f-7bee34fd9e4e","username":"sadbird272","password":"eeeee","salt":"kKKfpgWW","md5":"8f8c5158095a720811a8cb244d57c1c7","sha1":"9f00f9436c2639cfa74dc9a87776010e133e4cfa","sha256":"1ce3415196c1bc0ee76105866ea5c4020537faf40cfc99ec47034b5896a63409"},"dob":{"date":"1978-03-26T07:28:01.213Z","age":43},"registered":{"date":"2011-11-17T14:25:08.616Z","age":10},"phone":"(402)-989-8137","cell":"(911)-021-3038","id":{"name":"SSN","value":"755-79-1444"},"picture":{"large":"https://randomuser.me/api/portraits/men/10.jpg","medium":"https://randomuser.me/api/portraits/med/men/10.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/men/10.jpg"},"nat":"US"},{"gender":"female","name":{"title":"Miss","first":"Laura","last":"Parra"},"location":{"street":{"number":348,"name":"Ronda de Toledo"},"city":"Vigo","state":"Comunidad Valenciana","country":"Spain","postcode":69263,"coordinates":{"latitude":"-53.5500","longitude":"-116.4075"},"timezone":{"offset":"+10:00","description":"Eastern Australia, Guam, Vladivostok"}},"email":"laura.parra@example.com","login":{"uuid":"d2ffed63-543b-4735-9dba-ab29b495f224","username":"ticklishswan246","password":"station","salt":"J6QPmZWi","md5":"3f01150b33e8894e7af995dba9b86f55","sha1":"e602984faafa83b7a497f627b43f30356a1f9b23","sha256":"5162d884a78fbb561463010e6694d27a3ed43527e5d9a5618299ace17af5d0b6"},"dob":{"date":"1946-07-10T17:19:13.311Z","age":75},"registered":{"date":"2009-11-07T18:33:48.119Z","age":12},"phone":"939-199-034","cell":"600-262-875","id":{"name":"DNI","value":"65171625-B"},"picture":{"large":"https://randomuser.me/api/portraits/women/38.jpg","medium":"https://randomuser.me/api/portraits/med/women/38.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/women/38.jpg"},"nat":"ES"},{"gender":"female","name":{"title":"Mrs","first":"Arianna","last":"Andriessen"},"location":{"street":{"number":7005,"name":"Berkakker"},"city":"Herwijnen","state":"Friesland","country":"Netherlands","postcode":94585,"coordinates":{"latitude":"43.3742","longitude":"-129.3320"},"timezone":{"offset":"-5:00","description":"Eastern Time (US & Canada), Bogota, Lima"}},"email":"arianna.andriessen@example.com","login":{"uuid":"dd120a96-894a-4fed-9e14-71874ddec9b4","username":"brownbutterfly774","password":"freeway","salt":"GcU6g2Mj","md5":"b73a1aefa9b155e5048788709521be91","sha1":"99f99f125d17992b5d5119fbad886947c698e15e","sha256":"9746a575e46ef116184a18450fcd92a332cc79ef181cfbef1fd54d781f1284ca"},"dob":{"date":"1973-08-31T13:48:31.094Z","age":48},"registered":{"date":"2008-10-03T21:24:34.550Z","age":13},"phone":"(965)-501-8909","cell":"(254)-268-2062","id":{"name":"BSN","value":"92716595"},"picture":{"large":"https://randomuser.me/api/portraits/women/66.jpg","medium":"https://randomuser.me/api/portraits/med/women/66.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/women/66.jpg"},"nat":"NL"},{"gender":"male","name":{"title":"Mr","first":"\u0645\u062d\u0645\u062f","last":"\u062c\u0639\u0641\u0631\u06cc"},"location":{"street":{"number":1500,"name":"\u062f\u06cc\u0628\u0627\u062c\u06cc"},"city":"\u0642\u0632\u0648\u06cc\u0646","state":"\u06af\u0644\u0633\u062a\u0627\u0646","country":"Iran","postcode":55603,"coordinates":{"latitude":"-22.2751","longitude":"10.8411"},"timezone":{"offset":"-11:00","description":"Midway Island, Samoa"}},"email":"mhmd.jaafry@example.com","login":{"uuid":"f6565d27-1564-4466-bb96-41bb9d8a9cbc","username":"whiteostrich581","password":"test2","salt":"YzO13b3e","md5":"b23ebfba8697c3ad518f052d0e3a2494","sha1":"071a2bd97390cd50d0afbbe465454d0b96c40c31","sha256":"b66a0332ff33e356e23f01f69a18486a5346c9dbb87627e9e5206ef645a212b0"},"dob":{"date":"1959-04-15T02:07:39.000Z","age":62},"registered":{"date":"2013-05-11T22:31:42.127Z","age":8},"phone":"090-22260313","cell":"0909-814-3530","id":{"name":"","value":null},"picture":{"large":"https://randomuser.me/api/portraits/men/4.jpg","medium":"https://randomuser.me/api/portraits/med/men/4.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/men/4.jpg"},"nat":"IR"},{"gender":"male","name":{"title":"Mr","first":"Bobby","last":"Price"},"location":{"street":{"number":3517,"name":"N Stelling Rd"},"city":"Bathurst","state":"Queensland","country":"Australia","postcode":6769,"coordinates":{"latitude":"-76.1795","longitude":"-83.3242"},"timezone":{"offset":"+6:00","description":"Almaty, Dhaka, Colombo"}},"email":"bobby.price@example.com","login":{"uuid":"e279663b-8d65-417a-9899-b225c6e1dffb","username":"lazybutterfly458","password":"tracey","salt":"4jUTzzxe","md5":"37dd1150d7b68c90a372885f913c53a1","sha1":"b1fd9ef61cab1fe812e3399043bc7d40e5685d56","sha256":"8959ea05301441b176cb9bbde90217dc8333814508242ee7a16b62c46bc7995e"},"dob":{"date":"1951-02-01T05:01:20.848Z","age":70},"registered":{"date":"2009-12-01T10:06:57.016Z","age":12},"phone":"07-8598-7735","cell":"0464-729-267","id":{"name":"TFN","value":"686133827"},"picture":{"large":"https://randomuser.me/api/portraits/men/25.jpg","medium":"https://randomuser.me/api/portraits/med/men/25.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/men/25.jpg"},"nat":"AU"},{"gender":"male","name":{"title":"Mr","first":"Arthur","last":"Lee"},"location":{"street":{"number":4682,"name":"Wellesley Street"},"city":"Whangarei","state":"Auckland","country":"New Zealand","postcode":84258,"coordinates":{"latitude":"72.2386","longitude":"-99.5725"},"timezone":{"offset":"-10:00","description":"Hawaii"}},"email":"arthur.lee@example.com","login":{"uuid":"6e2ce812-0d13-4242-b852-15b4724bcd9a","username":"crazysnake418","password":"horse","salt":"MXdyk7UC","md5":"63e3f4a63d469fd695b196e473db44ad","sha1":"309ef5cf18672ed8252a8acb92f63a0c197516cb","sha256":"af369b67e435893c101954dc1c2f449ca47cbb2eb9955101cdbcab30fdd6e49f"},"dob":{"date":"1969-03-29T08:19:19.154Z","age":52},"registered":{"date":"2009-05-06T09:57:41.393Z","age":12},"phone":"(233)-045-7432","cell":"(216)-774-1352","id":{"name":"","value":null},"picture":{"large":"https://randomuser.me/api/portraits/men/46.jpg","medium":"https://randomuser.me/api/portraits/med/men/46.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/men/46.jpg"},"nat":"NZ"},{"gender":"female","name":{"title":"Miss","first":"Alizee","last":"Guillot"},"location":{"street":{"number":23,"name":"Rue de la Gare"},"city":"Clermont-Ferrand","state":"Seine-Saint-Denis","country":"France","postcode":47545,"coordinates":{"latitude":"55.0050","longitude":"125.8888"},"timezone":{"offset":"+2:00","description":"Kaliningrad, South Africa"}},"email":"alizee.guillot@example.com","login":{"uuid":"7a621a98-8d8a-4c96-ae90-26d424c8667b","username":"happyzebra212","password":"contract","salt":"jlSF9USK","md5":"600360fbf9b2e70d81a560da78896dd4","sha1":"f8a067dc2ecbd8f588fedae6722141a717023330","sha256":"8888a06d0abee31771652cf133f864adce5b7cf67949aaa4378ade8f5e4f2c89"},"dob":{"date":"1952-07-13T00:10:19.261Z","age":69},"registered":{"date":"2013-03-28T21:44:13.117Z","age":8},"phone":"05-09-50-39-19","cell":"06-36-99-54-80","id":{"name":"INSEE","value":"2NNaN30101802 57"},"picture":{"large":"https://randomuser.me/api/portraits/women/60.jpg","medium":"https://randomuser.me/api/portraits/med/women/60.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/women/60.jpg"},"nat":"FR"},{"gender":"male","name":{"title":"Mr","first":"Mathis","last":"Roy"},"location":{"street":{"number":4786,"name":"Charles St"},"city":"Cochrane","state":"Nova Scotia","country":"Canada","postcode":"U3W 9X0","coordinates":{"latitude":"-14.8770","longitude":"-66.3708"},"timezone":{"offset":"+5:45","description":"Kathmandu"}},"email":"mathis.roy@example.com","login":{"uuid":"240a57ac-c427-47f8-b6bb-cb4fa9ee54a9","username":"tinyostrich899","password":"rider","salt":"tbhnPUFd","md5":"c14e366a13031eaa0c3cc3046f882215","sha1":"250bf4d264a1f05b8cc4e28c3bbf4c7a4a16dbf7","sha256":"4f0108a142d9a93b1ed917c9b87b62b2759b26ae9214c488b0de9911696dc97b"},"dob":{"date":"1985-09-04T06:58:55.712Z","age":36},"registered":{"date":"2015-02-17T23:29:01.442Z","age":6},"phone":"688-326-7118","cell":"406-432-7764","id":{"name":"","value":null},"picture":{"large":"https://randomuser.me/api/portraits/men/95.jpg","medium":"https://randomuser.me/api/portraits/med/men/95.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/men/95.jpg"},"nat":"CA"},{"gender":"female","name":{"title":"Mrs","first":"Carla","last":"Roman"},"location":{"street":{"number":8757,"name":"Calle Nebrija"},"city":"Burgos","state":"Catalu\xf1a","country":"Spain","postcode":71503,"coordinates":{"latitude":"81.1523","longitude":"-171.5051"},"timezone":{"offset":"+5:45","description":"Kathmandu"}},"email":"carla.roman@example.com","login":{"uuid":"a785b1ff-f1e9-40e5-9069-f24db496f6b3","username":"tinyduck251","password":"1222","salt":"Bd6MnfvB","md5":"dccb0eba59fdb3d38d2c628e67539dfd","sha1":"681c2ee19bd634afdf2dde1cdafed1a1705128a4","sha256":"2a35de1c81aae146319fef577ea51f2692ea771194d0f7d494ab69f9e2cc4686"},"dob":{"date":"1987-08-03T01:49:49.557Z","age":34},"registered":{"date":"2013-02-03T18:28:51.198Z","age":8},"phone":"918-291-449","cell":"660-684-574","id":{"name":"DNI","value":"32297306-A"},"picture":{"large":"https://randomuser.me/api/portraits/women/29.jpg","medium":"https://randomuser.me/api/portraits/med/women/29.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/women/29.jpg"},"nat":"ES"},{"gender":"female","name":{"title":"Mrs","first":"G\xfcl","last":"\xd6zk\xf6k"},"location":{"street":{"number":112,"name":"Doktorlar Cd"},"city":"Hatay","state":"\u0130stanbul","country":"Turkey","postcode":72963,"coordinates":{"latitude":"-25.6558","longitude":"-5.9361"},"timezone":{"offset":"+5:45","description":"Kathmandu"}},"email":"gul.ozkok@example.com","login":{"uuid":"d7b2e125-649f-4688-a3a3-b8299131cc5b","username":"silverostrich856","password":"tophat","salt":"1eAH2fc2","md5":"ca5377f6b4f8a97ff89c363a16697338","sha1":"57d95c8a18805eba66032332ee9f57c9417876ac","sha256":"3721f923be92ae9ca922fc729c85acf8f8602bb240742b23f438b323409b3b28"},"dob":{"date":"1952-10-29T07:49:40.331Z","age":69},"registered":{"date":"2011-08-14T12:15:34.768Z","age":10},"phone":"(221)-700-6062","cell":"(562)-400-9748","id":{"name":"","value":null},"picture":{"large":"https://randomuser.me/api/portraits/women/38.jpg","medium":"https://randomuser.me/api/portraits/med/women/38.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/women/38.jpg"},"nat":"TR"},{"gender":"female","name":{"title":"Ms","first":"Hubertine","last":"Matzke"},"location":{"street":{"number":5647,"name":"Kiefernweg"},"city":"Gladbeck","state":"Brandenburg","country":"Germany","postcode":16024,"coordinates":{"latitude":"-78.2867","longitude":"-111.1536"},"timezone":{"offset":"+5:30","description":"Bombay, Calcutta, Madras, New Delhi"}},"email":"hubertine.matzke@example.com","login":{"uuid":"981703fd-ed26-4ce2-9042-505db98bf277","username":"happyfish115","password":"gonzo","salt":"KhVTio1I","md5":"c04ae3a7728d9441c48040a53bebee16","sha1":"8b6468af0f350f6baa9bfe6d295265c555384b61","sha256":"41c35ad95e72a7456fc5dc48dc7e16512fd93e753b5114a6b76ecec6f4f7eac7"},"dob":{"date":"1987-01-30T13:08:25.323Z","age":34},"registered":{"date":"2019-03-19T11:12:50.338Z","age":2},"phone":"0300-0134509","cell":"0177-5242333","id":{"name":"","value":null},"picture":{"large":"https://randomuser.me/api/portraits/women/79.jpg","medium":"https://randomuser.me/api/portraits/med/women/79.jpg","thumbnail":"https://randomuser.me/api/portraits/thumb/women/79.jpg"},"nat":"DE"}]}')},ZUHj:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("51Dv"),i=n("SeVD"),o=n("HDdC");function s(t,e,n,s,a=new r.a(t,n,s)){if(!a.closed)return e instanceof o.a?e.subscribe(a):Object(i.a)(e)(a)}},bHdf:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",(function(){return r}))},fXoL:function(t,e,n){"use strict";n.d(e,"a",(function(){return vo})),n.d(e,"b",(function(){return fc})),n.d(e,"c",(function(){return cc})),n.d(e,"d",(function(){return sc})),n.d(e,"e",(function(){return ac})),n.d(e,"f",(function(){return ou})),n.d(e,"g",(function(){return Kc})),n.d(e,"h",(function(){return to})),n.d(e,"i",(function(){return Ec})),n.d(e,"j",(function(){return Us})),n.d(e,"k",(function(){return gc})),n.d(e,"l",(function(){return Bs})),n.d(e,"m",(function(){return gn})),n.d(e,"n",(function(){return Fa})),n.d(e,"o",(function(){return q})),n.d(e,"p",(function(){return l})),n.d(e,"q",(function(){return W})),n.d(e,"r",(function(){return yo})),n.d(e,"s",(function(){return oa})),n.d(e,"t",(function(){return sa})),n.d(e,"u",(function(){return mc})),n.d(e,"v",(function(){return at})),n.d(e,"w",(function(){return $c})),n.d(e,"x",(function(){return st})),n.d(e,"y",(function(){return Gc})),n.d(e,"z",(function(){return Cc})),n.d(e,"A",(function(){return h})),n.d(e,"B",(function(){return dc})),n.d(e,"C",(function(){return hc})),n.d(e,"D",(function(){return Ba})),n.d(e,"E",(function(){return Gs})),n.d(e,"F",(function(){return Hs})),n.d(e,"G",(function(){return Vs})),n.d(e,"H",(function(){return qs})),n.d(e,"I",(function(){return rr})),n.d(e,"J",(function(){return f})),n.d(e,"K",(function(){return tu})),n.d(e,"L",(function(){return la})),n.d(e,"M",(function(){return kc})),n.d(e,"N",(function(){return Zs})),n.d(e,"O",(function(){return Xs})),n.d(e,"P",(function(){return da})),n.d(e,"Q",(function(){return gt})),n.d(e,"R",(function(){return Mo})),n.d(e,"S",(function(){return Wc})),n.d(e,"T",(function(){return Nn})),n.d(e,"U",(function(){return R})),n.d(e,"V",(function(){return nt})),n.d(e,"W",(function(){return Pn})),n.d(e,"X",(function(){return ru})),n.d(e,"Y",(function(){return Uc})),n.d(e,"Z",(function(){return pc})),n.d(e,"ab",(function(){return no})),n.d(e,"bb",(function(){return Ca})),n.d(e,"cb",(function(){return er})),n.d(e,"db",(function(){return sr})),n.d(e,"eb",(function(){return Fn})),n.d(e,"fb",(function(){return En})),n.d(e,"gb",(function(){return Mn})),n.d(e,"hb",(function(){return Rn})),n.d(e,"ib",(function(){return Cn})),n.d(e,"jb",(function(){return An})),n.d(e,"kb",(function(){return On})),n.d(e,"lb",(function(){return Ea})),n.d(e,"mb",(function(){return nu})),n.d(e,"nb",(function(){return Ta})),n.d(e,"ob",(function(){return Ma})),n.d(e,"pb",(function(){return Tn})),n.d(e,"qb",(function(){return j})),n.d(e,"rb",(function(){return Ao})),n.d(e,"sb",(function(){return qo})),n.d(e,"tb",(function(){return Wo})),n.d(e,"ub",(function(){return To})),n.d(e,"vb",(function(){return Sa})),n.d(e,"wb",(function(){return Bt})),n.d(e,"xb",(function(){return A})),n.d(e,"yb",(function(){return Sn})),n.d(e,"zb",(function(){return _s})),n.d(e,"Ab",(function(){return Ms})),n.d(e,"Bb",(function(){return ks})),n.d(e,"Cb",(function(){return Mr})),n.d(e,"Db",(function(){return Io})),n.d(e,"Eb",(function(){return cs})),n.d(e,"Fb",(function(){return Zo})),n.d(e,"Gb",(function(){return Qa})),n.d(e,"Hb",(function(){return ur})),n.d(e,"Ib",(function(){return _t})),n.d(e,"Jb",(function(){return At})),n.d(e,"Kb",(function(){return y})),n.d(e,"Lb",(function(){return v})),n.d(e,"Mb",(function(){return Et})),n.d(e,"Nb",(function(){return Ct})),n.d(e,"Ob",(function(){return Do})),n.d(e,"Pb",(function(){return Ho})),n.d(e,"Qb",(function(){return Vo})),n.d(e,"Rb",(function(){return zo})),n.d(e,"Sb",(function(){return Bo})),n.d(e,"Tb",(function(){return Go})),n.d(e,"Ub",(function(){return dn})),n.d(e,"Vb",(function(){return ys})),n.d(e,"Wb",(function(){return et})),n.d(e,"Xb",(function(){return ko})),n.d(e,"Yb",(function(){return oc})),n.d(e,"Zb",(function(){return jo})),n.d(e,"ac",(function(){return Xo})),n.d(e,"bc",(function(){return tc})),n.d(e,"cc",(function(){return Ae})),n.d(e,"dc",(function(){return Me})),n.d(e,"ec",(function(){return Jo})),n.d(e,"fc",(function(){return ka})),n.d(e,"gc",(function(){return ja})),n.d(e,"hc",(function(){return es})),n.d(e,"ic",(function(){return ts})),n.d(e,"jc",(function(){return Fo})),n.d(e,"kc",(function(){return ns})),n.d(e,"lc",(function(){return rs})),n.d(e,"mc",(function(){return Na})),n.d(e,"nc",(function(){return Ka})),n.d(e,"oc",(function(){return No})),n.d(e,"pc",(function(){return Xe})),n.d(e,"qc",(function(){return ie})),n.d(e,"rc",(function(){return cr})),n.d(e,"sc",(function(){return Tt})),n.d(e,"tc",(function(){return Ya})),n.d(e,"uc",(function(){return as})),n.d(e,"vc",(function(){return Po})),n.d(e,"wc",(function(){return ic})),n.d(e,"xc",(function(){return ps})),n.d(e,"yc",(function(){return ms})),n.d(e,"zc",(function(){return gs})),n.d(e,"Ac",(function(){return vs})),n.d(e,"Bc",(function(){return $a}));var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("w1tV");function c(t){return{toString:t}.toString()}function u(t,e,n){return c(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty("__parameters__")?t.__parameters__:Object.defineProperty(t,"__parameters__",{value:[]}).__parameters__;for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}const l=u("Inject",t=>({token:t})),h=u("Optional"),d=u("Self"),f=u("SkipSelf");var p=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function m(t){for(let e in t)if(t[e]===m)return e;throw Error("Could not find renamed property on target object.")}function g(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function y(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function v(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function b(t){return _(t,t[x])||_(t,t[T])}function _(t,e){return e&&e.token===t?e:null}function w(t){return t&&(t.hasOwnProperty(S)||t.hasOwnProperty(M))?t[S]:null}const x=m({"\u0275prov":m}),S=m({"\u0275inj":m}),E=m({"\u0275provFallback":m}),T=m({ngInjectableDef:m}),M=m({ngInjectorDef:m});function A(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(A).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function C(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const O=m({__forward_ref__:m});function R(t){return t.__forward_ref__=R,t.toString=function(){return A(this())},t}function I(t){return L(t)?t():t}function L(t){return"function"==typeof t&&t.hasOwnProperty(O)&&t.__forward_ref__===R}const P="undefined"!=typeof globalThis&&globalThis,N="undefined"!=typeof window&&window,D="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,k="undefined"!=typeof global&&global,j=P||k||N||D,F=m({"\u0275cmp":m}),U=m({"\u0275dir":m}),B=m({"\u0275pipe":m}),z=m({"\u0275mod":m}),H=m({"\u0275loc":m}),V=m({"\u0275fac":m}),G=m({__NG_ELEMENT_ID__:m});class W{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=y({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const q=new W("INJECTOR",-1),X={},Z=/\n/gm,K=m({provide:String,useValue:m});let Y,$=void 0;function J(t){const e=$;return $=t,e}function Q(t){const e=Y;return Y=t,e}function tt(t,e=p.Default){if(void 0===$)throw new Error("inject() must be called from an injection context");return null===$?rt(t,void 0,e):$.get(t,e&p.Optional?null:void 0,e)}function et(t,e=p.Default){return(Y||tt)(I(t),e)}const nt=et;function rt(t,e,n){const r=b(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&p.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${A(t)}]`)}function it(t){const e=[];for(let n=0;n<t.length;n++){const r=I(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t=void 0,n=p.Default;for(let e=0;e<r.length;e++){const i=r[e];i instanceof h||"Optional"===i.ngMetadataName||i===h?n|=p.Optional:i instanceof f||"SkipSelf"===i.ngMetadataName||i===f?n|=p.SkipSelf:i instanceof d||"Self"===i.ngMetadataName||i===d?n|=p.Self:t=i instanceof l||i===l?i.token:i}e.push(et(t,n))}else e.push(et(r))}return e}class ot{get(t,e=X){if(e===X){const e=new Error(`NullInjectorError: No provider for ${A(t)}!`);throw e.name="NullInjectorError",e}return e}}class st{}class at{}function ct(t,e){t.forEach(t=>Array.isArray(t)?ct(t,e):e(t))}function ut(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function lt(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function ht(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function dt(t,e,n){let r=pt(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function ft(t,e){const n=pt(t,e);if(n>=0)return t[1|n]}function pt(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const mt=function(){var t={OnPush:0,Default:1};return t[t.OnPush]="OnPush",t[t.Default]="Default",t}(),gt=function(){var t={Emulated:0,Native:1,None:2,ShadowDom:3};return t[t.Emulated]="Emulated",t[t.Native]="Native",t[t.None]="None",t[t.ShadowDom]="ShadowDom",t}(),yt={},vt=[];let bt=0;function _t(t){return c(()=>{const e=t.type,n=e.prototype,r={},i={type:e,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:t.exportAs||null,onChanges:null,onInit:n.ngOnInit||null,doCheck:n.ngDoCheck||null,afterContentInit:n.ngAfterContentInit||null,afterContentChecked:n.ngAfterContentChecked||null,afterViewInit:n.ngAfterViewInit||null,afterViewChecked:n.ngAfterViewChecked||null,onDestroy:n.ngOnDestroy||null,onPush:t.changeDetection===mt.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||vt,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||gt.Emulated,id:"c",styles:t.styles||vt,_:null,setInput:null,schemas:t.schemas||null,tView:null},o=t.directives,s=t.features,a=t.pipes;return i.id+=bt++,i.inputs=Mt(t.inputs,r),i.outputs=Mt(t.outputs),s&&s.forEach(t=>t(i)),i.directiveDefs=o?()=>("function"==typeof o?o():o).map(wt):null,i.pipeDefs=a?()=>("function"==typeof a?a():a).map(xt):null,i})}function wt(t){return Ot(t)||function(t){return t[U]||null}(t)}function xt(t){return function(t){return t[B]||null}(t)}const St={};function Et(t){const e={type:t.type,bootstrap:t.bootstrap||vt,declarations:t.declarations||vt,imports:t.imports||vt,exports:t.exports||vt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&c(()=>{St[t.id]=t.type}),e}function Tt(t,e){return c(()=>{const n=It(t,!0);n.declarations=e.declarations||vt,n.imports=e.imports||vt,n.exports=e.exports||vt})}function Mt(t,e){if(null==t)return yt;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const At=_t;function Ct(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function Ot(t){return t[F]||null}function Rt(t,e){return t.hasOwnProperty(V)?t[V]:null}function It(t,e){const n=t[z]||null;if(!n&&!0===e)throw new Error(`Type ${A(t)} does not have '\u0275mod' property.`);return n}function Lt(t){return Array.isArray(t)&&"object"==typeof t[1]}function Pt(t){return Array.isArray(t)&&!0===t[1]}function Nt(t){return 0!=(8&t.flags)}function Dt(t){return 2==(2&t.flags)}function kt(t){return 1==(1&t.flags)}function jt(t){return null!==t.template}function Ft(t){return 0!=(512&t[2])}let Ut=void 0;function Bt(t){Ut=t}function zt(t){return!!t.listen}const Ht={createRenderer:(t,e)=>void 0!==Ut?Ut:"undefined"!=typeof document?document:void 0};function Vt(t){for(;Array.isArray(t);)t=t[0];return t}function Gt(t,e){return Vt(e[t+19])}function Wt(t,e){return Vt(e[t.index])}function qt(t,e){return t.data[e+19]}function Xt(t,e){return t[e+19]}function Zt(t,e){const n=e[t];return Lt(n)?n:n[0]}function Kt(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Yt(t){return 4==(4&t[2])}function $t(t){return 128==(128&t[2])}function Jt(t,e){return null===t||null==e?null:t[e]}function Qt(t){t[18]=0}const te={lFrame:be(null),bindingsEnabled:!0,checkNoChangesMode:!1};function ee(){return te.bindingsEnabled}function ne(){return te.lFrame.lView}function re(){return te.lFrame.tView}function ie(t){te.lFrame.contextLView=t}function oe(){return te.lFrame.previousOrParentTNode}function se(t,e){te.lFrame.previousOrParentTNode=t,te.lFrame.isParent=e}function ae(){return te.lFrame.isParent}function ce(){te.lFrame.isParent=!1}function ue(){return te.checkNoChangesMode}function le(t){te.checkNoChangesMode=t}function he(){const t=te.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function de(){return te.lFrame.bindingIndex++}function fe(t,e){const n=te.lFrame;n.bindingIndex=n.bindingRootIndex=t,n.currentDirectiveIndex=e}function pe(){return te.lFrame.currentQueryIndex}function me(t){te.lFrame.currentQueryIndex=t}function ge(t,e){const n=ve();te.lFrame=n,n.previousOrParentTNode=e,n.lView=t}function ye(t,e){const n=ve(),r=t[1];te.lFrame=n,n.previousOrParentTNode=e,n.lView=t,n.tView=r,n.contextLView=t,n.bindingIndex=r.bindingStartIndex}function ve(){const t=te.lFrame,e=null===t?null:t.child;return null===e?be(t):e}function be(t){const e={previousOrParentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentSanitizer:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null};return null!==t&&(t.child=e),e}function _e(){const t=te.lFrame;return te.lFrame=t.parent,t.previousOrParentTNode=null,t.lView=null,t}const we=_e;function xe(){const t=_e();t.isParent=!0,t.tView=null,t.selectedIndex=0,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.currentSanitizer=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Se(){return te.lFrame.selectedIndex}function Ee(t){te.lFrame.selectedIndex=t}function Te(){const t=te.lFrame;return qt(t.tView,t.selectedIndex)}function Me(){te.lFrame.currentNamespace="http://www.w3.org/2000/svg"}function Ae(){te.lFrame.currentNamespace=null}function Ce(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n];e.afterContentInit&&(t.contentHooks||(t.contentHooks=[])).push(-n,e.afterContentInit),e.afterContentChecked&&((t.contentHooks||(t.contentHooks=[])).push(n,e.afterContentChecked),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,e.afterContentChecked)),e.afterViewInit&&(t.viewHooks||(t.viewHooks=[])).push(-n,e.afterViewInit),e.afterViewChecked&&((t.viewHooks||(t.viewHooks=[])).push(n,e.afterViewChecked),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,e.afterViewChecked)),null!=e.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(n,e.onDestroy)}}function Oe(t,e,n){Le(t,e,3,n)}function Re(t,e,n,r){(3&t[2])===n&&Le(t,e,n,r)}function Ie(t,e){let n=t[2];(3&n)===e&&(n&=1023,n+=1,t[2]=n)}function Le(t,e,n,r){const i=null!=r?r:-1;let o=0;for(let s=void 0!==r?65535&t[18]:0;s<e.length;s++)if("number"==typeof e[s+1]){if(o=e[s],null!=r&&o>=r)break}else e[s]<0&&(t[18]+=65536),(o<i||-1==i)&&(Pe(t,n,e,s),t[18]=(4294901760&t[18])+s+2),s++}function Pe(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>10<t[18]>>16&&(3&t[2])===e&&(t[2]+=1024,o.call(s)):o.call(s)}class Ne{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function De(t,e,n){const r=zt(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],c=n[i++];r?t.setAttribute(e,a,c,s):e.setAttributeNS(s,a,c)}else{const s=o,a=n[++i];je(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function ke(t){return 3===t||4===t||6===t}function je(t){return 64===t.charCodeAt(0)}function Fe(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Ue(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Ue(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Be(t){return-1!==t}function ze(t){return 32767&t}function He(t){return t>>16}function Ve(t,e){let n=He(t),r=e;for(;n>0;)r=r[15],n--;return r}function Ge(t){return"string"==typeof t?t:null==t?"":""+t}function We(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Ge(t)}const qe=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(j))();function Xe(t){return{name:"window",target:t.ownerDocument.defaultView}}function Ze(t){return t instanceof Function?t():t}let Ke=!0;function Ye(t){const e=Ke;return Ke=t,e}let $e=0;function Je(t,e){const n=tn(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Qe(r.data,t),Qe(e,null),Qe(r.blueprint,null));const i=en(t,e),o=t.injectorIndex;if(Be(i)){const t=ze(i),n=Ve(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Qe(t,e){t.push(0,0,0,0,0,0,0,0,e)}function tn(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null==e[t.injectorIndex+8]?-1:t.injectorIndex}function en(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=e[6],r=1;for(;n&&-1===n.injectorIndex;)n=(e=e[15])?e[6]:null,r++;return n?n.injectorIndex|r<<16:-1}function nn(t,e,n){!function(t,e,n){let r="string"!=typeof n?n[G]:n.charCodeAt(0)||0;null==r&&(r=n[G]=$e++);const i=255&r,o=1<<i,s=64&i,a=32&i,c=e.data;128&i?s?a?c[t+7]|=o:c[t+6]|=o:a?c[t+5]|=o:c[t+4]|=o:s?a?c[t+3]|=o:c[t+2]|=o:a?c[t+1]|=o:c[t]|=o}(t,e,n)}function rn(t,e,n,r=p.Default,i){if(null!==t){const i=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t[G];return"number"==typeof e&&e>0?255&e:e}(n);if("function"==typeof i){ge(e,t);try{const t=i();if(null!=t||r&p.Optional)return t;throw new Error(`No provider for ${We(n)}!`)}finally{we()}}else if("number"==typeof i){if(-1===i)return new hn(t,e);let o=null,s=tn(t,e),a=-1,c=r&p.Host?e[16][6]:null;for((-1===s||r&p.SkipSelf)&&(a=-1===s?en(t,e):e[s+8],ln(r,!1)?(o=e[1],s=ze(a),e=Ve(a,e)):s=-1);-1!==s;){a=e[s+8];const t=e[1];if(un(i,s,t.data)){const t=sn(s,e,n,o,r,c);if(t!==on)return t}ln(r,e[1].data[s+8]===c)&&un(i,s,e)?(o=t,s=ze(a),e=Ve(a,e)):s=-1}}}if(r&p.Optional&&void 0===i&&(i=null),0==(r&(p.Self|p.Host))){const t=e[9],o=Q(void 0);try{return t?t.get(n,i,r&p.Optional):rt(n,i,r&p.Optional)}finally{Q(o)}}if(r&p.Optional)return i;throw new Error(`NodeInjector: NOT_FOUND [${We(n)}]`)}const on={};function sn(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],c=an(a,s,n,null==r?Dt(a)&&Ke:r!=s&&3===a.type,i&p.Host&&o===a);return null!==c?cn(e,s,c,a):on}function an(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=65535&o,c=t.directiveStart,u=o>>16,l=i?a+u:t.directiveEnd;for(let h=r?a:a+u;h<l;h++){const t=s[h];if(h<c&&n===t||h>=c&&t.type===n)return h}if(i){const t=s[c];if(t&&jt(t)&&t.type===n)return c}return null}function cn(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof Ne){const s=i;if(s.resolving)throw new Error(`Circular dep for ${We(o[n])}`);const a=Ye(s.canSeeViewProviders);let c;s.resolving=!0,s.injectImpl&&(c=Q(s.injectImpl)),ge(t,r);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{onChanges:r,onInit:i,doCheck:o}=e;r&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)),i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{s.injectImpl&&Q(c),Ye(a),s.resolving=!1,we()}}return i}function un(t,e,n){const r=64&t,i=32&t;let o;return o=128&t?r?i?n[e+7]:n[e+6]:i?n[e+5]:n[e+4]:r?i?n[e+3]:n[e+2]:i?n[e+1]:n[e],!!(o&1<<t)}function ln(t,e){return!(t&p.Self||t&p.Host&&e)}class hn{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return rn(this._tNode,this._lView,t,void 0,e)}}function dn(t){return c(()=>{const e=Object.getPrototypeOf(t.prototype).constructor,n=e[V]||function t(e){const n=e;if(L(e))return()=>{const e=t(I(n));return e?e():null};let r=Rt(n);if(null===r){const t=w(n);r=t&&t.factory}return r||null}(e);return null!==n?n:t=>new t})}function fn(t){return t.ngDebugContext}function pn(t){return t.ngOriginalError}function mn(t,...e){t.error(...e)}class gn{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||mn}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?fn(t)?fn(t):this._findContext(pn(t)):null}_findOriginalError(t){let e=pn(t);for(;e&&pn(e);)e=pn(e);return e}}class yn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity}`+" (see http://g.co/ng/security#xss)"}}class vn extends yn{getTypeName(){return"HTML"}}class bn extends yn{getTypeName(){return"Style"}}class _n extends yn{getTypeName(){return"Script"}}class wn extends yn{getTypeName(){return"URL"}}class xn extends yn{getTypeName(){return"ResourceURL"}}function Sn(t){return t instanceof yn?t.changingThisBreaksApplicationSecurity:t}function En(t,e){const n=Tn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see http://g.co/ng/security#xss)`)}return n===e}function Tn(t){return t instanceof yn&&t.getTypeName()||null}function Mn(t){return new vn(t)}function An(t){return new bn(t)}function Cn(t){return new _n(t)}function On(t){return new wn(t)}function Rn(t){return new xn(t)}let In=!0,Ln=!1;function Pn(){return Ln=!0,In}function Nn(){if(Ln)throw new Error("Cannot enable prod mode after platform setup.");In=!1}class Dn{constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert");let e=this.inertDocument.body;if(null==e){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t),e=this.inertDocument.createElement("body"),t.appendChild(e)}e.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!e.querySelector||e.querySelector("svg")?(e.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=e.querySelector&&e.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(t){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}getInertBodyElement_XHR(t){t="<body><remove></remove>"+t+"</body>";try{t=encodeURI(t)}catch(r){return null}const e=new XMLHttpRequest;e.responseType="document",e.open("GET","data:text/html;charset=utf-8,"+t,!1),e.send(void 0);const n=e.response.body;return n.removeChild(n.firstChild),n}getInertBodyElement_DOMParser(t){t="<body><remove></remove>"+t+"</body>";try{const e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(e){return null}}getInertBodyElement_InertDocument(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=t,e;const n=this.inertDocument.createElement("body");return n.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const kn=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,jn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Fn(t){return(t=String(t)).match(kn)||t.match(jn)?t:(Pn()&&console.warn(`WARNING: sanitizing unsafe URL value ${t} (see http://g.co/ng/security#xss)`),"unsafe:"+t)}function Un(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Bn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const zn=Un("area,br,col,hr,img,wbr"),Hn=Un("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Vn=Un("rp,rt"),Gn=Bn(Vn,Hn),Wn=Bn(zn,Bn(Hn,Un("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Bn(Vn,Un("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Gn),qn=Un("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Xn=Un("srcset"),Zn=Bn(qn,Xn,Un("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Un("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Kn=Un("script,style,template");class Yn{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Wn.hasOwnProperty(e))return this.sanitizedSomething=!0,!Kn.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!Zn.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;qn[o]&&(s=Fn(s)),Xn[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Fn(t.trim())).join(", ")),this.buf.push(" ",e,'="',Qn(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Wn.hasOwnProperty(e)&&!zn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(Qn(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const $n=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Jn=/([^\#-~ |!])/g;function Qn(t){return t.replace(/&/g,"&amp;").replace($n,(function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"})).replace(Jn,(function(t){return"&#"+t.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let tr;function er(t,e){let n=null;try{tr=tr||new Dn(t);let r=e?String(e):"";n=tr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=tr.getInertBodyElement(r)}while(r!==o);const s=new Yn,a=s.sanitizeChildren(nr(n)||n);return Pn()&&s.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),a}finally{if(n){const t=nr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function nr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}const rr=function(){var t={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return t[t.NONE]="NONE",t[t.HTML]="HTML",t[t.STYLE]="STYLE",t[t.SCRIPT]="SCRIPT",t[t.URL]="URL",t[t.RESOURCE_URL]="RESOURCE_URL",t}(),ir=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|Z|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:attr|calc|var))\\([-0-9.%, #a-zA-Z]+\\))$","g"),or=/^url\(([^)]+)\)$/;function sr(t){if(!(t=String(t).trim()))return"";const e=t.match(or);return e&&Fn(e[1])===e[1]||t.match(ir)&&function(t){let e=!0,n=!0;for(let r=0;r<t.length;r++){const i=t.charAt(r);"'"===i&&n?e=!e:'"'===i&&e&&(n=!n)}return e&&n}(t)?t:(Pn()&&console.warn(`WARNING: sanitizing unsafe style value ${t} (see http://g.co/ng/security#xss).`),"unsafe")}function ar(t){const e=lr();return e?e.sanitize(rr.STYLE,t)||"":En(t,"Style")?Sn(t):sr(Ge(t))}function cr(t){const e=lr();return e?e.sanitize(rr.URL,t)||"":En(t,"URL")?Sn(t):Fn(Ge(t))}const ur=function(t,e,n){if(void 0===e&&void 0===n)return ar(t);let r=!0;return 1&(n=n||3)&&(r=function(t){return"background-image"===t||"backgroundImage"===t||"background"===t||"border-image"===t||"borderImage"===t||"border-image-source"===t||"borderImageSource"===t||"filter"===t||"list-style"===t||"listStyle"===t||"list-style-image"===t||"listStyleImage"===t||"clip-path"===t||"clipPath"===t}(t)),2&n?r?ar(e):Sn(e):r};function lr(){const t=ne();return t&&t[12]}function hr(t,e){t.__ngContext__=e}function dr(t){throw new Error(`Multiple components match node with tagname ${t.tagName}`)}function fr(){throw new Error("Cannot mix multi providers and regular providers")}function pr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}function mr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==pr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function gr(t,e,n){return e===(0!==t.type||n?t.tagName:"ng-template")}function yr(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(ke(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!s)if(4&r){if(r=2|1&r,""!==c&&!gr(t,c,n)||""===c&&1===e.length){if(vr(r))return!1;s=!0}}else{const u=8&r?c:e[++a];if(8&r&&null!==t.attrs){if(!mr(t.attrs,u,n)){if(vr(r))return!1;s=!0}continue}const l=br(8&r?"class":c,i,0==t.type&&"ng-template"!==t.tagName,n);if(-1===l){if(vr(r))return!1;s=!0;continue}if(""!==u){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==pr(e,u,0)||2&r&&u!==t){if(vr(r))return!1;s=!0}}}}else{if(!s&&!vr(r)&&!vr(c))return!1;if(s&&vr(c))continue;s=!1,r=c|1&r}}return vr(r)||s}function vr(t){return 0==(1&t)}function br(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){if(t[n]===e)return n;n++}return-1}(e,t)}function _r(t,e,n=!1){for(let r=0;r<e.length;r++)if(yr(t,e[r],n))return!0;return!1}function wr(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function xr(t,e){return t?":not("+e.trim()+")":e}function Sr(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||vr(s)||(e+=xr(o,i),i=""),r=s,o=o||!vr(r);n++}return""!==i&&(e+=xr(o,i)),e}const Er={};function Tr(t){const e=t[3];return Pt(e)?e[3]:e}function Mr(t){Ar(re(),ne(),Se()+t,ue())}function Ar(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&Oe(e,r,n)}else{const r=t.preOrderHooks;null!==r&&Re(e,r,0,n)}Ee(n)}function Cr(t,e){return t<<17|e<<2}function Or(t){return t>>17&32767}function Rr(t){return 2|t}function Ir(t){return(131068&t)>>2}function Lr(t,e){return-131069&t|e<<2}function Pr(t){return 1|t}function Nr(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];me(i),n.contentQueries(2,e[o],o)}}}function Dr(t,e,n){return zt(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function kr(t,e,n,r,i,o,s,a,c,u){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Qt(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=c||t&&t[12]||null,l[9]=u||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function jr(t,e,n,r,i,o){const s=n+19,a=t.data[s]||function(t,e,n,r,i,o){const s=oe(),a=ae(),c=a?s:s&&s.parent,u=t.data[n]=Xr(0,c&&c!==e?c:null,r,n,i,o);return null===t.firstChild&&(t.firstChild=u),s&&(!a||null!=s.child||null===u.parent&&2!==s.type?a||(s.next=u):s.child=u),u}(t,e,s,r,i,o);return se(a,!0),a}function Fr(t,e,n){ye(e,e[6]);try{const r=t.viewQuery;null!==r&&gi(1,r,n);const i=t.template;null!==i&&zr(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Nr(t,e),t.staticViewQueries&&gi(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)hi(t,e[n])}(e,o)}finally{e[2]&=-5,xe()}}function Ur(t,e,n,r){const i=e[2];if(256==(256&i))return;ye(e,e[6]);const o=ue();try{Qt(e),te.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&zr(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&Oe(e,n,null)}else{const n=t.preOrderHooks;null!==n&&Re(e,n,0,null),Ie(e,0)}if(function(t){let e=t[13];for(;null!==e;){let n;if(Pt(e)&&(n=e[2])>>1==-1){for(let t=9;t<e.length;t++){const n=e[t],r=n[1];$t(n)&&Ur(r,n,r.template,n[8])}0!=(1&n)&&ui(e,t[16])}e=e[4]}}(e),null!==t.contentQueries&&Nr(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&Oe(e,n)}else{const n=t.contentHooks;null!==n&&Re(e,n,1),Ie(e,1)}!function(t,e){try{const n=t.expandoInstructions;if(null!==n){let r=t.expandoStartIndex,i=-1,o=-1;for(let t=0;t<n.length;t++){const s=n[t];"number"==typeof s?s<=0?(o=0-s,Ee(o),r+=9+n[++t],i=r):r+=s:(null!==s&&(fe(r,i),s(2,e[i])),i++)}}}finally{Ee(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)li(t,e[n])}(e,a);const c=t.viewQuery;if(null!==c&&gi(2,c,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&Oe(e,n)}else{const n=t.viewHooks;null!==n&&Re(e,n,2),Ie(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73)}finally{xe()}}function Br(t,e,n,r){const i=e[10],o=!ue(),s=Yt(e);try{o&&!s&&i.begin&&i.begin(),s&&Fr(t,e,r),Ur(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function zr(t,e,n,r,i){const o=Se();try{Ee(-1),2&r&&e.length>19&&Ar(t,e,0,ue()),n(r,i)}finally{Ee(o)}}function Hr(t,e,n){if(Nt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function Vr(t,e,n){ee()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Je(n,e),hr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=jt(r);o&&oi(e,n,r);const c=cn(e,t,a,n);hr(c,e),null!==s&&si(0,a-i,c,r,0,s),o&&(Zt(n.index,e)[8]=c)}}(t,e,n,Wt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=t.expandoInstructions,s=t.firstCreatePass,a=n.index-19;try{Ee(a);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];null!==r.hostBindings||0!==r.hostVars||null!==r.hostAttrs?Qr(r,i):s&&o.push(null)}}finally{Ee(-1)}}(t,e,n))}function Gr(t,e,n=Wt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function Wr(t){return t.tView||(t.tView=qr(1,-1,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts))}function qr(t,e,n,r,i,o,s,a,c,u){const l=19+r,h=l+i,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Er);return n}(l,h);return d[1]={type:t,id:e,blueprint:d,template:n,queries:null,viewQuery:a,node:null,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:u}}function Xr(t,e,n,r,i,o){return{type:n,index:r,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,residualStyles:void 0,classes:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Zr(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Kr(t,e,n,r,i,o,s,a){const c=Wt(e,n);let u,l=e.inputs;!a&&null!=l&&(u=l[r])?(xi(t,n,u,r,i),Dt(e)&&function(t,e){const n=Zt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3===e.type&&(r=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=s?s(i,e.tagName||"",r):i,zt(o)?o.setProperty(c,r,i):je(r)||(c.setProperty?c.setProperty(r,i):c[r]=i))}function Yr(t,e,n,r){let i=!1;if(ee()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];_r(n,s.selectors,!1)&&(i||(i=[]),nn(Je(n,e),t,s.type),jt(s)?(2&n.flags&&dr(n),ei(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){let r=0;i=!0,ri(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}ti(t,n,o.length);let a=!1,c=!1;for(let i=0;i<o.length;i++){const u=o[i];n.mergedAttrs=Fe(n.mergedAttrs,u.hostAttrs),ii(t,e,u),ni(t.data.length-1,u,s),null!==u.contentQueries&&(n.flags|=8),null===u.hostBindings&&null===u.hostAttrs&&0===u.hostVars||(n.flags|=128),!a&&(u.onChanges||u.onInit||u.doCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index-19),a=!0),c||!u.onChanges&&!u.doCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index-19),c=!0),$r(t,u),r+=u.hostVars}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let c=e.directiveStart;c<n;c++){const t=r[c],e=t.inputs;o.push(null!==i?ai(e,i):null),s=Zr(e,c,s),a=Zr(t.outputs,c,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n),Jr(t,e,r)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new Error(`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Fe(n.mergedAttrs,n.attrs),i}function $r(t,e){const n=t.expandoInstructions;n.push(e.hostBindings),0!==e.hostVars&&n.push(e.hostVars)}function Jr(t,e,n){for(let r=0;r<n;r++)e.push(Er),t.blueprint.push(Er),t.data.push(null)}function Qr(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function ti(t,e,n){const r=19-e.index,i=t.data.length-(65535&e.providerIndexes);(t.expandoInstructions||(t.expandoInstructions=[])).push(r,i,n)}function ei(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function ni(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;jt(e)&&(n[""]=t)}}function ri(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function ii(t,e,n){t.data.push(n);const r=n.factory||(n.factory=Rt(n.type)),i=new Ne(r,jt(n),null);t.blueprint.push(i),e.push(i)}function oi(t,e,n){const r=Wt(e,t),i=Wr(n),o=t[10],s=di(t,kr(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n)));t[e.index]=s}function si(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function ai(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function ci(t,e,n,r){return new Array(t,!0,-2,e,null,null,r,n,null)}function ui(t,e){const n=t[5];for(let r=0;r<n.length;r++){const t=n[r],i=t[3][3][16];if(i!==e&&0==(16&i[2])){const e=t[1];Ur(e,t,e.template,t[8])}}}function li(t,e){const n=Zt(e,t);if($t(n)&&80&n[2]){const t=n[1];Ur(t,n,t.template,n[8])}}function hi(t,e){const n=Zt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Fr(r,n,n[8])}function di(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function fi(t){for(;t;){t[2]|=64;const e=Tr(t);if(Ft(t)&&!e)return t;t=e}return null}function pi(t,e,n){const r=e[10];r.begin&&r.begin();try{Ur(t,e,t.template,n)}catch(i){throw wi(e,i),i}finally{r.end&&r.end()}}function mi(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Kt(n),i=r[1];Br(i,r,i.template,n)}}(t[8])}function gi(t,e,n){me(0),e(t,n)}const yi=(()=>Promise.resolve(null))();function vi(t){return t[7]||(t[7]=[])}function bi(t){return t.cleanup||(t.cleanup=[])}function _i(t,e){return function(t){for(;Array.isArray(t);){if("object"==typeof t[1])return t;t=t[0]}return null}(e[t.index])[11]}function wi(t,e){const n=t[9],r=n?n.get(gn,null):null;r&&r.handleError(e)}function xi(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],c=e[s],u=t.data[s];null!==u.setInput?u.setInput(c,i,r,a):c[a]=i}}function Si(t,e){const n=e[3];return-1===t.index?Pt(n)?n:null:n}function Ei(t,e){const n=Si(t,e);return n?ki(e[11],n[7]):null}function Ti(t,e,n,r,i){if(null!=r){let o,s=!1;Pt(r)?o=r:Lt(r)&&(s=!0,r=r[0]);const a=Vt(r);0===t&&null!==n?null==i?Ni(e,n,a):Pi(e,n,a,i||null):1===t&&null!==n?Pi(e,n,a,i||null):2===t?function(t,e,n){const r=ki(t,e);r&&function(t,e,n,r){zt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==Vt(n)&&Ti(e,t,r,o,i);for(let s=9;s<n.length;s++){const i=n[s];zi(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Mi(t,e,n,r){const i=Ei(t.node,e);i&&zi(t,e,e[11],n?1:2,i,r)}function Ai(t,e){const n=t[5],r=n.indexOf(e);n.splice(r,1)}function Ci(t,e){if(t.length<=9)return;const n=9+e,r=t[n];if(r){const i=r[17];null!==i&&i!==t&&Ai(i,r),e>0&&(t[n-1][4]=r[4]);const o=lt(t,9+e);Mi(r[1],r,!1,null);const s=o[5];null!==s&&s.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function Oi(t,e){if(!(256&e[2])){const n=e[11];zt(n)&&n.destroyNode&&zi(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Ii(t[1],t);for(;e;){let n=null;if(Lt(e))n=e[13];else{const t=e[9];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)Lt(e)&&Ii(e[1],e),e=Ri(e,t);null===e&&(e=t),Lt(e)&&Ii(e[1],e),n=e&&e[4]}e=n}}(e)}}function Ri(t,e){let n;return Lt(t)&&(n=t[6])&&2===n.type?Si(n,t):t[3]===e?null:t[3]}function Ii(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];t instanceof Ne||n[r+1].call(t)}}(t,e),function(t,e){const n=t.cleanup;if(null!==n){const t=e[7];for(let r=0;r<n.length-1;r+=2)if("string"==typeof n[r]){const i=n[r+1],o="function"==typeof i?i(e):Vt(e[i]),s=t[n[r+2]],a=n[r+3];"boolean"==typeof a?o.removeEventListener(n[r],s,a):a>=0?t[a]():t[-a].unsubscribe(),r+=2}else n[r].call(t[n[r+1]]);e[7]=null}}(t,e);const n=e[6];n&&3===n.type&&zt(e[11])&&e[11].destroy();const r=e[17];if(null!==r&&Pt(e[3])){r!==e[3]&&Ai(r,e);const n=e[5];null!==n&&n.detachView(t)}}}function Li(t,e,n){let r=e.parent;for(;null!=r&&(4===r.type||5===r.type);)r=(e=r).parent;if(null==r){const t=n[6];return 2===t.type?Ei(t,n):n[0]}if(e&&5===e.type&&4&e.flags)return Wt(e,n).parentNode;if(2&r.flags){const e=t.data,n=e[e[r.index].directiveStart].encapsulation;if(n!==gt.ShadowDom&&n!==gt.Native)return null}return Wt(r,n)}function Pi(t,e,n,r){zt(t)?t.insertBefore(e,n,r):e.insertBefore(n,r,!0)}function Ni(t,e,n){zt(t)?t.appendChild(e,n):e.appendChild(n)}function Di(t,e,n,r){null!==r?Pi(t,e,n,r):Ni(t,e,n)}function ki(t,e){return zt(t)?t.parentNode(e):e.parentNode}function ji(t,e){if(2===t.type){const n=Si(t,e);return null===n?null:Ui(n.indexOf(e,9)-9,n)}return 4===t.type||5===t.type?Wt(t,e):null}function Fi(t,e,n,r){const i=Li(t,r,e);if(null!=i){const t=e[11],o=ji(r.parent||e[6],e);if(Array.isArray(n))for(let e=0;e<n.length;e++)Di(t,i,n[e],o);else Di(t,i,n,o)}}function Ui(t,e){const n=9+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return function t(e,n){if(null!==n){const r=n.type;if(3===r)return Wt(n,e);if(0===r)return Ui(-1,e[n.index]);if(4===r||5===r){const r=n.child;if(null!==r)return t(e,r);{const t=e[n.index];return Pt(t)?Ui(-1,t):Vt(t)}}{const r=e[16],i=r[6],o=Tr(r),s=i.projection[n.projection];return null!=s?t(o,s):t(e,n.next)}}return null}(t,r)}return e[7]}function Bi(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],c=n.type;s&&0===e&&(a&&hr(Vt(a),r),n.flags|=4),64!=(64&n.flags)&&(4===c||5===c?(Bi(t,e,n.child,r,i,o,!1),Ti(e,t,i,a,o)):1===c?Hi(t,e,r,n,i,o):Ti(e,t,i,a,o)),n=s?n.projectionNext:n.next}}function zi(t,e,n,r,i,o){Bi(n,r,t.node.child,e,i,o,!1)}function Hi(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let c=0;c<a.length;c++)Ti(e,t,i,a[c],o);else Bi(t,e,a,s[3],i,o,!0)}function Vi(t,e,n){zt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Gi(t,e,n){zt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}class Wi{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._viewContainerRef=null,this._tViewNode=null}get rootNodes(){const t=this._lView;return null==t[0]?function t(e,n,r,i,o=!1){for(;null!==r;){const s=n[r.index];if(null!==s&&i.push(Vt(s)),Pt(s))for(let e=9;e<s.length;e++){const n=s[e],r=n[1].firstChild;null!==r&&t(n[1],n,r,i)}const a=r.type;if(4===a||5===a)t(e,n,r.child,i);else if(1===a){const e=n[16],o=e[6],s=Tr(e);let a=o.projection[r.projection];null!==a&&null!==s&&t(s[1],s,a,i,!0)}r=o?r.projectionNext:r.next}return i}(t[1],t,t[6].child,[]):[]}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const t=this._viewContainerRef.indexOf(this);t>-1&&this._viewContainerRef.detach(t),this._viewContainerRef=null}Oi(this._lView[1],this._lView)}onDestroy(t){var e,n,r;e=this._lView[1],r=t,vi(n=this._lView).push(r),e.firstCreatePass&&bi(e).push(n[7].length-1,null)}markForCheck(){fi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){pi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){le(!0);try{pi(t,e,n)}finally{le(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}detachFromAppRef(){var t;this._appRef=null,zi(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class qi extends Wi{constructor(t){super(t),this._view=t}detectChanges(){mi(this._view)}checkNoChanges(){!function(t){le(!0);try{mi(t)}finally{le(!1)}}(this._view)}get context(){return null}}let Xi,Zi,Ki;function Yi(t,e,n){return Xi||(Xi=class extends t{}),new Xi(Wt(e,n))}function $i(t,e,n,r){return Zi||(Zi=class extends t{constructor(t,e,n){super(),this._declarationView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=kr(this._declarationView,e,t,16,null,e.node);n[17]=this._declarationView[this._declarationTContainer.index];const r=this._declarationView[5];null!==r&&(n[5]=r.createEmbeddedView(e)),Fr(e,n,t);const i=new Wi(n);return i._tViewNode=n[6],i}}),0===n.type?new Zi(r,n,Yi(e,n,r)):null}function Ji(t,e,n,r){let i;Ki||(Ki=class extends t{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostView=n}get element(){return Yi(e,this._hostTNode,this._hostView)}get injector(){return new hn(this._hostTNode,this._hostView)}get parentInjector(){const t=en(this._hostTNode,this._hostView),e=Ve(t,this._hostView),n=function(t,e,n){if(n.parent&&-1!==n.parent.injectorIndex){const t=n.parent.injectorIndex;let e=n.parent;for(;null!=e.parent&&t==e.parent.injectorIndex;)e=e.parent;return e}let r=He(t),i=e,o=e[6];for(;r>1;)i=i[15],o=i[6],r--;return o}(t,this._hostView,this._hostTNode);return Be(t)&&null!=n?new hn(n,e):new hn(null,this._hostView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){return null!==this._lContainer[8]&&this._lContainer[8][t]||null}get length(){return this._lContainer.length-9}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(st,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),Pt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new Ki(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e);return function(t,e,n,r){const i=9+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-9?(e[4]=n[i],ut(n,9+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[5],r=e[3][3][16];16!=(16&r[2])&&e[16]!==r&&(t[2]|=1),null===n?t[5]=[e]:n.push(e)}(s,e);const a=e[5];null!==a&&a.insertView(t),e[2]|=128}(r,n,this._lContainer,i),Mi(r,n,!0,Ui(i,this._lContainer)),t.attachToViewContainerRef(this),ut(this._lContainer[8],i,t),t}move(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(t,e)}indexOf(t){const e=this._lContainer[8];return null!==e?e.indexOf(t):-1}remove(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1);(function(t,e){const n=Ci(t,e);n&&Oi(n[1],n)})(this._lContainer,e),lt(this._lContainer[8],e)}detach(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=Ci(this._lContainer,e);return n&&null!=lt(this._lContainer[8],e)?new Wi(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}allocateContainerIfNeeded(){null===this._lContainer[8]&&(this._lContainer[8]=[])}});const o=r[n.index];if(Pt(o))i=o,function(t,e){t[2]=-2}(i);else{let t;if(4===n.type)t=Vt(o);else if(t=r[11].createComment(""),Ft(r)){const e=r[11],i=Wt(n,r);Pi(e,ki(e,i),t,function(t,e){return zt(t)?t.nextSibling(e):e.nextSibling}(e,i))}else Fi(r[1],r,t,n);r[n.index]=i=ci(o,r,t,n),di(r,i)}return new Ki(i,n,r)}function Qi(t=!1){return function(t,e,n){if(!n&&Dt(t)){const n=Zt(t.index,e);return new Wi(n,n)}return 3===t.type||0===t.type||4===t.type||5===t.type?new Wi(e[16],e):null}(oe(),ne(),t)}let to=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>eo(),t})();const eo=Qi,no=new W("Set Injector scope."),ro={},io={},oo=[];let so=void 0;function ao(){return void 0===so&&(so=new ot),so}function co(t,e=null,n=null,r){return new uo(t,n,e||ao(),r)}class uo{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&ct(e,n=>this.processProvider(n,t,e)),ct([t],t=>this.processInjectorType(t,[],i)),this.records.set(q,fo(void 0,this));const o=this.records.get(no);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:A(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=X,n=p.Default){this.assertNotDestroyed();const r=J(this);try{if(!(n&p.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof W)&&b(t);e=n&&this.injectableDefInScope(n)?fo(lo(t),ro):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&p.Self?ao():this.parent).get(t,e=n&p.Optional&&e===X?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(A(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e.__source&&i.unshift(e.__source),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=A(e);if(Array.isArray(e))i=e.map(A).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):A(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Z,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{J(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(A(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=I(t)))return!1;let r=w(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=w(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{ct(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];ct(r,t=>this.processProvider(t,n,r||oo))}}this.injectorDefTypes.add(o),this.records.set(o,fo(r.factory,ro));const a=r.providers;if(null!=a&&!s){const e=t;ct(a,t=>this.processProvider(t,e,a))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=mo(t=I(t))?t:I(t&&t.provide);const i=function(t,e,n){return po(t)?fo(void 0,t.useValue):fo(ho(t,e,n),ro)}(t,e,n);if(mo(t)||!0!==t.multi){const t=this.records.get(r);t&&void 0!==t.multi&&fr()}else{let e=this.records.get(r);e?void 0===e.multi&&fr():(e=fo(void 0,ro,!0),e.factory=()=>it(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===io?function(t){throw new Error(`Cannot instantiate cyclic dependency! ${t}`)}(A(t)):e.value===ro&&(e.value=io,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function lo(t){const e=b(t),n=null!==e?e.factory:Rt(t);if(null!==n)return n;const r=w(t);if(null!==r)return r.factory;if(t instanceof W)throw new Error(`Token ${A(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=ht(e,"?");throw new Error(`Can't resolve all parameters for ${A(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[x]||t[T]||t[E]&&t[E]());if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\n`+`This will become an error in v10. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function ho(t,e,n){let r=void 0;if(mo(t)){const e=I(t);return Rt(e)||lo(e)}if(po(t))r=()=>I(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...it(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>et(I(t.useExisting));else{const i=I(t&&(t.useClass||t.provide));if(i||function(t,e,n){let r="";throw t&&e&&(r=` - only instances of Provider and Type are allowed, got: [${e.map(t=>t==n?"?"+n+"?":"...").join(", ")}]`),new Error(`Invalid provider for the NgModule '${A(t)}'`+r)}(e,n,t),!function(t){return!!t.deps}(t))return Rt(i)||lo(i);r=()=>new i(...it(t.deps))}var i;return r}function fo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function po(t){return null!==t&&"object"==typeof t&&K in t}function mo(t){return"function"==typeof t}const go=function(t,e,n){return function(t,e=null,n=null,r){const i=co(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let yo=(()=>{class t{static create(t,e){return Array.isArray(t)?go(t,e,""):go(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=X,t.NULL=new ot,t.\u0275prov=y({token:t,providedIn:"any",factory:()=>et(q)}),t.__NG_ELEMENT_ID__=-1,t})();const vo=new W("AnalyzeForEntryComponents");let bo=new Map;const _o=new Set;function wo(t){return"string"==typeof t?t:t.text()}function xo(t,e){let n=t.styles,r=t.classes,i=0;for(let o=0;o<e.length;o++){const t=e[o];"number"==typeof t?i=t:1==i?r=C(r,t):2==i&&(n=C(n,t+": "+e[++o]+";"))}null!==n&&(t.styles=n),null!==r&&(t.classes=r)}let So=null;function Eo(){if(!So){const t=j.Symbol;if(t&&t.iterator)So=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(So=n)}}}return So}function To(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}class Mo{constructor(t){this.wrapped=t}static wrap(t){return new Mo(t)}static unwrap(t){return Mo.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Mo}}function Ao(t){return!!Co(t)&&(Array.isArray(t)||!(t instanceof Map)&&Eo()in t)}function Co(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Oo(t,e,n){return t[e]=n}function Ro(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Io(t,e,n,r){const i=ne();return Ro(i,de(),e)&&(re(),function(t,e,n,r,i,o){const s=Wt(t,e),a=e[11];if(null==r)zt(a)?a.removeAttribute(s,n,o):s.removeAttribute(n);else{const e=null==i?Ge(r):i(r,t.tagName||"",n);zt(a)?a.setAttribute(s,n,e,o):o?s.setAttributeNS(o,n,e):s.setAttribute(n,e)}}(Te(),i,t,e,n,r)),Io}function Lo(t,e,n,r){return Ro(t,de(),n)?e+Ge(n)+r:Er}function Po(t,e,n,r,i,o,s,a){const c=ne(),u=re(),l=t+19,h=u.firstCreatePass?function(t,e,n,r,i,o,s,a,c){const u=e.consts,l=jr(e,n[6],t,0,s||null,Jt(u,a));Yr(e,n,l,Jt(u,c)),Ce(e,l);const h=l.tViews=qr(2,-1,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u),d=Xr(0,null,2,-1,null,null);return d.injectorIndex=l.injectorIndex,h.node=d,null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(t,u,c,e,n,r,i,o,s):u.data[l];se(h,!1);const d=c[11].createComment("");Fi(u,c,d,h),hr(d,c),di(c,c[l]=ci(d,c,d,h)),kt(h)&&Vr(u,c,h),null!=s&&Gr(c,h,a)}function No(t){return Xt(te.lFrame.contextLView,t)}function Do(t,e=p.Default){const n=ne();return null==n?et(t,e):rn(oe(),n,I(t),e)}function ko(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(ke(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(oe(),t)}function jo(){throw new Error("invalid")}function Fo(t,e,n){const r=ne();return Ro(r,de(),e)&&Kr(re(),Te(),r,t,e,r[11],n,!1),Fo}function Uo(t,e,n,r,i){const o=i?"class":"style";xi(t,n,e.inputs[o],o,r)}function Bo(t,e,n,r){const i=ne(),o=re(),s=19+t,a=i[11],c=i[s]=Dr(e,a,te.lFrame.currentNamespace),u=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,c=Jt(a,o),u=jr(e,n[6],t,3,i,c);return Yr(e,n,u,Jt(a,s)),null!==u.mergedAttrs&&xo(u,u.mergedAttrs),null!==e.queries&&e.queries.elementStart(e,u),u}(t,o,i,0,e,n,r):o.data[s];se(u,!0);const l=u.mergedAttrs;null!==l&&De(a,c,l);const h=u.classes;null!==h&&Gi(a,c,h);const d=u.styles;null!==d&&Vi(a,c,d),Fi(o,i,c,u),0===te.lFrame.elementDepthCount&&hr(c,i),te.lFrame.elementDepthCount++,kt(u)&&(Vr(o,i,u),Hr(o,u,i)),null!==r&&Gr(i,u)}function zo(){let t=oe();ae()?ce():(t=t.parent,se(t,!1));const e=t;te.lFrame.elementDepthCount--;const n=re();n.firstCreatePass&&(Ce(n,t),Nt(t)&&n.queries.elementEnd(t)),null!==e.classes&&function(t){return 0!=(16&t.flags)}(e)&&Uo(n,e,ne(),e.classes,!0),null!==e.styles&&function(t){return 0!=(32&t.flags)}(e)&&Uo(n,e,ne(),e.styles,!1)}function Ho(t,e,n,r){Bo(t,e,n,r),zo()}function Vo(t,e,n){(function(t,e,n){const r=ne(),i=re(),o=t+19,s=i.firstCreatePass?function(t,e,n,r,i){const o=e.consts,s=Jt(o,r),a=jr(e,n[6],t,4,"ng-container",s);return null!==s&&xo(a,s),Yr(e,n,a,Jt(o,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(t,i,r,e,n):i.data[o];se(s,!0);const a=r[o]=r[11].createComment("");Fi(i,r,a,s),hr(a,r),kt(s)&&(Vr(i,r,s),Hr(i,s,r)),null!=n&&Gr(r,s)})(t,e,n),function(){let t=oe();const e=re();ae()?ce():(t=t.parent,se(t,!1)),e.firstCreatePass&&(Ce(e,t),Nt(t)&&e.queries.elementEnd(t))}()}function Go(){return ne()}function Wo(t){return!!t&&"function"==typeof t.then}function qo(t){return!!t&&"function"==typeof t.subscribe}function Xo(t,e,n=!1,r){const i=ne(),o=re(),s=oe();return Ko(o,i,i[11],s,t,e,n,r),Xo}function Zo(t,e,n=!1,r){const i=oe(),o=ne(),s=_i(i,o);return Ko(re(),o,s,i,t,e,n,r),Zo}function Ko(t,e,n,r,i,o,s=!1,a){const c=kt(r),u=t.firstCreatePass&&(t.cleanup||(t.cleanup=[])),l=vi(e);let h=!0;if(3===r.type){const d=Wt(r,e),f=a?a(d):yt,p=f.target||d,m=l.length,g=a?t=>a(Vt(t[r.index])).target:r.index;if(zt(n)){let s=null;if(!a&&c&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=$o(r,e,o,!1);const t=n.listen(f.name||p,i,o);l.push(o,t),u&&u.push(i,g,m,m+1)}}else o=$o(r,e,o,!0),p.addEventListener(i,o,s),l.push(o),u&&u.push(i,g,m,s)}const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(o),s=l.length;l.push(o,t),u&&u.push(i,r.index,s,-(s+1))}}}function Yo(t,e,n){try{return!1!==e(n)}catch(r){return wi(t,r),!1}}function $o(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?Zt(t.index,e):e;0==(32&e[2])&&fi(s);let a=Yo(e,n,o),c=i.__ngNextListenerFn__;for(;c;)a=Yo(e,c,o)&&a,c=c.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Jo(t=1){return function(t){return(te.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,te.lFrame.contextLView))[8]}(t)}function Qo(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?_r(t,o,!0):wr(r,o))return i}else n=i}return n}function ts(t){const e=ne()[16][6];if(!e.projection){const n=e.projection=ht(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?Qo(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}function es(t,e=0,n){const r=ne(),i=re(),o=jr(i,r[6],t,1,null,n||null);null===o.projection&&(o.projection=e),ce(),function(t,e,n){Hi(e[11],0,e,n,Li(t,n,e),ji(n.parent||e[6],e))}(i,r,o)}function ns(t,e,n){return rs(t,"",e,"",n),ns}function rs(t,e,n,r,i){const o=ne(),s=Lo(o,e,n,r);return s!==Er&&Kr(re(),Te(),o,t,s,o[11],i,!1),rs}const is=[];function os(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?Or(o):Ir(o),c=!1;for(;0!==a&&(!1===c||s);){const n=t[a+1];ss(t[a],e)&&(c=!0,t[a+1]=r?Pr(n):Rr(n)),a=r?Or(n):Ir(n)}c&&(t[n+1]=r?Rr(o):Pr(o))}function ss(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&pt(t,e)>=0}function as(t,e,n){return us(t,e,n,!1),as}function cs(t,e){return us(t,e,null,!0),cs}function us(t,e,n,r){const i=ne(),o=re(),s=function(t){const e=te.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+2,n}();if(o.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[Se()+19],s=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(t.flags&(e?16:32))})(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=te.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=hs(n=ls(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=ls(i,t,e,n,r),null===o){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Ir(r))return t[Or(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=ls(null,t,e,n[1],r),n=hs(n,e.attrs,r),function(t,e,n,r){t[Or(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else o=function(t,e,n){let r=void 0;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=hs(r,t[o].hostAttrs,n);return hs(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Or(s),c=Ir(s);t[r]=n;let u,l=!1;if(Array.isArray(n)){const t=n;u=t[1],(null===u||pt(t,u)>0)&&(l=!0)}else u=n;if(i)if(0!==c){const e=Or(t[a+1]);t[r+1]=Cr(e,a),0!==e&&(t[e+1]=Lr(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=Cr(a,0),0!==a&&(t[a+1]=Lr(t[a+1],r)),a=r;else t[r+1]=Cr(c,0),0===a?a=r:t[c+1]=Lr(t[c+1],r),c=r;l&&(t[r+1]=Rr(t[r+1])),os(t,u,r,!0),os(t,u,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&pt(o,e)>=0&&(n[r+1]=Pr(n[r+1]))}(e,u,t,r,o),s=Cr(a,c),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}(o,t,s,r),e!==Er&&Ro(i,s,e)){let a;null==n&&(a=function(){const t=te.lFrame;return null===t?null:t.currentSanitizer}())&&(n=a),function(t,e,n,r,i,o,s,a){if(3!==e.type)return;const c=t.data,u=c[a+1];fs(1==(1&u)?ds(c,e,n,i,Ir(u),s):void 0)||(fs(o)||function(t){return 2==(2&t)}(u)&&(o=ds(c,null,n,i,a,s)),function(t,e,n,r,i){const o=zt(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{const e=-1==r.indexOf("-")?void 0:2;null==i?o?t.removeStyle(n,r,e):n.style.removeProperty(r):o?t.setStyle(n,r,i,e):n.style.setProperty(r,i)}}(r,s,Gt(Se(),n),i,o))}(o,o.data[Se()+19],i,i[11],t,i[s+1]=function(t,e){return null==t||("function"==typeof e?t=e(t):"string"==typeof e?t+=e:"object"==typeof t&&(t=A(Sn(t)))),t}(e,n),r,s)}}function ls(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=hs(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function hs(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),dt(t,s,!!n||e[++o]))}return void 0===t?null:t}function ds(t,e,n,r,i,o){const s=null===e;let a=void 0;for(;i>0;){const e=t[i],o=Array.isArray(e),c=o?e[1]:e,u=null===c;let l=n[i+1];l===Er&&(l=u?is:void 0);let h=u?ft(l,r):c===r?l:void 0;if(o&&!fs(h)&&(h=ft(e,r)),fs(h)&&(a=h,s))return a;const d=t[i+1];i=s?Or(d):Ir(d)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=ft(t,r))}return a}function fs(t){return void 0!==t}function ps(t,e=""){const n=ne(),r=re(),i=t+19,o=r.firstCreatePass?jr(r,n[6],t,3,null,null):r.data[i],s=n[i]=function(t,e){return zt(e)?e.createText(t):e.createTextNode(t)}(e,n[11]);Fi(r,n,s,o),se(o,!1)}function ms(t){return gs("",t,""),ms}function gs(t,e,n){const r=ne(),i=Lo(r,t,e,n);return i!==Er&&function(t,e,n){const r=Gt(e,t),i=t[11];zt(i)?i.setValue(r,n):r.textContent=n}(r,Se(),i),gs}function ys(t,e,n){const r=ne();return Ro(r,de(),e)&&Kr(re(),Te(),r,t,e,r[11],n,!0),ys}function vs(t,e,n){const r=ne();if(Ro(r,de(),e)){const i=re(),o=Te();Kr(i,o,r,t,e,_i(o,r),n,!0)}return vs}function bs(t,e){const n=Kt(t)[1],r=n.data.length-1;Ce(n,{directiveStart:r,directiveEnd:r+1})}function _s(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i=void 0;if(jt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=ws(t.inputs),e.declaredInputs=ws(t.declaredInputs),e.outputs=ws(t.outputs);const n=i.hostBindings;n&&Es(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&xs(t,o),s&&Ss(t,s),g(t.inputs,i.inputs),g(t.declaredInputs,i.declaredInputs),g(t.outputs,i.outputs),jt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}e.afterContentChecked=e.afterContentChecked||i.afterContentChecked,e.afterContentInit=t.afterContentInit||i.afterContentInit,e.afterViewChecked=t.afterViewChecked||i.afterViewChecked,e.afterViewInit=t.afterViewInit||i.afterViewInit,e.doCheck=t.doCheck||i.doCheck,e.onDestroy=t.onDestroy||i.onDestroy,e.onInit=t.onInit||i.onInit}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===_s&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Fe(i.hostAttrs,n=Fe(n,i.hostAttrs))}}(r)}function ws(t){return t===yt?{}:t===vt?[]:t}function xs(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function Ss(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function Es(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}class Ts{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function Ms(t){t.type.prototype.ngOnChanges&&(t.setInput=As,t.onChanges=function(){const t=Cs(this),e=t&&t.current;if(e){const n=t.previous;if(n===yt)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}})}function As(t,e,n,r){const i=Cs(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:yt,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],c=s[a];o[a]=new Ts(c&&c.currentValue,e,s===yt),t[r]=e}function Cs(t){return t.__ngSimpleChanges__||null}function Os(t,e,n,r,i){if(t=I(t),Array.isArray(t))for(let o=0;o<t.length;o++)Os(t[o],e,n,r,i);else{const o=re(),s=ne();let a=mo(t)?t:I(t.provide),c=ho(t);const u=oe(),l=65535&u.providerIndexes,h=u.directiveStart,d=u.providerIndexes>>16;if(mo(t)||!t.multi){const r=new Ne(c,i,Do),f=Ls(a,e,i?l:l+d,h);-1===f?(nn(Je(u,s),o,a),Rs(o,t,e.length),e.push(a),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=65536),n.push(r),s.push(r)):(n[f]=r,s[f]=r)}else{const f=Ls(a,e,l+d,h),p=Ls(a,e,l,l+d),m=f>=0&&n[f],g=p>=0&&n[p];if(i&&!g||!i&&!m){nn(Je(u,s),o,a);const l=function(t,e,n,r,i){const o=new Ne(t,n,Do);return o.multi=[],o.index=e,o.componentProviders=0,Is(o,i,r&&!n),o}(i?Ns:Ps,n.length,i,r,c);!i&&g&&(n[p].providerFactory=l),Rs(o,t,e.length),e.push(a),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=65536),n.push(l),s.push(l)}else Rs(o,t,f>-1?f:p),Is(n[i?p:f],c,!i&&r);!i&&r&&g&&n[p].componentProviders++}}}function Rs(t,e,n){if(mo(e)||e.useClass){const r=(e.useClass||e).prototype.ngOnDestroy;r&&(t.destroyHooks||(t.destroyHooks=[])).push(n,r)}}function Is(t,e,n){t.multi.push(e),n&&t.componentProviders++}function Ls(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Ps(t,e,n,r){return Ds(this.multi,[])}function Ns(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=cn(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),Ds(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],Ds(i,o);return o}function Ds(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function ks(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=re();if(r.firstCreatePass){const i=jt(t);Os(n,r.data,r.blueprint,i,!0),Os(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}Ms.ngInherit=!0;class js{}class Fs{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${A(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Us=(()=>{class t{}return t.NULL=new Fs,t})(),Bs=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=()=>zs(t),t})();const zs=function(t){return Yi(t,oe(),ne())};class Hs{}const Vs=function(){var t={Important:1,DashCase:2};return t[t.Important]="Important",t[t.DashCase]="DashCase",t}();let Gs=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ws(),t})();const Ws=function(){const t=ne(),e=Zt(oe().index,t);return function(t){const e=t[11];if(zt(e))return e;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(Lt(e)?e:t)};let qs=(()=>{class t{}return t.\u0275prov=y({token:t,providedIn:"root",factory:()=>null}),t})();class Xs{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Zs=new Xs("9.0.7");class Ks{constructor(){}supports(t){return Ao(t)}create(t){return new $s(t)}}const Ys=(t,e)=>e;class $s{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Ys}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<ea(n,r,i)?e:n,s=ea(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Ao(t))throw new Error(`Error trying to diff '${A(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&To(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),To(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Eo()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&To(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),To(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t,e;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(To(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(To(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new Js(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new ta),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e?t:(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t,t)}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ta),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Js{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Qs{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&To(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class ta{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Qs,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ea(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class na{constructor(){}supports(t){return t instanceof Map||Co(t)}create(){return new ra}}class ra{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Co(t)))throw new Error(`Error trying to diff '${A(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new ia(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){To(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class ia{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let oa=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new f,new h]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=y({token:t,providedIn:"root",factory:()=>new t([new Ks])}),t})(),sa=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new f,new h]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=y({token:t,providedIn:"root",factory:()=>new t([new na])}),t})();const aa=[new na],ca=new oa([new Ks]),ua=new sa(aa);let la=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>ha(t,Bs),t})();const ha=function(t,e){return $i(t,e,oe(),ne())};let da=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>fa(t,Bs),t})();const fa=function(t,e){return Ji(t,e,oe(),ne())},pa={};class ma extends Us{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Ot(t);return new va(e,this.ngModule)}}function ga(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const ya=new W("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>qe});class va extends js{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Sr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return ga(this.componentDef.inputs)}get outputs(){return ga(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,pa,i);return o!==pa||r===pa?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Hs,Ht),s=i.get(qs,null),a=o.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",u=n?function(t,e,n){if(zt(t))return t.selectRootElement(e,n===gt.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Dr(c,o.createRenderer(null,this.componentDef),function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(c)),l=this.componentDef.onPush?576:528,h="string"==typeof n&&/^#root-ng-internal-isolated-\d+/.test(n),d={components:[],scheduler:qe,clean:yi,playerHandler:null,flags:0},f=qr(0,-1,null,1,0,null,null,null,null,null),p=kr(null,f,d,l,null,null,o,a,s,i);let m,g;ye(p,null);try{const t=function(t,e,n,r,i,o){const s=n[1];n[19]=t;const a=jr(s,null,0,3,null,null),c=a.mergedAttrs=e.hostAttrs;null!==c&&(xo(a,c),null!==t&&(De(i,t,c),null!==a.classes&&Gi(i,t,a.classes),null!==a.styles&&Vi(i,t,a.styles)));const u=r.createRenderer(t,e),l=kr(n,Wr(e),null,e.onPush?64:16,n[19],a,r,u,void 0);return s.firstCreatePass&&(nn(Je(a,n),s,e.type),ei(s,a),ri(a,n.length,1)),di(n,l),n[19]=l}(u,this.componentDef,p,o,a);if(u)if(n)De(a,u,["ng-version",Zs.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!vr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&De(a,u,t),e&&e.length>0&&Gi(a,u,e.join(" "))}g=qt(p[1],0),e&&(g.projection=e.map(t=>Array.from(t))),m=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=oe();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),ti(t,r,1),ii(t,e,n));const i=cn(e,t,e.length-1,r);hr(i,e);const o=Wt(r,e);return o&&hr(o,e),i}(o,n,e);r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries&&e.contentQueries(1,s,n.length-1);const a=oe();if(o.firstCreatePass&&(null!==e.hostBindings||null!==e.hostAttrs)){Ee(a.index-19);const t=n[1];$r(t,e),Jr(t,n,e.hostVars),Qr(e,s)}return s}(t,this.componentDef,p,d,[bs]),Fr(f,p,null)}finally{xe()}const y=new ba(this.componentType,m,Yi(Bs,g,p),p,g);return n&&!h||(y.hostView._tViewNode.child=g),y}}class ba extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.destroyCbs=[],this.instance=e,this.hostView=this.changeDetectorRef=new qi(r),this.hostView._tViewNode=function(t,e,n,r){let i=t.node;return null==i&&(t.node=i=Xr(0,null,2,-1,null,null)),r[6]=i}(r[1],0,0,r),this.componentType=t}get injector(){return new hn(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(t=>t()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(t){this.destroyCbs&&this.destroyCbs.push(t)}}const _a=void 0;var wa=["en",[["a","p"],["AM","PM"],_a],[["AM","PM"],_a,_a],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],_a,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],_a,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",_a,"{1} 'at' {0}",_a],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let xa={};function Sa(t,e,n){"string"!=typeof e&&(n=e,e=t[Ca.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),xa[e]=t,n&&(xa[e][Ca.ExtraData]=n)}function Ea(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Aa(e);if(n)return n;const r=e.split("-")[0];if(n=Aa(r),n)return n;if("en"===r)return wa;throw new Error(`Missing locale data for the locale "${t}".`)}function Ta(t){return Ea(t)[Ca.CurrencyCode]||null}function Ma(t){return Ea(t)[Ca.PluralCase]}function Aa(t){return t in xa||(xa[t]=j.ng&&j.ng.common&&j.ng.common.locales&&j.ng.common.locales[t]),xa[t]}const Ca=function(){var t={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencyCode:15,CurrencySymbol:16,CurrencyName:17,Currencies:18,PluralCase:19,ExtraData:20};return t[t.LocaleId]="LocaleId",t[t.DayPeriodsFormat]="DayPeriodsFormat",t[t.DayPeriodsStandalone]="DayPeriodsStandalone",t[t.DaysFormat]="DaysFormat",t[t.DaysStandalone]="DaysStandalone",t[t.MonthsFormat]="MonthsFormat",t[t.MonthsStandalone]="MonthsStandalone",t[t.Eras]="Eras",t[t.FirstDayOfWeek]="FirstDayOfWeek",t[t.WeekendRange]="WeekendRange",t[t.DateFormat]="DateFormat",t[t.TimeFormat]="TimeFormat",t[t.DateTimeFormat]="DateTimeFormat",t[t.NumberSymbols]="NumberSymbols",t[t.NumberFormats]="NumberFormats",t[t.CurrencyCode]="CurrencyCode",t[t.CurrencySymbol]="CurrencySymbol",t[t.CurrencyName]="CurrencyName",t[t.Currencies]="Currencies",t[t.PluralCase]="PluralCase",t[t.ExtraData]="ExtraData",t}();let Oa="en-US";function Ra(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+` [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Oa=t.toLowerCase().replace(/_/g,"-"))}const Ia=new Map;class La extends st{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new ma(this);const n=It(t),r=t[H]||null;r&&Ra(r),this._bootstrapComponents=Ze(n.bootstrap),this._r3Injector=co(t,e,[{provide:st,useValue:this},{provide:Us,useValue:this.componentFactoryResolver}],A(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=yo.THROW_IF_NOT_FOUND,n=p.Default){return t===yo||t===st||t===q?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Pa extends at{constructor(t){super(),this.moduleType=t,null!==It(t)&&function t(e){if(null!==e.\u0275mod.id){const t=e.\u0275mod.id;(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${A(e)} vs ${A(e.name)}`)})(t,Ia.get(t),e),Ia.set(t,e)}let n=e.\u0275mod.imports;n instanceof Function&&(n=n()),n&&n.forEach(e=>t(e))}(t)}create(t){return new La(this.moduleType,t)}}function Na(t,e,n,r,i){return function(t,e,n,r,i,o,s){const a=e+n;return function(t,e,n,r){const i=Ro(t,e,n);return Ro(t,e+1,r)||i}(t,a,i,o)?Oo(t,a+2,s?r.call(s,i,o):r(i,o)):Da(t,a+2)}(ne(),he(),t,e,n,r,i)}function Da(t,e){const n=t[e];return n===Er?void 0:n}function ka(t,e){const n=re();let r;const i=t+19;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new Error(`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=Rt(r.type)),s=Q(Do),a=o();return Q(s),function(t,e,n,r){const i=n+19;i>=t.data.length&&(t.data[i]=null,t.blueprint[i]=null),e[i]=r}(n,ne(),t,a),a}function ja(t,e,n){const r=ne(),i=Xt(r,t);return function(t,e){return Mo.isWrapped(e)&&(e=Mo.unwrap(e),t[te.lFrame.bindingIndex]=Er),e}(r,function(t,e){return t[1].data[e+19].pure}(r,t)?function(t,e,n,r,i,o){const s=e+n;return Ro(t,s,i)?Oo(t,s+1,o?r.call(o,i):r(i)):Da(t,s+1)}(r,he(),e,i.transform,n,i):i.transform(n))}class Fa extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}}function Ua(){return this._results[Eo()]()}class Ba{constructor(){this.dirty=!0,this._results=[],this.changes=new Fa,this.length=0;const t=Eo(),e=Ba.prototype;e[t]||(e[t]=Ua)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=function t(e,n){void 0===n&&(n=e);for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?(n===e&&(n=e.slice(0,r)),t(i,n)):n!==e&&n.push(i)}return n}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class za{constructor(t){this.queryList=t,this.matches=null}clone(){return new za(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ha{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Ha(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==rc(t,e).matches&&this.queries[e].setDirty()}}class Va{constructor(t,e,n,r=null){this.predicate=t,this.descendants=e,this.isStatic=n,this.read=r}}class Ga{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Ga(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Wa{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Wa(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&!1===this.metadata.descendants){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&4===n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){if(Array.isArray(this.metadata.predicate)){const n=this.metadata.predicate;for(let r=0;r<n.length;r++)this.matchTNodeWithReadOption(t,e,qa(e,n[r]))}else{const n=this.metadata.predicate;n===la?0===e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,an(e,t,n,!1,!1))}}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Bs||r===da||r===la&&0===e.type)this.addMatch(e.index,-2);else{const n=an(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function qa(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Xa(t,e,n,r){return-1===n?function(t,e){return 3===t.type||4===t.type?Yi(Bs,t,e):0===t.type?$i(la,Bs,t,e):null}(e,t):-2===n?function(t,e,n){return n===Bs?Yi(Bs,e,t):n===la?$i(la,Bs,e,t):n===da?Ji(da,Bs,e,t):void 0}(t,e,r):cn(t,t[1],n,e)}function Za(t,e,n,r){const i=e[5].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:Xa(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function Ka(t){const e=ne(),n=re(),r=pe();me(r+1);const i=rc(n,r);if(t.dirty&&Yt(e)===i.metadata.isStatic){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?function t(e,n,r,i){const o=e.queries.getByIndex(r),s=o.matches;if(null!==s){const a=Za(e,n,o,r);for(let e=0;e<s.length;e+=2){const r=s[e];if(r>0)i.push(a[e/2]);else{const o=s[e+1],a=n[-r];for(let e=9;e<a.length;e++){const n=a[e];n[17]===n[3]&&t(n[1],n,o,i)}if(null!==a[5]){const e=a[5];for(let n=0;n<e.length;n++){const r=e[n];t(r[1],r,o,i)}}}}}return i}(n,e,r,[]):Za(n,e,i,r);t.reset(o),t.notifyOnChanges()}return!0}return!1}function Ya(t,e,n){Ja(re(),ne(),t,e,n,!0)}function $a(t,e,n){Ja(re(),ne(),t,e,n,!1)}function Ja(t,e,n,r,i,o){t.firstCreatePass&&(nc(t,new Va(n,r,o,i),-1),o&&(t.staticViewQueries=!0)),ec(t,e)}function Qa(t,e,n,r){!function(t,e,n,r,i,o,s,a){t.firstCreatePass&&(nc(t,new Va(n,r,!1,i),s.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(t.contentQueries.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(t,a)),ec(t,e)}(re(),ne(),e,n,r,0,oe(),t)}function tc(){return t=ne(),e=pe(),t[5].queries[e].queryList;var t,e}function ec(t,e){const n=new Ba;!function(t,e,n,r){const i=vi(e);i.push(n),t.firstCreatePass&&bi(t).push(r,i.length-1)}(t,e,n,n.destroy),null===e[5]&&(e[5]=new Ha),e[5].queries.push(new za(n))}function nc(t,e,n){null===t.queries&&(t.queries=new Ga),t.queries.track(new Wa(e,n))}function rc(t,e){return t.queries.getByIndex(e)}function ic(t,e){return $i(la,Bs,t,e)}function oc(t=p.Default){const e=Qi(!0);if(null!=e||t&p.Optional)return e;throw new Error("No provider for ChangeDetectorRef!")}const sc=new W("Application Initializer");let ac=(()=>{class t{constructor(t){this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Wo(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(et(sc,8))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();const cc=new W("AppId"),uc={provide:cc,useFactory:function(){return`${lc()}${lc()}${lc()}`},deps:[]};function lc(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const hc=new W("Platform Initializer"),dc=new W("Platform ID"),fc=new W("appBootstrapListener");let pc=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();const mc=new W("LocaleId"),gc=new W("DefaultCurrencyCode");class yc{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const vc=function(t){return new Pa(t)},bc=vc,_c=function(t){return Promise.resolve(vc(t))},wc=function(t){const e=vc(t),n=Ze(It(t).declarations).reduce((t,e)=>{const n=Ot(e);return n&&t.push(new va(n)),t},[]);return new yc(e,n)},xc=wc,Sc=function(t){return Promise.resolve(wc(t))};let Ec=(()=>{class t{constructor(){this.compileModuleSync=bc,this.compileModuleAsync=_c,this.compileModuleAndAllComponentsSync=xc,this.compileModuleAndAllComponentsAsync=Sc}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();const Tc=new W("compilerOptions"),Mc=(()=>Promise.resolve(0))();function Ac(t){"undefined"==typeof Zone?Mc.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Cc{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Fa(!1),this.onMicrotaskEmpty=new Fa(!1),this.onStable=new Fa(!1),this.onError=new Fa(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=e,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){let t=j.requestAnimationFrame,e=j.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=!!t.shouldCoalesceEventChangeDetection&&t.nativeRequestAnimationFrame&&(()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(j,()=>{t.lastRequestAnimationFrameId=-1,Lc(t),Ic(t)}),Lc(t))}(t)});t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:e},onInvokeTask:(n,r,i,o,s,a)=>{try{return Pc(t),n.invokeTask(i,o,s,a)}finally{e&&"eventTask"===o.type&&e(),Nc(t)}},onInvoke:(e,n,r,i,o,s,a)=>{try{return Pc(t),e.invoke(r,i,o,s,a)}finally{Nc(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Lc(t),Ic(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(this)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Cc.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Cc.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Rc,Oc,Oc);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}function Oc(){}const Rc={};function Ic(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Lc(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function Pc(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Nc(t){t._nesting--,Ic(t)}class Dc{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Fa,this.onMicrotaskEmpty=new Fa,this.onStable=new Fa,this.onError=new Fa}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let kc=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Cc.assertNotInAngularZone(),Ac(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ac(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(et(Cc))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})(),jc=(()=>{class t{constructor(){this._applications=new Map,zc.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return zc.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();class Fc{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Uc(t){zc=t}let Bc,zc=new Fc,Hc=function(t,e,n){const r=new Pa(n);if(0===bo.size)return Promise.resolve(r);const i=function(t){const e=[];return t.forEach(t=>t&&e.push(...t)),e}(t.get(Tc,[]).concat(e).map(t=>t.providers));if(0===i.length)return Promise.resolve(r);const o=function(){const t=j.ng;if(!t||!t.\u0275compilerFacade)throw new Error("Angular JIT compilation failed: '@angular/compiler' not loaded!\n  - JIT compilation is discouraged for production use-cases! Consider AOT mode instead.\n  - Did you bootstrap using '@angular/platform-browser-dynamic' or '@angular/platform-server'?\n  - Alternatively provide the compiler with 'import \"@angular/compiler\";' before bootstrapping.");return t.\u0275compilerFacade}(),s=yo.create({providers:i}).get(o.ResourceLoader);return function(t){const e=[],n=new Map;function r(t){let e=n.get(t);if(!e){const r=(t=>Promise.resolve(s.get(t)))(t);n.set(t,e=r.then(wo))}return e}return bo.forEach((t,n)=>{const i=[];t.templateUrl&&i.push(r(t.templateUrl).then(e=>{t.template=e}));const o=t.styleUrls,s=t.styles||(t.styles=[]),a=t.styles.length;o&&o.forEach((e,n)=>{s.push(""),i.push(r(e).then(r=>{s[a+n]=r,o.splice(o.indexOf(e),1),0==o.length&&(t.styleUrls=void 0)}))});const c=Promise.all(i).then(()=>function(t){_o.delete(t)}(n));e.push(c)}),bo=new Map,Promise.all(e).then(()=>{})}().then(()=>r)};const Vc=new W("AllowMultipleToken");class Gc{constructor(t,e){this.name=t,this.token=e}}function Wc(t,e,n=[]){const r=`Platform: ${e}`,i=new W(r);return(e=[])=>{let o=qc();if(!o||o.injector.get(Vc,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:no,useValue:"platform"});!function(t){if(Bc&&!Bc.destroyed&&!Bc.injector.get(Vc,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Bc=t.get(Xc);const e=t.get(hc,null);e&&e.forEach(t=>t())}(yo.create({providers:t,name:r}))}return function(t){const e=qc();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function qc(){return Bc&&!Bc.destroyed?Bc:null}let Xc=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Dc:("zone.js"===t?void 0:t)||new Cc({enableLongStackTrace:Pn(),shouldCoalesceEventChangeDetection:e}),n}(e?e.ngZone:void 0,e&&e.ngZoneEventCoalescing||!1),r=[{provide:Cc,useValue:n}];return n.run(()=>{const e=yo.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(gn,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return i.onDestroy(()=>Yc(this._modules,i)),n.runOutsideAngular(()=>n.onError.subscribe({next:t=>{o.handleError(t)}})),function(t,e,n){try{const r=n();return Wo(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(ac);return t.runInitializers(),t.donePromise.then(()=>(Ra(i.injector.get(mc,"en-US")||"en-US"),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Zc({},e);return Hc(this.injector,n,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Kc);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${A(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. `+"Please define one of these.");t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(et(yo))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();function Zc(t,e){return Array.isArray(e)?e.reduce(Zc,t):Object.assign(Object.assign({},t),e)}let Kc=(()=>{class t{constructor(t,e,n,r,i,c){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=c,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=Pn(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const u=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),l=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Cc.assertNotInAngularZone(),Ac(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Cc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(u,l.pipe(Object(a.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof js?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(st),i=n.create(yo.NULL,[],e||n.selector,r);i.onDestroy(()=>{this._unloadComponent(i)});const o=i.injector.get(kc,null);return o&&i.injector.get(jc).registerApplication(i.location.nativeElement,o),this._loadComponent(i),Pn()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges();if(this._enforceNoNewChanges)for(let t of this._views)t.checkNoChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Yc(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(fc,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),Yc(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(et(Cc),et(pc),et(yo),et(gn),et(Us),et(ac))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();function Yc(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class $c{}class Jc{}const Qc={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let tu=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Qc}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>eu(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>eu(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(et(Ec),et(Jc,8))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();function eu(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const nu=function(t){return null},ru=Wc(null,"core",[{provide:dc,useValue:"unknown"},{provide:Xc,deps:[yo]},{provide:jc,deps:[]},{provide:pc,deps:[]}]),iu=[{provide:Kc,useClass:Kc,deps:[Cc,pc,yo,gn,Us,ac]},{provide:ya,deps:[Cc],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:ac,useClass:ac,deps:[[new h,sc]]},{provide:Ec,useClass:Ec,deps:[]},uc,{provide:oa,useFactory:function(){return ca},deps:[]},{provide:sa,useFactory:function(){return ua},deps:[]},{provide:mc,useFactory:function(t){return Ra(t=t||"undefined"!=typeof $localize&&$localize.locale||"en-US"),t},deps:[[new l(mc),new h,new f]]},{provide:gc,useValue:"USD"}];let ou=(()=>{class t{constructor(t){}}return t.\u0275mod=Et({type:t}),t.\u0275inj=v({factory:function(e){return new(e||t)(et(Kc))},providers:iu}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule((function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()}))),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},l7GE:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");class i extends r.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}},lJxs:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mCNh:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var r=n("SpAZ");function i(...t){return o(t)}function o(t){return 0===t.length?r.a:1===t.length?t[0]:function(e){return t.reduce((t,e)=>e(t),e)}}},mrSG:function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"d",(function(){return a})),n.d(e,"h",(function(){return c})),n.d(e,"e",(function(){return u})),n.d(e,"f",(function(){return l})),n.d(e,"g",(function(){return h}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function c(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function u(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(u(arguments[e]));return t}function h(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",(function(){return r}))},ngJS:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return a}));var r=n("7o/Q"),i=n("WMd4");function o(t,e=0){return function(n){return n.lift(new s(t,e))}}class s{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new a(t,this.scheduler,this.delay))}}class a extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(a.dispatch,this.delay,new c(t,this.destination)))}_next(t){this.scheduleMessage(i.a.createNext(t))}_error(t){this.scheduleMessage(i.a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(i.a.createComplete()),this.unsubscribe()}}class c{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return d})),n.d(e,"d",(function(){return f}));var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},c=s.INFO,u=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=u[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=c,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function d(t){o.forEach((function(e){e.setLogLevel(t)}))}function f(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return y})),n.d(e,"c",(function(){return g})),n.d(e,"d",(function(){return _})),n.d(e,"e",(function(){return w})),n.d(e,"f",(function(){return i})),n.d(e,"g",(function(){return o})),n.d(e,"h",(function(){return a})),n.d(e,"i",(function(){return l})),n.d(e,"j",(function(){return h})),n.d(e,"k",(function(){return f})),n.d(e,"l",(function(){return p})),n.d(e,"m",(function(){return c})),n.d(e,"n",(function(){return u})),n.d(e,"o",(function(){return d})),n.d(e,"p",(function(){return m}));var r=n("mrSG");function i(t){return o(void 0,t)}function o(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=o(t[n],e[n]));return t}var s=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function a(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function c(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(a())}function u(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function l(){return"object"==typeof self&&self.self===self}function h(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function d(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function f(){return a().indexOf("Electron/")>=0}function p(){var t=a();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function m(){return a().indexOf("MSAppHost/")>=0}var g=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,y.prototype.create),o}return Object(r.c)(e,t),e}(Error),y=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?v(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",c=new g(i,a,r);return c},t}();function v(t,e){return t.replace(b,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var b=/\{\$([^}]+)}/g;function _(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function w(t,e){var n=new x(t,e);return n.subscribe.bind(n)}var x=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=S),void 0===r.error&&(r.error=S),void 0===r.complete&&(r.complete=S);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function S(){}},qgXg:function(t,e,n){"use strict";var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}n.d(e,"a",(function(){return a}));const a=new s(i)},quSY:function(t,e,n){"use strict";var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();n.d(e,"a",(function(){return a}));let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_unsubscribe:a,_subscriptions:u}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(a))try{a.call(this)}catch(l){e=l instanceof s?c(l.errors):[l]}if(Object(r.a)(u)){let t=-1,n=u.length;for(;++t<n;){const n=u[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(l){e=e||[],l instanceof s?e=e.concat(c(l.errors)):e.push(l)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function c(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},rjcF:function(t,e){t.exports=function(t){function e(e,n){var r,i,o,s,a;this.object=e,this.domElement=void 0!==n?n:document,this.enabled=!0,this.target=new t.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:t.MOUSE.LEFT,ZOOM:t.MOUSE.MIDDLE,PAN:t.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return m.phi},this.getAzimuthalAngle=function(){return m.theta},this.reset=function(){c.target.copy(c.target0),c.object.position.copy(c.position0),c.object.zoom=c.zoom0,c.object.updateProjectionMatrix(),c.dispatchEvent(u),c.update(),f=d.NONE},this.update=(r=new t.Vector3,i=(new t.Quaternion).setFromUnitVectors(e.up,new t.Vector3(0,1,0)),o=i.clone().inverse(),s=new t.Vector3,a=new t.Quaternion,function(){var t=c.object.position;return r.copy(t).sub(c.target),r.applyQuaternion(i),m.setFromVector3(r),c.autoRotate&&f===d.NONE&&R(2*Math.PI/60/60*c.autoRotateSpeed),m.theta+=g.theta,m.phi+=g.phi,m.theta=Math.max(c.minAzimuthAngle,Math.min(c.maxAzimuthAngle,m.theta)),m.phi=Math.max(c.minPolarAngle,Math.min(c.maxPolarAngle,m.phi)),m.makeSafe(),m.radius*=y,m.radius=Math.max(c.minDistance,Math.min(c.maxDistance,m.radius)),c.target.add(v),r.setFromSpherical(m),r.applyQuaternion(o),t.copy(c.target).add(r),c.object.lookAt(c.target),!0===c.enableDamping?(g.theta*=1-c.dampingFactor,g.phi*=1-c.dampingFactor):g.set(0,0,0),y=1,v.set(0,0,0),!!(b||s.distanceToSquared(c.object.position)>p||8*(1-a.dot(c.object.quaternion))>p)&&(c.dispatchEvent(u),s.copy(c.object.position),a.copy(c.object.quaternion),b=!1,!0)}),this.dispose=function(){c.domElement.removeEventListener("contextmenu",q,!1),c.domElement.removeEventListener("mousedown",F,!1),c.domElement.removeEventListener("wheel",z,!1),c.domElement.removeEventListener("touchstart",V,!1),c.domElement.removeEventListener("touchend",W,!1),c.domElement.removeEventListener("touchmove",G,!1),document.removeEventListener("mousemove",U,!1),document.removeEventListener("mouseup",B,!1),window.removeEventListener("keydown",H,!1)};var c=this,u={type:"change"},l={type:"start"},h={type:"end"},d={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},f=d.NONE,p=1e-6,m=new t.Spherical,g=new t.Spherical,y=1,v=new t.Vector3,b=!1,_=new t.Vector2,w=new t.Vector2,x=new t.Vector2,S=new t.Vector2,E=new t.Vector2,T=new t.Vector2,M=new t.Vector2,A=new t.Vector2,C=new t.Vector2;function O(){return Math.pow(.95,c.zoomSpeed)}function R(t){g.theta-=t}function I(t){g.phi-=t}var L,P=(L=new t.Vector3,function(t,e){L.setFromMatrixColumn(e,0),L.multiplyScalar(-t),v.add(L)}),N=function(){var e=new t.Vector3;return function(t,n){e.setFromMatrixColumn(n,1),e.multiplyScalar(t),v.add(e)}}(),D=function(){var e=new t.Vector3;return function(n,r){var i=c.domElement===document?c.domElement.body:c.domElement;if(c.object instanceof t.PerspectiveCamera){e.copy(c.object.position).sub(c.target);var o=e.length();o*=Math.tan(c.object.fov/2*Math.PI/180),P(2*n*o/i.clientHeight,c.object.matrix),N(2*r*o/i.clientHeight,c.object.matrix)}else c.object instanceof t.OrthographicCamera?(P(n*(c.object.right-c.object.left)/c.object.zoom/i.clientWidth,c.object.matrix),N(r*(c.object.top-c.object.bottom)/c.object.zoom/i.clientHeight,c.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),c.enablePan=!1)}}();function k(e){c.object instanceof t.PerspectiveCamera?y/=e:c.object instanceof t.OrthographicCamera?(c.object.zoom=Math.max(c.minZoom,Math.min(c.maxZoom,c.object.zoom*e)),c.object.updateProjectionMatrix(),b=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),c.enableZoom=!1)}function j(e){c.object instanceof t.PerspectiveCamera?y*=e:c.object instanceof t.OrthographicCamera?(c.object.zoom=Math.max(c.minZoom,Math.min(c.maxZoom,c.object.zoom/e)),c.object.updateProjectionMatrix(),b=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),c.enableZoom=!1)}function F(t){if(!1!==c.enabled){if(t.preventDefault(),t.button===c.mouseButtons.ORBIT){if(!1===c.enableRotate)return;!function(t){_.set(t.clientX,t.clientY)}(t),f=d.ROTATE}else if(t.button===c.mouseButtons.ZOOM){if(!1===c.enableZoom)return;!function(t){M.set(t.clientX,t.clientY)}(t),f=d.DOLLY}else if(t.button===c.mouseButtons.PAN){if(!1===c.enablePan)return;!function(t){S.set(t.clientX,t.clientY)}(t),f=d.PAN}f!==d.NONE&&(document.addEventListener("mousemove",U,!1),document.addEventListener("mouseup",B,!1),c.dispatchEvent(l))}}function U(t){if(!1!==c.enabled)if(t.preventDefault(),f===d.ROTATE){if(!1===c.enableRotate)return;!function(t){w.set(t.clientX,t.clientY),x.subVectors(w,_);var e=c.domElement===document?c.domElement.body:c.domElement;R(2*Math.PI*x.x/e.clientWidth*c.rotateSpeed),I(2*Math.PI*x.y/e.clientHeight*c.rotateSpeed),_.copy(w),c.update()}(t)}else if(f===d.DOLLY){if(!1===c.enableZoom)return;!function(t){A.set(t.clientX,t.clientY),C.subVectors(A,M),C.y>0?k(O()):C.y<0&&j(O()),M.copy(A),c.update()}(t)}else if(f===d.PAN){if(!1===c.enablePan)return;!function(t){E.set(t.clientX,t.clientY),T.subVectors(E,S),D(T.x,T.y),S.copy(E),c.update()}(t)}}function B(t){!1!==c.enabled&&(document.removeEventListener("mousemove",U,!1),document.removeEventListener("mouseup",B,!1),c.dispatchEvent(h),f=d.NONE)}function z(t){!1===c.enabled||!1===c.enableZoom||f!==d.NONE&&f!==d.ROTATE||(t.preventDefault(),t.stopPropagation(),function(t){t.deltaY<0?j(O()):t.deltaY>0&&k(O()),c.update()}(t),c.dispatchEvent(l),c.dispatchEvent(h))}function H(t){!1!==c.enabled&&!1!==c.enableKeys&&!1!==c.enablePan&&function(t){switch(t.keyCode){case c.keys.UP:D(0,c.keyPanSpeed),c.update();break;case c.keys.BOTTOM:D(0,-c.keyPanSpeed),c.update();break;case c.keys.LEFT:D(c.keyPanSpeed,0),c.update();break;case c.keys.RIGHT:D(-c.keyPanSpeed,0),c.update()}}(t)}function V(t){if(!1!==c.enabled){switch(t.touches.length){case 1:if(!1===c.enableRotate)return;!function(t){_.set(t.touches[0].pageX,t.touches[0].pageY)}(t),f=d.TOUCH_ROTATE;break;case 2:if(!1===c.enableZoom)return;!function(t){var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,r=Math.sqrt(e*e+n*n);M.set(0,r)}(t),f=d.TOUCH_DOLLY;break;case 3:if(!1===c.enablePan)return;!function(t){S.set(t.touches[0].pageX,t.touches[0].pageY)}(t),f=d.TOUCH_PAN;break;default:f=d.NONE}f!==d.NONE&&c.dispatchEvent(l)}}function G(t){if(!1!==c.enabled)switch(t.preventDefault(),t.stopPropagation(),t.touches.length){case 1:if(!1===c.enableRotate)return;if(f!==d.TOUCH_ROTATE)return;!function(t){w.set(t.touches[0].pageX,t.touches[0].pageY),x.subVectors(w,_);var e=c.domElement===document?c.domElement.body:c.domElement;R(2*Math.PI*x.x/e.clientWidth*c.rotateSpeed),I(2*Math.PI*x.y/e.clientHeight*c.rotateSpeed),_.copy(w),c.update()}(t);break;case 2:if(!1===c.enableZoom)return;if(f!==d.TOUCH_DOLLY)return;!function(t){var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,r=Math.sqrt(e*e+n*n);A.set(0,r),C.subVectors(A,M),C.y>0?j(O()):C.y<0&&k(O()),M.copy(A),c.update()}(t);break;case 3:if(!1===c.enablePan)return;if(f!==d.TOUCH_PAN)return;!function(t){E.set(t.touches[0].pageX,t.touches[0].pageY),T.subVectors(E,S),D(T.x,T.y),S.copy(E),c.update()}(t);break;default:f=d.NONE}}function W(t){!1!==c.enabled&&(c.dispatchEvent(h),f=d.NONE)}function q(t){t.preventDefault()}c.domElement.addEventListener("contextmenu",q,!1),c.domElement.addEventListener("mousedown",F,!1),c.domElement.addEventListener("wheel",z,!1),c.domElement.addEventListener("touchstart",V,!1),c.domElement.addEventListener("touchend",W,!1),c.domElement.addEventListener("touchmove",G,!1),window.addEventListener("keydown",H,!1),this.update()}return(e.prototype=Object.create(t.EventDispatcher.prototype)).constructor=e,Object.defineProperties(e.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(t){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!t}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(t){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!t}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(t){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!t}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(t){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!t}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(t){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!t}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(t){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=t}}}),e}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return M})),n.d(e,"b",(function(){return b})),n.d(e,"c",(function(){return v})),n.d(e,"d",(function(){return f})),n.d(e,"e",(function(){return y})),n.d(e,"f",(function(){return E})),n.d(e,"g",(function(){return w})),n.d(e,"h",(function(){return p})),n.d(e,"i",(function(){return g})),n.d(e,"j",(function(){return x}));var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),c=n("fXoL"),u=n("Jgta");function l(){}class h{constructor(t,e=r.a){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule((function(e){r.runGuarded(()=>{t.apply(this,[e])})}),e,n)}}class d{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class f{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.a))}}function p(t){return function(e){return(e=e.lift(new d(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const m=["ngOnDestroy"],g=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(m.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),y=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new c.q("angularfire2.app.options"),b=new c.q("angularfire2.app.nameOrConfig"),_=new c.O("6.1.4");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=u.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>u.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&S("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const x=()=>{S("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},S=(t,...e)=>{Object(c.W)()&&"undefined"!=typeof console&&console[t](...e)};function E(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&S("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(c){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const T={provide:class{},useFactory:w,deps:[v,c.z,[new c.A,b]]};let M=(()=>{class t{constructor(t){u.a.registerVersion("angularfire",_.full,t.toString()),u.a.registerVersion("angular",c.N.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275mod=c.Mb({type:t}),t.\u0275inj=c.Lb({factory:function(e){return new(e||t)(c.Wb(c.B))},providers:[T]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";var r=n("HDdC"),i=n("7Hc7"),o=n("Y7HM");class s extends r.a{constructor(t,e=0,n=i.a){super(),this.source=t,this.delayTime=e,this.scheduler=n,(!Object(o.a)(e)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=i.a)}static create(t,e=0,n=i.a){return new s(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(s.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function a(t,e=0){return function(n){return n.lift(new c(t,e))}}n.d(e,"a",(function(){return a}));class c{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new s(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";var r=n("7o/Q");function i(){}var o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}n.d(e,"a",(function(){return s}));class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new c(t,this.nextOrObserver,this.error,this.complete))}}class c extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},w1tV:function(t,e,n){"use strict";var r=n("XNiG"),i=n("HDdC"),o=n("7o/Q"),s=n("quSY");function a(){return function(t){return t.lift(new c(t))}}class c{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new u(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class u extends o.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class l extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new s.a,t.add(this.source.subscribe(new d(this.getSubject(),this))),t.closed&&(this._connection=null,t=s.a.EMPTY)),t}refCount(){return a()(this)}}const h=(()=>{const t=l.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class d extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function f(){return new r.a}function p(){return t=>{return a()((e=f,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,h);return r.source=t,r.subjectFactory=n,r})(t));var e}}n.d(e,"a",(function(){return p}))},yCtX:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",(function(){return r}))},z6cu:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("HDdC");function i(t,e){return new r.a(e?n=>e.schedule(o,0,{error:t,subscriber:n}):e=>e.error(t))}function o({error:t,subscriber:e}){e.error(t)}},zIRd:function(t,e,n){"use strict";var r,i,o=n("mrSG"),s=n("qOnz"),a=n("/6Yf"),c=n("q/0M"),u=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",u),h=((i={})["@firebase/app"]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),d=new c.b("@firebase/app"),f=function(){function t(t,e,n){var r,i,c=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.f)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",(function(){return c}),"PUBLIC"));try{for(var u=Object(o.h)(this.firebase_.INTERNAL.components.values()),l=u.next();!l.done;l=u.next())this._addComponent(l.value)}catch(h){r={error:h}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){d.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();f.prototype.name&&f.prototype.options||f.prototype.delete||console.log("dc");var p=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name="[DEFAULT]");var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.d)(e,a))throw l.create("duplicate-app",{appName:a});var c=new t(n,o,r);return e[a]=c,c},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=h[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&c.push("and"),s&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void d.warn(c.join(" "))}u(new a.a(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:c.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument",{appName:name});Object(c.d)(t,e)},apps:null,SDK_VERSION:"8.2.5",INTERNAL:{registerComponent:u,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||"[DEFAULT]",!Object(s.d)(e,t))throw l.create("no-app",{appName:t});return e[t]}function u(a){var c,u,h=a.name;if(n.has(h))return d.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===a.type?r[h]:null;if(n.set(h,a),"PUBLIC"===a.type){var f=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[h])throw l.create("invalid-app-argument",{appName:h});return t[h]()};void 0!==a.serviceProps&&Object(s.g)(f,a.serviceProps),r[h]=f,t.prototype[h]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,h);return n.apply(this,a.multipleInstances?t:[])}}try{for(var p=Object(o.h)(Object.keys(e)),m=p.next();!m.done;m=p.next())e[m.value]._addComponent(a)}catch(g){c={error:g}}finally{try{m&&!m.done&&(u=p.return)&&u.call(p)}finally{if(c)throw c.error}}return"PUBLIC"===a.type?r[h]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(f);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.g)(e,t)},createSubscribe:s.e,ErrorFactory:s.b,deepExtend:s.g}),e}(),m=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if(Object(s.i)()&&void 0!==self.firebase){d.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var g=self.firebase.SDK_VERSION;g&&g.indexOf("LITE")>=0&&d.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var y=p.initializeApp;p.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.n)()&&d.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),y.apply(void 0,t)};var v=p;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",(function(t){return new m(t)}),"PRIVATE")),t.registerVersion("@firebase/app","0.6.14",void 0),t.registerVersion("fire-js","")}(v),e.a=v},zUnb:function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"ACESFilmicToneMapping",(function(){return gl})),n.d(r,"AddEquation",(function(){return Uu})),n.d(r,"AddOperation",(function(){return hl})),n.d(r,"AdditiveAnimationBlendMode",(function(){return sd})),n.d(r,"AdditiveBlending",(function(){return Du})),n.d(r,"AlphaFormat",(function(){return Yl})),n.d(r,"AlwaysDepth",(function(){return nl})),n.d(r,"AlwaysStencilFunc",(function(){return jd})),n.d(r,"AmbientLight",(function(){return Ww})),n.d(r,"AmbientLightProbe",(function(){return fx})),n.d(r,"AnimationClip",(function(){return J_})),n.d(r,"AnimationLoader",(function(){return sw})),n.d(r,"AnimationMixer",(function(){return Gx})),n.d(r,"AnimationObjectGroup",(function(){return Hx})),n.d(r,"AnimationUtils",(function(){return U_})),n.d(r,"ArcCurve",(function(){return pw})),n.d(r,"ArrayCamera",(function(){return Vy})),n.d(r,"ArrowHelper",(function(){return PS})),n.d(r,"Audio",(function(){return Ex})),n.d(r,"AudioAnalyser",(function(){return Rx})),n.d(r,"AudioContext",(function(){return lx})),n.d(r,"AudioListener",(function(){return Sx})),n.d(r,"AudioLoader",(function(){return hx})),n.d(r,"AxesHelper",(function(){return NS})),n.d(r,"AxisHelper",(function(){return LE})),n.d(r,"BackSide",(function(){return Ou})),n.d(r,"BasicDepthPacking",(function(){return vd})),n.d(r,"BasicShadowMap",(function(){return Eu})),n.d(r,"BinaryTextureLoader",(function(){return jE})),n.d(r,"Bone",(function(){return Av})),n.d(r,"BooleanKeyframeTrack",(function(){return W_})),n.d(r,"BoundingBoxHelper",(function(){return PE})),n.d(r,"Box2",(function(){return tS})),n.d(r,"Box3",(function(){return pf})),n.d(r,"Box3Helper",(function(){return CS})),n.d(r,"BoxBufferGeometry",(function(){return Cm})),n.d(r,"BoxGeometry",(function(){return ub})),n.d(r,"BoxHelper",(function(){return AS})),n.d(r,"BufferAttribute",(function(){return Up})),n.d(r,"BufferGeometry",(function(){return am})),n.d(r,"BufferGeometryLoader",(function(){return Qw})),n.d(r,"ByteType",(function(){return Ul})),n.d(r,"Cache",(function(){return tw})),n.d(r,"Camera",(function(){return Pm})),n.d(r,"CameraHelper",(function(){return ES})),n.d(r,"CanvasRenderer",(function(){return BE})),n.d(r,"CanvasTexture",(function(){return nb})),n.d(r,"CatmullRomCurve3",(function(){return _w})),n.d(r,"CineonToneMapping",(function(){return ml})),n.d(r,"CircleBufferGeometry",(function(){return lb})),n.d(r,"CircleGeometry",(function(){return hb})),n.d(r,"ClampToEdgeWrapping",(function(){return Ml})),n.d(r,"Clock",(function(){return yx})),n.d(r,"ClosedSplineCurve3",(function(){return OE})),n.d(r,"Color",(function(){return Lp})),n.d(r,"ColorKeyframeTrack",(function(){return q_})),n.d(r,"CompressedTexture",(function(){return eb})),n.d(r,"CompressedTextureLoader",(function(){return aw})),n.d(r,"ConeBufferGeometry",(function(){return mb})),n.d(r,"ConeGeometry",(function(){return pb})),n.d(r,"CubeCamera",(function(){return Dm})),n.d(r,"CubeGeometry",(function(){return ub})),n.d(r,"CubeReflectionMapping",(function(){return bl})),n.d(r,"CubeRefractionMapping",(function(){return _l})),n.d(r,"CubeTexture",(function(){return km})),n.d(r,"CubeTextureLoader",(function(){return uw})),n.d(r,"CubeUVReflectionMapping",(function(){return Sl})),n.d(r,"CubeUVRefractionMapping",(function(){return El})),n.d(r,"CubicBezierCurve",(function(){return Ew})),n.d(r,"CubicBezierCurve3",(function(){return Tw})),n.d(r,"CubicInterpolant",(function(){return z_})),n.d(r,"CullFaceBack",(function(){return wu})),n.d(r,"CullFaceFront",(function(){return xu})),n.d(r,"CullFaceFrontBack",(function(){return Su})),n.d(r,"CullFaceNone",(function(){return _u})),n.d(r,"Curve",(function(){return dw})),n.d(r,"CurvePath",(function(){return Lw})),n.d(r,"CustomBlending",(function(){return Fu})),n.d(r,"CustomToneMapping",(function(){return yl})),n.d(r,"CylinderBufferGeometry",(function(){return db})),n.d(r,"CylinderGeometry",(function(){return fb})),n.d(r,"Cylindrical",(function(){return Jx})),n.d(r,"DataTexture",(function(){return Fm})),n.d(r,"DataTexture2DArray",(function(){return cg})),n.d(r,"DataTexture3D",(function(){return ug})),n.d(r,"DataTextureLoader",(function(){return lw})),n.d(r,"DataUtils",(function(){return jS})),n.d(r,"DecrementStencilOp",(function(){return Md})),n.d(r,"DecrementWrapStencilOp",(function(){return Cd})),n.d(r,"DefaultLoadingManager",(function(){return nw})),n.d(r,"DepthFormat",(function(){return nh})),n.d(r,"DepthStencilFormat",(function(){return rh})),n.d(r,"DepthTexture",(function(){return rb})),n.d(r,"DirectionalLight",(function(){return Gw})),n.d(r,"DirectionalLightHelper",(function(){return wS})),n.d(r,"DiscreteInterpolant",(function(){return V_})),n.d(r,"DodecahedronBufferGeometry",(function(){return yb})),n.d(r,"DodecahedronGeometry",(function(){return vb})),n.d(r,"DoubleSide",(function(){return Ru})),n.d(r,"DstAlphaFactor",(function(){return Yu})),n.d(r,"DstColorFactor",(function(){return Ju})),n.d(r,"DynamicBufferAttribute",(function(){return bE})),n.d(r,"DynamicCopyUsage",(function(){return Wd})),n.d(r,"DynamicDrawUsage",(function(){return Ud})),n.d(r,"DynamicReadUsage",(function(){return Hd})),n.d(r,"EdgesGeometry",(function(){return Sb})),n.d(r,"EdgesHelper",(function(){return NE})),n.d(r,"EllipseCurve",(function(){return fw})),n.d(r,"EqualDepth",(function(){return ol})),n.d(r,"EqualStencilFunc",(function(){return Ld})),n.d(r,"EquirectangularReflectionMapping",(function(){return wl})),n.d(r,"EquirectangularRefractionMapping",(function(){return xl})),n.d(r,"Euler",(function(){return Xf})),n.d(r,"EventDispatcher",(function(){return Kd})),n.d(r,"ExtrudeBufferGeometry",(function(){return $b})),n.d(r,"ExtrudeGeometry",(function(){return Qb})),n.d(r,"Face3",(function(){return Pp})),n.d(r,"Face4",(function(){return iE})),n.d(r,"FaceColors",(function(){return cE})),n.d(r,"FileLoader",(function(){return ow})),n.d(r,"FlatShading",(function(){return Iu})),n.d(r,"Float16BufferAttribute",(function(){return Xp})),n.d(r,"Float32Attribute",(function(){return AE})),n.d(r,"Float32BufferAttribute",(function(){return Zp})),n.d(r,"Float64Attribute",(function(){return CE})),n.d(r,"Float64BufferAttribute",(function(){return Kp})),n.d(r,"FloatType",(function(){return Gl})),n.d(r,"Fog",(function(){return $y})),n.d(r,"FogExp2",(function(){return Yy})),n.d(r,"Font",(function(){return sx})),n.d(r,"FontLoader",(function(){return cx})),n.d(r,"FrontSide",(function(){return Cu})),n.d(r,"Frustum",(function(){return zm})),n.d(r,"GLBufferAttribute",(function(){return Xx})),n.d(r,"GLSL1",(function(){return Xd})),n.d(r,"GLSL3",(function(){return Zd})),n.d(r,"GammaEncoding",(function(){return dd})),n.d(r,"Geometry",(function(){return cb})),n.d(r,"GeometryUtils",(function(){return UE})),n.d(r,"GreaterDepth",(function(){return al})),n.d(r,"GreaterEqualDepth",(function(){return sl})),n.d(r,"GreaterEqualStencilFunc",(function(){return kd})),n.d(r,"GreaterStencilFunc",(function(){return Nd})),n.d(r,"GridHelper",(function(){return gS})),n.d(r,"Group",(function(){return Gy})),n.d(r,"HalfFloatType",(function(){return Wl})),n.d(r,"HemisphereLight",(function(){return kw})),n.d(r,"HemisphereLightHelper",(function(){return mS})),n.d(r,"HemisphereLightProbe",(function(){return dx})),n.d(r,"IcosahedronBufferGeometry",(function(){return t_})),n.d(r,"IcosahedronGeometry",(function(){return e_})),n.d(r,"ImageBitmapLoader",(function(){return ix})),n.d(r,"ImageLoader",(function(){return cw})),n.d(r,"ImageUtils",(function(){return nf})),n.d(r,"ImmediateRenderObject",(function(){return iS})),n.d(r,"IncrementStencilOp",(function(){return Td})),n.d(r,"IncrementWrapStencilOp",(function(){return Ad})),n.d(r,"InstancedBufferAttribute",(function(){return Jw})),n.d(r,"InstancedBufferGeometry",(function(){return $w})),n.d(r,"InstancedInterleavedBuffer",(function(){return qx})),n.d(r,"InstancedMesh",(function(){return Dv})),n.d(r,"Int16Attribute",(function(){return SE})),n.d(r,"Int16BufferAttribute",(function(){return Vp})),n.d(r,"Int32Attribute",(function(){return TE})),n.d(r,"Int32BufferAttribute",(function(){return Wp})),n.d(r,"Int8Attribute",(function(){return _E})),n.d(r,"Int8BufferAttribute",(function(){return Bp})),n.d(r,"IntType",(function(){return Hl})),n.d(r,"InterleavedBuffer",(function(){return Qy})),n.d(r,"InterleavedBufferAttribute",(function(){return ev})),n.d(r,"Interpolant",(function(){return B_})),n.d(r,"InterpolateDiscrete",(function(){return Qh})),n.d(r,"InterpolateLinear",(function(){return td})),n.d(r,"InterpolateSmooth",(function(){return ed})),n.d(r,"InvertStencilOp",(function(){return Od})),n.d(r,"JSONLoader",(function(){return zE})),n.d(r,"KeepStencilOp",(function(){return Sd})),n.d(r,"KeyframeTrack",(function(){return G_})),n.d(r,"LOD",(function(){return _v})),n.d(r,"LatheBufferGeometry",(function(){return n_})),n.d(r,"LatheGeometry",(function(){return r_})),n.d(r,"Layers",(function(){return Yf})),n.d(r,"LensFlare",(function(){return VE})),n.d(r,"LessDepth",(function(){return rl})),n.d(r,"LessEqualDepth",(function(){return il})),n.d(r,"LessEqualStencilFunc",(function(){return Pd})),n.d(r,"LessStencilFunc",(function(){return Id})),n.d(r,"Light",(function(){return Dw})),n.d(r,"LightProbe",(function(){return Zw})),n.d(r,"Line",(function(){return Hv})),n.d(r,"Line3",(function(){return rS})),n.d(r,"LineBasicMaterial",(function(){return kv})),n.d(r,"LineCurve",(function(){return Mw})),n.d(r,"LineCurve3",(function(){return Aw})),n.d(r,"LineDashedMaterial",(function(){return j_})),n.d(r,"LineLoop",(function(){return qv})),n.d(r,"LinePieces",(function(){return sE})),n.d(r,"LineSegments",(function(){return Wv})),n.d(r,"LineStrip",(function(){return oE})),n.d(r,"LinearEncoding",(function(){return ld})),n.d(r,"LinearFilter",(function(){return Pl})),n.d(r,"LinearInterpolant",(function(){return H_})),n.d(r,"LinearMipMapLinearFilter",(function(){return jl})),n.d(r,"LinearMipMapNearestFilter",(function(){return Dl})),n.d(r,"LinearMipmapLinearFilter",(function(){return kl})),n.d(r,"LinearMipmapNearestFilter",(function(){return Nl})),n.d(r,"LinearToneMapping",(function(){return fl})),n.d(r,"Loader",(function(){return rw})),n.d(r,"LoaderUtils",(function(){return Yw})),n.d(r,"LoadingManager",(function(){return ew})),n.d(r,"LogLuvEncoding",(function(){return pd})),n.d(r,"LoopOnce",(function(){return Yh})),n.d(r,"LoopPingPong",(function(){return Jh})),n.d(r,"LoopRepeat",(function(){return $h})),n.d(r,"LuminanceAlphaFormat",(function(){return th})),n.d(r,"LuminanceFormat",(function(){return Ql})),n.d(r,"MOUSE",(function(){return vu})),n.d(r,"Material",(function(){return Dp})),n.d(r,"MaterialLoader",(function(){return Kw})),n.d(r,"Math",(function(){return Jd})),n.d(r,"MathUtils",(function(){return Jd})),n.d(r,"Matrix3",(function(){return tf})),n.d(r,"Matrix4",(function(){return Uf})),n.d(r,"MaxEquation",(function(){return Vu})),n.d(r,"Mesh",(function(){return Tm})),n.d(r,"MeshBasicMaterial",(function(){return kp})),n.d(r,"MeshDepthMaterial",(function(){return jy})),n.d(r,"MeshDistanceMaterial",(function(){return Fy})),n.d(r,"MeshFaceMaterial",(function(){return lE})),n.d(r,"MeshLambertMaterial",(function(){return D_})),n.d(r,"MeshMatcapMaterial",(function(){return k_})),n.d(r,"MeshNormalMaterial",(function(){return N_})),n.d(r,"MeshPhongMaterial",(function(){return L_})),n.d(r,"MeshPhysicalMaterial",(function(){return I_})),n.d(r,"MeshStandardMaterial",(function(){return R_})),n.d(r,"MeshToonMaterial",(function(){return P_})),n.d(r,"MinEquation",(function(){return Hu})),n.d(r,"MirroredRepeatWrapping",(function(){return Al})),n.d(r,"MixOperation",(function(){return ll})),n.d(r,"MultiMaterial",(function(){return hE})),n.d(r,"MultiplyBlending",(function(){return ju})),n.d(r,"MultiplyOperation",(function(){return ul})),n.d(r,"NearestFilter",(function(){return Cl})),n.d(r,"NearestMipMapLinearFilter",(function(){return Ll})),n.d(r,"NearestMipMapNearestFilter",(function(){return Rl})),n.d(r,"NearestMipmapLinearFilter",(function(){return Il})),n.d(r,"NearestMipmapNearestFilter",(function(){return Ol})),n.d(r,"NeverDepth",(function(){return el})),n.d(r,"NeverStencilFunc",(function(){return Rd})),n.d(r,"NoBlending",(function(){return Pu})),n.d(r,"NoColors",(function(){return aE})),n.d(r,"NoToneMapping",(function(){return dl})),n.d(r,"NormalAnimationBlendMode",(function(){return od})),n.d(r,"NormalBlending",(function(){return Nu})),n.d(r,"NotEqualDepth",(function(){return cl})),n.d(r,"NotEqualStencilFunc",(function(){return Dd})),n.d(r,"NumberKeyframeTrack",(function(){return X_})),n.d(r,"Object3D",(function(){return lp})),n.d(r,"ObjectLoader",(function(){return tx})),n.d(r,"ObjectSpaceNormalMap",(function(){return wd})),n.d(r,"OctahedronBufferGeometry",(function(){return i_})),n.d(r,"OctahedronGeometry",(function(){return o_})),n.d(r,"OneFactor",(function(){return Wu})),n.d(r,"OneMinusDstAlphaFactor",(function(){return $u})),n.d(r,"OneMinusDstColorFactor",(function(){return Qu})),n.d(r,"OneMinusSrcAlphaFactor",(function(){return Ku})),n.d(r,"OneMinusSrcColorFactor",(function(){return Xu})),n.d(r,"OrthographicCamera",(function(){return Hw})),n.d(r,"PCFShadowMap",(function(){return Tu})),n.d(r,"PCFSoftShadowMap",(function(){return Mu})),n.d(r,"PMREMGenerator",(function(){return $S})),n.d(r,"ParametricBufferGeometry",(function(){return s_})),n.d(r,"ParametricGeometry",(function(){return a_})),n.d(r,"Particle",(function(){return fE})),n.d(r,"ParticleBasicMaterial",(function(){return gE})),n.d(r,"ParticleSystem",(function(){return pE})),n.d(r,"ParticleSystemMaterial",(function(){return yE})),n.d(r,"Path",(function(){return Pw})),n.d(r,"PerspectiveCamera",(function(){return Nm})),n.d(r,"Plane",(function(){return pp})),n.d(r,"PlaneBufferGeometry",(function(){return Gm})),n.d(r,"PlaneGeometry",(function(){return c_})),n.d(r,"PlaneHelper",(function(){return OS})),n.d(r,"PointCloud",(function(){return dE})),n.d(r,"PointCloudMaterial",(function(){return mE})),n.d(r,"PointLight",(function(){return zw})),n.d(r,"PointLightHelper",(function(){return hS})),n.d(r,"Points",(function(){return Jv})),n.d(r,"PointsMaterial",(function(){return Xv})),n.d(r,"PolarGridHelper",(function(){return yS})),n.d(r,"PolyhedronBufferGeometry",(function(){return gb})),n.d(r,"PolyhedronGeometry",(function(){return u_})),n.d(r,"PositionalAudio",(function(){return Ox})),n.d(r,"PropertyBinding",(function(){return zx})),n.d(r,"PropertyMixer",(function(){return Ix})),n.d(r,"QuadraticBezierCurve",(function(){return Cw})),n.d(r,"QuadraticBezierCurve3",(function(){return Ow})),n.d(r,"Quaternion",(function(){return lf})),n.d(r,"QuaternionKeyframeTrack",(function(){return K_})),n.d(r,"QuaternionLinearInterpolant",(function(){return Z_})),n.d(r,"REVISION",(function(){return yu})),n.d(r,"RGBADepthPacking",(function(){return bd})),n.d(r,"RGBAFormat",(function(){return Jl})),n.d(r,"RGBAIntegerFormat",(function(){return uh})),n.d(r,"RGBA_ASTC_10x10_Format",(function(){return Lh})),n.d(r,"RGBA_ASTC_10x5_Format",(function(){return Oh})),n.d(r,"RGBA_ASTC_10x6_Format",(function(){return Rh})),n.d(r,"RGBA_ASTC_10x8_Format",(function(){return Ih})),n.d(r,"RGBA_ASTC_12x10_Format",(function(){return Ph})),n.d(r,"RGBA_ASTC_12x12_Format",(function(){return Nh})),n.d(r,"RGBA_ASTC_4x4_Format",(function(){return wh})),n.d(r,"RGBA_ASTC_5x4_Format",(function(){return xh})),n.d(r,"RGBA_ASTC_5x5_Format",(function(){return Sh})),n.d(r,"RGBA_ASTC_6x5_Format",(function(){return Eh})),n.d(r,"RGBA_ASTC_6x6_Format",(function(){return Th})),n.d(r,"RGBA_ASTC_8x5_Format",(function(){return Mh})),n.d(r,"RGBA_ASTC_8x6_Format",(function(){return Ah})),n.d(r,"RGBA_ASTC_8x8_Format",(function(){return Ch})),n.d(r,"RGBA_BPTC_Format",(function(){return Dh})),n.d(r,"RGBA_ETC2_EAC_Format",(function(){return _h})),n.d(r,"RGBA_PVRTC_2BPPV1_Format",(function(){return yh})),n.d(r,"RGBA_PVRTC_4BPPV1_Format",(function(){return gh})),n.d(r,"RGBA_S3TC_DXT1_Format",(function(){return hh})),n.d(r,"RGBA_S3TC_DXT3_Format",(function(){return dh})),n.d(r,"RGBA_S3TC_DXT5_Format",(function(){return fh})),n.d(r,"RGBDEncoding",(function(){return yd})),n.d(r,"RGBEEncoding",(function(){return fd})),n.d(r,"RGBEFormat",(function(){return eh})),n.d(r,"RGBFormat",(function(){return $l})),n.d(r,"RGBIntegerFormat",(function(){return ch})),n.d(r,"RGBM16Encoding",(function(){return gd})),n.d(r,"RGBM7Encoding",(function(){return md})),n.d(r,"RGB_ETC1_Format",(function(){return vh})),n.d(r,"RGB_ETC2_Format",(function(){return bh})),n.d(r,"RGB_PVRTC_2BPPV1_Format",(function(){return mh})),n.d(r,"RGB_PVRTC_4BPPV1_Format",(function(){return ph})),n.d(r,"RGB_S3TC_DXT1_Format",(function(){return lh})),n.d(r,"RGFormat",(function(){return sh})),n.d(r,"RGIntegerFormat",(function(){return ah})),n.d(r,"RawShaderMaterial",(function(){return O_})),n.d(r,"Ray",(function(){return Ff})),n.d(r,"Raycaster",(function(){return Zx})),n.d(r,"RectAreaLight",(function(){return qw})),n.d(r,"RedFormat",(function(){return ih})),n.d(r,"RedIntegerFormat",(function(){return oh})),n.d(r,"ReinhardToneMapping",(function(){return pl})),n.d(r,"RepeatWrapping",(function(){return Tl})),n.d(r,"ReplaceStencilOp",(function(){return Ed})),n.d(r,"ReverseSubtractEquation",(function(){return zu})),n.d(r,"RingBufferGeometry",(function(){return l_})),n.d(r,"RingGeometry",(function(){return h_})),n.d(r,"SRGB8_ALPHA8_ASTC_10x10_Format",(function(){return Xh})),n.d(r,"SRGB8_ALPHA8_ASTC_10x5_Format",(function(){return Gh})),n.d(r,"SRGB8_ALPHA8_ASTC_10x6_Format",(function(){return Wh})),n.d(r,"SRGB8_ALPHA8_ASTC_10x8_Format",(function(){return qh})),n.d(r,"SRGB8_ALPHA8_ASTC_12x10_Format",(function(){return Zh})),n.d(r,"SRGB8_ALPHA8_ASTC_12x12_Format",(function(){return Kh})),n.d(r,"SRGB8_ALPHA8_ASTC_4x4_Format",(function(){return kh})),n.d(r,"SRGB8_ALPHA8_ASTC_5x4_Format",(function(){return jh})),n.d(r,"SRGB8_ALPHA8_ASTC_5x5_Format",(function(){return Fh})),n.d(r,"SRGB8_ALPHA8_ASTC_6x5_Format",(function(){return Uh})),n.d(r,"SRGB8_ALPHA8_ASTC_6x6_Format",(function(){return Bh})),n.d(r,"SRGB8_ALPHA8_ASTC_8x5_Format",(function(){return zh})),n.d(r,"SRGB8_ALPHA8_ASTC_8x6_Format",(function(){return Hh})),n.d(r,"SRGB8_ALPHA8_ASTC_8x8_Format",(function(){return Vh})),n.d(r,"Scene",(function(){return Jy})),n.d(r,"SceneUtils",(function(){return HE})),n.d(r,"ShaderChunk",(function(){return Wm})),n.d(r,"ShaderLib",(function(){return Xm})),n.d(r,"ShaderMaterial",(function(){return Lm})),n.d(r,"ShadowMaterial",(function(){return C_})),n.d(r,"Shape",(function(){return Nw})),n.d(r,"ShapeBufferGeometry",(function(){return d_})),n.d(r,"ShapeGeometry",(function(){return f_})),n.d(r,"ShapePath",(function(){return ox})),n.d(r,"ShapeUtils",(function(){return Zb})),n.d(r,"ShortType",(function(){return Bl})),n.d(r,"Skeleton",(function(){return Rv})),n.d(r,"SkeletonHelper",(function(){return lS})),n.d(r,"SkinnedMesh",(function(){return Mv})),n.d(r,"SmoothShading",(function(){return Lu})),n.d(r,"Sphere",(function(){return Rf})),n.d(r,"SphereBufferGeometry",(function(){return p_})),n.d(r,"SphereGeometry",(function(){return m_})),n.d(r,"Spherical",(function(){return $x})),n.d(r,"SphericalHarmonics3",(function(){return Xw})),n.d(r,"Spline",(function(){return IE})),n.d(r,"SplineCurve",(function(){return Rw})),n.d(r,"SplineCurve3",(function(){return RE})),n.d(r,"SpotLight",(function(){return Uw})),n.d(r,"SpotLightHelper",(function(){return sS})),n.d(r,"Sprite",(function(){return gv})),n.d(r,"SpriteMaterial",(function(){return nv})),n.d(r,"SrcAlphaFactor",(function(){return Zu})),n.d(r,"SrcAlphaSaturateFactor",(function(){return tl})),n.d(r,"SrcColorFactor",(function(){return qu})),n.d(r,"StaticCopyUsage",(function(){return Gd})),n.d(r,"StaticDrawUsage",(function(){return Fd})),n.d(r,"StaticReadUsage",(function(){return zd})),n.d(r,"StereoCamera",(function(){return gx})),n.d(r,"StreamCopyUsage",(function(){return qd})),n.d(r,"StreamDrawUsage",(function(){return Bd})),n.d(r,"StreamReadUsage",(function(){return Vd})),n.d(r,"StringKeyframeTrack",(function(){return Y_})),n.d(r,"SubtractEquation",(function(){return Bu})),n.d(r,"SubtractiveBlending",(function(){return ku})),n.d(r,"TOUCH",(function(){return bu})),n.d(r,"TangentSpaceNormalMap",(function(){return _d})),n.d(r,"TetrahedronBufferGeometry",(function(){return g_})),n.d(r,"TetrahedronGeometry",(function(){return y_})),n.d(r,"TextBufferGeometry",(function(){return v_})),n.d(r,"TextGeometry",(function(){return b_})),n.d(r,"Texture",(function(){return of})),n.d(r,"TextureLoader",(function(){return hw})),n.d(r,"TorusBufferGeometry",(function(){return __})),n.d(r,"TorusGeometry",(function(){return w_})),n.d(r,"TorusKnotBufferGeometry",(function(){return x_})),n.d(r,"TorusKnotGeometry",(function(){return S_})),n.d(r,"Triangle",(function(){return Tp})),n.d(r,"TriangleFanDrawMode",(function(){return ud})),n.d(r,"TriangleStripDrawMode",(function(){return cd})),n.d(r,"TrianglesDrawMode",(function(){return ad})),n.d(r,"TubeBufferGeometry",(function(){return E_})),n.d(r,"TubeGeometry",(function(){return T_})),n.d(r,"UVMapping",(function(){return vl})),n.d(r,"Uint16Attribute",(function(){return EE})),n.d(r,"Uint16BufferAttribute",(function(){return Gp})),n.d(r,"Uint32Attribute",(function(){return ME})),n.d(r,"Uint32BufferAttribute",(function(){return qp})),n.d(r,"Uint8Attribute",(function(){return wE})),n.d(r,"Uint8BufferAttribute",(function(){return zp})),n.d(r,"Uint8ClampedAttribute",(function(){return xE})),n.d(r,"Uint8ClampedBufferAttribute",(function(){return Hp})),n.d(r,"Uniform",(function(){return Wx})),n.d(r,"UniformsLib",(function(){return qm})),n.d(r,"UniformsUtils",(function(){return Im})),n.d(r,"UnsignedByteType",(function(){return Fl})),n.d(r,"UnsignedInt248Type",(function(){return Kl})),n.d(r,"UnsignedIntType",(function(){return Vl})),n.d(r,"UnsignedShort4444Type",(function(){return ql})),n.d(r,"UnsignedShort5551Type",(function(){return Xl})),n.d(r,"UnsignedShort565Type",(function(){return Zl})),n.d(r,"UnsignedShortType",(function(){return zl})),n.d(r,"VSMShadowMap",(function(){return Au})),n.d(r,"Vector2",(function(){return Qd})),n.d(r,"Vector3",(function(){return hf})),n.d(r,"Vector4",(function(){return af})),n.d(r,"VectorKeyframeTrack",(function(){return $_})),n.d(r,"Vertex",(function(){return vE})),n.d(r,"VertexColors",(function(){return uE})),n.d(r,"VideoTexture",(function(){return tb})),n.d(r,"WebGL1Renderer",(function(){return Ky})),n.d(r,"WebGLCubeRenderTarget",(function(){return jm})),n.d(r,"WebGLMultisampleRenderTarget",(function(){return uf})),n.d(r,"WebGLRenderTarget",(function(){return cf})),n.d(r,"WebGLRenderTargetCube",(function(){return FE})),n.d(r,"WebGLRenderer",(function(){return Zy})),n.d(r,"WebGLUtils",(function(){return Hy})),n.d(r,"WireframeGeometry",(function(){return M_})),n.d(r,"WireframeHelper",(function(){return DE})),n.d(r,"WrapAroundEnding",(function(){return id})),n.d(r,"XHRLoader",(function(){return kE})),n.d(r,"ZeroCurvatureEnding",(function(){return nd})),n.d(r,"ZeroFactor",(function(){return Gu})),n.d(r,"ZeroSlopeEnding",(function(){return rd})),n.d(r,"ZeroStencilOp",(function(){return xd})),n.d(r,"sRGBEncoding",(function(){return hd}));var i=n("fXoL");let o=null;function s(){return o}const a=new i.q("DocumentToken");let c=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(i.Kb)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return Object(i.Wb)(h)}const l=new i.q("Location Initialized");let h=(()=>{class t extends c{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=s().getLocation(),this._history=s().getHistory()}getBaseHrefFromDOM(){return s().getBaseHref(this._doc)}onPopState(t){s().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){s().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){d()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){d()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(a))},t.\u0275prov=Object(i.Kb)({factory:f,token:t,providedIn:"platform"}),t})();function d(){return!!window.history.pushState}function f(){return new h(Object(i.Wb)(a))}function p(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function m(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(i.Kb)({factory:v,token:t,providedIn:"root"}),t})();function v(t){const e=Object(i.Wb)(a).location;return new _(Object(i.Wb)(c),e&&e.origin||"")}const b=new i.q("appBaseHref");let _=(()=>{class t extends y{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return p(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(c),i.Wb(b,8))},t.\u0275prov=i.Kb({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t extends y{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=p(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(c),i.Wb(b,8))},t.\u0275prov=i.Kb({token:t,factory:t.\u0275fac}),t})(),x=(()=>{class t{constructor(t,e){this._subject=new i.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=m(E(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,E(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)})}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(y),i.Wb(c))},t.normalizeQueryParams=g,t.joinWithSlash=p,t.stripTrailingSlash=m,t.\u0275prov=Object(i.Kb)({factory:S,token:t,providedIn:"root"}),t})();function S(){return new x(Object(i.Wb)(y),Object(i.Wb)(c))}function E(t){return t.replace(/\/index.html$/,"")}const T=function(){var t={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return t[t.Zero]="Zero",t[t.One]="One",t[t.Two]="Two",t[t.Few]="Few",t[t.Many]="Many",t[t.Other]="Other",t}(),M=i.ob;class A{}let C=(()=>{class t extends A{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(M(e||this.locale)(t)){case T.Zero:return"zero";case T.One:return"one";case T.Two:return"two";case T.Few:return"few";case T.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(i.u))},t.\u0275prov=i.Kb({token:t,factory:t.\u0275fac}),t})();class O{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let R=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){Object(i.W)()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(t)}. `+"See https://angular.io/api/common/NgForOf#change-propagation for more information."),this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new O(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new I(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new I(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(i.Ob(i.P),i.Ob(i.L),i.Ob(i.s))},t.\u0275dir=i.Jb({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class I{constructor(t,e){this.record=t,this.view=e}}let L=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new P,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){N("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){N("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(i.Ob(i.P),i.Ob(i.L))},t.\u0275dir=i.Jb({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class P{constructor(){this.$implicit=null,this.ngIf=null}}function N(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(i.xb)(e)}'.`)}class D{createSubscription(t,e){return t.subscribe({next:e,error:t=>{throw t}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class k{createSubscription(t,e){return t.then(e,t=>{throw t})}dispose(t){}onDestroy(t){}}const j=new k,F=new D;let U=(()=>{class t{constructor(t){this._ref=t,this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):Object(i.ub)(this._latestValue,this._latestReturnedValue)?this._latestReturnedValue:(this._latestReturnedValue=this._latestValue,i.R.wrap(this._latestValue)):(t&&this._subscribe(t),this._latestReturnedValue=this._latestValue,this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,e=>this._updateLatestValue(t,e))}_selectStrategy(e){if(Object(i.tb)(e))return j;if(Object(i.sb)(e))return F;throw n=t,Error(`InvalidPipeArgument: '${e}' for pipe '${Object(i.xb)(n)}'`);var n}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())}}return t.\u0275fac=function(e){return new(e||t)(i.Yb())},t.\u0275pipe=i.Nb({name:"async",type:t,pure:!1}),t})(),B=(()=>{class t{}return t.\u0275mod=i.Mb({type:t}),t.\u0275inj=i.Lb({factory:function(e){return new(e||t)},providers:[{provide:A,useClass:C}]}),t})(),z=(()=>{class t{}return t.\u0275prov=Object(i.Kb)({token:t,providedIn:"root",factory:()=>new H(Object(i.Wb)(a),window,Object(i.Wb)(i.m))}),t})();class H{constructor(t,e,n){this.document=t,this.window=e,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(t){this.supportScrollRestoration()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(this.supportScrollRestoration()){t=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(t):t.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{const e=this.document.querySelector(`#${t}`);if(e)return void this.scrollToElement(e);const n=this.document.querySelector(`[name='${t}']`);if(n)return void this.scrollToElement(n)}catch(cU){this.errorHandler.handleError(cU)}}}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}supportScrollRestoration(){try{return!!this.window&&!!this.window.scrollTo}catch(t){return!1}}}class V extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new V,o||(o=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=W||(W=document.querySelector("base"),W)?W.getAttribute("href"):null;return null==e?null:(n=e,G||(G=document.createElement("a")),G.setAttribute("href",n),"/"===G.pathname.charAt(0)?G.pathname:"/"+G.pathname);var n}resetBaseElement(){W=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let G,W=null;const q=new i.q("TRANSITION_ID"),X=[{provide:i.d,useFactory:function(t,e,n){return()=>{n.get(i.e).donePromise.then(()=>{const n=s();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[q,a,i.r],multi:!0}];class Z{static init(){Object(i.Y)(new Z)}addToWindow(t){i.qb.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},i.qb.getAllAngularTestabilities=()=>t.getAllTestabilities(),i.qb.getAllAngularRootElements=()=>t.getAllRootElements(),i.qb.frameworkStabilizers||(i.qb.frameworkStabilizers=[]),i.qb.frameworkStabilizers.push(t=>{const e=i.qb.getAllAngularTestabilities();let n=e.length,r=!1;const o=function(e){r=r||e,n--,0==n&&t(r)};e.forEach((function(t){t.whenStable(o)}))})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?s().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const K=new i.q("EventManagerPlugins");let Y=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(K),i.Wb(i.z))},t.\u0275prov=i.Kb({token:t,factory:t.\u0275fac}),t})();class J{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=s().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let Q=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Kb({token:t,factory:t.\u0275fac}),t})(),tt=(()=>{class t extends Q{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>s().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(a))},t.\u0275prov=i.Kb({token:t,factory:t.\u0275fac}),t})();const et={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},nt=/%COMP%/g;function rt(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?rt(t,i,n):(i=i.replace(nt,t),n.push(i))}return n}function it(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let ot=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new st(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case i.Q.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new at(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case i.Q.Native:case i.Q.ShadowDom:return new ct(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=rt(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(Y),i.Wb(tt),i.Wb(i.c))},t.\u0275prov=i.Kb({token:t,factory:t.\u0275fac}),t})();class st{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(et[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=et[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=et[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&i.G.DashCase?t.style.setProperty(e,n,r&i.G.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&i.G.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,it(n)):this.eventManager.addEventListener(t,e,it(n))}}class at extends st{constructor(t,e,n,r){super(t),this.component=n;const i=rt(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(nt,r+"-"+n.id),this.hostAttr=function(t){return"_nghost-%COMP%".replace(nt,t)}(r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class ct extends st{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.component=r,this.shadowRoot=r.encapsulation===i.Q.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const o=rt(r.id,r.styles,[]);for(let i=0;i<o.length;i++){const t=document.createElement("style");t.textContent=o[i],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let ut=(()=>{class t extends J{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(a))},t.\u0275prov=i.Kb({token:t,factory:t.\u0275fac}),t})();const lt={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},ht=new i.q("HammerGestureConfig"),dt=new i.q("HammerLoader");let ft=(()=>{class t{constructor(){this.events=[],this.overrides={}}buildHammer(t){const e=new Hammer(t,this.options);e.get("pinch").set({enable:!0}),e.get("rotate").set({enable:!0});for(const n in this.overrides)e.get(n).set(this.overrides[n]);return e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Kb({token:t,factory:t.\u0275fac}),t})();const pt=[{provide:K,useClass:(()=>{class t extends J{constructor(t,e,n,r){super(t),this._config=e,this.console=n,this.loader=r}supports(t){return!(!lt.hasOwnProperty(t.toLowerCase())&&!this.isCustomEvent(t)||!window.Hammer&&!this.loader&&(this.console.warn(`The "${t}" event cannot be bound because Hammer.JS is not `+"loaded and no custom loader has been specified."),1))}addEventListener(t,e,n){const r=this.manager.getZone();if(e=e.toLowerCase(),!window.Hammer&&this.loader){let r=!1,i=()=>{r=!0};return this.loader().then(()=>{if(!window.Hammer)return this.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(i=()=>{});r||(i=this.addEventListener(t,e,n))}).catch(()=>{this.console.warn(`The "${e}" event cannot be bound because the custom `+"Hammer.JS loader failed."),i=()=>{}}),()=>{i()}}return r.runOutsideAngular(()=>{const i=this._config.buildHammer(t),o=function(t){r.runGuarded((function(){n(t)}))};return i.on(e,o),()=>{i.off(e,o),"function"==typeof i.destroy&&i.destroy()}})}isCustomEvent(t){return this._config.events.indexOf(t)>-1}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(a),i.Wb(ht),i.Wb(i.Z),i.Wb(dt,8))},t.\u0275prov=i.Kb({token:t,factory:t.\u0275fac}),t})(),multi:!0,deps:[a,ht,i.Z,[new i.A,dt]]},{provide:ht,useClass:ft,deps:[]}];let mt=(()=>{class t{}return t.\u0275mod=i.Mb({type:t}),t.\u0275inj=i.Lb({factory:function(e){return new(e||t)},providers:pt}),t})();const gt=["alt","control","meta","shift"],yt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},vt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},bt={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let _t=(()=>{class t extends J{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>s().onAndCancel(e,i.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(gt.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&vt.hasOwnProperty(e)&&(e=vt[e]))}return yt[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),gt.forEach(r=>{r!=n&&(0,bt[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(a))},t.\u0275prov=i.Kb({token:t,factory:t.\u0275fac}),t})();const wt=[{provide:i.B,useValue:"browser"},{provide:i.C,useValue:function(){V.makeCurrent(),Z.init()},multi:!0},{provide:a,useFactory:function(){return Object(i.wb)(document),document},deps:[]}],xt=Object(i.S)(i.X,"browser",wt),St=[[],{provide:i.ab,useValue:"root"},{provide:i.m,useFactory:function(){return new i.m},deps:[]},{provide:K,useClass:ut,multi:!0,deps:[a,i.z,i.B]},{provide:K,useClass:_t,multi:!0,deps:[a]},[],{provide:ot,useClass:ot,deps:[Y,tt,i.c]},{provide:i.F,useExisting:ot},{provide:Q,useExisting:tt},{provide:tt,useClass:tt,deps:[a]},{provide:i.M,useClass:i.M,deps:[i.z]},{provide:Y,useClass:Y,deps:[K,i.z]},[]];let Et,Tt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:i.c,useValue:e.appId},{provide:q,useExisting:i.c},X]}}}return t.\u0275mod=i.Mb({type:t}),t.\u0275inj=i.Lb({factory:function(e){return new(e||t)(i.Wb(t,12))},providers:St,imports:[B,i.f]}),t})();"undefined"!=typeof window&&window;try{Et="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(Zz){Et=!1}let Mt,At,Ct,Ot=(()=>{class t{constructor(t){this._platformId=t,this.isBrowser=this._platformId?"browser"===this._platformId:"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Et)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(i.B,8))},t.\u0275prov=Object(i.Kb)({factory:function(){return new t(Object(i.Wb)(i.B,8))},token:t,providedIn:"root"}),t})(),Rt=(()=>{class t{}return t.\u0275mod=i.Mb({type:t}),t.\u0275inj=i.Lb({factory:function(e){return new(e||t)}}),t})();function It(t){return function(){if(null==Mt&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Mt=!0}))}finally{Mt=Mt||!1}return Mt}()?t:!!t.capture}function Lt(){if("object"!=typeof document||!document)return 0;if(null==At){const t=document.createElement("div"),e=t.style;t.dir="rtl",e.height="1px",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const n=document.createElement("div"),r=n.style;r.width="2px",r.height="1px",t.appendChild(n),document.body.appendChild(t),At=0,0===t.scrollLeft&&(t.scrollLeft=1,At=0===t.scrollLeft?1:2),t.parentNode.removeChild(t)}return At}function Pt(t){return null!=t&&"false"!==`${t}`}function Nt(t){return Array.isArray(t)?t:[t]}function Dt(t){return null==t?"":"string"==typeof t?t:`${t}px`}function kt(t){return t instanceof i.l?t.nativeElement:t}var jt=n("XNiG"),Ft=n("LRne"),Ut=n("HDdC"),Bt=n("DH7j"),zt=n("n6bG"),Ht=n("lJxs");function Vt(t,e,n,r){return Object(zt.a)(n)&&(r=n,n=void 0),r?Vt(t,e,n).pipe(Object(Ht.a)(t=>Object(Bt.a)(t)?r(...t):r(t))):new Ut.a(r=>{!function t(e,n,r,i,o){let s;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){const t=e;e.addEventListener(n,r,o),s=()=>t.removeEventListener(n,r,o)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){const t=e;e.on(n,r),s=()=>t.off(n,r)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){const t=e;e.addListener(n,r),s=()=>t.removeListener(n,r)}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(let s=0,a=e.length;s<a;s++)t(e[s],n,r,i,o)}i.add(s)}(t,e,(function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)}),r,n)})}var Gt=n("VRyK");n("3N8a"),n("IjjT"),n("7Hc7");var Wt=n("quSY"),qt=n("7o/Q");function Xt(t,e){return n=>n.lift(new Zt(t,e))}class Zt{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new Kt(t,this.compare,this.keySelector))}}class Kt extends qt.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var Yt=n("D0XW"),$t=n("l7GE"),Jt=n("ZUHj");class Qt{constructor(t){this.durationSelector=t}call(t,e){return e.subscribe(new te(t,this.durationSelector))}}class te extends $t.a{constructor(t,e){super(t),this.durationSelector=e,this.hasValue=!1}_next(t){if(this.value=t,this.hasValue=!0,!this.throttled){let n;try{const{durationSelector:e}=this;n=e(t)}catch(e){return this.destination.error(e)}const r=Object(Jt.a)(this,n);!r||r.closed?this.clearThrottle():this.add(this.throttled=r)}}clearThrottle(){const{value:t,hasValue:e,throttled:n}=this;n&&(this.remove(n),this.throttled=null,n.unsubscribe()),e&&(this.value=null,this.hasValue=!1,this.destination.next(t))}notifyNext(t,e,n,r){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}var ee=n("Y7HM"),ne=n("z+Ro");function re(t){const{index:e,period:n,subscriber:r}=t;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}function ie(t,e=Yt.a){return n=()=>function(t=0,e,n){let r=-1;return Object(ee.a)(e)?r=Number(e)<1?1:Number(e):Object(ne.a)(e)&&(n=e),Object(ne.a)(n)||(n=Yt.a),new Ut.a(e=>{const i=Object(ee.a)(t)?t:+t-n.now();return n.schedule(re,i,{index:0,period:r,subscriber:e})})}(t,e),function(t){return t.lift(new Qt(n))};var n}function oe(t,e){return function(n){return n.lift(new se(t,e))}}class se{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new ae(t,this.predicate,this.thisArg))}}class ae extends qt.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}function ce(t){return e=>e.lift(new ue(t))}class ue{constructor(t){this.notifier=t}call(t,e){const n=new le(t),r=Object(Jt.a)(n,this.notifier);return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n}}class le extends $t.a{constructor(t){super(t),this.seenValue=!1}notifyNext(t,e,n,r,i){this.seenValue=!0,this.complete()}notifyComplete(){}}var he=n("bHdf");function de(){return Object(he.a)(1)}function fe(...t){return de()(Object(Ft.a)(...t))}function pe(...t){const e=t[t.length-1];return Object(ne.a)(e)?(t.pop(),n=>fe(t,n,e)):e=>fe(t,e)}function me(){return t=>t.lift(new ge)}class ge{call(t,e){return e.subscribe(new ye(t))}}class ye extends qt.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var ve=n("51Dv"),be=n("Cfvw");function _e(t,e){return"function"==typeof e?n=>n.pipe(_e((n,r)=>Object(be.a)(t(n,r)).pipe(Object(Ht.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new we(t))}class we{constructor(t){this.project=t}call(t,e){return e.subscribe(new xe(t,this.project))}}class xe extends $t.a{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e,t,n)}_innerSub(t,e,n){const r=this.innerSubscription;r&&r.unsubscribe();const i=new ve.a(this,e,n),o=this.destination;o.add(i),this.innerSubscription=Object(Jt.a)(this,t,void 0,void 0,i),this.innerSubscription!==i&&o.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(t){this.destination.remove(t),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(t,e,n,r,i){this.destination.next(e)}}n("qgXg");var Se=n("pxpQ"),Ee=n("9ppp");n("Ylt2");const Te=new i.q("cdk-dir-doc",{providedIn:"root",factory:function(){return Object(i.V)(a)}});let Me=(()=>{class t{constructor(t){if(this.value="ltr",this.change=new i.n,t){const e=t.documentElement?t.documentElement.dir:null,n=(t.body?t.body.dir:null)||e;this.value="ltr"===n||"rtl"===n?n:"ltr"}}ngOnDestroy(){this.change.complete()}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(Te,8))},t.\u0275prov=Object(i.Kb)({factory:function(){return new t(Object(i.Wb)(Te,8))},token:t,providedIn:"root"}),t})(),Ae=(()=>{class t{}return t.\u0275mod=i.Mb({type:t}),t.\u0275inj=i.Lb({factory:function(e){return new(e||t)}}),t})(),Ce=(()=>{class t{constructor(){this._listeners=[]}notify(t,e){for(let n of this._listeners)n(t,e)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(e=>t!==e)}}ngOnDestroy(){this._listeners=[]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(i.Kb)({factory:function(){return new t},token:t,providedIn:"root"}),t})(),Oe=(()=>{class t{constructor(t,e,n){this._ngZone=t,this._platform=e,this._scrolled=new jt.a,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=n}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const e=this.scrollContainers.get(t);e&&(e.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Ut.a(e=>{this._globalSubscription||this._addGlobalListener();const n=t>0?this._scrolled.pipe(ie(t)).subscribe(e):this._scrolled.subscribe(e);return this._scrolledCount++,()=>{n.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Object(Ft.a)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,e)=>this.deregister(e)),this._scrolled.complete()}ancestorScrolled(t,e){const n=this.getAncestorScrollContainers(t);return this.scrolled(e).pipe(oe(t=>!t||n.indexOf(t)>-1))}getAncestorScrollContainers(t){const e=[];return this.scrollContainers.forEach((n,r)=>{this._scrollableContainsElement(r,t)&&e.push(r)}),e}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_scrollableContainsElement(t,e){let n=e.nativeElement,r=t.getElementRef().nativeElement;do{if(n==r)return!0}while(n=n.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Vt(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(i.z),i.Wb(Ot),i.Wb(a,8))},t.\u0275prov=Object(i.Kb)({factory:function(){return new t(Object(i.Wb)(i.z),Object(i.Wb)(Ot),Object(i.Wb)(a,8))},token:t,providedIn:"root"}),t})(),Re=(()=>{class t{constructor(t,e,n,r){this.elementRef=t,this.scrollDispatcher=e,this.ngZone=n,this.dir=r,this._destroyed=new jt.a,this._elementScrolled=new Ut.a(t=>this.ngZone.runOutsideAngular(()=>Vt(this.elementRef.nativeElement,"scroll").pipe(ce(this._destroyed)).subscribe(t)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const e=this.elementRef.nativeElement,n=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=n?t.end:t.start),null==t.right&&(t.right=n?t.start:t.end),null!=t.bottom&&(t.top=e.scrollHeight-e.clientHeight-t.bottom),n&&0!=Lt()?(null!=t.left&&(t.right=e.scrollWidth-e.clientWidth-t.left),2==Lt()?t.left=t.right:1==Lt()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=e.scrollWidth-e.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const e=this.elementRef.nativeElement;"object"==typeof document&&"scrollBehavior"in document.documentElement.style?e.scrollTo(t):(null!=t.top&&(e.scrollTop=t.top),null!=t.left&&(e.scrollLeft=t.left))}measureScrollOffset(t){const e=this.elementRef.nativeElement;if("top"==t)return e.scrollTop;if("bottom"==t)return e.scrollHeight-e.clientHeight-e.scrollTop;const n=this.dir&&"rtl"==this.dir.value;return"start"==t?t=n?"right":"left":"end"==t&&(t=n?"left":"right"),n&&2==Lt()?"left"==t?e.scrollWidth-e.clientWidth-e.scrollLeft:e.scrollLeft:n&&1==Lt()?"left"==t?e.scrollLeft+e.scrollWidth-e.clientWidth:-e.scrollLeft:"left"==t?e.scrollLeft:e.scrollWidth-e.clientWidth-e.scrollLeft}}return t.\u0275fac=function(e){return new(e||t)(i.Ob(i.l),i.Ob(Oe),i.Ob(i.z),i.Ob(Me,8))},t.\u0275dir=i.Jb({type:t,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),t})(),Ie=(()=>{class t{constructor(t,e,n){this._platform=t,this._document=n,e.runOutsideAngular(()=>{const e=this._getWindow();this._change=t.isBrowser?Object(Gt.a)(Vt(e,"resize"),Vt(e,"orientationchange")):Object(Ft.a)(),this._invalidateCache=this.change().subscribe(()=>this._updateViewportSize())})}ngOnDestroy(){this._invalidateCache.unsubscribe()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:e,height:n}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+n,right:t.left+e,height:n,width:e}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._getDocument(),e=this._getWindow(),n=t.documentElement,r=n.getBoundingClientRect();return{top:-r.top||t.body.scrollTop||e.scrollY||n.scrollTop||0,left:-r.left||t.body.scrollLeft||e.scrollX||n.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(ie(t)):this._change}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(Ot),i.Wb(i.z),i.Wb(a,8))},t.\u0275prov=Object(i.Kb)({factory:function(){return new t(Object(i.Wb)(Ot),Object(i.Wb)(i.z),Object(i.Wb)(a,8))},token:t,providedIn:"root"}),t})(),Le=(()=>{class t{}return t.\u0275mod=i.Mb({type:t}),t.\u0275inj=i.Lb({factory:function(e){return new(e||t)}}),t})(),Pe=(()=>{class t{}return t.\u0275mod=i.Mb({type:t}),t.\u0275inj=i.Lb({factory:function(e){return new(e||t)},imports:[[Ae,Rt,Le],Ae,Le]}),t})();function Ne(t,...e){return e.length?e.some(e=>t[e]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}var De=n("vkgz");function ke(t,e=Yt.a){return n=>n.lift(new je(t,e))}class je{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new Fe(t,this.dueTime,this.scheduler))}}class Fe extends qt.a{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Ue,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function Ue(t){t.debouncedNext()}const Be=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();var ze=n("EY2u");function He(t){return e=>0===t?Object(ze.b)():e.lift(new Ve(t))}class Ve{constructor(t){if(this.total=t,this.total<0)throw new Be}call(t,e){return e.subscribe(new Ge(t,this.total))}}class Ge extends qt.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}let We=(()=>{class t{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const e=function(t){try{return t.frameElement}catch(Zz){return null}}((n=t).ownerDocument&&n.ownerDocument.defaultView||window);var n;if(e){const t=e&&e.nodeName.toLowerCase();if(-1===Xe(e))return!1;if((this._platform.BLINK||this._platform.WEBKIT)&&"object"===t)return!1;if((this._platform.BLINK||this._platform.WEBKIT)&&!this.isVisible(e))return!1}let r=t.nodeName.toLowerCase(),i=Xe(t);if(t.hasAttribute("contenteditable"))return-1!==i;if("iframe"===r)return!1;if("audio"===r){if(!t.hasAttribute("controls"))return!1;if(this._platform.BLINK)return!0}if("video"===r){if(!t.hasAttribute("controls")&&this._platform.TRIDENT)return!1;if(this._platform.BLINK||this._platform.FIREFOX)return!0}return("object"!==r||!this._platform.BLINK&&!this._platform.WEBKIT)&&!(this._platform.WEBKIT&&this._platform.IOS&&!function(t){let e=t.nodeName.toLowerCase(),n="input"===e&&t.type;return"text"===n||"password"===n||"select"===e||"textarea"===e}(t))&&t.tabIndex>=0}isFocusable(t){return function(t){return!function(t){return function(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function(t){let e=t.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(t)||function(t){return function(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||qe(t))}(t)&&!this.isDisabled(t)&&this.isVisible(t)}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(Ot))},t.\u0275prov=Object(i.Kb)({factory:function(){return new t(Object(i.Wb)(Ot))},token:t,providedIn:"root"}),t})();function qe(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;let e=t.getAttribute("tabindex");return"-32768"!=e&&!(!e||isNaN(parseInt(e,10)))}function Xe(t){if(!qe(t))return null;const e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class Ze{constructor(t,e,n,r,i=!1){this._element=t,this._checker=e,this._ngZone=n,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,i||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),e&&(e.removeEventListener("focus",this.endAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),this._startAnchor=this._endAnchor=null}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement()))})}focusFirstTabbableElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement()))})}focusLastTabbableElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement()))})}_getRegionBoundary(t){let e=this._element.querySelectorAll(`[cdk-focus-region-${t}], `+`[cdkFocusRegion${t}], `+`[cdk-focus-${t}]`);for(let n=0;n<e.length;n++)e[n].hasAttribute(`cdk-focus-${t}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${t}', `+`use 'cdkFocusRegion${t}' instead. The deprecated `+"attribute will be removed in 8.0.0.",e[n]):e[n].hasAttribute(`cdk-focus-region-${t}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${t}', `+`use 'cdkFocusRegion${t}' instead. The deprecated attribute `+"will be removed in 8.0.0.",e[n]);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");return t?(t.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",t),Object(i.W)()&&!this._checker.isFocusable(t)&&console.warn("Element matching '[cdkFocusInitial]' is not focusable.",t),t.focus(),!0):this.focusFirstTabbableElement()}focusFirstTabbableElement(){const t=this._getRegionBoundary("start");return t&&t.focus(),!!t}focusLastTabbableElement(){const t=this._getRegionBoundary("end");return t&&t.focus(),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let n=0;n<e.length;n++){let t=e[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[n]):null;if(t)return t}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let n=e.length-1;n>=0;n--){let t=e[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[n]):null;if(t)return t}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.asObservable().pipe(He(1)).subscribe(t)}}let Ke=(()=>{class t{constructor(t,e,n){this._checker=t,this._ngZone=e,this._document=n}create(t,e=!1){return new Ze(t,this._checker,this._ngZone,this._document,e)}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(We),i.Wb(i.z),i.Wb(a))},t.\u0275prov=Object(i.Kb)({factory:function(){return new t(Object(i.Wb)(We),Object(i.Wb)(i.z),Object(i.Wb)(a))},token:t,providedIn:"root"}),t})();function Ye(t){return 0===t.buttons}"undefined"!=typeof Element&&Element;const $e=new i.q("cdk-focus-monitor-default-options"),Je=It({passive:!0,capture:!0});let Qe=(()=>{class t{constructor(t,e,n,r){this._ngZone=t,this._platform=e,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._documentKeydownListener=()=>{this._lastTouchTarget=null,this._setOriginForCurrentEventQueue("keyboard")},this._documentMousedownListener=t=>{if(!this._lastTouchTarget){const e=Ye(t)?"keyboard":"mouse";this._setOriginForCurrentEventQueue(e)}},this._documentTouchstartListener=t=>{null!=this._touchTimeoutId&&clearTimeout(this._touchTimeoutId),this._lastTouchTarget=tn(t),this._touchTimeoutId=setTimeout(()=>this._lastTouchTarget=null,650)},this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._rootNodeFocusAndBlurListener=t=>{const e=tn(t),n="focus"===t.type?this._onFocus:this._onBlur;for(let r=e;r;r=r.parentElement)n.call(this,t,r)},this._document=n,this._detectionMode=(null==r?void 0:r.detectionMode)||0}monitor(t,e=!1){if(!this._platform.isBrowser)return Object(Ft.a)(null);const n=kt(t),r=function(t){if(function(){if(null==Ct){const t="undefined"!=typeof document?document.head:null;Ct=!(!t||!t.createShadowRoot&&!t.attachShadow)}return Ct}()){const e=t.getRootNode?t.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(n)||this._getDocument(),i=this._elementInfo.get(n);if(i)return e&&(i.checkChildren=!0),i.subject.asObservable();const o={checkChildren:e,subject:new jt.a,rootNode:r};return this._elementInfo.set(n,o),this._registerGlobalListeners(o),o.subject.asObservable()}stopMonitoring(t){const e=kt(t),n=this._elementInfo.get(e);n&&(n.subject.complete(),this._setClasses(e),this._elementInfo.delete(e),this._removeGlobalListeners(n))}focusVia(t,e,n){const r=kt(t);this._setOriginForCurrentEventQueue(e),"function"==typeof r.focus&&r.focus(n)}ngOnDestroy(){this._elementInfo.forEach((t,e)=>this.stopMonitoring(e))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(t,e,n){n?t.classList.add(e):t.classList.remove(e)}_getFocusOrigin(t){return this._origin?this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(t)?"touch":"program"}_setClasses(t,e){this._toggleClass(t,"cdk-focused",!!e),this._toggleClass(t,"cdk-touch-focused","touch"===e),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===e),this._toggleClass(t,"cdk-mouse-focused","mouse"===e),this._toggleClass(t,"cdk-program-focused","program"===e)}_setOriginForCurrentEventQueue(t){this._ngZone.runOutsideAngular(()=>{this._origin=t,0===this._detectionMode&&(this._originTimeoutId=setTimeout(()=>this._origin=null,1))})}_wasCausedByTouch(t){const e=tn(t);return this._lastTouchTarget instanceof Node&&e instanceof Node&&(e===this._lastTouchTarget||e.contains(this._lastTouchTarget))}_onFocus(t,e){const n=this._elementInfo.get(e);if(!n||!n.checkChildren&&e!==tn(t))return;const r=this._getFocusOrigin(t);this._setClasses(e,r),this._emitOrigin(n.subject,r),this._lastFocusOrigin=r}_onBlur(t,e){const n=this._elementInfo.get(e);!n||n.checkChildren&&t.relatedTarget instanceof Node&&e.contains(t.relatedTarget)||(this._setClasses(e),this._emitOrigin(n.subject,null))}_emitOrigin(t,e){this._ngZone.run(()=>t.next(e))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const e=t.rootNode,n=this._rootNodeFocusListenerCount.get(e)||0;n||this._ngZone.runOutsideAngular(()=>{e.addEventListener("focus",this._rootNodeFocusAndBlurListener,Je),e.addEventListener("blur",this._rootNodeFocusAndBlurListener,Je)}),this._rootNodeFocusListenerCount.set(e,n+1),1==++this._monitoredElementCount&&this._ngZone.runOutsideAngular(()=>{const t=this._getDocument(),e=this._getWindow();t.addEventListener("keydown",this._documentKeydownListener,Je),t.addEventListener("mousedown",this._documentMousedownListener,Je),t.addEventListener("touchstart",this._documentTouchstartListener,Je),e.addEventListener("focus",this._windowFocusListener)})}_removeGlobalListeners(t){const e=t.rootNode;if(this._rootNodeFocusListenerCount.has(e)){const t=this._rootNodeFocusListenerCount.get(e);t>1?this._rootNodeFocusListenerCount.set(e,t-1):(e.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Je),e.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Je),this._rootNodeFocusListenerCount.delete(e))}if(!--this._monitoredElementCount){const t=this._getDocument(),e=this._getWindow();t.removeEventListener("keydown",this._documentKeydownListener,Je),t.removeEventListener("mousedown",this._documentMousedownListener,Je),t.removeEventListener("touchstart",this._documentTouchstartListener,Je),e.removeEventListener("focus",this._windowFocusListener),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._touchTimeoutId),clearTimeout(this._originTimeoutId)}}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(i.z),i.Wb(Ot),i.Wb(a,8),i.Wb($e,8))},t.\u0275prov=Object(i.Kb)({factory:function(){return new t(Object(i.Wb)(i.z),Object(i.Wb)(Ot),Object(i.Wb)(a,8),Object(i.Wb)($e,8))},token:t,providedIn:"root"}),t})();function tn(t){return t.composedPath?t.composedPath()[0]:t.target}let en=(()=>{class t{constructor(t,e){this._platform=t,this._document=e}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const e=this._document.defaultView||window,n=e&&e.getComputedStyle?e.getComputedStyle(t):null,r=(n&&n.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),r){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove("cdk-high-contrast-active"),t.remove("cdk-high-contrast-black-on-white"),t.remove("cdk-high-contrast-white-on-black");const e=this.getHighContrastMode();1===e?(t.add("cdk-high-contrast-active"),t.add("cdk-high-contrast-black-on-white")):2===e&&(t.add("cdk-high-contrast-active"),t.add("cdk-high-contrast-white-on-black"))}}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(Ot),i.Wb(a))},t.\u0275prov=Object(i.Kb)({factory:function(){return new t(Object(i.Wb)(Ot),Object(i.Wb)(a))},token:t,providedIn:"root"}),t})();const nn=new i.O("9.2.4");class rn{}function on(t,e){return{type:7,name:t,definitions:e,options:{}}}function sn(t,e=null){return{type:4,styles:e,timings:t}}function an(t,e=null){return{type:3,steps:t,options:e}}function cn(t,e=null){return{type:2,steps:t,options:e}}function un(t){return{type:6,styles:t,offset:null}}function ln(t,e,n){return{type:0,name:t,styles:e,options:n}}function hn(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}function dn(t=null){return{type:9,options:t}}function fn(t,e,n=null){return{type:11,selector:t,animation:e,options:n}}function pn(t){Promise.resolve(null).then(t)}class mn{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){pn(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){}setPosition(t){}getPosition(){return 0}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class gn{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const i=this.players.length;0==i?pn(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==i&&this._onFinish()}),t.onDestroy(()=>{++n==i&&this._onDestroy()}),t.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){let t=0;return this.players.forEach(e=>{const n=e.getPosition();t=Math.min(n,t)}),t}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}function yn(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function vn(t){switch(t.length){case 0:return new mn;case 1:return t[0];default:return new gn(t)}}function bn(t,e,n,r,i={},o={}){const s=[],a=[];let c=-1,u=null;if(r.forEach(t=>{const n=t.offset,r=n==c,l=r&&u||{};Object.keys(t).forEach(n=>{let r=n,a=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,s),a){case"!":a=i[n];break;case"*":a=o[n];break;default:a=e.normalizeStyleValue(n,r,a,s)}l[r]=a}),r||a.push(l),u=l,c=n}),s.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${s.join(t)}`)}return a}function _n(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&wn(n,"start",t)));break;case"done":t.onDone(()=>r(n&&wn(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&wn(n,"destroy",t)))}}function wn(t,e,n){const r=n.totalTime,i=xn(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),o=t._data;return null!=o&&(i._data=o),i}function xn(t,e,n,r,i="",o=0,s){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function Sn(t,e,n){let r;return t instanceof Map?(r=t.get(e),r||t.set(e,r=n)):(r=t[e],r||(r=t[e]=n)),r}function En(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let Tn=(t,e)=>!1,Mn=(t,e)=>!1,An=(t,e,n)=>[];const Cn=yn();(Cn||"undefined"!=typeof Element)&&(Tn=(t,e)=>t.contains(e),Mn=(()=>{if(Cn||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):Mn}})(),An=(t,e,n)=>{let r=[];if(n)r.push(...t.querySelectorAll(e));else{const n=t.querySelector(e);n&&r.push(n)}return r});let On=null,Rn=!1;function In(t){On||(On=("undefined"!=typeof document?document.body:null)||{},Rn=!!On.style&&"WebkitAppearance"in On.style);let e=!0;return On.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in On.style,!e&&Rn)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in On.style),e}const Ln=Mn,Pn=Tn,Nn=An;function Dn(t){const e={};return Object.keys(t).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}let kn=(()=>{class t{validateStyleProperty(t){return In(t)}matchesElement(t,e){return Ln(t,e)}containsElement(t,e){return Pn(t,e)}query(t,e,n){return Nn(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,r,i,o=[],s){return new mn(n,r)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Kb({token:t,factory:t.\u0275fac}),t})(),jn=(()=>{class t{}return t.NOOP=new kn,t})();function Fn(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Un(parseFloat(e[1]),e[2])}function Un(t,e){switch(e){case"s":return 1e3*t;default:return t}}function Bn(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,i=0,o="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=Un(parseFloat(n[1]),n[2]);const s=n[3];null!=s&&(i=Un(parseFloat(s),n[4]));const a=n[5];a&&(o=a)}else r=t;if(!n){let n=!1,o=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(o,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:i,easing:o}}(t,e,n)}function zn(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function Hn(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else zn(t,n);return n}function Vn(t,e,n){return n?e+":"+n+";":""}function Gn(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=Vn(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=Vn(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function Wn(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const i=Qn(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),yn()&&Gn(t))}function qn(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=Qn(e);t.style[n]=""}),yn()&&Gn(t))}function Xn(t){return Array.isArray(t)?1==t.length?t[0]:cn(t):t}const Zn=new RegExp("{{\\s*(.+?)\\s*}}","g");function Kn(t){let e=[];if("string"==typeof t){let n;for(;n=Zn.exec(t);)e.push(n[1]);Zn.lastIndex=0}return e}function Yn(t,e,n){const r=t.toString(),i=r.replace(Zn,(t,r)=>{let i=e[r];return e.hasOwnProperty(r)||(n.push(`Please provide a value for the animation param ${r}`),i=""),i.toString()});return i==r?t:i}function $n(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const Jn=/-+([a-z0-9])/g;function Qn(t){return t.replace(Jn,(...t)=>t[1].toUpperCase())}function tr(t,e){return 0===t||0===e}function er(t,e,n){const r=Object.keys(n);if(r.length&&e.length){let o=e[0],s=[];if(r.forEach(t=>{o.hasOwnProperty(t)||s.push(t),o[t]=n[t]}),s.length)for(var i=1;i<e.length;i++){let n=e[i];s.forEach((function(e){n[e]=rr(t,e)}))}}return e}function nr(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function rr(t,e){return window.getComputedStyle(t)[e]}function ir(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const i=r[1],o=r[2],s=r[3];e.push(ar(i,s)),"<"!=o[0]||"*"==i&&"*"==s||e.push(ar(s,i))}(t,n,e)):n.push(t),n}const or=new Set(["true","1"]),sr=new Set(["false","0"]);function ar(t,e){const n=or.has(t)||sr.has(t),r=or.has(e)||sr.has(e);return(i,o)=>{let s="*"==t||t==i,a="*"==e||e==o;return!s&&n&&"boolean"==typeof i&&(s=i?or.has(t):sr.has(t)),!a&&r&&"boolean"==typeof o&&(a=o?or.has(e):sr.has(e)),s&&a}}const cr=new RegExp("s*:selfs*,?","g");function ur(t,e,n){return new lr(t).build(e,n)}class lr{constructor(t){this._driver=t}build(t,e){const n=new hr(e);return this._resetContextStyleTimingState(n),nr(this,Xn(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const i=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,i.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const i=this.visitTransition(t,e);n+=i.queryCount,r+=i.depCount,o.push(i)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:i,transitions:o,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const i=new Set,o=r||{};if(n.styles.forEach(t=>{if(dr(t)){const e=t;Object.keys(e).forEach(t=>{Kn(e[t]).forEach(t=>{o.hasOwnProperty(t)||i.add(t)})})}}),i.size){const n=$n(i.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=nr(this,Xn(t.animation),e);return{type:1,matchers:ir(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:fr(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>nr(this,t,e)),options:fr(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const i=t.steps.map(t=>{e.currentTime=n;const i=nr(this,t,e);return r=Math.max(r,e.currentTime),i});return e.currentTime=r,{type:3,steps:i,options:fr(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return pr(Bn(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=pr(0,0,"");return t.dynamic=!0,t.strValue=r,t}return n=n||Bn(r,e),pr(n.duration,n.delay,n.easing)}(t.timings,e.errors);let r;e.currentAnimateTimings=n;let i=t.styles?t.styles:un({});if(5==i.type)r=this.visitKeyframes(i,e);else{let i=t.styles,o=!1;if(!i){o=!0;const t={};n.easing&&(t.easing=n.easing),i=un(t)}e.currentTime+=n.duration+n.delay;const s=this.visitStyle(i,e);s.isEmptyStep=o,r=s}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?"*"==t?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let r=!1,i=null;return n.forEach(t=>{if(dr(t)){const e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(let t in e)if(e[t].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,i=e.currentTime;n&&i>0&&(i-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const o=e.collectedStyles[e.currentQuerySelector],s=o[n];let a=!0;s&&(i!=r&&i>=s.startTime&&r<=s.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${s.startTime}ms" and "${s.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=s.startTime),a&&(o[n]={startTime:i,endTime:r}),e.options&&function(t,e,n){const r=e.params||{},i=Kn(t);i.length&&i.forEach(t=>{r.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let o=!1,s=!1,a=0;const c=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let c=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(dr(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(dr(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),u=0;return null!=c&&(r++,u=n.offset=c),s=s||u<0||u>1,o=o||u<a,a=u,i.push(u),n});s&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),o&&e.errors.push("Please ensure that all keyframe offsets are in order");const u=t.steps.length;let l=0;r>0&&r<u?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(l=1/(u-1));const h=u-1,d=e.currentTime,f=e.currentAnimateTimings,p=f.duration;return c.forEach((t,r)=>{const o=l>0?r==h?1:l*r:i[r],s=o*p;e.currentTime=d+f.delay+s,f.duration=s,this._validateStyleAst(t,e),t.offset=o,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:nr(this,Xn(t.animation),e),options:fr(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:fr(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:fr(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[i,o]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(cr,"")),[t=t.replace(/@\*/g,".ng-trigger").replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,".ng-animating"),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+i:i,Sn(e.collectedStyles,e.currentQuerySelector,{});const s=nr(this,Xn(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:s,originalSelector:t.selector,options:fr(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:Bn(t.timings,e.errors,!0);return{type:12,animation:nr(this,Xn(t.animation),e),timings:n,options:null}}}class hr{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function dr(t){return!Array.isArray(t)&&"object"==typeof t}function fr(t){var e;return t?(t=zn(t)).params&&(t.params=(e=t.params)?zn(e):null):t={},t}function pr(t,e,n){return{duration:t,delay:e,easing:n}}function mr(t,e,n,r,i,o,s=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}class gr{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const yr=new RegExp(":enter","g"),vr=new RegExp(":leave","g");function br(t,e,n,r,i,o={},s={},a,c,u=[]){return(new _r).buildKeyframes(t,e,n,r,i,o,s,a,c,u)}class _r{buildKeyframes(t,e,n,r,i,o,s,a,c,u=[]){c=c||new gr;const l=new xr(t,e,c,r,i,u,[]);l.options=a,l.currentTimeline.setStyles([o],null,l.errors,a),nr(this,n,l);const h=l.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(s).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([s],null,l.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[mr(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);i!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const i=null!=n.duration?Fn(n.duration):null,o=null!=n.delay?Fn(n.delay):null;return 0!==i&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,i,o);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),nr(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const i=t.options;if(i&&(i.params||i.delay)&&(r=e.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=wr);const t=Fn(i.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>nr(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const i=t.options&&t.options.delay?Fn(t.options.delay):0;t.steps.forEach(o=>{const s=e.createSubContext(t.options);i&&s.delayNextStep(i),nr(this,o,s),r=Math.max(r,s.currentTimeline.currentTime),n.push(s.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return Bn(e.params?Yn(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,o=e.createSubContext().currentTimeline;o.easing=n.easing,t.styles.forEach(t=>{o.forwardTime((t.offset||0)*i),o.setStyles(t.styles,t.easing,e.errors,e.options),o.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(r+i),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},i=r.delay?Fn(r.delay):0;i&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=wr);let o=n;const s=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=s.length;let a=null;s.forEach((n,r)=>{e.currentQueryIndex=r;const s=e.createSubContext(t.options,n);i&&s.delayNextStep(i),n===e.element&&(a=s.currentTimeline),nr(this,t.animation,s),s.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,s.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,i=t.timings,o=Math.abs(i.duration),s=o*(e.currentQueryTotal-1);let a=o*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=s-a;break;case"full":a=n.currentStaggerTime}const c=e.currentTimeline;a&&c.delayNextStep(a);const u=c.currentTime;nr(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-u+(r.startTime-n.currentTimeline.startTime)}}const wr={};class xr{constructor(t,e,n,r,i,o,s,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=o,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=wr,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new Sr(this._driver,e,0),s.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=Fn(n.duration)),null!=n.delay&&(r.delay=Fn(n.delay));const i=n.params;if(i){let t=r.params;t||(t=this.options.params={}),Object.keys(i).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=Yn(i[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,i=new xr(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(t){return this.previousNode=wr,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new Er(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,i,o){let s=[];if(r&&s.push(this.element),t.length>0){t=(t=t.replace(yr,"."+this._enterClassName)).replace(vr,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),s.push(...e)}return i||0!=s.length||o.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),s}}class Sr{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new Sr(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||"*",this._currentKeyframe[t]="*"}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const i=r&&r.params||{},o=function(t,e){const n={};let r;return t.forEach(t=>{"*"===t?(r=r||Object.keys(e),r.forEach(t=>{n[t]="*"})):Hn(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(o).forEach(t=>{const e=Yn(o[t],i,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:"*"),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,o)=>{const s=Hn(i,!0);Object.keys(s).forEach(n=>{const r=s[n];"!"==r?t.add(n):"*"==r&&e.add(n)}),n||(s.offset=o/this.duration),r.push(s)});const i=t.size?$n(t.values()):[],o=e.size?$n(e.values()):[];if(n){const t=r[0],e=zn(t);t.offset=0,e.offset=1,r=[t,e]}return mr(this.element,r,i,o,this.duration,this.startTime,this.easing,!1)}}class Er extends Sr{constructor(t,e,n,r,i,o,s=!1){super(t,e,o.delay),this.element=e,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=s,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const i=[],o=n+e,s=e/o,a=Hn(t[0],!1);a.offset=0,i.push(a);const c=Hn(t[0],!1);c.offset=Tr(s),i.push(c);const u=t.length-1;for(let r=1;r<=u;r++){let s=Hn(t[r],!1);s.offset=Tr((e+s.offset*n)/o),i.push(s)}n=o,e=0,r="",t=i}return mr(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function Tr(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class Mr{}class Ar extends Mr{normalizePropertyName(t,e){return Qn(t)}normalizeStyleValue(t,e,n,r){let i="";const o=n.toString().trim();if(Cr[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return o+i}}const Cr=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Or(t,e,n,r,i,o,s,a,c,u,l,h,d){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:c,preStyleProps:u,postStyleProps:l,totalTime:h,errors:d}}const Rr={};class Ir{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function(t,e,n,r,i){return t.some(t=>t(e,n,r,i))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],i=this._stateStyles[t],o=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):o}build(t,e,n,r,i,o,s,a,c,u){const l=[],h=this.ast.options&&this.ast.options.params||Rr,d=this.buildStyles(n,s&&s.params||Rr,l),f=a&&a.params||Rr,p=this.buildStyles(r,f,l),m=new Set,g=new Map,y=new Map,v="void"===r,b={params:Object.assign(Object.assign({},h),f)},_=u?[]:br(t,e,this.ast.animation,i,o,d,p,b,c,l);let w=0;if(_.forEach(t=>{w=Math.max(t.duration+t.delay,w)}),l.length)return Or(e,this._triggerName,n,r,v,d,p,[],[],g,y,w,l);_.forEach(t=>{const n=t.element,r=Sn(g,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const i=Sn(y,n,{});t.postStyleProps.forEach(t=>i[t]=!0),n!==e&&m.add(n)});const x=$n(m.values());return Or(e,this._triggerName,n,r,v,d,p,_,x,g,y,w)}}class Lr{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},r=zn(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const i=t;Object.keys(i).forEach(t=>{let o=i[t];o.length>1&&(o=Yn(o,r,e)),n[t]=o})}}),n}}class Pr{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new Lr(t.style,t.options&&t.options.params||{})}),Nr(this.states,"true","1"),Nr(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new Ir(t,e,this.states))}),this.fallbackTransition=new Ir(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(i=>i.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function Nr(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const Dr=new gr;class kr{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=ur(this._driver,e,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,i=bn(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],i=this._animations[t];let o;const s=new Map;if(i?(o=br(this._driver,e,i,"ng-enter","ng-leave",{},{},n,Dr,r),o.forEach(t=>{const e=Sn(s,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),o=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);s.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,"*")})});const a=vn(o.map(t=>{const e=s.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,n,r){const i=xn(e,"","","");return _n(this._getPlayer(t),n,i,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const jr=[],Fr={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Ur={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class Br{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(r=n?t.value:t)?r:null,n){const e=zn(t);delete e.value,this.options=e}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const zr=new Br("void");class Hr{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Kr(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var i;const o=Sn(this._elementListeners,t,[]),s={name:e,phase:n,callback:r};o.push(s);const a=Sn(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(Kr(t,"ng-trigger"),Kr(t,"ng-trigger-"+e),a[e]=zr),()=>{this._engine.afterFlush(()=>{const t=o.indexOf(s);t>=0&&o.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const i=this._getTrigger(e),o=new Gr(this.id,e,t);let s=this._engine.statesByElement.get(t);s||(Kr(t,"ng-trigger"),Kr(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,s={}));let a=s[e];const c=new Br(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&c.absorbOptions(a.options),s[e]=c,a||(a=zr),"void"!==c.value&&a.value===c.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(a.params,c.params)){const e=[],n=i.matchStyles(a.value,a.params,e),r=i.matchStyles(c.value,c.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{qn(t,n),Wn(t,r)})}return}const u=Sn(this._engine.playersByElement,t,[]);u.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let l=i.matchTransition(a.value,c.value,t,c.params),h=!1;if(!l){if(!r)return;l=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:l,fromState:a,toState:c,player:o,isFallbackTransition:h}),h||(Kr(t,"ng-animate-queued"),o.onStart(()=>{Yr(t,"ng-animate-queued")})),o.onDone(()=>{let e=this.players.indexOf(o);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(o);t>=0&&n.splice(t,1)}}),this.players.push(o),u.push(o),o}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,".ng-trigger",!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,r){const i=this._engine.statesByElement.get(t);if(i){const o=[];if(Object.keys(i).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,"void",r);n&&o.push(n)}}),o.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&vn(o).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t);if(e){const n=new Set;e.forEach(e=>{const r=e.name;if(n.has(r))return;n.add(r);const i=this._triggers[r].fallbackTransition,o=this._engine.statesByElement.get(t)[r]||zr,s=new Br("void"),a=new Gr(this.id,r,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:r,transition:i,fromState:o,toState:s,player:a,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const r=t.__ng_removed;r&&r!==Fr||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){Kr(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,o=this._elementListeners.get(i);o&&o.forEach(e=>{if(e.name==n.triggerName){const r=xn(i,n.triggerName,n.fromState.value,n.toState.value);r._data=t,_n(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class Vr{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new Hr(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=n[t[r]].namespaceId;if(i){const t=this._fetchNamespace(i);t&&e.add(t)}}}return e}trigger(t,e,n,r){if(Wr(e)){const i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!Wr(e))return;const i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const r=this._fetchNamespace(t);r&&r.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Kr(t,"ng-animate-disabled")):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Yr(t,"ng-animate-disabled"))}removeNode(t,e,n,r){if(Wr(e)){const i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,i){return Wr(e)?this._fetchNamespace(t).listen(e,n,r,i):()=>{}}_buildInstruction(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}destroyInnerAnimations(t){let e=this.driver.query(t,".ng-trigger",!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,".ng-animating",!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return vn(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=Fr,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,".ng-animate-disabled")&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)Kr(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?vn(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const n=new gr,r=[],i=new Map,o=[],s=new Map,a=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(t=>{u.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)u.add(e[n])});const l=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=Zr(h,this.collectedEnterElements),f=new Map;let p=0;d.forEach((t,e)=>{const n="ng-enter"+p++;f.set(e,n),t.forEach(t=>Kr(t,n))});const m=[],g=new Set,y=new Set;for(let R=0;R<this.collectedLeaveElements.length;R++){const t=this.collectedLeaveElements[R],e=t.__ng_removed;e&&e.setForRemoval&&(m.push(t),g.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>g.add(t)):y.add(t))}const v=new Map,b=Zr(h,Array.from(g));b.forEach((t,e)=>{const n="ng-leave"+p++;v.set(e,n),t.forEach(t=>Kr(t,n))}),t.push(()=>{d.forEach((t,e)=>{const n=f.get(e);t.forEach(t=>Yr(t,n))}),b.forEach((t,e)=>{const n=v.get(e);t.forEach(t=>Yr(t,n))}),m.forEach(t=>{this.processLeaveNode(t)})});const _=[],w=[];for(let R=this._namespaceList.length-1;R>=0;R--)this._namespaceList[R].drainQueuedTransitions(e).forEach(t=>{const e=t.player,i=t.element;if(_.push(e),this.collectedEnterElements.length){const t=i.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const u=!l||!this.driver.containsElement(l,i),h=v.get(i),d=f.get(i),p=this._buildInstruction(t,n,d,h,u);if(!p.errors||!p.errors.length)return u?(e.onStart(()=>qn(i,p.fromStyles)),e.onDestroy(()=>Wn(i,p.toStyles)),void r.push(e)):t.isFallbackTransition?(e.onStart(()=>qn(i,p.fromStyles)),e.onDestroy(()=>Wn(i,p.toStyles)),void r.push(e)):(p.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(i,p.timelines),o.push({instruction:p,player:e,element:i}),p.queriedElements.forEach(t=>Sn(s,t,[]).push(e)),p.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),void p.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=c.get(e);r||c.set(e,r=new Set),n.forEach(t=>r.add(t))}));w.push(p)});if(w.length){const t=[];w.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),_.forEach(t=>t.destroy()),this.reportError(t)}const x=new Map,S=new Map;o.forEach(t=>{const e=t.element;n.has(e)&&(S.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,x))}),r.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{Sn(x,e,[]).push(t),t.destroy()})});const E=m.filter(t=>Jr(t,a,c)),T=new Map;Xr(T,this.driver,y,c,"*").forEach(t=>{Jr(t,a,c)&&E.push(t)});const M=new Map;d.forEach((t,e)=>{Xr(M,this.driver,new Set(t),a,"!")}),E.forEach(t=>{const e=T.get(t),n=M.get(t);T.set(t,Object.assign(Object.assign({},e),n))});const A=[],C=[],O={};o.forEach(t=>{const{element:e,player:o,instruction:s}=t;if(n.has(e)){if(u.has(e))return o.onDestroy(()=>Wn(e,s.toStyles)),o.disabled=!0,o.overrideTotalTime(s.totalTime),void r.push(o);let t=O;if(S.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=S.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>S.set(e,t))}const n=this._buildAnimation(o.namespaceId,s,x,i,M,T);if(o.setRealPlayer(n),t===O)A.push(o);else{const e=this.playersByElement.get(t);e&&e.length&&(o.parentPlayer=vn(e)),r.push(o)}}else qn(e,s.fromStyles),o.onDestroy(()=>Wn(e,s.toStyles)),C.push(o),u.has(e)&&r.push(o)}),C.forEach(t=>{const e=i.get(t.element);if(e&&e.length){const n=vn(e);t.setRealPlayer(n)}}),r.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let R=0;R<m.length;R++){const t=m[R],e=t.__ng_removed;if(Yr(t,"ng-leave"),e&&e.hasAnimation)continue;let n=[];if(s.size){let e=s.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,".ng-animating",!0);for(let t=0;t<r.length;t++){let e=s.get(r[t]);e&&e.length&&n.push(...e)}}const r=n.filter(t=>!t.destroyed);r.length?$r(this,t,r):this.processLeaveNode(t)}return m.length=0,A.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),A}elementContainsData(t,e){let n=!1;const r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,i){let o=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(o=e)}else{const e=this.playersByElement.get(t);if(e){const t=!i||"void"==i;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&o.push(e)})}}return(n||r)&&(o=o.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),o}_beforeAnimationBuild(t,e,n){const r=e.element,i=e.isRemovalTransition?void 0:t,o=e.isRemovalTransition?void 0:e.triggerName;for(const s of e.timelines){const t=s.element,a=t!==r,c=Sn(n,t,[]);this._getPreviousPlayers(t,a,i,o,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),c.push(t)})}qn(r,e.fromStyles)}_buildAnimation(t,e,n,r,i,o){const s=e.triggerName,a=e.element,c=[],u=new Set,l=new Set,h=e.timelines.map(e=>{const h=e.element;u.add(h);const d=h.__ng_removed;if(d&&d.removedBeforeQueried)return new mn(e.duration,e.delay);const f=h!==a,p=function(t){const e=[];return function t(e,n){for(let r=0;r<e.length;r++){const i=e[r];i instanceof gn?t(i.players,n):n.push(i)}}(t,e),e}((n.get(h)||jr).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),m=i.get(h),g=o.get(h),y=bn(0,this._normalizer,0,e.keyframes,m,g),v=this._buildPlayer(e,y,p);if(e.subTimeline&&r&&l.add(h),f){const e=new Gr(t,s,h);e.setRealPlayer(v),c.push(e)}return v});c.forEach(t=>{Sn(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e),r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e],r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r}(this.playersByQueriedElement,t.element,t))}),u.forEach(t=>Kr(t,"ng-animating"));const d=vn(h);return d.onDestroy(()=>{u.forEach(t=>Yr(t,"ng-animating")),Wn(a,e.toStyles)}),l.forEach(t=>{Sn(r,t,[]).push(d)}),d}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new mn(t.duration,t.delay)}}class Gr{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new mn,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>_n(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Sn(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function Wr(t){return t&&1===t.nodeType}function qr(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function Xr(t,e,n,r,i){const o=[];n.forEach(t=>o.push(qr(t)));const s=[];r.forEach((n,r)=>{const o={};n.forEach(t=>{const n=o[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=Ur,s.push(r))}),t.set(r,o)});let a=0;return n.forEach(t=>qr(t,o[a++])),s}function Zr(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),i=new Map;return e.forEach(t=>{const e=function t(e){if(!e)return 1;let o=i.get(e);if(o)return o;const s=e.parentNode;return o=n.has(s)?s:r.has(s)?1:t(s),i.set(e,o),o}(t);1!==e&&n.get(e).push(t)}),n}function Kr(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function Yr(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function $r(t,e,n){vn(n).onDone(()=>t.processLeaveNode(e))}function Jr(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(t=>i.add(t)):e.set(t,r),n.delete(t),!0}class Qr{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new Vr(t,e,n),this._timelineEngine=new kr(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,r,i){const o=t+"-"+r;let s=this._triggerCache[o];if(!s){const t=[],e=ur(this._driver,i,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);s=function(t,e){return new Pr(t,e)}(r,e),this._triggerCache[o]=s}this._transitionEngine.registerTrigger(e,r,s)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,i]=En(n);this._timelineEngine.command(t,e,i,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,i){if("@"==n.charAt(0)){const[t,r]=En(n);return this._timelineEngine.listen(t,e,r,i)}return this._transitionEngine.listen(t,e,n,r,i)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function ti(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=ni(e[0]),e.length>1&&(r=ni(e[e.length-1]))):e&&(n=ni(e)),n||r?new ei(t,n,r):null}let ei=(()=>{class t{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let i=t.initialStylesByElement.get(e);i||t.initialStylesByElement.set(e,i={}),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&Wn(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Wn(this._element,this._initialStyles),this._endStyles&&(Wn(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(qn(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(qn(this._element,this._endStyles),this._endStyles=null),Wn(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function ni(t){let e=null;const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];ri(i)&&(e=e||{},e[i]=t[i])}return e}function ri(t){return"display"===t||"position"===t}class ii{constructor(t,e,n,r,i,o,s){this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=o,this._onDoneFn=s,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=li(t,"").trim();n.length&&(function(t,e){let n=0;for(let r=0;r<t.length;r++)","===t.charAt(r)&&n++}(n),e=`${n}, ${e}`),ui(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),ci(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){oi(this._element,this._name,"paused")}resume(){oi(this._element,this._name,"running")}setPosition(t){const e=si(this._element,this._name);this._position=t*this._duration,ui(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),ci(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=li(t,"").split(","),r=ai(n,e);r>=0&&(n.splice(r,1),ui(t,"",n.join(",")))}(this._element,this._name))}}function oi(t,e,n){ui(t,"PlayState",n,si(t,e))}function si(t,e){const n=li(t,"");return n.indexOf(",")>0?ai(n.split(","),e):ai([n],e)}function ai(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function ci(t,e,n){n?t.removeEventListener("animationend",e):t.addEventListener("animationend",e)}function ui(t,e,n,r){const i="animation"+e;if(null!=r){const e=t.style[i];if(e.length){const t=e.split(",");t[r]=n,n=t.join(",")}}t.style[i]=n}function li(t,e){return t.style["animation"+e]}class hi{constructor(t,e,n,r,i,o,s,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=s,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=r+i,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new ii(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:rr(this.element,n))})}this.currentSnapshot=t}}class di extends mn{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=Dn(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class fi{constructor(){this._count=0,this._head=document.querySelector("head"),this._warningIssued=!1}validateStyleProperty(t){return In(t)}matchesElement(t,e){return Ln(t,e)}containsElement(t,e){return Pn(t,e)}query(t,e,n){return Nn(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>Dn(t));let r=`@keyframes ${e} {\n`,i="";n.forEach(t=>{i=" ";const e=parseFloat(t.offset);r+=`${i}${100*e}% {\n`,i+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${e}: ${n};\n`)}}),r+=`${i}}\n`}),r+="}\n";const o=document.createElement("style");return o.innerHTML=r,o}animate(t,e,n,r,i,o=[],s){s&&this._notifyFaultyScrubber();const a=o.filter(t=>t instanceof hi),c={};tr(n,r)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>c[t]=e[t])});const u=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=er(t,e,c));if(0==n)return new di(t,u);const l=`gen_css_kf_${this._count++}`,h=this.buildKeyframeElement(t,l,e);document.querySelector("head").appendChild(h);const d=ti(t,e),f=new hi(t,e,l,n,r,i,u,d);return f.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),f}_notifyFaultyScrubber(){this._warningIssued||(console.warn("@angular/animations: please load the web-animations.js polyfill to allow programmatic access...\n","  visit http://bit.ly/IWukam to learn more about using the web-animation-js polyfill."),this._warningIssued=!0)}}class pi{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:rr(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class mi{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(gi().toString()),this._cssKeyframesDriver=new fi}validateStyleProperty(t){return In(t)}matchesElement(t,e){return Ln(t,e)}containsElement(t,e){return Pn(t,e)}query(t,e,n){return Nn(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,r,i,o=[],s){if(!s&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,o);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const c={},u=o.filter(t=>t instanceof pi);tr(n,r)&&u.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>c[t]=e[t])});const l=ti(t,e=er(t,e=e.map(t=>Hn(t,!1)),c));return new pi(t,e,a,l)}}function gi(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}let yi=(()=>{class t extends rn{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:i.Q.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?cn(t):t;return _i(this._renderer,null,e,"register",[n]),new vi(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(i.F),i.Wb(a))},t.\u0275prov=i.Kb({token:t,factory:t.\u0275fac}),t})();class vi extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new bi(this._id,t,e||{},this._renderer)}}class bi{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return _i(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(t){this._command("setPosition",t)}getPosition(){return 0}}function _i(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}let wi=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new xi("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,i=e.id+"-"+this._currentId;this._currentId++,this.engine.register(i,t);const o=e=>{Array.isArray(e)?e.forEach(o):this.engine.registerTrigger(r,i,t,e.name,e)};return e.data.animation.forEach(o),new Si(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(i.F),i.Wb(Qr),i.Wb(i.z))},t.\u0275prov=i.Kb({token:t,factory:t.\u0275fac}),t})();class xi{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,!0)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){"@"==e.charAt(0)&&"@.disabled"==e?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class Si extends xi{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&"@.disabled"==e?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if("@"==e.charAt(0)){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let i=e.substr(1),o="";return"@"!=i.charAt(0)&&([i,o]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,r,i,o,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let Ei=(()=>{class t extends Qr{constructor(t,e,n){super(t.body,e,n)}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(a),i.Wb(jn),i.Wb(Mr))},t.\u0275prov=i.Kb({token:t,factory:t.\u0275fac}),t})();const Ti=new i.q("AnimationModuleType"),Mi=[{provide:jn,useFactory:function(){return"function"==typeof gi()?new mi:new fi}},{provide:Ti,useValue:"BrowserAnimations"},{provide:rn,useClass:yi},{provide:Mr,useFactory:function(){return new Ar}},{provide:Qr,useClass:Ei},{provide:i.F,useFactory:function(t,e,n){return new wi(t,e,n)},deps:[ot,Qr,i.z]}];let Ai=(()=>{class t{}return t.\u0275mod=i.Mb({type:t}),t.\u0275inj=i.Lb({factory:function(e){return new(e||t)},providers:Mi,imports:[Tt]}),t})();const Ci=new i.O("9.2.4"),Oi=new i.q("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let Ri,Ii=(()=>{class t{constructor(t,e,n){this._hasDoneGlobalChecks=!1,this._document=n,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=e,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getDocument(){const t=this._document||document;return"object"==typeof t&&t?t:null}_getWindow(){const t=this._getDocument(),e=(null==t?void 0:t.defaultView)||window;return"object"==typeof e&&e?e:null}_checksAreEnabled(){return Object(i.W)()&&!this._isTestEnv()}_isTestEnv(){const t=this._getWindow();return t&&(t.__karma__||t.jasmine)}_checkDoctypeIsDefined(){const t=this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.doctype),e=this._getDocument();t&&e&&!e.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){const t=!this._checksAreEnabled()||!1===this._sanityChecks||!this._sanityChecks.theme,e=this._getDocument();if(t||!e||!e.body||"function"!=typeof getComputedStyle)return;const n=e.createElement("div");n.classList.add("mat-theme-loaded-marker"),e.body.appendChild(n);const r=getComputedStyle(n);r&&"none"!==r.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),e.body.removeChild(n)}_checkCdkVersionMatch(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.version)&&Ci.full!==nn.full&&console.warn("The Angular Material version ("+Ci.full+") does not match the Angular CDK version ("+nn.full+").\nPlease ensure the versions of these two packages exactly match.")}}return t.\u0275mod=i.Mb({type:t}),t.\u0275inj=i.Lb({factory:function(e){return new(e||t)(i.Wb(en),i.Wb(Oi,8),i.Wb(a,8))},imports:[[Ae],Ae]}),t})();function Li(t){return class extends t{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=Pt(t)}}}function Pi(t,e){return class extends t{constructor(...t){super(...t),this.color=e}get color(){return this._color}set color(t){const n=t||e;n!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),n&&this._elementRef.nativeElement.classList.add(`mat-${n}`),this._color=n)}}}function Ni(t){return class extends t{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Pt(t)}}}try{Ri="undefined"!=typeof Intl}catch(Zz){Ri=!1}class Di{constructor(t,e,n){this._renderer=t,this.element=e,this.config=n,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const ki={enterDuration:450,exitDuration:400},ji=It({passive:!0}),Fi=["mousedown","touchstart"],Ui=["mouseup","mouseleave","touchend","touchcancel"];class Bi{constructor(t,e,n,r){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=kt(n))}fadeInRipple(t,e,n={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),i=Object.assign(Object.assign({},ki),n.animation);n.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);const o=n.radius||function(t,e,n){const r=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),i=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(r*r+i*i)}(t,e,r),s=t-r.left,a=e-r.top,c=i.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=`${s-o}px`,u.style.top=`${a-o}px`,u.style.height=`${2*o}px`,u.style.width=`${2*o}px`,null!=n.color&&(u.style.backgroundColor=n.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u),window.getComputedStyle(u).getPropertyValue("opacity"),u.style.transform="scale(1)";const l=new Di(this,u,n);return l.state=0,this._activeRipples.add(l),n.persistent||(this._mostRecentTransientRipple=l),this._runTimeoutOutsideZone(()=>{const t=l===this._mostRecentTransientRipple;l.state=1,n.persistent||t&&this._isPointerDown||l.fadeOut()},c),l}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const n=t.element,r=Object.assign(Object.assign({},ki),t.config.animation);n.style.transitionDuration=`${r.exitDuration}ms`,n.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,n.parentNode.removeChild(n)},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}setupTriggerEvents(t){const e=kt(t);e&&e!==this._triggerElement&&(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(Fi))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Ui),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const e=Ye(t),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;this._target.rippleDisabled||e||n||(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let t=0;t<e.length;t++)this.fadeInRipple(e[t].clientX,e[t].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(t=>{this._triggerElement.addEventListener(t,this,ji)})})}_removeTriggerEvents(){this._triggerElement&&(Fi.forEach(t=>{this._triggerElement.removeEventListener(t,this,ji)}),this._pointerUpEventsRegistered&&Ui.forEach(t=>{this._triggerElement.removeEventListener(t,this,ji)}))}}const zi=new i.q("mat-ripple-global-options");let Hi=(()=>{class t{constructor(t,e,n,r,i){this._elementRef=t,this._animationMode=i,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=r||{},this._rippleRenderer=new Bi(this,e,t,n)}get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,e=0,n){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,e,Object.assign(Object.assign({},this.rippleConfig),n)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return t.\u0275fac=function(e){return new(e||t)(i.Ob(i.l),i.Ob(i.z),i.Ob(Ot),i.Ob(zi,8),i.Ob(Ti,8))},t.\u0275dir=i.Jb({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,e){2&t&&i.Eb("mat-ripple-unbounded",e.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),t})(),Vi=(()=>{class t{}return t.\u0275mod=i.Mb({type:t}),t.\u0275inj=i.Lb({factory:function(e){return new(e||t)},imports:[[Ii,Rt],Ii]}),t})();const Gi=["*"];function Wi(t,e){if(1&t){const t=i.Tb();i.Sb(0,"div",2),i.ac("click",(function(){return i.qc(t),i.ec()._onBackdropClicked()})),i.Rb()}if(2&t){const t=i.ec();i.Eb("mat-drawer-shown",t._isShowingBackdrop())}}function qi(t,e){1&t&&(i.Sb(0,"mat-drawer-content"),i.hc(1,2),i.Rb())}const Xi=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],Zi=["mat-drawer","mat-drawer-content","*"],Ki={transformDrawer:on("transform",[ln("open, open-instant",un({transform:"none",visibility:"visible"})),ln("void",un({"box-shadow":"none",visibility:"hidden"})),hn("void => open-instant",sn("0ms")),hn("void <=> open, open-instant => void",sn("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])};function Yi(t){throw Error(`A drawer was already declared for 'position="${t}"'`)}const $i=new i.q("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function(){return!1}}),Ji=new i.q("MAT_DRAWER_CONTAINER");let Qi=(()=>{class t extends Re{constructor(t,e,n,r,i){super(n,r,i),this._changeDetectorRef=t,this._container=e}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return t.\u0275fac=function(e){return new(e||t)(i.Ob(i.h),i.Ob(Object(i.U)(()=>eo)),i.Ob(i.l),i.Ob(Oe),i.Ob(i.z))},t.\u0275cmp=i.Ib({type:t,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(t,e){2&t&&i.uc("margin-left",e._container._contentMargins.left,"px")("margin-right",e._container._contentMargins.right,"px")},features:[i.zb],ngContentSelectors:Gi,decls:1,vars:0,template:function(t,e){1&t&&(i.ic(),i.hc(0))},encapsulation:2,changeDetection:0}),t})(),to=(()=>{class t{constructor(t,e,n,r,o,s,a){this._elementRef=t,this._focusTrapFactory=e,this._focusMonitor=n,this._platform=r,this._ngZone=o,this._doc=s,this._container=a,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new jt.a,this._animationEnd=new jt.a,this._animationState="void",this.openedChange=new i.n(!0),this._destroyed=new jt.a,this.onPositionChanged=new i.n,this._modeChanged=new jt.a,this.openedChange.subscribe(t=>{t?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._restoreFocus()}),this._ngZone.runOutsideAngular(()=>{Vt(this._elementRef.nativeElement,"keydown").pipe(oe(t=>27===t.keyCode&&!this.disableClose&&!Ne(t)),ce(this._destroyed)).subscribe(t=>this._ngZone.run(()=>{this.close(),t.stopPropagation(),t.preventDefault()}))}),this._animationEnd.pipe(Xt((t,e)=>t.fromState===e.fromState&&t.toState===e.toState)).subscribe(t=>{const{fromState:e,toState:n}=t;(0===n.indexOf("open")&&"void"===e||"void"===n&&0===e.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(t){(t="end"===t?"end":"start")!=this._position&&(this._position=t,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(t){this._mode=t,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(t){this._disableClose=Pt(t)}get autoFocus(){const t=this._autoFocus;return null==t?"side"!==this.mode:t}set autoFocus(t){this._autoFocus=Pt(t)}get opened(){return this._opened}set opened(t){this.toggle(Pt(t))}get _openedStream(){return this.openedChange.pipe(oe(t=>t),Object(Ht.a)(()=>{}))}get openedStart(){return this._animationStarted.pipe(oe(t=>t.fromState!==t.toState&&0===t.toState.indexOf("open")),Object(Ht.a)(()=>{}))}get _closedStream(){return this.openedChange.pipe(oe(t=>!t),Object(Ht.a)(()=>{}))}get closedStart(){return this._animationStarted.pipe(oe(t=>t.fromState!==t.toState&&"void"===t.toState),Object(Ht.a)(()=>{}))}_takeFocus(){this.autoFocus&&this._focusTrap&&this._focusTrap.focusInitialElementWhenReady().then(t=>{t||"function"!=typeof this._elementRef.nativeElement.focus||this._elementRef.nativeElement.focus()})}_restoreFocus(){if(!this.autoFocus)return;const t=this._doc&&this._doc.activeElement;t&&this._elementRef.nativeElement.contains(t)&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,this._openedVia):this._elementRef.nativeElement.blur()),this._elementFocusedBeforeDrawerWasOpened=null,this._openedVia=null}ngAfterContentInit(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState()}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(t){return this.toggle(!0,t)}close(){return this.toggle(!1)}toggle(t=!this.opened,e="program"){return this._opened=t,t?(this._animationState=this._enableAnimations?"open":"open-instant",this._openedVia=e):(this._animationState="void",this._restoreFocus()),this._updateFocusTrapState(),new Promise(t=>{this.openedChange.pipe(He(1)).subscribe(e=>t(e?"open":"close"))})}get _width(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_animationStartListener(t){this._animationStarted.next(t)}_animationDoneListener(t){this._animationEnd.next(t)}}return t.\u0275fac=function(e){return new(e||t)(i.Ob(i.l),i.Ob(Ke),i.Ob(Qe),i.Ob(Ot),i.Ob(i.z),i.Ob(a,8),i.Ob(Ji,8))},t.\u0275cmp=i.Ib({type:t,selectors:[["mat-drawer"]],hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(t,e){1&t&&i.Fb("@transform.start",(function(t){return e._animationStartListener(t)}))("@transform.done",(function(t){return e._animationDoneListener(t)})),2&t&&(i.Db("align",null),i.Ac("@transform",e._animationState),i.Eb("mat-drawer-end","end"===e.position)("mat-drawer-over","over"===e.mode)("mat-drawer-push","push"===e.mode)("mat-drawer-side","side"===e.mode)("mat-drawer-opened",e.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",onPositionChanged:"positionChanged",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart"},exportAs:["matDrawer"],ngContentSelectors:Gi,decls:2,vars:0,consts:[[1,"mat-drawer-inner-container"]],template:function(t,e){1&t&&(i.ic(),i.Sb(0,"div",0),i.hc(1),i.Rb())},encapsulation:2,data:{animation:[Ki.transformDrawer]},changeDetection:0}),t})(),eo=(()=>{class t{constructor(t,e,n,r,o,s=!1,a){this._dir=t,this._element=e,this._ngZone=n,this._changeDetectorRef=r,this._animationMode=a,this._drawers=new i.D,this.backdropClick=new i.n,this._destroyed=new jt.a,this._doCheckSubject=new jt.a,this._contentMargins={left:null,right:null},this._contentMarginChanges=new jt.a,t&&t.change.pipe(ce(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),o.change().pipe(ce(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=s}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(t){this._autosize=Pt(t)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(t){this._backdropOverride=null==t?null:Pt(t)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe(pe(this._allDrawers),ce(this._destroyed)).subscribe(t=>{this._drawers.reset(t.filter(t=>!t._container||t._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(pe(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(t=>{this._watchDrawerToggle(t),this._watchDrawerPosition(t),this._watchDrawerMode(t)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._doCheckSubject.pipe(ke(10),ce(this._destroyed)).subscribe(()=>this.updateContentMargins())}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(t=>t.open())}close(){this._drawers.forEach(t=>t.close())}updateContentMargins(){let t=0,e=0;if(this._left&&this._left.opened)if("side"==this._left.mode)t+=this._left._width;else if("push"==this._left.mode){const n=this._left._width;t+=n,e-=n}if(this._right&&this._right.opened)if("side"==this._right.mode)e+=this._right._width;else if("push"==this._right.mode){const n=this._right._width;e+=n,t-=n}t=t||null,e=e||null,t===this._contentMargins.left&&e===this._contentMargins.right||(this._contentMargins={left:t,right:e},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(t){t._animationStarted.pipe(oe(t=>t.fromState!==t.toState),ce(this._drawers.changes)).subscribe(t=>{"open-instant"!==t.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==t.mode&&t.openedChange.pipe(ce(this._drawers.changes)).subscribe(()=>this._setContainerClass(t.opened))}_watchDrawerPosition(t){t&&t.onPositionChanged.pipe(ce(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.asObservable().pipe(He(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(t){t&&t._modeChanged.pipe(ce(Object(Gt.a)(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(t){const e=this._element.nativeElement.classList,n="mat-drawer-container-has-open";t?e.add(n):e.remove(n)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(t=>{"end"==t.position?(null!=this._end&&Yi("end"),this._end=t):(null!=this._start&&Yi("start"),this._start=t)}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawer()}_closeModalDrawer(){[this._start,this._end].filter(t=>t&&!t.disableClose&&this._canHaveBackdrop(t)).forEach(t=>t.close())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(t){return"side"!==t.mode||!!this._backdropOverride}_isDrawerOpen(t){return null!=t&&t.opened}}return t.\u0275fac=function(e){return new(e||t)(i.Ob(Me,8),i.Ob(i.l),i.Ob(i.z),i.Ob(i.h),i.Ob(Ie),i.Ob($i),i.Ob(Ti,8))},t.\u0275cmp=i.Ib({type:t,selectors:[["mat-drawer-container"]],contentQueries:function(t,e,n){var r;1&t&&(i.Gb(n,Qi,!0),i.Gb(n,to,!0)),2&t&&(i.nc(r=i.bc())&&(e._content=r.first),i.nc(r=i.bc())&&(e._allDrawers=r))},viewQuery:function(t,e){var n;1&t&&i.Bc(Qi,!0),2&t&&i.nc(n=i.bc())&&(e._userContent=n.first)},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(t,e){2&t&&i.Eb("mat-drawer-container-explicit-backdrop",e._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[i.Bb([{provide:Ji,useExisting:t}])],ngContentSelectors:Zi,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(t,e){1&t&&(i.ic(Xi),i.vc(0,Wi,1,2,"div",0),i.hc(1),i.hc(2,1),i.vc(3,qi,2,0,"mat-drawer-content",1)),2&t&&(i.jc("ngIf",e.hasBackdrop),i.Cb(3),i.jc("ngIf",!e._content))},directives:[L,Qi],styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n"],encapsulation:2,changeDetection:0}),t})(),no=(()=>{class t{}return t.\u0275mod=i.Mb({type:t}),t.\u0275inj=i.Lb({factory:function(e){return new(e||t)},imports:[[B,Ii,Rt,Le],Le,Ii]}),t})();const ro=["*",[["mat-toolbar-row"]]],io=["*","mat-toolbar-row"];class oo{constructor(t){this._elementRef=t}}const so=Pi(oo);let ao=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=i.Jb({type:t,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),t})(),co=(()=>{class t extends so{constructor(t,e,n){super(t),this._platform=e,this._document=n}ngAfterViewInit(){Object(i.W)()&&this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length&&Array.from(this._elementRef.nativeElement.childNodes).filter(t=>!(t.classList&&t.classList.contains("mat-toolbar-row"))).filter(t=>t.nodeType!==(this._document?this._document.COMMENT_NODE:8)).some(t=>!(!t.textContent||!t.textContent.trim()))&&function(){throw Error("MatToolbar: Attempting to combine different toolbar modes. Either specify multiple `<mat-toolbar-row>` elements explicitly or just place content inside of a `<mat-toolbar>` for a single row.")}()}}return t.\u0275fac=function(e){return new(e||t)(i.Ob(i.l),i.Ob(Ot),i.Ob(a))},t.\u0275cmp=i.Ib({type:t,selectors:[["mat-toolbar"]],contentQueries:function(t,e,n){var r;1&t&&i.Gb(n,ao,!0),2&t&&i.nc(r=i.bc())&&(e._toolbarRows=r)},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,e){2&t&&i.Eb("mat-toolbar-multiple-rows",e._toolbarRows.length>0)("mat-toolbar-single-row",0===e._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[i.zb],ngContentSelectors:io,decls:2,vars:0,template:function(t,e){1&t&&(i.ic(ro),i.hc(0),i.hc(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}.mat-toolbar-multiple-rows{min-height:64px}.mat-toolbar-row,.mat-toolbar-single-row{height:64px}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:56px}.mat-toolbar-row,.mat-toolbar-single-row{height:56px}}\n"],encapsulation:2,changeDetection:0}),t})(),uo=(()=>{class t{}return t.\u0275mod=i.Mb({type:t}),t.\u0275inj=i.Lb({factory:function(e){return new(e||t)},imports:[[Ii],Ii]}),t})();const lo=["mat-button",""],ho=["*"],fo=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"];class po{constructor(t){this._elementRef=t}}const mo=Pi(Li(Ni(po)));let go=(()=>{class t extends mo{constructor(t,e,n){super(t),this._focusMonitor=e,this._animationMode=n,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const r of fo)this._hasHostAttributes(r)&&this._getHostElement().classList.add(r);t.nativeElement.classList.add("mat-button-base"),this._focusMonitor.monitor(this._elementRef,!0),this.isRoundButton&&(this.color="accent")}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t="program",e){this._focusMonitor.focusVia(this._getHostElement(),t,e)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(t=>this._getHostElement().hasAttribute(t))}}return t.\u0275fac=function(e){return new(e||t)(i.Ob(i.l),i.Ob(Qe),i.Ob(Ti,8))},t.\u0275cmp=i.Ib({type:t,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,e){var n;1&t&&i.Bc(Hi,!0),2&t&&i.nc(n=i.bc())&&(e.ripple=n.first)},hostAttrs:[1,"mat-focus-indicator"],hostVars:3,hostBindings:function(t,e){2&t&&(i.Db("disabled",e.disabled||null),i.Eb("_mat-animation-noopable","NoopAnimations"===e._animationMode))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[i.zb],attrs:lo,ngContentSelectors:ho,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,e){1&t&&(i.ic(),i.Sb(0,"span",0),i.hc(1),i.Rb(),i.Pb(2,"div",1),i.Pb(3,"div",2)),2&t&&(i.Cb(2),i.Eb("mat-button-ripple-round",e.isRoundButton||e.isIconButton),i.jc("matRippleDisabled",e._isRippleDisabled())("matRippleCentered",e.isIconButton)("matRippleTrigger",e._getHostElement()))},directives:[Hi],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover .mat-button-focus-overlay,.mat-stroked-button:hover .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover .mat-button-focus-overlay,.mat-stroked-button:hover .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button[disabled],.mat-icon-button[disabled],.mat-stroked-button[disabled],.mat-flat-button[disabled]{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button[disabled]{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab[disabled]{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab[disabled]{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.cdk-high-contrast-active .mat-button-focus-overlay{background-color:#fff}.cdk-high-contrast-black-on-white .mat-button-focus-overlay{background-color:#000}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:block;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}\n"],encapsulation:2,changeDetection:0}),t})(),yo=(()=>{class t{}return t.\u0275mod=i.Mb({type:t}),t.\u0275inj=i.Lb({factory:function(e){return new(e||t)},imports:[[Vi,Ii],Ii]}),t})(),vo=0,bo=(()=>{class t{constructor(){this._stateChanges=new jt.a,this._openCloseAllActions=new jt.a,this.id=`cdk-accordion-${vo++}`,this._multi=!1}get multi(){return this._multi}set multi(t){this._multi=Pt(t)}openAll(){this._openCloseAll(!0)}closeAll(){this._openCloseAll(!1)}ngOnChanges(t){this._stateChanges.next(t)}ngOnDestroy(){this._stateChanges.complete()}_openCloseAll(t){this.multi&&this._openCloseAllActions.next(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=i.Jb({type:t,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:"multi"},exportAs:["cdkAccordion"],features:[i.Ab]}),t})(),_o=0,wo=(()=>{class t{constructor(t,e,n){this.accordion=t,this._changeDetectorRef=e,this._expansionDispatcher=n,this._openCloseAllSubscription=Wt.a.EMPTY,this.closed=new i.n,this.opened=new i.n,this.destroyed=new i.n,this.expandedChange=new i.n,this.id=`cdk-accordion-child-${_o++}`,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=n.listen((t,e)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===e&&this.id!==t&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(t){t=Pt(t),this._expanded!==t&&(this._expanded=t,this.expandedChange.emit(t),t?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){this._disabled=Pt(t)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(t=>{this.disabled||(this.expanded=t)})}}return t.\u0275fac=function(e){return new(e||t)(i.Ob(bo,12),i.Ob(i.h),i.Ob(Ce))},t.\u0275dir=i.Jb({type:t,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[i.Bb([{provide:bo,useValue:void 0}])]}),t})(),xo=(()=>{class t{}return t.\u0275mod=i.Mb({type:t}),t.\u0275inj=i.Lb({factory:function(e){return new(e||t)}}),t})();function So(){throw Error("Host already has a portal attached")}class Eo{attach(t){return null==t&&function(){throw Error("Attempting to attach a portal to a null PortalOutlet")}(),t.hasAttached()&&So(),this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null==t?function(){throw Error("Attempting to detach a portal that is not attached to a host")}():(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class To extends Eo{constructor(t,e,n,r){super(),this.component=t,this.viewContainerRef=e,this.injector=n,this.componentFactoryResolver=r}}class Mo extends Eo{constructor(t,e,n){super(),this.templateRef=t,this.viewContainerRef=e,this.context=n}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class Ao extends Eo{constructor(t){super(),this.element=t instanceof i.l?t.nativeElement:t}}class Co{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t||function(){throw Error("Must provide a portal to attach")}(),this.hasAttached()&&So(),this._isDisposed&&function(){throw Error("This PortalOutlet has already been disposed")}(),t instanceof To?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof Mo?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof Ao?(this._attachedPortal=t,this.attachDomPortal(t)):void function(){throw Error("Attempting to attach an unknown Portal type. BasePortalOutlet accepts either a ComponentPortal or a TemplatePortal.")}()}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Oo extends Co{constructor(t,e,n,r,i){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=n,this._defaultInjector=r,this.attachDomPortal=t=>{if(!this._document)throw Error("Cannot attach DOM portal without _document constructor parameter");const e=t.element;if(!e.parentNode)throw Error("DOM portal content must be attached to a parent node.");const n=this._document.createComment("dom-portal");e.parentNode.insertBefore(n,e),this.outletElement.appendChild(e),super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(e,n)})},this._document=i}attachComponentPortal(t){const e=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let n;return t.viewContainerRef?(n=t.viewContainerRef.createComponent(e,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>n.destroy())):(n=e.create(t.injector||this._defaultInjector),this._appRef.attachView(n.hostView),this.setDisposeFn(()=>{this._appRef.detachView(n.hostView),n.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(n)),n}attachTemplatePortal(t){let e=t.viewContainerRef,n=e.createEmbeddedView(t.templateRef,t.context);return n.detectChanges(),n.rootNodes.forEach(t=>this.outletElement.appendChild(t)),this.setDisposeFn(()=>{let t=e.indexOf(n);-1!==t&&e.remove(t)}),n}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let Ro=(()=>{class t extends Co{constructor(t,e,n){super(),this._componentFactoryResolver=t,this._viewContainerRef=e,this._isInitialized=!1,this.attached=new i.n,this.attachDomPortal=t=>{if(!this._document)throw Error("Cannot attach DOM portal without _document constructor parameter");const e=t.element;if(!e.parentNode)throw Error("DOM portal content must be attached to a parent node.");const n=this._document.createComment("dom-portal");t.setAttachedHost(this),e.parentNode.insertBefore(n,e),this._getRootNode().appendChild(e),super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(e,n)})},this._document=n}get portal(){return this._attachedPortal}set portal(t){(!this.hasAttached()||t||this._isInitialized)&&(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const e=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,n=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),r=e.createComponent(n,e.length,t.injector||e.injector);return e!==this._viewContainerRef&&this._getRootNode().appendChild(r.hostView.rootNodes[0]),super.setDisposeFn(()=>r.destroy()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}attachTemplatePortal(t){t.setAttachedHost(this);const e=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=e,this.attached.emit(e),e}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return t.\u0275fac=function(e){return new(e||t)(i.Ob(i.j),i.Ob(i.P),i.Ob(a))},t.\u0275dir=i.Jb({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[i.zb]}),t})(),Io=(()=>{class t{}return t.\u0275mod=i.Mb({type:t}),t.\u0275inj=i.Lb({factory:function(e){return new(e||t)}}),t})();const Lo=["body"];function Po(t,e){}const No=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],Do=["mat-expansion-panel-header","*","mat-action-row"],ko=function(t,e){return{collapsedHeight:t,expandedHeight:e}},jo=function(t,e){return{value:t,params:e}};function Fo(t,e){if(1&t&&i.Pb(0,"span",2),2&t){const t=i.ec();i.jc("@indicatorRotate",t._getExpandedState())}}const Uo=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],Bo=["mat-panel-title","mat-panel-description","*"],zo=new i.q("MAT_ACCORDION"),Ho={indicatorRotate:on("indicatorRotate",[ln("collapsed, void",un({transform:"rotate(0deg)"})),ln("expanded",un({transform:"rotate(180deg)"})),hn("expanded <=> collapsed, void => collapsed",sn("225ms cubic-bezier(0.4,0.0,0.2,1)"))]),expansionHeaderHeight:on("expansionHeight",[ln("collapsed, void",un({height:"{{collapsedHeight}}"}),{params:{collapsedHeight:"48px"}}),ln("expanded",un({height:"{{expandedHeight}}"}),{params:{expandedHeight:"64px"}}),hn("expanded <=> collapsed, void => collapsed",an([fn("@indicatorRotate",dn(),{optional:!0}),sn("225ms cubic-bezier(0.4,0.0,0.2,1)")]))]),bodyExpansion:on("bodyExpansion",[ln("collapsed, void",un({height:"0px",visibility:"hidden"})),ln("expanded",un({height:"*",visibility:"visible"})),hn("expanded <=> collapsed, void => collapsed",sn("225ms cubic-bezier(0.4,0.0,0.2,1)"))])};let Vo=(()=>{class t{constructor(t){this._template=t}}return t.\u0275fac=function(e){return new(e||t)(i.Ob(i.L))},t.\u0275dir=i.Jb({type:t,selectors:[["ng-template","matExpansionPanelContent",""]]}),t})(),Go=0;const Wo=new i.q("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let qo=(()=>{class t extends wo{constructor(t,e,n,r,o,s,a){super(t,e,n),this._viewContainerRef=r,this._animationMode=s,this._hideToggle=!1,this.afterExpand=new i.n,this.afterCollapse=new i.n,this._inputChanges=new jt.a,this._headerId=`mat-expansion-panel-header-${Go++}`,this._bodyAnimationDone=new jt.a,this.accordion=t,this._document=o,this._bodyAnimationDone.pipe(Xt((t,e)=>t.fromState===e.fromState&&t.toState===e.toState)).subscribe(t=>{"void"!==t.fromState&&("expanded"===t.toState?this.afterExpand.emit():"collapsed"===t.toState&&this.afterCollapse.emit())}),a&&(this.hideToggle=a.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(t){this._hideToggle=Pt(t)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(t){this._togglePosition=t}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this.opened.pipe(pe(null),oe(()=>this.expanded&&!this._portal),He(1)).subscribe(()=>{this._portal=new Mo(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(t){this._inputChanges.next(t)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const t=this._document.activeElement,e=this._body.nativeElement;return t===e||e.contains(t)}return!1}}return t.\u0275fac=function(e){return new(e||t)(i.Ob(zo,12),i.Ob(i.h),i.Ob(Ce),i.Ob(i.P),i.Ob(a),i.Ob(Ti,8),i.Ob(Wo,8))},t.\u0275cmp=i.Ib({type:t,selectors:[["mat-expansion-panel"]],contentQueries:function(t,e,n){var r;1&t&&i.Gb(n,Vo,!0),2&t&&i.nc(r=i.bc())&&(e._lazyContent=r.first)},viewQuery:function(t,e){var n;1&t&&i.Bc(Lo,!0),2&t&&i.nc(n=i.bc())&&(e._body=n.first)},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(t,e){2&t&&i.Eb("mat-expanded",e.expanded)("_mat-animation-noopable","NoopAnimations"===e._animationMode)("mat-expansion-panel-spacing",e._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[i.Bb([{provide:zo,useValue:void 0}]),i.zb,i.Ab],ngContentSelectors:Do,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(t,e){1&t&&(i.ic(No),i.hc(0),i.Sb(1,"div",0,1),i.ac("@bodyExpansion.done",(function(t){return e._bodyAnimationDone.next(t)})),i.Sb(3,"div",2),i.hc(4,1),i.vc(5,Po,0,0,"ng-template",3),i.Rb(),i.hc(6,2),i.Rb()),2&t&&(i.Cb(1),i.jc("@bodyExpansion",e._getExpandedState())("id",e.id),i.Db("aria-labelledby",e._headerId),i.Cb(4),i.jc("cdkPortalOutlet",e._portal))},directives:[Ro],styles:[".mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row button.mat-button-base,.mat-action-row button.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row button.mat-button-base,[dir=rtl] .mat-action-row button.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[Ho.bodyExpansion]},changeDetection:0}),t})(),Xo=(()=>{class t{constructor(t,e,n,r,i){this.panel=t,this._element=e,this._focusMonitor=n,this._changeDetectorRef=r,this._parentChangeSubscription=Wt.a.EMPTY,this._animationsDisabled=!0;const o=t.accordion?t.accordion._stateChanges.pipe(oe(t=>!(!t.hideToggle&&!t.togglePosition))):ze.a;this._parentChangeSubscription=Object(Gt.a)(t.opened,t.closed,o,t._inputChanges.pipe(oe(t=>!!(t.hideToggle||t.disabled||t.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),t.closed.pipe(oe(()=>t._containsFocus())).subscribe(()=>n.focusVia(e,"program")),n.monitor(e).subscribe(e=>{e&&t.accordion&&t.accordion._handleHeaderFocus(this)}),i&&(this.expandedHeight=i.expandedHeight,this.collapsedHeight=i.collapsedHeight)}_animationStarted(){this._animationsDisabled=!1}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_keydown(t){switch(t.keyCode){case 32:case 13:Ne(t)||(t.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(t))}}focus(t="program",e){this._focusMonitor.focusVia(this._element,t,e)}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return t.\u0275fac=function(e){return new(e||t)(i.Ob(qo,1),i.Ob(i.l),i.Ob(Qe),i.Ob(i.h),i.Ob(Wo,8))},t.\u0275cmp=i.Ib({type:t,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:19,hostBindings:function(t,e){1&t&&(i.Fb("@expansionHeight.start",(function(){return e._animationStarted()})),i.ac("click",(function(){return e._toggle()}))("keydown",(function(t){return e._keydown(t)}))),2&t&&(i.Db("id",e.panel._headerId)("tabindex",e.disabled?-1:0)("aria-controls",e._getPanelId())("aria-expanded",e._isExpanded())("aria-disabled",e.panel.disabled),i.Ac("@.disabled",e._animationsDisabled)("@expansionHeight",i.mc(16,jo,e._getExpandedState(),i.mc(13,ko,e.collapsedHeight,e.expandedHeight))),i.Eb("mat-expanded",e._isExpanded())("mat-expansion-toggle-indicator-after","after"===e._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===e._getTogglePosition()))},inputs:{expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},ngContentSelectors:Bo,decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(t,e){1&t&&(i.ic(Uo),i.Sb(0,"span",0),i.hc(1),i.hc(2,1),i.hc(3,2),i.Rb(),i.vc(4,Fo,1,1,"span",1)),2&t&&(i.Cb(4),i.jc("ngIf",e._showToggle()))},directives:[L],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;position:relative}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}\n'],encapsulation:2,data:{animation:[Ho.indicatorRotate,Ho.expansionHeaderHeight]},changeDetection:0}),t})(),Zo=(()=>{class t{}return t.\u0275mod=i.Mb({type:t}),t.\u0275inj=i.Lb({factory:function(e){return new(e||t)},imports:[[B,xo,Io]]}),t})();class Ko extends jt.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Ee.a;return this._value}next(t){super.next(this._value=t)}}const Yo=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var $o=n("yCtX");const Jo={};class Qo{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new ts(t,this.resultSelector))}}class ts extends $t.a{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Jo),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++){const e=t[n];this.add(Object(Jt.a)(this,e,e,n))}}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n,r,i){const o=this.values,s=this.toRespond?o[n]===Jo?--this.toRespond:this.toRespond:0;o[n]=e,0===s&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}function es(t){return new Ut.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(be.a)(n):Object(ze.b)()).subscribe(e)})}function ns(t){return function(e){return 0===t?Object(ze.b)():e.lift(new rs(t))}}class rs{constructor(t){if(this.total=t,this.total<0)throw new Be}call(t,e){return e.subscribe(new is(t,this.total))}}class is extends qt.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function os(t=cs){return e=>e.lift(new ss(t))}class ss{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new as(t,this.errorFactory))}}class as extends qt.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(cU){t=cU}this.destination.error(t)}}}function cs(){return new Yo}function us(t=null){return e=>e.lift(new ls(t))}class ls{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new hs(t,this.defaultValue))}}class hs extends qt.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var ds=n("SpAZ");function fs(t,e){const n=arguments.length>=2;return r=>r.pipe(t?oe((e,n)=>t(e,n,r)):ds.a,ns(1),n?us(e):os(()=>new Yo))}function ps(t){return function(e){const n=new ms(t),r=e.lift(n);return n.caught=r}}class ms{constructor(t){this.selector=t}call(t,e){return e.subscribe(new gs(t,this.selector,this.caught))}}class gs extends $t.a{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new ve.a(this,void 0,void 0);this.add(r);const i=Object(Jt.a)(this,n,void 0,void 0,r);i!==r&&this.add(i)}}}function ys(t,e){const n=arguments.length>=2;return r=>r.pipe(t?oe((e,n)=>t(e,n,r)):ds.a,He(1),n?us(e):os(()=>new Yo))}var vs=n("5+tZ");class bs{constructor(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}call(t,e){return e.subscribe(new _s(t,this.predicate,this.thisArg,this.source))}}class _s extends qt.a{constructor(t,e,n,r){super(t),this.predicate=e,this.thisArg=n,this.source=r,this.index=0,this.thisArg=n||this}notifyComplete(t){this.destination.next(t),this.destination.complete()}_next(t){let e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}function ws(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new xs(t,e,n))}}class xs{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Ss(t,this.accumulator,this.seed,this.hasSeed))}}class Ss extends qt.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function Es(t,e){return Object(vs.a)(t,e,1)}var Ts=n("mCNh");class Ms{constructor(t){this.callback=t}call(t,e){return e.subscribe(new As(t,this.callback))}}class As extends qt.a{constructor(t,e){super(t),this.add(new Wt.a(e))}}class Cs{constructor(t,e){this.id=t,this.url=e}}class Os extends Cs{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Rs extends Cs{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Is extends Cs{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ls extends Cs{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ps extends Cs{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ns extends Cs{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ds extends Cs{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ks extends Cs{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class js extends Cs{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fs{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Us{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Bs{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zs{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hs{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vs{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gs{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Ws=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Ib({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&i.Pb(0,"router-outlet")},directives:function(){return[qc]},encapsulation:2}),t})();class qs{constructor(t){this.params=t||{}}has(t){return this.params.hasOwnProperty(t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Xs(t){return new qs(t)}function Zs(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Ks(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}class Ys{constructor(t,e){this.routes=t,this.module=e}}function $s(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];Js(r,Qs(e,r))}}function Js(t,e){if(!t)throw new Error(`\n      Invalid configuration of route '${e}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(t))throw new Error(`Invalid configuration of route '${e}': Array cannot be specified`);if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&"primary"!==t.outlet)throw new Error(`Invalid configuration of route '${e}': a componentless route without children or loadChildren cannot have a named outlet set`);if(t.redirectTo&&t.children)throw new Error(`Invalid configuration of route '${e}': redirectTo and children cannot be used together`);if(t.redirectTo&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': redirectTo and loadChildren cannot be used together`);if(t.children&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': children and loadChildren cannot be used together`);if(t.redirectTo&&t.component)throw new Error(`Invalid configuration of route '${e}': redirectTo and component cannot be used together`);if(t.path&&t.matcher)throw new Error(`Invalid configuration of route '${e}': path and matcher cannot be used together`);if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error(`Invalid configuration of route '${e}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===t.path&&void 0===t.matcher)throw new Error(`Invalid configuration of route '${e}': routes must have either a path or a matcher specified`);if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error(`Invalid configuration of route '${e}': path cannot start with a slash`);if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error(`Invalid configuration of route '{path: "${e}", redirectTo: "${t.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error(`Invalid configuration of route '${e}': pathMatch can only be set to 'prefix' or 'full'`);t.children&&$s(t.children,e)}function Qs(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function ta(t){const e=t.children&&t.children.map(ta),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=Ws),n}function ea(t,e){const n=Object.keys(t),r=Object.keys(e);if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!na(t[i],e[i]))return!1;return!0}function na(t,e){return Array.isArray(t)&&Array.isArray(e)?t.length==e.length&&t.every(t=>e.indexOf(t)>-1):t===e}function ra(t){return Array.prototype.concat.apply([],t)}function ia(t){return t.length>0?t[t.length-1]:null}function oa(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function sa(t){return Object(i.sb)(t)?t:Object(i.tb)(t)?Object(be.a)(Promise.resolve(t)):Object(Ft.a)(t)}function aa(t,e,n){return n?function(t,e){return ea(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!ha(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>na(t[n],e[n]))}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,r,i){if(n.segments.length>i.length)return!!ha(n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!ha(n.segments,i))return!1;for(const e in r.children){if(!n.children[e])return!1;if(!t(n.children[e],r.children[e]))return!1}return!0}{const t=i.slice(0,n.segments.length),o=i.slice(n.segments.length);return!!ha(n.segments,t)&&!!n.children.primary&&e(n.children.primary,r,o)}}(e,n,n.segments)}(t.root,e.root)}class ca{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Xs(this.queryParams)),this._queryParamMap}toString(){return ma.serialize(this)}}class ua{constructor(t,e){this.segments=t,this.children=e,this.parent=null,oa(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ga(this)}}class la{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Xs(this.parameters)),this._parameterMap}toString(){return xa(this)}}function ha(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}function da(t,e){let n=[];return oa(t.children,(t,r)=>{"primary"===r&&(n=n.concat(e(t,r)))}),oa(t.children,(t,r)=>{"primary"!==r&&(n=n.concat(e(t,r)))}),n}class fa{}class pa{parse(t){const e=new Aa(t);return new ca(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`${`/${function t(e,n){if(!e.hasChildren())return ga(e);if(n){const n=e.children.primary?t(e.children.primary,!1):"",r=[];return oa(e.children,(e,n)=>{"primary"!==n&&r.push(`${n}:${t(e,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=da(e,(n,r)=>"primary"===r?[t(e.children.primary,!1)]:[`${r}:${t(n,!1)}`]);return`${ga(e)}/(${n.join("//")})`}}(t.root,!0)}`}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${va(e)}=${va(t)}`).join("&"):`${va(e)}=${va(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const ma=new pa;function ga(t){return t.segments.map(t=>xa(t)).join("/")}function ya(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function va(t){return ya(t).replace(/%3B/gi,";")}function ba(t){return ya(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function _a(t){return decodeURIComponent(t)}function wa(t){return _a(t.replace(/\+/g,"%20"))}function xa(t){return`${ba(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${ba(t)}=${ba(e[t])}`).join("")}`;var e}const Sa=/^[^\/()?;=#]+/;function Ea(t){const e=t.match(Sa);return e?e[0]:""}const Ta=/^[^=?&#]+/,Ma=/^[^?&#]+/;class Aa{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ua([],{}):new ua([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new ua(t,e)),n}parseSegment(){const t=Ea(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new la(_a(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Ea(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Ea(this.remaining);t&&(n=t,this.capture(n))}t[_a(e)]=_a(n)}parseQueryParam(t){const e=function(t){const e=t.match(Ta);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Ma);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=wa(e),i=wa(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Ea(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i="primary");const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new ua([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Ca{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Oa(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Oa(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Ra(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Ra(t,this._root).map(t=>t.value)}}function Oa(t,e){if(t===e.value)return e;for(const n of e.children){const e=Oa(t,n);if(e)return e}return null}function Ra(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Ra(t,n);if(r.length)return r.unshift(e),r}return[]}class Ia{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function La(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Pa extends Ca{constructor(t,e){super(t),this.snapshot=e,Ua(this,t)}toString(){return this.snapshot.toString()}}function Na(t,e){const n=function(t,e){const n=new ja([],{},{},"",{},"primary",e,null,t.root,-1,{});return new Fa("",new Ia(n,[]))}(t,e),r=new Ko([new la("",{})]),i=new Ko({}),o=new Ko({}),s=new Ko({}),a=new Ko(""),c=new Da(r,i,s,a,o,"primary",e,n.root);return c.snapshot=n.root,new Pa(new Ia(c,[]),n)}class Da{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(Ht.a)(t=>Xs(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(Ht.a)(t=>Xs(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ka(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class ja{constructor(t,e,n,r,i,o,s,a,c,u,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=c,this._lastPathIndex=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Xs(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Xs(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Fa extends Ca{constructor(t,e){super(e),this.url=t,Ua(this,e)}toString(){return Ba(this._root)}}function Ua(t,e){e.value._routerState=t,e.children.forEach(e=>Ua(t,e))}function Ba(t){const e=t.children.length>0?` { ${t.children.map(Ba).join(", ")} } `:"";return`${t.value}${e}`}function za(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,ea(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),ea(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!ea(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),ea(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Ha(t,e){return ea(t.params,e.params)&&function(t,e){return ha(t,e)&&t.every((t,n)=>ea(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||Ha(t.parent,e.parent))}function Va(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Ga(t,e,n,r,i){let o={};return r&&oa(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new ca(n.root===t?e:function t(e,n,r){const i={};return oa(e.children,(e,o)=>{i[o]=e===n?r:t(e,n,r)}),new ua(e.segments,i)}(n.root,t,e),o,i)}class Wa{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Va(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(t=>"object"==typeof t&&null!=t&&t.outlets);if(r&&r!==ia(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class qa{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Xa(t){return"object"==typeof t&&null!=t&&t.outlets?t.outlets.primary:`${t}`}function Za(t,e,n){if(t||(t=new ua([],{})),0===t.segments.length&&t.hasChildren())return Ka(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=Xa(n[r]),a=r<n.length-1?n[r+1]:null;if(i>0&&void 0===s)break;if(s&&a&&"object"==typeof a&&void 0===a.outlets){if(!Qa(s,a,e))return o;r+=2}else{if(!Qa(s,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new ua(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new ua(t.segments.slice(r.pathIndex),t.children),Ka(e,0,i)}return r.match&&0===i.length?new ua(t.segments,{}):r.match&&!t.hasChildren()?Ya(t,e,n):r.match?Ka(t,0,i):Ya(t,e,n)}function Ka(t,e,n){if(0===n.length)return new ua(t.segments,{});{const r=function(t){return"object"!=typeof t[0]?{primary:t}:void 0===t[0].outlets?{primary:t}:t[0].outlets}(n),i={};return oa(r,(n,r)=>{null!==n&&(i[r]=Za(t.children[r],e,n))}),oa(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new ua(t.segments,i)}}function Ya(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){if("object"==typeof n[i]&&void 0!==n[i].outlets){const t=$a(n[i].outlets);return new ua(r,t)}if(0===i&&Va(n[0])){r.push(new la(t.segments[e].path,n[0])),i++;continue}const o=Xa(n[i]),s=i<n.length-1?n[i+1]:null;o&&s&&Va(s)?(r.push(new la(o,Ja(s))),i+=2):(r.push(new la(o,{})),i++)}return new ua(r,{})}function $a(t){const e={};return oa(t,(t,n)=>{null!==t&&(e[n]=Ya(new ua([],{}),0,t))}),e}function Ja(t){const e={};return oa(t,(t,n)=>e[n]=`${t}`),e}function Qa(t,e,n){return t==n.path&&ea(e,n.parameters)}class tc{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),za(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=La(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),oa(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet);if(n){const r=La(t),i=t.value.component?n.children:e;oa(r,(t,e)=>this.deactivateRouteAndItsChildren(t,i)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(t,e,n){const r=La(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Vs(t.value.snapshot))}),t.children.length&&this.forwardEvent(new zs(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(za(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),ec(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function ec(t){za(t.value),t.children.forEach(ec)}function nc(t){return"function"==typeof t}function rc(t){return t instanceof ca}class ic{constructor(t){this.segmentGroup=t||null}}class oc{constructor(t){this.urlTree=t}}function sc(t){return new Ut.a(e=>e.error(new ic(t)))}function ac(t){return new Ut.a(e=>e.error(new oc(t)))}function cc(t){return new Ut.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class uc{constructor(t,e,n,r,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(i.x)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,"primary").pipe(Object(Ht.a)(t=>this.createUrlTree(t,this.urlTree.queryParams,this.urlTree.fragment))).pipe(ps(t=>{if(t instanceof oc)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof ic)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,"primary").pipe(Object(Ht.a)(e=>this.createUrlTree(e,t.queryParams,t.fragment))).pipe(ps(t=>{if(t instanceof ic)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new ua([],{primary:t}):t;return new ca(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(Ht.a)(t=>new ua([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){return function(t,e){if(0===Object.keys(t).length)return Object(Ft.a)({});const n=[],r=[],i={};return oa(t,(t,o)=>{const s=e(o,t).pipe(Object(Ht.a)(t=>i[o]=t));"primary"===o?n.push(s):r.push(s)}),Ft.a.apply(null,n.concat(r)).pipe(de(),fs(),Object(Ht.a)(()=>i))}(n.children,(n,r)=>this.expandSegmentGroup(t,e,r,n))}expandSegment(t,e,n,r,i,o){return Object(Ft.a)(...n).pipe(Object(Ht.a)(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(ps(t=>{if(t instanceof ic)return Object(Ft.a)(null);throw t}))),de(),ys(t=>!!t),ps((t,n)=>{if(t instanceof Yo||"EmptyError"===t.name){if(this.noLeftoversInUrl(e,r,i))return Object(Ft.a)(new ua([],{}));throw new ic(e)}throw t}))}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return fc(r)!==o?sc(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):sc(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?ac(i):this.lineralizeSegments(n,i).pipe(Object(vs.a)(n=>{const i=new ua(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:c,positionalParamSegments:u}=lc(e,r,i);if(!s)return sc(e);const l=this.applyRedirectCommands(a,r.redirectTo,u);return r.redirectTo.startsWith("/")?ac(l):this.lineralizeSegments(r,l).pipe(Object(vs.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(c)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(Object(Ht.a)(t=>(n._loadedConfig=t,new ua(r,{})))):Object(Ft.a)(new ua(r,{}));const{matched:i,consumedSegments:o,lastChild:s}=lc(e,n,r);if(!i)return sc(e);const a=r.slice(s);return this.getChildConfig(t,n,r).pipe(Object(vs.a)(t=>{const n=t.module,r=t.routes,{segmentGroup:i,slicedSegments:s}=function(t,e,n,r){return n.length>0&&function(t,e,n){return n.some(n=>dc(t,e,n)&&"primary"!==fc(n))}(t,n,r)?{segmentGroup:hc(new ua(e,function(t,e){const n={};n.primary=e;for(const r of t)""===r.path&&"primary"!==fc(r)&&(n[fc(r)]=new ua([],{}));return n}(r,new ua(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return n.some(n=>dc(t,e,n))}(t,n,r)?{segmentGroup:hc(new ua(t.segments,function(t,e,n,r){const i={};for(const o of n)dc(t,e,o)&&!r[fc(o)]&&(i[fc(o)]=new ua([],{}));return Object.assign(Object.assign({},r),i)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,o,a,r);return 0===s.length&&i.hasChildren()?this.expandChildren(n,r,i).pipe(Object(Ht.a)(t=>new ua(o,t))):0===r.length&&0===s.length?Object(Ft.a)(new ua(o,{})):this.expandSegment(n,i,r,s,"primary",!0).pipe(Object(Ht.a)(t=>new ua(o.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(Ft.a)(new Ys(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(Ft.a)(e._loadedConfig):function(t,e,n){const r=e.canLoad;return r&&0!==r.length?Object(be.a)(r).pipe(Object(Ht.a)(r=>{const i=t.get(r);let o;if(function(t){return t&&nc(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!nc(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return sa(o)})).pipe(de(),(i=t=>!0===t,t=>t.lift(new bs(i,void 0,t)))):Object(Ft.a)(!0);var i}(t.injector,e,n).pipe(Object(vs.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(Ht.a)(t=>(e._loadedConfig=t,t))):function(t){return new Ut.a(e=>e.error(Zs(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(Ft.a)(new Ys([],t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(Ft.a)(n);if(r.numberOfChildren>1||!r.children.primary)return cc(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new ca(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return oa(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return oa(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new ua(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function lc(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const r=(e.matcher||Ks)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function hc(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new ua(t.segments.concat(e.segments),e.children)}return t}function dc(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function fc(t){return t.outlet||"primary"}class pc{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class mc{constructor(t,e){this.component=t,this.route=e}}function gc(t,e,n){const r=t._root;return function t(e,n,r,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=La(n);return e.children.forEach(e=>{!function(e,n,r,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,a=n?n.value:null,c=r?r.getContext(e.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!ha(t.url,e.url);case"pathParamsOrQueryParamsChange":return!ha(t.url,e.url)||!ea(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ha(t,e)||!ea(t.queryParams,e.queryParams);case"paramsChange":default:return!Ha(t,e)}}(a,s,s.routeConfig.runGuardsAndResolvers);u?o.canActivateChecks.push(new pc(i)):(s.data=a.data,s._resolvedData=a._resolvedData),t(e,n,s.component?c?c.children:null:r,i,o),u&&o.canDeactivateChecks.push(new mc(c&&c.outlet&&c.outlet.component||null,a))}else a&&vc(n,c,o),o.canActivateChecks.push(new pc(i)),t(e,null,s.component?c?c.children:null:r,i,o)}(e,s[e.value.outlet],r,i.concat([e.value]),o),delete s[e.value.outlet]}),oa(s,(t,e)=>vc(t,r.getContext(e),o)),o}(r,e?e._root:null,n,[r.value])}function yc(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function vc(t,e,n){const r=La(t),i=t.value;oa(r,(t,r)=>{vc(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new mc(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}const bc=Symbol("INITIAL_VALUE");function _c(){return _e(t=>function(...t){let e=null,n=null;return Object(ne.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(Bt.a)(t[0])&&(t=t[0]),Object($o.a)(t,n).lift(new Qo(e))}(...t.map(t=>t.pipe(He(1),pe(bc)))).pipe(ws((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==bc)return t;if(r===bc&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||rc(r))return r}return t},t)},bc),oe(t=>t!==bc),Object(Ht.a)(t=>rc(t)?t:!0===t),He(1)))}function wc(t,e){return null!==t&&e&&e(new Hs(t)),Object(Ft.a)(!0)}function xc(t,e){return null!==t&&e&&e(new Bs(t)),Object(Ft.a)(!0)}function Sc(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(Ft.a)(!0);const i=r.map(r=>es(()=>{const i=yc(r,e,n);let o;if(function(t){return t&&nc(t.canActivate)}(i))o=sa(i.canActivate(e,t));else{if(!nc(i))throw new Error("Invalid CanActivate guard");o=sa(i(e,t))}return o.pipe(ys())}));return Object(Ft.a)(i).pipe(_c())}function Ec(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>es(()=>{const i=e.guards.map(i=>{const o=yc(i,e.node,n);let s;if(function(t){return t&&nc(t.canActivateChild)}(o))s=sa(o.canActivateChild(r,t));else{if(!nc(o))throw new Error("Invalid CanActivateChild guard");s=sa(o(r,t))}return s.pipe(ys())});return Object(Ft.a)(i).pipe(_c())}));return Object(Ft.a)(i).pipe(_c())}class Tc{}class Mc{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){try{const t=Oc(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,"primary"),n=new ja([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Ia(n,e),i=new Fa(this.url,r);return this.inheritParamsAndData(i._root),Object(Ft.a)(i)}catch(cU){return new Ut.a(e=>e.error(cU))}}inheritParamsAndData(t){const e=t.value,n=ka(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=da(e,(e,n)=>this.processSegmentGroup(t,e,n));return function(t){const e={};t.forEach(t=>{const n=e[t.value.outlet];if(n){const e=n.url.map(t=>t.toString()).join("/"),r=t.value.url.map(t=>t.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${e}' and '${r}'.`)}e[t.value.outlet]=t.value})}(n),n.sort((t,e)=>"primary"===t.value.outlet?-1:"primary"===e.value.outlet?1:t.value.outlet.localeCompare(e.value.outlet)),n}processSegment(t,e,n,r){for(const i of t)try{return this.processSegmentAgainstRoute(i,e,n,r)}catch(cU){if(!(cU instanceof Tc))throw cU}if(this.noLeftoversInUrl(e,n,r))return[];throw new Tc}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo)throw new Tc;if((t.outlet||"primary")!==r)throw new Tc;let i,o=[],s=[];if("**"===t.path){const o=n.length>0?ia(n).parameters:{};i=new ja(n,o,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Lc(t),r,t.component,t,Ac(e),Cc(e)+n.length,Pc(t))}else{const a=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new Tc;return{consumedSegments:[],lastChild:0,parameters:{}}}const r=(e.matcher||Ks)(n,t,e);if(!r)throw new Tc;const i={};oa(r.posParams,(t,e)=>{i[e]=t.path});const o=r.consumed.length>0?Object.assign(Object.assign({},i),r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o}}(e,t,n);o=a.consumedSegments,s=n.slice(a.lastChild),i=new ja(o,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Lc(t),r,t.component,t,Ac(e),Cc(e)+o.length,Pc(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:c,slicedSegments:u}=Oc(e,o,s,a,this.relativeLinkResolution);if(0===u.length&&c.hasChildren()){const t=this.processChildren(a,c);return[new Ia(i,t)]}if(0===a.length&&0===u.length)return[new Ia(i,[])];const l=this.processSegment(a,c,u,"primary");return[new Ia(i,l)]}}function Ac(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Cc(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Oc(t,e,n,r,i){if(n.length>0&&function(t,e,n){return n.some(n=>Rc(t,e,n)&&"primary"!==Ic(n))}(t,n,r)){const i=new ua(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&"primary"!==Ic(o)){const n=new ua([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[Ic(o)]=n}return i}(t,e,r,new ua(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Rc(t,e,n))}(t,n,r)){const o=new ua(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(Rc(t,n,a)&&!i[Ic(a)]){const n=new ua([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[Ic(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new ua(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function Rc(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function Ic(t){return t.outlet||"primary"}function Lc(t){return t.data||{}}function Pc(t){return t.resolve||{}}function Nc(t,e,n,r){const i=yc(t,e,r);return sa(i.resolve?i.resolve(e,n):i(e,n))}function Dc(t){return function(e){return e.pipe(_e(e=>{const n=t(e);return n?Object(be.a)(n).pipe(Object(Ht.a)(()=>e)):Object(be.a)([e])}))}}class kc{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}const jc=new i.q("ROUTES");class Fc{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(Object(Ht.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new Ys(ra(r.injector.get(jc)).map(ta),r)}))}loadModuleFactory(t){return"string"==typeof t?Object(be.a)(this.loader.load(t)):sa(t()).pipe(Object(vs.a)(t=>t instanceof i.v?Object(Ft.a)(t):Object(be.a)(this.compiler.compileModuleAsync(t))))}}class Uc{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Bc(t){throw t}function zc(t,e,n){return e.parse("/")}function Hc(t,e){return Object(Ft.a)(null)}let Vc=(()=>{class t{constructor(t,e,n,r,o,s,a,c){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=r,this.config=c,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new jt.a,this.errorHandler=Bc,this.malformedUriErrorHandler=zc,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Hc,afterPreactivation:Hc},this.urlHandlingStrategy=new Uc,this.routeReuseStrategy=new kc,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=o.get(i.x),this.console=o.get(i.Z);const u=o.get(i.z);this.isNgZoneEnabled=u instanceof i.z,this.resetConfig(c),this.currentUrlTree=new ca(new ua([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Fc(s,a,t=>this.triggerEvent(new Fs(t)),t=>this.triggerEvent(new Us(t))),this.routerState=Na(this.currentUrlTree,this.rootComponentType),this.transitions=new Ko({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(oe(t=>0!==t.id),Object(Ht.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),_e(t=>{let n=!1,r=!1;return Object(Ft.a)(t).pipe(Object(De.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),_e(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(Ft.a)(t).pipe(_e(t=>{const n=this.transitions.getValue();return e.next(new Os(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?ze.a:[t]}),_e(t=>Promise.resolve(t)),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,function(t){return t.pipe(_e(t=>function(t,e,n,r,i){return new uc(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(Ht.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e})))))}),Object(De.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return function(o){return o.pipe(Object(vs.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){return new Mc(t,e,n,r,i,o).recognize()}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(Ht.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t})))))}}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(De.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),Object(De.a)(t=>{const n=new Ps(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new Os(n,this.serializeUrl(r),i,o);e.next(a);const c=Na(r,this.rootComponentType).snapshot;return Object(Ft.a)(Object.assign(Object.assign({},t),{targetSnapshot:c,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),ze.a}),Dc(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(De.a)(t=>{const e=new Ns(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(Ht.a)(t=>Object.assign(Object.assign({},t),{guards:gc(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return function(n){return n.pipe(Object(vs.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(Ft.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(be.a)(t).pipe(Object(vs.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(Ft.a)(!0);const s=o.map(o=>{const s=yc(o,e,i);let a;if(function(t){return t&&nc(t.canDeactivate)}(s))a=sa(s.canDeactivate(t,e,n,r));else{if(!nc(s))throw new Error("Invalid CanDeactivate guard");a=sa(s(t,e,n,r))}return a.pipe(ys())});return Object(Ft.a)(s).pipe(_c())}(t.component,t.route,n,e,r)),ys(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(vs.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(be.a)(e).pipe(Es(e=>Object(be.a)([xc(e.route.parent,r),wc(e.route,r),Ec(t,e.path,n),Sc(t,e.route,n)]).pipe(de(),ys(t=>!0!==t,!0))),ys(t=>!0!==t,!0))}(r,o,t,e):Object(Ft.a)(n)),Object(Ht.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))}))}}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(De.a)(t=>{if(rc(t.guardsResult)){const e=Zs(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}}),Object(De.a)(t=>{const e=new Ds(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),oe(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Is(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),Dc(t=>{if(t.guards.canActivateChecks.length)return Object(Ft.a)(t).pipe(Object(De.a)(t=>{const e=new ks(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),(e=this.paramsInheritanceStrategy,n=this.ngModule.injector,function(t){return t.pipe(Object(vs.a)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;return i.length?Object(be.a)(i).pipe(Es(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(Ft.a)({});if(1===i.length){const o=i[0];return Nc(t[o],e,n,r).pipe(Object(Ht.a)(t=>({[o]:t})))}const o={};return Object(be.a)(i).pipe(Object(vs.a)(i=>Nc(t[i],e,n,r).pipe(Object(Ht.a)(t=>(o[i]=t,t))))).pipe(fs(),Object(Ht.a)(()=>o))}(t._resolve,t,e,r).pipe(Object(Ht.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),ka(t,n).resolve),null)))}(t.route,r,e,n)),function(t,e){return arguments.length>=2?function(n){return Object(Ts.a)(ws(t,e),ns(1),us(e))(n)}:function(e){return Object(Ts.a)(ws((e,n,r)=>t(e,n,r+1)),ns(1))(e)}}((t,e)=>t),Object(Ht.a)(e=>t)):Object(Ft.a)(t)}))}),Object(De.a)(t=>{const e=new js(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}));var e,n}),Dc(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(Ht.a)(t=>{const e=function(t,e,n){const r=function t(e,n,r){if(r&&e.shouldReuseRoute(n.value,r.value.snapshot)){const i=r.value;i._futureSnapshot=n.value;const o=function(e,n,r){return n.children.map(n=>{for(const i of r.children)if(e.shouldReuseRoute(i.value.snapshot,n.value))return t(e,n,i);return t(e,n)})}(e,n,r);return new Ia(i,o)}{const r=e.retrieve(n.value);if(r){const t=r.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(let r=0;r<e.children.length;++r)t(e.children[r],n.children[r])}(n,t),t}{const r=new Da(new Ko((i=n.value).url),new Ko(i.params),new Ko(i.queryParams),new Ko(i.fragment),new Ko(i.data),i.outlet,i.component,i),o=n.children.map(n=>t(e,n));return new Ia(r,o)}}var i}(t,e._root,n?n._root:void 0);return new Pa(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(De.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),Object(Ht.a)(t=>(new tc(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),Object(De.a)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new Is(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new Ms(i))),ps(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=rc(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Is(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);return this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Ls(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(RR){t.reject(RR)}}var i;return ze.a}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{let e=this.parseUrl(t.url);const n="popstate"===t.type?"popstate":"hashchange",r=t.state&&t.state.navigationId?t.state:null;setTimeout(()=>{this.scheduleNavigation(e,n,r,{replaceUrl:!0})},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){$s(t),this.config=t.map(ta),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:o,preserveQueryParams:s,queryParamsHandling:a,preserveFragment:c}=e;Object(i.W)()&&s&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const u=n||this.routerState.root,l=c?this.currentUrlTree.fragment:o;let h=null;if(a)switch(a){case"merge":h=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=r||null}else h=s?this.currentUrlTree.queryParams:r||null;return null!==h&&(h=this.removeEmptyProps(h)),function(t,e,n,r,i){if(0===n.length)return Ga(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Wa(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return oa(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Wa(n,e,r)}(n);if(o.toRoot())return Ga(e.root,new ua([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new qa(e.root,!0,0);if(-1===n.snapshot._lastPathIndex)return new qa(n.snapshot._urlSegment,!0,0);const r=Va(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new qa(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?Ka(s.segmentGroup,s.index,o.commands):Za(s.segmentGroup,s.index,o.commands);return Ga(s.segmentGroup,a,e,r,i)}(u,this.currentUrlTree,t,h,l)}navigateByUrl(t,e={skipLocationChange:!1}){Object(i.W)()&&this.isNgZoneEnabled&&!i.z.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const n=rc(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(cU){e=this.malformedUriErrorHandler(cU,this.urlSerializer,t)}return e}isActive(t,e){if(rc(t))return aa(this.currentUrlTree,t,e);const n=this.parseUrl(t);return aa(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new Rs(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){const o=this.getTransition();if(o&&"imperative"!==e&&"imperative"===o.source&&o.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(o&&"hashchange"==e&&"popstate"===o.source&&o.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(o&&"popstate"==e&&"hashchange"===o.source&&o.rawUrl.toString()===t.toString())return Promise.resolve(!0);let s,a,c;i?(s=i.resolve,a=i.reject,c=i.promise):c=new Promise((t,e)=>{s=t,a=e});const u=++this.navigationId;return this.setTransition({id:u,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:s,reject:a,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(t){i.Zb()},t.\u0275dir=i.Jb({type:t}),t})();class Gc{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Wc,this.attachRef=null}}class Wc{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Gc,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}let qc=(()=>{class t{constructor(t,e,n,r,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new i.n,this.deactivateEvents=new i.n,this.name=r||"primary",t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Xc(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(i.Ob(Wc),i.Ob(i.P),i.Ob(i.j),i.Xb("name"),i.Ob(i.h))},t.\u0275dir=i.Jb({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class Xc{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Da?this.route:t===Wc?this.childContexts:this.parent.get(t,e)}}class Zc{}class Kc{preload(t,e){return Object(Ft.a)(null)}}let Yc=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Fc(e,n,e=>t.triggerEvent(new Fs(e)),e=>t.triggerEvent(new Us(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(oe(t=>t instanceof Rs),Es(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(i.x);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(be.a)(n).pipe(Object(he.a)(),Object(Ht.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(Object(vs.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(Vc),i.Wb(i.w),i.Wb(i.i),i.Wb(i.r),i.Wb(Zc))},t.\u0275prov=i.Kb({token:t,factory:t.\u0275fac}),t})(),$c=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Os?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Rs&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Gs&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Gs(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(t){i.Zb()},t.\u0275dir=i.Jb({type:t}),t})();const Jc=new i.q("ROUTER_CONFIGURATION"),Qc=new i.q("ROUTER_FORROOT_GUARD"),tu=[x,{provide:fa,useClass:pa},{provide:Vc,useFactory:function(t,e,n,r,i,o,a,c={},u,l){const h=new Vc(null,t,e,n,r,i,o,ra(a));if(u&&(h.urlHandlingStrategy=u),l&&(h.routeReuseStrategy=l),c.errorHandler&&(h.errorHandler=c.errorHandler),c.malformedUriErrorHandler&&(h.malformedUriErrorHandler=c.malformedUriErrorHandler),c.enableTracing){const t=s();h.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return c.onSameUrlNavigation&&(h.onSameUrlNavigation=c.onSameUrlNavigation),c.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=c.paramsInheritanceStrategy),c.urlUpdateStrategy&&(h.urlUpdateStrategy=c.urlUpdateStrategy),c.relativeLinkResolution&&(h.relativeLinkResolution=c.relativeLinkResolution),h},deps:[fa,Wc,x,i.r,i.w,i.i,jc,Jc,[class{},new i.A],[class{},new i.A]]},Wc,{provide:Da,useFactory:function(t){return t.routerState.root},deps:[Vc]},{provide:i.w,useClass:i.K},Yc,Kc,class{preload(t,e){return e().pipe(ps(()=>Object(Ft.a)(null)))}},{provide:Jc,useValue:{enableTracing:!1}}];function eu(){return new i.y("Router",Vc)}let nu=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[tu,su(e),{provide:Qc,useFactory:ou,deps:[[Vc,new i.A,new i.J]]},{provide:Jc,useValue:n||{}},{provide:y,useFactory:iu,deps:[c,[new i.p(b),new i.A],Jc]},{provide:$c,useFactory:ru,deps:[Vc,z,Jc]},{provide:Zc,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Kc},{provide:i.y,multi:!0,useFactory:eu},[au,{provide:i.d,multi:!0,useFactory:cu,deps:[au]},{provide:lu,useFactory:uu,deps:[au]},{provide:i.b,multi:!0,useExisting:lu}]]}}static forChild(e){return{ngModule:t,providers:[su(e)]}}}return t.\u0275mod=i.Mb({type:t}),t.\u0275inj=i.Lb({factory:function(e){return new(e||t)(i.Wb(Qc,8),i.Wb(Vc,8))}}),t})();function ru(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new $c(t,e,n)}function iu(t,e,n={}){return n.useHash?new w(t,e):new _(t,e)}function ou(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function su(t){return[{provide:i.a,multi:!0,useValue:t},{provide:jc,multi:!0,useValue:t}]}let au=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new jt.a}appInitializer(){return this.injector.get(l,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(Vc),r=this.injector.get(Jc);if(this.isLegacyDisabled(r)||this.isLegacyEnabled(r))t(!0);else if("disabled"===r.initialNavigation)n.setUpLocationChangeListener(),t(!0);else{if("enabled"!==r.initialNavigation)throw new Error(`Invalid initialNavigation options: '${r.initialNavigation}'`);n.hooks.afterPreactivation=()=>this.initNavigation?Object(Ft.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()}return e})}bootstrapListener(t){const e=this.injector.get(Jc),n=this.injector.get(Yc),r=this.injector.get($c),o=this.injector.get(Vc),s=this.injector.get(i.g);t===s.components[0]&&(this.isLegacyEnabled(e)?o.initialNavigation():this.isLegacyDisabled(e)&&o.setUpLocationChangeListener(),n.setUpPreloading(),r.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation}isLegacyDisabled(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(i.r))},t.\u0275prov=i.Kb({token:t,factory:t.\u0275fac}),t})();function cu(t){return t.appInitializer.bind(t)}function uu(t){return t.bootstrapListener.bind(t)}const lu=new i.q("Router Initializer");function hu(t,e){1&t&&(i.Sb(0,"span",7),i.xc(1,"menu"),i.Rb())}function du(t,e){1&t&&(i.Sb(0,"span",7),i.xc(1,"close"),i.Rb())}function fu(t,e){1&t&&(i.Sb(0,"p"),i.xc(1,"Arte"),i.Rb(),i.Sb(2,"p"),i.xc(3,"Moda"),i.Rb(),i.Sb(4,"p"),i.xc(5,"Joyas"),i.Rb())}let pu=(()=>{class t{constructor(){this.title="tem3Dshop",this.showFiller=!1,this.showBotton=!0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Ib({type:t,selectors:[["app-root"]],decls:16,vars:2,consts:[["autosize","",1,"example-container"],["color","primary"],["type","button","mat-button","",3,"click"],["class","material-icons",4,"ngIf"],["mode","side",1,"example-sidenav"],["drawer",""],["matExpansionPanelContent",""],[1,"material-icons"]],template:function(t,e){if(1&t){const t=i.Tb();i.Sb(0,"mat-drawer-container",0),i.Sb(1,"mat-toolbar",1),i.Sb(2,"button",2),i.ac("click",(function(){return i.qc(t),i.oc(8).toggle()}))("click",(function(){return e.showBotton=!e.showBotton})),i.vc(3,hu,2,0,"span",3),i.vc(4,du,2,0,"span",3),i.Rb(),i.Sb(5,"h3"),i.xc(6,"Tem3Dshop"),i.Rb(),i.Rb(),i.Sb(7,"mat-drawer",4,5),i.Sb(9,"h2"),i.xc(10,"Tem3Dshop"),i.Rb(),i.Sb(11,"mat-expansion-panel"),i.Sb(12,"mat-expansion-panel-header"),i.xc(13," Categorias "),i.Rb(),i.vc(14,fu,6,0,"ng-template",6),i.Rb(),i.Rb(),i.Pb(15,"router-outlet"),i.Rb()}2&t&&(i.Cb(3),i.jc("ngIf",e.showBotton),i.Cb(1),i.jc("ngIf",!e.showBotton))},directives:[eo,co,go,L,to,qo,Xo,Vo,qc],styles:[".example-container[_ngcontent-%COMP%]{width:100%;height:100%}.example-sidenav-content[_ngcontent-%COMP%]{display:flex;height:100%;align-items:center;justify-content:center}.example-sidenav[_ngcontent-%COMP%]{width:25%}.example-sidenav[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center}.mat-expansion-panel[_ngcontent-%COMP%]:not([class*=mat-elevation-z]){box-shadow:none}h3[_ngcontent-%COMP%]{margin:auto}"]}),t})();var mu=n("Z8We"),gu=n.t(mu,2);const yu="124",vu={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},bu={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},_u=0,wu=1,xu=2,Su=3,Eu=0,Tu=1,Mu=2,Au=3,Cu=0,Ou=1,Ru=2,Iu=1,Lu=2,Pu=0,Nu=1,Du=2,ku=3,ju=4,Fu=5,Uu=100,Bu=101,zu=102,Hu=103,Vu=104,Gu=200,Wu=201,qu=202,Xu=203,Zu=204,Ku=205,Yu=206,$u=207,Ju=208,Qu=209,tl=210,el=0,nl=1,rl=2,il=3,ol=4,sl=5,al=6,cl=7,ul=0,ll=1,hl=2,dl=0,fl=1,pl=2,ml=3,gl=4,yl=5,vl=300,bl=301,_l=302,wl=303,xl=304,Sl=306,El=307,Tl=1e3,Ml=1001,Al=1002,Cl=1003,Ol=1004,Rl=1004,Il=1005,Ll=1005,Pl=1006,Nl=1007,Dl=1007,kl=1008,jl=1008,Fl=1009,Ul=1010,Bl=1011,zl=1012,Hl=1013,Vl=1014,Gl=1015,Wl=1016,ql=1017,Xl=1018,Zl=1019,Kl=1020,Yl=1021,$l=1022,Jl=1023,Ql=1024,th=1025,eh=Jl,nh=1026,rh=1027,ih=1028,oh=1029,sh=1030,ah=1031,ch=1032,uh=1033,lh=33776,hh=33777,dh=33778,fh=33779,ph=35840,mh=35841,gh=35842,yh=35843,vh=36196,bh=37492,_h=37496,wh=37808,xh=37809,Sh=37810,Eh=37811,Th=37812,Mh=37813,Ah=37814,Ch=37815,Oh=37816,Rh=37817,Ih=37818,Lh=37819,Ph=37820,Nh=37821,Dh=36492,kh=37840,jh=37841,Fh=37842,Uh=37843,Bh=37844,zh=37845,Hh=37846,Vh=37847,Gh=37848,Wh=37849,qh=37850,Xh=37851,Zh=37852,Kh=37853,Yh=2200,$h=2201,Jh=2202,Qh=2300,td=2301,ed=2302,nd=2400,rd=2401,id=2402,od=2500,sd=2501,ad=0,cd=1,ud=2,ld=3e3,hd=3001,dd=3007,fd=3002,pd=3003,md=3004,gd=3005,yd=3006,vd=3200,bd=3201,_d=0,wd=1,xd=0,Sd=7680,Ed=7681,Td=7682,Md=7683,Ad=34055,Cd=34056,Od=5386,Rd=512,Id=513,Ld=514,Pd=515,Nd=516,Dd=517,kd=518,jd=519,Fd=35044,Ud=35048,Bd=35040,zd=35045,Hd=35049,Vd=35041,Gd=35046,Wd=35050,qd=35042,Xd="100",Zd="300 es";function Kd(){}Object.assign(Kd.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)},removeEventListener:function(t,e){if(void 0===this._listeners)return;const n=this._listeners[t];if(void 0!==n){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}},dispatchEvent:function(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const n=e.slice(0);for(let e=0,r=n.length;e<r;e++)n[e].call(this,t)}}});const Yd=[];for(let $=0;$<256;$++)Yd[$]=($<16?"0":"")+$.toString(16);let $d=1234567;const Jd={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Yd[255&t]+Yd[t>>8&255]+Yd[t>>16&255]+Yd[t>>24&255]+"-"+Yd[255&e]+Yd[e>>8&255]+"-"+Yd[e>>16&15|64]+Yd[e>>24&255]+"-"+Yd[63&n|128]+Yd[n>>8&255]+"-"+Yd[n>>16&255]+Yd[n>>24&255]+Yd[255&r]+Yd[r>>8&255]+Yd[r>>16&255]+Yd[r>>24&255]).toUpperCase()},clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){return void 0!==t&&($d=t%2147483647),$d=16807*$d%2147483647,($d-1)/2147483646},degToRad:function(t){return t*Jd.DEG2RAD},radToDeg:function(t){return t*Jd.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,n,r,i){const o=Math.cos,s=Math.sin,a=o(n/2),c=s(n/2),u=o((e+r)/2),l=s((e+r)/2),h=o((e-r)/2),d=s((e-r)/2),f=o((r-e)/2),p=s((r-e)/2);switch(i){case"XYX":t.set(a*l,c*h,c*d,a*u);break;case"YZY":t.set(c*d,a*l,c*h,a*u);break;case"ZXZ":t.set(c*h,c*d,a*l,a*u);break;case"XZX":t.set(a*l,c*p,c*f,a*u);break;case"YXY":t.set(c*f,a*l,c*p,a*u);break;case"ZYZ":t.set(c*p,c*f,a*l,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}};class Qd{constructor(t=0,e=0){Object.defineProperty(this,"isVector2",{value:!0}),this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),r=Math.sin(e),i=this.x-t.x,o=this.y-t.y;return this.x=i*n-o*r+t.x,this.y=i*r+o*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}class tf{constructor(){Object.defineProperty(this,"isMatrix3",{value:!0}),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(t,e,n,r,i,o,s,a,c){const u=this.elements;return u[0]=t,u[1]=r,u[2]=s,u[3]=e,u[4]=i,u[5]=a,u[6]=n,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}clone(){return(new this.constructor).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,i=this.elements,o=n[0],s=n[3],a=n[6],c=n[1],u=n[4],l=n[7],h=n[2],d=n[5],f=n[8],p=r[0],m=r[3],g=r[6],y=r[1],v=r[4],b=r[7],_=r[2],w=r[5],x=r[8];return i[0]=o*p+s*y+a*_,i[3]=o*m+s*v+a*w,i[6]=o*g+s*b+a*x,i[1]=c*p+u*y+l*_,i[4]=c*m+u*v+l*w,i[7]=c*g+u*b+l*x,i[2]=h*p+d*y+f*_,i[5]=h*m+d*v+f*w,i[8]=h*g+d*b+f*x,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],c=t[7],u=t[8];return e*o*u-e*s*c-n*i*u+n*s*a+r*i*c-r*o*a}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],c=t[7],u=t[8],l=u*o-s*c,h=s*a-u*i,d=c*i-o*a,f=e*l+n*h+r*d;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);const p=1/f;return t[0]=l*p,t[1]=(r*c-u*n)*p,t[2]=(s*n-r*o)*p,t[3]=h*p,t[4]=(u*e-r*a)*p,t[5]=(r*i-s*e)*p,t[6]=d*p,t[7]=(n*a-c*e)*p,t[8]=(o*e-n*i)*p,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).copy(this).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,r,i,o,s){const a=Math.cos(i),c=Math.sin(i);return this.set(n*a,n*c,-n*(a*o+c*s)+o+t,-r*c,r*a,-r*(-c*o+a*s)+s+e,0,0,1),this}scale(t,e){const n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this}rotate(t){const e=Math.cos(t),n=Math.sin(t),r=this.elements,i=r[0],o=r[3],s=r[6],a=r[1],c=r[4],u=r[7];return r[0]=e*i+n*a,r[3]=e*o+n*c,r[6]=e*s+n*u,r[1]=-n*i+e*a,r[4]=-n*o+e*c,r[7]=-n*s+e*u,this}translate(t,e){const n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}}let ef;const nf={getDataURL:function(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===ef&&(ef=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),ef.width=t.width,ef.height=t.height;const n=ef.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=ef}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}};let rf=0;function of(t=of.DEFAULT_IMAGE,e=of.DEFAULT_MAPPING,n=Ml,r=Ml,i=Pl,o=kl,s=Jl,a=Fl,c=1,u=ld){Object.defineProperty(this,"id",{value:rf++}),this.uuid=Jd.generateUUID(),this.name="",this.image=t,this.mipmaps=[],this.mapping=e,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=o,this.anisotropy=c,this.format=s,this.internalFormat=null,this.type=a,this.offset=new Qd(0,0),this.repeat=new Qd(1,1),this.center=new Qd(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new tf,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.version=0,this.onUpdate=null}function sf(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?nf.getDataURL(t):t.data?{data:Array.prototype.slice.call(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}of.DEFAULT_IMAGE=void 0,of.DEFAULT_MAPPING=vl,of.prototype=Object.assign(Object.create(Kd.prototype),{constructor:of,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const r=this.image;if(void 0===r.uuid&&(r.uuid=Jd.generateUUID()),!e&&void 0===t.images[r.uuid]){let e;if(Array.isArray(r)){e=[];for(let t=0,n=r.length;t<n;t++)e.push(sf(r[t].isDataTexture?r[t].image:r[t]))}else e=sf(r);t.images[r.uuid]={uuid:r.uuid,url:e}}n.image=r.uuid}return e||(t.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping!==vl)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Tl:t.x=t.x-Math.floor(t.x);break;case Ml:t.x=t.x<0?0:1;break;case Al:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case Tl:t.y=t.y-Math.floor(t.y);break;case Ml:t.y=t.y<0?0:1;break;case Al:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(of.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}});class af{constructor(t=0,e=0,n=0,r=1){Object.defineProperty(this,"isVector4",{value:!0}),this.x=t,this.y=e,this.z=n,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,i=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*i,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,r,i;const o=t.elements,s=o[0],a=o[4],c=o[8],u=o[1],l=o[5],h=o[9],d=o[2],f=o[6],p=o[10];if(Math.abs(a-u)<.01&&Math.abs(c-d)<.01&&Math.abs(h-f)<.01){if(Math.abs(a+u)<.1&&Math.abs(c+d)<.1&&Math.abs(h+f)<.1&&Math.abs(s+l+p-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const t=(s+1)/2,o=(l+1)/2,m=(p+1)/2,g=(a+u)/4,y=(c+d)/4,v=(h+f)/4;return t>o&&t>m?t<.01?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(t),r=g/n,i=y/n):o>m?o<.01?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(o),n=g/r,i=v/r):m<.01?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(m),n=y/i,r=v/i),this.set(n,r,i,e),this}let m=Math.sqrt((f-h)*(f-h)+(c-d)*(c-d)+(u-a)*(u-a));return Math.abs(m)<.001&&(m=1),this.x=(f-h)/m,this.y=(c-d)/m,this.z=(u-a)/m,this.w=Math.acos((s+l+p-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}function cf(t,e,n){this.width=t,this.height=e,this.scissor=new af(0,0,t,e),this.scissorTest=!1,this.viewport=new af(0,0,t,e),this.texture=new of(void 0,(n=n||{}).mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=t,this.texture.image.height=e,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:Pl,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function uf(t,e,n){cf.call(this,t,e,n),this.samples=4}cf.prototype=Object.assign(Object.create(Kd.prototype),{constructor:cf,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.texture.image.width=t,this.texture.image.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),uf.prototype=Object.assign(Object.create(cf.prototype),{constructor:uf,isWebGLMultisampleRenderTarget:!0,copy:function(t){return cf.prototype.copy.call(this,t),this.samples=t.samples,this}});class lf{constructor(t=0,e=0,n=0,r=1){Object.defineProperty(this,"isQuaternion",{value:!0}),this._x=t,this._y=e,this._z=n,this._w=r}static slerp(t,e,n,r){return n.copy(t).slerp(e,r)}static slerpFlat(t,e,n,r,i,o,s){let a=n[r+0],c=n[r+1],u=n[r+2],l=n[r+3];const h=i[o+0],d=i[o+1],f=i[o+2],p=i[o+3];if(l!==p||a!==h||c!==d||u!==f){let t=1-s;const e=a*h+c*d+u*f+l*p,n=e>=0?1:-1,r=1-e*e;if(r>Number.EPSILON){const i=Math.sqrt(r),o=Math.atan2(i,e*n);t=Math.sin(t*o)/i,s=Math.sin(s*o)/i}const i=s*n;if(a=a*t+h*i,c=c*t+d*i,u=u*t+f*i,l=l*t+p*i,t===1-s){const t=1/Math.sqrt(a*a+c*c+u*u+l*l);a*=t,c*=t,u*=t,l*=t}}t[e]=a,t[e+1]=c,t[e+2]=u,t[e+3]=l}static multiplyQuaternionsFlat(t,e,n,r,i,o){const s=n[r],a=n[r+1],c=n[r+2],u=n[r+3],l=i[o],h=i[o+1],d=i[o+2],f=i[o+3];return t[e]=s*f+u*l+a*d-c*h,t[e+1]=a*f+u*h+c*l-s*d,t[e+2]=c*f+u*d+s*h-a*l,t[e+3]=u*f-s*l-a*h-c*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=t._x,r=t._y,i=t._z,o=t._order,s=Math.cos,a=Math.sin,c=s(n/2),u=s(r/2),l=s(i/2),h=a(n/2),d=a(r/2),f=a(i/2);switch(o){case"XYZ":this._x=h*u*l+c*d*f,this._y=c*d*l-h*u*f,this._z=c*u*f+h*d*l,this._w=c*u*l-h*d*f;break;case"YXZ":this._x=h*u*l+c*d*f,this._y=c*d*l-h*u*f,this._z=c*u*f-h*d*l,this._w=c*u*l+h*d*f;break;case"ZXY":this._x=h*u*l-c*d*f,this._y=c*d*l+h*u*f,this._z=c*u*f+h*d*l,this._w=c*u*l-h*d*f;break;case"ZYX":this._x=h*u*l-c*d*f,this._y=c*d*l+h*u*f,this._z=c*u*f-h*d*l,this._w=c*u*l+h*d*f;break;case"YZX":this._x=h*u*l+c*d*f,this._y=c*d*l+h*u*f,this._z=c*u*f-h*d*l,this._w=c*u*l-h*d*f;break;case"XZY":this._x=h*u*l-c*d*f,this._y=c*d*l-h*u*f,this._z=c*u*f+h*d*l,this._w=c*u*l+h*d*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],r=e[4],i=e[8],o=e[1],s=e[5],a=e[9],c=e[2],u=e[6],l=e[10],h=n+s+l;if(h>0){const t=.5/Math.sqrt(h+1);this._w=.25/t,this._x=(u-a)*t,this._y=(i-c)*t,this._z=(o-r)*t}else if(n>s&&n>l){const t=2*Math.sqrt(1+n-s-l);this._w=(u-a)/t,this._x=.25*t,this._y=(r+o)/t,this._z=(i+c)/t}else if(s>l){const t=2*Math.sqrt(1+s-n-l);this._w=(i-c)/t,this._x=(r+o)/t,this._y=.25*t,this._z=(a+u)/t}else{const t=2*Math.sqrt(1+l-n-s);this._w=(o-r)/t,this._x=(i+c)/t,this._y=(a+u)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<1e-6?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Jd.clamp(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const r=Math.min(1,e/n);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,r=t._y,i=t._z,o=t._w,s=e._x,a=e._y,c=e._z,u=e._w;return this._x=n*u+o*s+r*c-i*a,this._y=r*u+o*a+i*s-n*c,this._z=i*u+o*c+n*a-r*s,this._w=o*u-n*s-r*a-i*c,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,r=this._y,i=this._z,o=this._w;let s=o*t._w+n*t._x+r*t._y+i*t._z;if(s<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,s=-s):this.copy(t),s>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;const a=1-s*s;if(a<=Number.EPSILON){const t=1-e;return this._w=t*o+e*this._w,this._x=t*n+e*this._x,this._y=t*r+e*this._y,this._z=t*i+e*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(a),u=Math.atan2(c,s),l=Math.sin((1-e)*u)/c,h=Math.sin(e*u)/c;return this._w=o*l+this._w*h,this._x=n*l+this._x*h,this._y=r*l+this._y*h,this._z=i*l+this._z*h,this._onChangeCallback(),this}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}class hf{constructor(t=0,e=0,n=0){Object.defineProperty(this,"isVector3",{value:!0}),this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(ff.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(ff.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,i=t.elements,o=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*o,this}applyQuaternion(t){const e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,s=t.z,a=t.w,c=a*e+o*r-s*n,u=a*n+s*e-i*r,l=a*r+i*n-o*e,h=-i*e-o*n-s*r;return this.x=c*a+h*-i+u*-s-l*-o,this.y=u*a+h*-o+l*-i-c*-s,this.z=l*a+h*-s+c*-o-u*-i,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,r=t.y,i=t.z,o=e.x,s=e.y,a=e.z;return this.x=r*a-i*s,this.y=i*o-n*a,this.z=n*s-r*o,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return df.copy(this).projectOnVector(t),this.sub(df)}reflect(t){return this.sub(df.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(Jd.clamp(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}const df=new hf,ff=new lf;class pf{constructor(t,e){Object.defineProperty(this,"isBox3",{value:!0}),this.min=void 0!==t?t:new hf(1/0,1/0,1/0),this.max=void 0!==e?e:new hf(-1/0,-1/0,-1/0)}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,s=-1/0;for(let a=0,c=t.length;a<c;a+=3){const c=t[a],u=t[a+1],l=t[a+2];c<e&&(e=c),u<n&&(n=u),l<r&&(r=l),c>i&&(i=c),u>o&&(o=u),l>s&&(s=l)}return this.min.set(e,n,r),this.max.set(i,o,s),this}setFromBufferAttribute(t){let e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,s=-1/0;for(let a=0,c=t.count;a<c;a++){const c=t.getX(a),u=t.getY(a),l=t.getZ(a);c<e&&(e=c),u<n&&(n=u),l<r&&(r=l),c>i&&(i=c),u>o&&(o=u),l>s&&(s=l)}return this.min.set(e,n,r),this.max.set(i,o,s),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=yf.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t){return this.makeEmpty(),this.expandByObject(t)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new hf),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new hf),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t){t.updateWorldMatrix(!1,!1);const e=t.geometry;void 0!==e&&(null===e.boundingBox&&e.computeBoundingBox(),vf.copy(e.boundingBox),vf.applyMatrix4(t.matrixWorld),this.union(vf));const n=t.children;for(let r=0,i=n.length;r<i;r++)this.expandByObject(n[r]);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new hf),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,yf),yf.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Tf),Mf.subVectors(this.max,Tf),bf.subVectors(t.a,Tf),_f.subVectors(t.b,Tf),wf.subVectors(t.c,Tf),xf.subVectors(_f,bf),Sf.subVectors(wf,_f),Ef.subVectors(bf,wf);let e=[0,-xf.z,xf.y,0,-Sf.z,Sf.y,0,-Ef.z,Ef.y,xf.z,0,-xf.x,Sf.z,0,-Sf.x,Ef.z,0,-Ef.x,-xf.y,xf.x,0,-Sf.y,Sf.x,0,-Ef.y,Ef.x,0];return!!mf(e,bf,_f,wf,Mf)&&(e=[1,0,0,0,1,0,0,0,1],!!mf(e,bf,_f,wf,Mf)&&(Af.crossVectors(xf,Sf),e=[Af.x,Af.y,Af.z],mf(e,bf,_f,wf,Mf)))}clampPoint(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new hf),e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return yf.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return void 0===t&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=.5*this.getSize(yf).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(gf[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),gf[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),gf[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),gf[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),gf[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),gf[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),gf[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),gf[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(gf),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}function mf(t,e,n,r,i){for(let o=0,s=t.length-3;o<=s;o+=3){Cf.fromArray(t,o);const s=i.x*Math.abs(Cf.x)+i.y*Math.abs(Cf.y)+i.z*Math.abs(Cf.z),a=e.dot(Cf),c=n.dot(Cf),u=r.dot(Cf);if(Math.max(-Math.max(a,c,u),Math.min(a,c,u))>s)return!1}return!0}const gf=[new hf,new hf,new hf,new hf,new hf,new hf,new hf,new hf],yf=new hf,vf=new pf,bf=new hf,_f=new hf,wf=new hf,xf=new hf,Sf=new hf,Ef=new hf,Tf=new hf,Mf=new hf,Af=new hf,Cf=new hf,Of=new pf;class Rf{constructor(t,e){this.center=void 0!==t?t:new hf,this.radius=void 0!==e?e:-1}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):Of.setFromPoints(t).getCenter(n);let r=0;for(let i=0,o=t.length;i<o;i++)r=Math.max(r,n.distanceToSquared(t[i]));return this.radius=Math.sqrt(r),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new hf),e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new pf),this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}}const If=new hf,Lf=new hf,Pf=new hf,Nf=new hf,Df=new hf,kf=new hf,jf=new hf;class Ff{constructor(t,e){this.origin=void 0!==t?t:new hf,this.direction=void 0!==e?e:new hf(0,0,-1)}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new hf),e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,If)),this}closestPointToPoint(t,e){void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new hf),e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=If.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(If.copy(this.direction).multiplyScalar(e).add(this.origin),If.distanceToSquared(t))}distanceSqToSegment(t,e,n,r){Lf.copy(t).add(e).multiplyScalar(.5),Pf.copy(e).sub(t).normalize(),Nf.copy(this.origin).sub(Lf);const i=.5*t.distanceTo(e),o=-this.direction.dot(Pf),s=Nf.dot(this.direction),a=-Nf.dot(Pf),c=Nf.lengthSq(),u=Math.abs(1-o*o);let l,h,d,f;if(u>0)if(l=o*a-s,h=o*s-a,f=i*u,l>=0)if(h>=-f)if(h<=f){const t=1/u;l*=t,h*=t,d=l*(l+o*h+2*s)+h*(o*l+h+2*a)+c}else h=i,l=Math.max(0,-(o*h+s)),d=-l*l+h*(h+2*a)+c;else h=-i,l=Math.max(0,-(o*h+s)),d=-l*l+h*(h+2*a)+c;else h<=-f?(l=Math.max(0,-(-o*i+s)),h=l>0?-i:Math.min(Math.max(-i,-a),i),d=-l*l+h*(h+2*a)+c):h<=f?(l=0,h=Math.min(Math.max(-i,-a),i),d=h*(h+2*a)+c):(l=Math.max(0,-(o*i+s)),h=l>0?i:Math.min(Math.max(-i,-a),i),d=-l*l+h*(h+2*a)+c);else h=o>0?-i:i,l=Math.max(0,-(o*h+s)),d=-l*l+h*(h+2*a)+c;return n&&n.copy(this.direction).multiplyScalar(l).add(this.origin),r&&r.copy(Pf).multiplyScalar(h).add(Lf),d}intersectSphere(t,e){If.subVectors(t.center,this.origin);const n=If.dot(this.direction),r=If.dot(If)-n*n,i=t.radius*t.radius;if(r>i)return null;const o=Math.sqrt(i-r),s=n-o,a=n+o;return s<0&&a<0?null:this.at(s<0?a:s,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,r,i,o,s,a;const c=1/this.direction.x,u=1/this.direction.y,l=1/this.direction.z,h=this.origin;return c>=0?(n=(t.min.x-h.x)*c,r=(t.max.x-h.x)*c):(n=(t.max.x-h.x)*c,r=(t.min.x-h.x)*c),u>=0?(i=(t.min.y-h.y)*u,o=(t.max.y-h.y)*u):(i=(t.max.y-h.y)*u,o=(t.min.y-h.y)*u),n>o||i>r?null:((i>n||n!=n)&&(n=i),(o<r||r!=r)&&(r=o),l>=0?(s=(t.min.z-h.z)*l,a=(t.max.z-h.z)*l):(s=(t.max.z-h.z)*l,a=(t.min.z-h.z)*l),n>a||s>r?null:((s>n||n!=n)&&(n=s),(a<r||r!=r)&&(r=a),r<0?null:this.at(n>=0?n:r,e)))}intersectsBox(t){return null!==this.intersectBox(t,If)}intersectTriangle(t,e,n,r,i){Df.subVectors(e,t),kf.subVectors(n,t),jf.crossVectors(Df,kf);let o,s=this.direction.dot(jf);if(s>0){if(r)return null;o=1}else{if(!(s<0))return null;o=-1,s=-s}Nf.subVectors(this.origin,t);const a=o*this.direction.dot(kf.crossVectors(Nf,kf));if(a<0)return null;const c=o*this.direction.dot(Df.cross(Nf));if(c<0)return null;if(a+c>s)return null;const u=-o*Nf.dot(jf);return u<0?null:this.at(u/s,i)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}}class Uf{constructor(){Object.defineProperty(this,"isMatrix4",{value:!0}),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(t,e,n,r,i,o,s,a,c,u,l,h,d,f,p,m){const g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=r,g[1]=i,g[5]=o,g[9]=s,g[13]=a,g[2]=c,g[6]=u,g[10]=l,g[14]=h,g[3]=d,g[7]=f,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Uf).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,r=1/Bf.setFromMatrixColumn(t,0).length(),i=1/Bf.setFromMatrixColumn(t,1).length(),o=1/Bf.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*i,e[5]=n[5]*i,e[6]=n[6]*i,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const e=this.elements,n=t.x,r=t.y,i=t.z,o=Math.cos(n),s=Math.sin(n),a=Math.cos(r),c=Math.sin(r),u=Math.cos(i),l=Math.sin(i);if("XYZ"===t.order){const t=o*u,n=o*l,r=s*u,i=s*l;e[0]=a*u,e[4]=-a*l,e[8]=c,e[1]=n+r*c,e[5]=t-i*c,e[9]=-s*a,e[2]=i-t*c,e[6]=r+n*c,e[10]=o*a}else if("YXZ"===t.order){const t=a*u,n=a*l,r=c*u,i=c*l;e[0]=t+i*s,e[4]=r*s-n,e[8]=o*c,e[1]=o*l,e[5]=o*u,e[9]=-s,e[2]=n*s-r,e[6]=i+t*s,e[10]=o*a}else if("ZXY"===t.order){const t=a*u,n=a*l,r=c*u,i=c*l;e[0]=t-i*s,e[4]=-o*l,e[8]=r+n*s,e[1]=n+r*s,e[5]=o*u,e[9]=i-t*s,e[2]=-o*c,e[6]=s,e[10]=o*a}else if("ZYX"===t.order){const t=o*u,n=o*l,r=s*u,i=s*l;e[0]=a*u,e[4]=r*c-n,e[8]=t*c+i,e[1]=a*l,e[5]=i*c+t,e[9]=n*c-r,e[2]=-c,e[6]=s*a,e[10]=o*a}else if("YZX"===t.order){const t=o*a,n=o*c,r=s*a,i=s*c;e[0]=a*u,e[4]=i-t*l,e[8]=r*l+n,e[1]=l,e[5]=o*u,e[9]=-s*u,e[2]=-c*u,e[6]=n*l+r,e[10]=t-i*l}else if("XZY"===t.order){const t=o*a,n=o*c,r=s*a,i=s*c;e[0]=a*u,e[4]=-l,e[8]=c*u,e[1]=t*l+i,e[5]=o*u,e[9]=n*l-r,e[2]=r*l-n,e[6]=s*u,e[10]=i*l+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Hf,t,Vf)}lookAt(t,e,n){const r=this.elements;return qf.subVectors(t,e),0===qf.lengthSq()&&(qf.z=1),qf.normalize(),Gf.crossVectors(n,qf),0===Gf.lengthSq()&&(1===Math.abs(n.z)?qf.x+=1e-4:qf.z+=1e-4,qf.normalize(),Gf.crossVectors(n,qf)),Gf.normalize(),Wf.crossVectors(qf,Gf),r[0]=Gf.x,r[4]=Wf.x,r[8]=qf.x,r[1]=Gf.y,r[5]=Wf.y,r[9]=qf.y,r[2]=Gf.z,r[6]=Wf.z,r[10]=qf.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,i=this.elements,o=n[0],s=n[4],a=n[8],c=n[12],u=n[1],l=n[5],h=n[9],d=n[13],f=n[2],p=n[6],m=n[10],g=n[14],y=n[3],v=n[7],b=n[11],_=n[15],w=r[0],x=r[4],S=r[8],E=r[12],T=r[1],M=r[5],A=r[9],C=r[13],O=r[2],R=r[6],I=r[10],L=r[14],P=r[3],N=r[7],D=r[11],k=r[15];return i[0]=o*w+s*T+a*O+c*P,i[4]=o*x+s*M+a*R+c*N,i[8]=o*S+s*A+a*I+c*D,i[12]=o*E+s*C+a*L+c*k,i[1]=u*w+l*T+h*O+d*P,i[5]=u*x+l*M+h*R+d*N,i[9]=u*S+l*A+h*I+d*D,i[13]=u*E+l*C+h*L+d*k,i[2]=f*w+p*T+m*O+g*P,i[6]=f*x+p*M+m*R+g*N,i[10]=f*S+p*A+m*I+g*D,i[14]=f*E+p*C+m*L+g*k,i[3]=y*w+v*T+b*O+_*P,i[7]=y*x+v*M+b*R+_*N,i[11]=y*S+v*A+b*I+_*D,i[15]=y*E+v*C+b*L+_*k,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],o=t[1],s=t[5],a=t[9],c=t[13],u=t[2],l=t[6],h=t[10],d=t[14];return t[3]*(+i*a*l-r*c*l-i*s*h+n*c*h+r*s*d-n*a*d)+t[7]*(+e*a*d-e*c*h+i*o*h-r*o*d+r*c*u-i*a*u)+t[11]*(+e*c*l-e*s*d-i*o*l+n*o*d+i*s*u-n*c*u)+t[15]*(-r*s*u-e*a*l+e*s*h+r*o*l-n*o*h+n*a*u)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],c=t[7],u=t[8],l=t[9],h=t[10],d=t[11],f=t[12],p=t[13],m=t[14],g=t[15],y=l*m*c-p*h*c+p*a*d-s*m*d-l*a*g+s*h*g,v=f*h*c-u*m*c-f*a*d+o*m*d+u*a*g-o*h*g,b=u*p*c-f*l*c+f*s*d-o*p*d-u*s*g+o*l*g,_=f*l*a-u*p*a-f*s*h+o*p*h+u*s*m-o*l*m,w=e*y+n*v+r*b+i*_;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const x=1/w;return t[0]=y*x,t[1]=(p*h*i-l*m*i-p*r*d+n*m*d+l*r*g-n*h*g)*x,t[2]=(s*m*i-p*a*i+p*r*c-n*m*c-s*r*g+n*a*g)*x,t[3]=(l*a*i-s*h*i-l*r*c+n*h*c+s*r*d-n*a*d)*x,t[4]=v*x,t[5]=(u*m*i-f*h*i+f*r*d-e*m*d-u*r*g+e*h*g)*x,t[6]=(f*a*i-o*m*i-f*r*c+e*m*c+o*r*g-e*a*g)*x,t[7]=(o*h*i-u*a*i+u*r*c-e*h*c-o*r*d+e*a*d)*x,t[8]=b*x,t[9]=(f*l*i-u*p*i-f*n*d+e*p*d+u*n*g-e*l*g)*x,t[10]=(o*p*i-f*s*i+f*n*c-e*p*c-o*n*g+e*s*g)*x,t[11]=(u*s*i-o*l*i-u*n*c+e*l*c+o*n*d-e*s*d)*x,t[12]=_*x,t[13]=(u*p*r-f*l*r+f*n*h-e*p*h-u*n*m+e*l*m)*x,t[14]=(f*s*r-o*p*r-f*n*a+e*p*a+o*n*m-e*s*m)*x,t[15]=(o*l*r-u*s*r+u*n*a-e*l*a-o*n*h+e*s*h)*x,this}scale(t){const e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this}getMaxScaleOnAxis(){const t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))}makeTranslation(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),r=Math.sin(e),i=1-n,o=t.x,s=t.y,a=t.z,c=i*o,u=i*s;return this.set(c*o+n,c*s-r*a,c*a+r*s,0,c*s+r*a,u*s+n,u*a-r*o,0,c*a-r*s,u*a+r*o,i*a*a+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this}compose(t,e,n){const r=this.elements,i=e._x,o=e._y,s=e._z,a=e._w,c=i+i,u=o+o,l=s+s,h=i*c,d=i*u,f=i*l,p=o*u,m=o*l,g=s*l,y=a*c,v=a*u,b=a*l,_=n.x,w=n.y,x=n.z;return r[0]=(1-(p+g))*_,r[1]=(d+b)*_,r[2]=(f-v)*_,r[3]=0,r[4]=(d-b)*w,r[5]=(1-(h+g))*w,r[6]=(m+y)*w,r[7]=0,r[8]=(f+v)*x,r[9]=(m-y)*x,r[10]=(1-(h+p))*x,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,n){const r=this.elements;let i=Bf.set(r[0],r[1],r[2]).length();const o=Bf.set(r[4],r[5],r[6]).length(),s=Bf.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),t.x=r[12],t.y=r[13],t.z=r[14],zf.copy(this);const a=1/i,c=1/o,u=1/s;return zf.elements[0]*=a,zf.elements[1]*=a,zf.elements[2]*=a,zf.elements[4]*=c,zf.elements[5]*=c,zf.elements[6]*=c,zf.elements[8]*=u,zf.elements[9]*=u,zf.elements[10]*=u,e.setFromRotationMatrix(zf),n.x=i,n.y=o,n.z=s,this}makePerspective(t,e,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const s=this.elements,a=2*i/(n-r),c=(e+t)/(e-t),u=(n+r)/(n-r),l=-(o+i)/(o-i),h=-2*o*i/(o-i);return s[0]=2*i/(e-t),s[4]=0,s[8]=c,s[12]=0,s[1]=0,s[5]=a,s[9]=u,s[13]=0,s[2]=0,s[6]=0,s[10]=l,s[14]=h,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makeOrthographic(t,e,n,r,i,o){const s=this.elements,a=1/(e-t),c=1/(n-r),u=1/(o-i),l=(e+t)*a,h=(n+r)*c,d=(o+i)*u;return s[0]=2*a,s[4]=0,s[8]=0,s[12]=-l,s[1]=0,s[5]=2*c,s[9]=0,s[13]=-h,s[2]=0,s[6]=0,s[10]=-2*u,s[14]=-d,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const Bf=new hf,zf=new Uf,Hf=new hf(0,0,0),Vf=new hf(1,1,1),Gf=new hf,Wf=new hf,qf=new hf;class Xf{constructor(t=0,e=0,n=0,r=Xf.DefaultOrder){Object.defineProperty(this,"isEuler",{value:!0}),this._x=t,this._y=e,this._z=n,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._order=r||this._order,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e,n){const r=Jd.clamp,i=t.elements,o=i[0],s=i[4],a=i[8],c=i[1],u=i[5],l=i[9],h=i[2],d=i[6],f=i[10];switch(e=e||this._order){case"XYZ":this._y=Math.asin(r(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-l,f),this._z=Math.atan2(-s,o)):(this._x=Math.atan2(d,u),this._z=0);break;case"YXZ":this._x=Math.asin(-r(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-h,o),this._z=0);break;case"ZXY":this._x=Math.asin(r(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,f),this._z=Math.atan2(-s,u)):(this._y=0,this._z=Math.atan2(c,o));break;case"ZYX":this._y=Math.asin(-r(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,f),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-s,u));break;case"YZX":this._z=Math.asin(r(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-l,u),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-r(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(d,u),this._y=Math.atan2(a,o)):(this._x=Math.atan2(-l,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!1!==n&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return Zf.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Zf,e,n)}setFromVector3(t,e){return this.set(t.x,t.y,t.z,e||this._order)}reorder(t){return Kf.setFromEuler(this),this.setFromQuaternion(Kf,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}toVector3(t){return t?t.set(this._x,this._y,this._z):new hf(this._x,this._y,this._z)}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}Xf.DefaultOrder="XYZ",Xf.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];const Zf=new Uf,Kf=new lf;class Yf{constructor(){this.mask=1}set(t){this.mask=1<<t|0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}}let $f=0;const Jf=new hf,Qf=new lf,tp=new Uf,ep=new hf,np=new hf,rp=new hf,ip=new lf,op=new hf(1,0,0),sp=new hf(0,1,0),ap=new hf(0,0,1),cp={type:"added"},up={type:"removed"};function lp(){Object.defineProperty(this,"id",{value:$f++}),this.uuid=Jd.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=lp.DefaultUp.clone();const t=new hf,e=new Xf,n=new lf,r=new hf(1,1,1);e._onChange((function(){n.setFromEuler(e,!1)})),n._onChange((function(){e.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Uf},normalMatrix:{value:new tf}}),this.matrix=new Uf,this.matrixWorld=new Uf,this.matrixAutoUpdate=lp.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Yf,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}lp.DefaultUp=new hf(0,1,0),lp.DefaultMatrixAutoUpdate=!0,lp.prototype=Object.assign(Object.create(Kd.prototype),{constructor:lp,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,e){return Qf.setFromAxisAngle(t,e),this.quaternion.multiply(Qf),this},rotateOnWorldAxis:function(t,e){return Qf.setFromAxisAngle(t,e),this.quaternion.premultiply(Qf),this},rotateX:function(t){return this.rotateOnAxis(op,t)},rotateY:function(t){return this.rotateOnAxis(sp,t)},rotateZ:function(t){return this.rotateOnAxis(ap,t)},translateOnAxis:function(t,e){return Jf.copy(t).applyQuaternion(this.quaternion),this.position.add(Jf.multiplyScalar(e)),this},translateX:function(t){return this.translateOnAxis(op,t)},translateY:function(t){return this.translateOnAxis(sp,t)},translateZ:function(t){return this.translateOnAxis(ap,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4(tp.copy(this.matrixWorld).invert())},lookAt:function(t,e,n){t.isVector3?ep.copy(t):ep.set(t,e,n);const r=this.parent;this.updateWorldMatrix(!0,!1),np.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?tp.lookAt(np,ep,this.up):tp.lookAt(ep,np,this.up),this.quaternion.setFromRotationMatrix(tp),r&&(tp.extractRotation(r.matrixWorld),Qf.setFromRotationMatrix(tp),this.quaternion.premultiply(Qf.invert()))},add:function(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(cp)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(up)),this},clear:function(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(up)}return this.children.length=0,this},attach:function(t){return this.updateWorldMatrix(!0,!1),tp.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),tp.multiply(t.parent.matrixWorld)),t.applyMatrix4(tp),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(t,e);if(void 0!==r)return r}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new hf),this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new lf),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(np,t,rp),t},getWorldScale:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),t=new hf),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(np,ip,t),t},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new hf),this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverse(t)},traverseVisible:function(t){if(!1===this.visible)return;t(this);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)},traverseAncestors:function(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){const n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,n=t.length;e<n;e++)t[e].updateWorldMatrix(!1,!0)}},toJSON:function(t){const e=void 0===t||"string"==typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function i(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){r.geometry=i(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const n=e.shapes;if(Array.isArray(n))for(let e=0,r=n.length;e<r;e++)i(t.shapes,n[e]);else i(t.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(t.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let n=0,r=this.material.length;n<r;n++)e.push(i(t.materials,this.material[n]));r.material=e}else r.material=i(t.materials,this.material);if(this.children.length>0){r.children=[];for(let e=0;e<this.children.length;e++)r.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){r.animations=[];for(let e=0;e<this.animations.length;e++)r.animations.push(i(t.animations,this.animations[e]))}if(e){const e=o(t.geometries),r=o(t.materials),i=o(t.textures),s=o(t.images),a=o(t.shapes),c=o(t.skeletons),u=o(t.animations);e.length>0&&(n.geometries=e),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),s.length>0&&(n.images=s),a.length>0&&(n.shapes=a),c.length>0&&(n.skeletons=c),u.length>0&&(n.animations=u)}return n.object=r,n;function o(t){const e=[];for(const n in t){const r=t[n];delete r.metadata,e.push(r)}return e}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let n=0;n<t.children.length;n++)this.add(t.children[n].clone());return this}});const hp=new hf,dp=new hf,fp=new tf;class pp{constructor(t,e){Object.defineProperty(this,"isPlane",{value:!0}),this.normal=void 0!==t?t:new hf(1,0,0),this.constant=void 0!==e?e:0}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const r=hp.subVectors(n,e).cross(dp.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new hf),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){void 0===e&&(console.warn("THREE.Plane: .intersectLine() target is now required"),e=new hf);const n=t.delta(hp),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):void 0;const i=-(t.start.dot(this.normal)+this.constant)/r;return i<0||i>1?void 0:e.copy(n).multiplyScalar(i).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new hf),t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||fp.getNormalMatrix(t),r=this.coplanarPoint(hp).applyMatrix4(t),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}}const mp=new hf,gp=new hf,yp=new hf,vp=new hf,bp=new hf,_p=new hf,wp=new hf,xp=new hf,Sp=new hf,Ep=new hf;class Tp{constructor(t,e,n){this.a=void 0!==t?t:new hf,this.b=void 0!==e?e:new hf,this.c=void 0!==n?n:new hf}static getNormal(t,e,n,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new hf),r.subVectors(n,e),mp.subVectors(t,e),r.cross(mp);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(t,e,n,r,i){mp.subVectors(r,e),gp.subVectors(n,e),yp.subVectors(t,e);const o=mp.dot(mp),s=mp.dot(gp),a=mp.dot(yp),c=gp.dot(gp),u=gp.dot(yp),l=o*c-s*s;if(void 0===i&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),i=new hf),0===l)return i.set(-2,-1,-1);const h=1/l,d=(c*a-s*u)*h,f=(o*u-s*a)*h;return i.set(1-d-f,f,d)}static containsPoint(t,e,n,r){return this.getBarycoord(t,e,n,r,vp),vp.x>=0&&vp.y>=0&&vp.x+vp.y<=1}static getUV(t,e,n,r,i,o,s,a){return this.getBarycoord(t,e,n,r,vp),a.set(0,0),a.addScaledVector(i,vp.x),a.addScaledVector(o,vp.y),a.addScaledVector(s,vp.z),a}static isFrontFacing(t,e,n,r){return mp.subVectors(n,e),gp.subVectors(t,e),mp.cross(gp).dot(r)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return mp.subVectors(this.c,this.b),gp.subVectors(this.a,this.b),.5*mp.cross(gp).length()}getMidpoint(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new hf),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Tp.getNormal(this.a,this.b,this.c,t)}getPlane(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new pp),t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Tp.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,r,i){return Tp.getUV(t,this.a,this.b,this.c,e,n,r,i)}containsPoint(t){return Tp.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Tp.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){void 0===e&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),e=new hf);const n=this.a,r=this.b,i=this.c;let o,s;bp.subVectors(r,n),_p.subVectors(i,n),xp.subVectors(t,n);const a=bp.dot(xp),c=_p.dot(xp);if(a<=0&&c<=0)return e.copy(n);Sp.subVectors(t,r);const u=bp.dot(Sp),l=_p.dot(Sp);if(u>=0&&l<=u)return e.copy(r);const h=a*l-u*c;if(h<=0&&a>=0&&u<=0)return o=a/(a-u),e.copy(n).addScaledVector(bp,o);Ep.subVectors(t,i);const d=bp.dot(Ep),f=_p.dot(Ep);if(f>=0&&d<=f)return e.copy(i);const p=d*c-a*f;if(p<=0&&c>=0&&f<=0)return s=c/(c-f),e.copy(n).addScaledVector(_p,s);const m=u*f-d*l;if(m<=0&&l-u>=0&&d-f>=0)return wp.subVectors(i,r),s=(l-u)/(l-u+(d-f)),e.copy(r).addScaledVector(wp,s);const g=1/(m+p+h);return o=p*g,s=h*g,e.copy(n).addScaledVector(bp,o).addScaledVector(_p,s)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const Mp={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ap={h:0,s:0,l:0},Cp={h:0,s:0,l:0};function Op(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function Rp(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function Ip(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}class Lp{constructor(t,e,n){return Object.defineProperty(this,"isColor",{value:!0}),void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}setRGB(t,e,n){return this.r=t,this.g=e,this.b=n,this}setHSL(t,e,n){if(t=Jd.euclideanModulo(t,1),e=Jd.clamp(e,0,1),n=Jd.clamp(n,0,1),0===e)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+e):n+e-n*e,i=2*n-r;this.r=Op(i,r,t+1/3),this.g=Op(i,r,t),this.b=Op(i,r,t-1/3)}return this}setStyle(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){let t;const r=n[2];switch(n[1]){case"rgb":case"rgba":if(t=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,e(t[4]),this;if(t=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,e(t[4]),this;break;case"hsl":case"hsla":if(t=/^(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r)){const n=parseFloat(t[1])/360,r=parseInt(t[2],10)/100,i=parseInt(t[3],10)/100;return e(t[4]),this.setHSL(n,r,i)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(t)){const t=n[1],e=t.length;if(3===e)return this.r=parseInt(t.charAt(0)+t.charAt(0),16)/255,this.g=parseInt(t.charAt(1)+t.charAt(1),16)/255,this.b=parseInt(t.charAt(2)+t.charAt(2),16)/255,this;if(6===e)return this.r=parseInt(t.charAt(0)+t.charAt(1),16)/255,this.g=parseInt(t.charAt(2)+t.charAt(3),16)/255,this.b=parseInt(t.charAt(4)+t.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}setColorName(t){const e=Mp[t];return void 0!==e?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copyGammaToLinear(t,e=2){return this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this}copyLinearToGamma(t,e=2){const n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this}convertGammaToLinear(t){return this.copyGammaToLinear(this,t),this}convertLinearToGamma(t){return this.copyLinearToGamma(this,t),this}copySRGBToLinear(t){return this.r=Rp(t.r),this.g=Rp(t.g),this.b=Rp(t.b),this}copyLinearToSRGB(t){return this.r=Ip(t.r),this.g=Ip(t.g),this.b=Ip(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});const e=this.r,n=this.g,r=this.b,i=Math.max(e,n,r),o=Math.min(e,n,r);let s,a;const c=(o+i)/2;if(o===i)s=0,a=0;else{const t=i-o;switch(a=c<=.5?t/(i+o):t/(2-i-o),i){case e:s=(n-r)/t+(n<r?6:0);break;case n:s=(r-e)/t+2;break;case r:s=(e-n)/t+4}s/=6}return t.h=s,t.s=a,t.l=c,t}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(t,e,n){return this.getHSL(Ap),Ap.h+=t,Ap.s+=e,Ap.l+=n,this.setHSL(Ap.h,Ap.s,Ap.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpHSL(t,e){this.getHSL(Ap),t.getHSL(Cp);const n=Jd.lerp(Ap.h,Cp.h,e),r=Jd.lerp(Ap.s,Cp.s,e),i=Jd.lerp(Ap.l,Cp.l,e);return this.setHSL(n,r,i),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}Lp.NAMES=Mp,Lp.prototype.r=1,Lp.prototype.g=1,Lp.prototype.b=1;class Pp{constructor(t,e,n,r,i,o=0){this.a=t,this.b=e,this.c=n,this.normal=r&&r.isVector3?r:new hf,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new Lp,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=o}clone(){return(new this.constructor).copy(this)}copy(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(let e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(let e=0,n=t.vertexColors.length;e<n;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}}let Np=0;function Dp(){Object.defineProperty(this,"id",{value:Np++}),this.uuid=Jd.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=Nu,this.side=Cu,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Zu,this.blendDst=Ku,this.blendEquation=Uu,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=il,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=jd,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Sd,this.stencilZFail=Sd,this.stencilZPass=Sd,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function kp(t){Dp.call(this),this.type="MeshBasicMaterial",this.color=new Lp(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ul,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(t)}Dp.prototype=Object.assign(Object.create(Kd.prototype),{constructor:Dp,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if("shading"===e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===Iu;continue}const r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}},toJSON:function(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(t){const e=[];for(const n in t){const r=t[n];delete r.metadata,e.push(r)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Nu&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==Cu&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){const e=r(t.textures),i=r(t.images);e.length>0&&(n.textures=e),i.length>0&&(n.images=i)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const t=e.length;n=new Array(t);for(let r=0;r!==t;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(Dp.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),(kp.prototype=Object.create(Dp.prototype)).constructor=kp,kp.prototype.isMeshBasicMaterial=!0,kp.prototype.copy=function(t){return Dp.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this};const jp=new hf,Fp=new Qd;function Up(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.usage=Fd,this.updateRange={offset:0,count:-1},this.version=0}function Bp(t,e,n){Up.call(this,new Int8Array(t),e,n)}function zp(t,e,n){Up.call(this,new Uint8Array(t),e,n)}function Hp(t,e,n){Up.call(this,new Uint8ClampedArray(t),e,n)}function Vp(t,e,n){Up.call(this,new Int16Array(t),e,n)}function Gp(t,e,n){Up.call(this,new Uint16Array(t),e,n)}function Wp(t,e,n){Up.call(this,new Int32Array(t),e,n)}function qp(t,e,n){Up.call(this,new Uint32Array(t),e,n)}function Xp(t,e,n){Up.call(this,new Uint16Array(t),e,n)}function Zp(t,e,n){Up.call(this,new Float32Array(t),e,n)}function Kp(t,e,n){Up.call(this,new Float64Array(t),e,n)}Object.defineProperty(Up.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Up.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){const e=this.array;let n=0;for(let r=0,i=t.length;r<i;r++){let i=t[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),i=new Lp),e[n++]=i.r,e[n++]=i.g,e[n++]=i.b}return this},copyVector2sArray:function(t){const e=this.array;let n=0;for(let r=0,i=t.length;r<i;r++){let i=t[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),i=new Qd),e[n++]=i.x,e[n++]=i.y}return this},copyVector3sArray:function(t){const e=this.array;let n=0;for(let r=0,i=t.length;r<i;r++){let i=t[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),i=new hf),e[n++]=i.x,e[n++]=i.y,e[n++]=i.z}return this},copyVector4sArray:function(t){const e=this.array;let n=0;for(let r=0,i=t.length;r<i;r++){let i=t[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),i=new af),e[n++]=i.x,e[n++]=i.y,e[n++]=i.z,e[n++]=i.w}return this},applyMatrix3:function(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)Fp.fromBufferAttribute(this,e),Fp.applyMatrix3(t),this.setXY(e,Fp.x,Fp.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)jp.fromBufferAttribute(this,e),jp.applyMatrix3(t),this.setXYZ(e,jp.x,jp.y,jp.z);return this},applyMatrix4:function(t){for(let e=0,n=this.count;e<n;e++)jp.x=this.getX(e),jp.y=this.getY(e),jp.z=this.getZ(e),jp.applyMatrix4(t),this.setXYZ(e,jp.x,jp.y,jp.z);return this},applyNormalMatrix:function(t){for(let e=0,n=this.count;e<n;e++)jp.x=this.getX(e),jp.y=this.getY(e),jp.z=this.getZ(e),jp.applyNormalMatrix(t),this.setXYZ(e,jp.x,jp.y,jp.z);return this},transformDirection:function(t){for(let e=0,n=this.count;e<n;e++)jp.x=this.getX(e),jp.y=this.getY(e),jp.z=this.getZ(e),jp.transformDirection(t),this.setXYZ(e,jp.x,jp.y,jp.z);return this},set:function(t,e=0){return this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return this.array[0+(t*=this.itemSize)]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,r){return this.array[0+(t*=this.itemSize)]=e,this.array[t+1]=n,this.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return this.array[0+(t*=this.itemSize)]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),(Bp.prototype=Object.create(Up.prototype)).constructor=Bp,(zp.prototype=Object.create(Up.prototype)).constructor=zp,(Hp.prototype=Object.create(Up.prototype)).constructor=Hp,(Vp.prototype=Object.create(Up.prototype)).constructor=Vp,(Gp.prototype=Object.create(Up.prototype)).constructor=Gp,(Wp.prototype=Object.create(Up.prototype)).constructor=Wp,(qp.prototype=Object.create(Up.prototype)).constructor=qp,(Xp.prototype=Object.create(Up.prototype)).constructor=Xp,Xp.prototype.isFloat16BufferAttribute=!0,(Zp.prototype=Object.create(Up.prototype)).constructor=Zp,(Kp.prototype=Object.create(Up.prototype)).constructor=Kp;class Yp{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(t){const e=[];let n,r,i=void 0;const o=t.faces;for(r=0;r<o.length;r++){const t=o[r];t.materialIndex!==i&&(i=t.materialIndex,void 0!==n&&(n.count=3*r-n.start,e.push(n)),n={start:3*r,materialIndex:i})}void 0!==n&&(n.count=3*r-n.start,e.push(n)),this.groups=e}fromGeometry(t){const e=t.faces,n=t.vertices,r=t.faceVertexUvs,i=r[0]&&r[0].length>0,o=r[1]&&r[1].length>0,s=t.morphTargets,a=s.length;let c;if(a>0){c=[];for(let t=0;t<a;t++)c[t]={name:s[t].name,data:[]};this.morphTargets.position=c}const u=t.morphNormals,l=u.length;let h;if(l>0){h=[];for(let t=0;t<l;t++)h[t]={name:u[t].name,data:[]};this.morphTargets.normal=h}const d=t.skinIndices,f=t.skinWeights,p=d.length===n.length,m=f.length===n.length;n.length>0&&0===e.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let g=0;g<e.length;g++){const t=e[g];this.vertices.push(n[t.a],n[t.b],n[t.c]);const y=t.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{const e=t.normal;this.normals.push(e,e,e)}const v=t.vertexColors;if(3===v.length)this.colors.push(v[0],v[1],v[2]);else{const e=t.color;this.colors.push(e,e,e)}if(!0===i){const t=r[0][g];void 0!==t?this.uvs.push(t[0],t[1],t[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",g),this.uvs.push(new Qd,new Qd,new Qd))}if(!0===o){const t=r[1][g];void 0!==t?this.uvs2.push(t[0],t[1],t[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",g),this.uvs2.push(new Qd,new Qd,new Qd))}for(let e=0;e<a;e++){const n=s[e].vertices;c[e].data.push(n[t.a],n[t.b],n[t.c])}for(let e=0;e<l;e++){const t=u[e].vertexNormals[g];h[e].data.push(t.a,t.b,t.c)}p&&this.skinIndices.push(d[t.a],d[t.b],d[t.c]),m&&this.skinWeights.push(f[t.a],f[t.b],f[t.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this}}function $p(t){if(0===t.length)return-1/0;let e=t[0];for(let n=1,r=t.length;n<r;++n)t[n]>e&&(e=t[n]);return e}const Jp={Int8Array,Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Qp(t,e){return new Jp[t](e)}let tm=1;const em=new Uf,nm=new lp,rm=new hf,im=new pf,om=new pf,sm=new hf;function am(){Object.defineProperty(this,"id",{value:tm+=2}),this.uuid=Jd.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}am.prototype=Object.assign(Object.create(Kd.prototype),{constructor:am,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){return this.index=Array.isArray(t)?new($p(t)>65535?qp:Gp)(t,1):t,this},getAttribute:function(t){return this.attributes[t]},setAttribute:function(t,e){return this.attributes[t]=e,this},deleteAttribute:function(t){return delete this.attributes[t],this},hasAttribute:function(t){return void 0!==this.attributes[t]},addGroup:function(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix4:function(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const e=(new tf).getNormalMatrix(t);n.applyNormalMatrix(e),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(t){return em.makeRotationX(t),this.applyMatrix4(em),this},rotateY:function(t){return em.makeRotationY(t),this.applyMatrix4(em),this},rotateZ:function(t){return em.makeRotationZ(t),this.applyMatrix4(em),this},translate:function(t,e,n){return em.makeTranslation(t,e,n),this.applyMatrix4(em),this},scale:function(t,e,n){return em.makeScale(t,e,n),this.applyMatrix4(em),this},lookAt:function(t){return nm.lookAt(t),nm.updateMatrix(),this.applyMatrix4(nm.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(rm).negate(),this.translate(rm.x,rm.y,rm.z),this},setFromObject:function(t){const e=t.geometry;if(t.isPoints||t.isLine){const t=new Zp(3*e.vertices.length,3),n=new Zp(3*e.colors.length,3);if(this.setAttribute("position",t.copyVector3sArray(e.vertices)),this.setAttribute("color",n.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){const t=new Zp(e.lineDistances.length,1);this.setAttribute("lineDistance",t.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){const e=[];for(let n=0,r=t.length;n<r;n++){const r=t[n];e.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new Zp(e,3)),this},updateFromObject:function(t){let e=t.geometry;if(t.isMesh){let t=e.__directGeometry;if(!0===e.elementsNeedUpdate&&(t=void 0,e.elementsNeedUpdate=!1),void 0===t)return this.fromGeometry(e);t.verticesNeedUpdate=e.verticesNeedUpdate,t.normalsNeedUpdate=e.normalsNeedUpdate,t.colorsNeedUpdate=e.colorsNeedUpdate,t.uvsNeedUpdate=e.uvsNeedUpdate,t.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=t}if(!0===e.verticesNeedUpdate){const t=this.attributes.position;void 0!==t&&(t.copyVector3sArray(e.vertices),t.needsUpdate=!0),e.verticesNeedUpdate=!1}if(!0===e.normalsNeedUpdate){const t=this.attributes.normal;void 0!==t&&(t.copyVector3sArray(e.normals),t.needsUpdate=!0),e.normalsNeedUpdate=!1}if(!0===e.colorsNeedUpdate){const t=this.attributes.color;void 0!==t&&(t.copyColorsArray(e.colors),t.needsUpdate=!0),e.colorsNeedUpdate=!1}if(e.uvsNeedUpdate){const t=this.attributes.uv;void 0!==t&&(t.copyVector2sArray(e.uvs),t.needsUpdate=!0),e.uvsNeedUpdate=!1}if(e.lineDistancesNeedUpdate){const t=this.attributes.lineDistance;void 0!==t&&(t.copyArray(e.lineDistances),t.needsUpdate=!0),e.lineDistancesNeedUpdate=!1}return e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new Yp).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){const e=new Float32Array(3*t.vertices.length);if(this.setAttribute("position",new Up(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){const e=new Float32Array(3*t.normals.length);this.setAttribute("normal",new Up(e,3).copyVector3sArray(t.normals))}if(t.colors.length>0){const e=new Float32Array(3*t.colors.length);this.setAttribute("color",new Up(e,3).copyColorsArray(t.colors))}if(t.uvs.length>0){const e=new Float32Array(2*t.uvs.length);this.setAttribute("uv",new Up(e,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){const e=new Float32Array(2*t.uvs2.length);this.setAttribute("uv2",new Up(e,2).copyVector2sArray(t.uvs2))}this.groups=t.groups;for(const n in t.morphTargets){const e=[],r=t.morphTargets[n];for(let t=0,n=r.length;t<n;t++){const n=r[t],i=new Zp(3*n.data.length,3);i.name=n.name,e.push(i.copyVector3sArray(n.data))}this.morphAttributes[n]=e}if(t.skinIndices.length>0){const e=new Zp(4*t.skinIndices.length,4);this.setAttribute("skinIndex",e.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){const e=new Zp(4*t.skinWeights.length,4);this.setAttribute("skinWeight",e.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new pf);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new hf(-1/0,-1/0,-1/0),new hf(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let t=0,n=e.length;t<n;t++)im.setFromBufferAttribute(e[t]),this.morphTargetsRelative?(sm.addVectors(this.boundingBox.min,im.min),this.boundingBox.expandByPoint(sm),sm.addVectors(this.boundingBox.max,im.max),this.boundingBox.expandByPoint(sm)):(this.boundingBox.expandByPoint(im.min),this.boundingBox.expandByPoint(im.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Rf);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new hf,1/0);if(t){const n=this.boundingSphere.center;if(im.setFromBufferAttribute(t),e)for(let t=0,i=e.length;t<i;t++)om.setFromBufferAttribute(e[t]),this.morphTargetsRelative?(sm.addVectors(im.min,om.min),im.expandByPoint(sm),sm.addVectors(im.max,om.max),im.expandByPoint(sm)):(im.expandByPoint(om.min),im.expandByPoint(om.max));im.getCenter(n);let r=0;for(let e=0,i=t.count;e<i;e++)sm.fromBufferAttribute(t,e),r=Math.max(r,n.distanceToSquared(sm));if(e)for(let i=0,o=e.length;i<o;i++){const o=e[i],s=this.morphTargetsRelative;for(let e=0,i=o.count;e<i;e++)sm.fromBufferAttribute(o,e),s&&(rm.fromBufferAttribute(t,e),sm.add(rm)),r=Math.max(r,n.distanceToSquared(sm))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new Up(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let t=0,e=n.count;t<e;t++)n.setXYZ(t,0,0,0);const r=new hf,i=new hf,o=new hf,s=new hf,a=new hf,c=new hf,u=new hf,l=new hf;if(t)for(let h=0,d=t.count;h<d;h+=3){const d=t.getX(h+0),f=t.getX(h+1),p=t.getX(h+2);r.fromBufferAttribute(e,d),i.fromBufferAttribute(e,f),o.fromBufferAttribute(e,p),u.subVectors(o,i),l.subVectors(r,i),u.cross(l),s.fromBufferAttribute(n,d),a.fromBufferAttribute(n,f),c.fromBufferAttribute(n,p),s.add(u),a.add(u),c.add(u),n.setXYZ(d,s.x,s.y,s.z),n.setXYZ(f,a.x,a.y,a.z),n.setXYZ(p,c.x,c.y,c.z)}else for(let t=0,h=e.count;t<h;t+=3)r.fromBufferAttribute(e,t+0),i.fromBufferAttribute(e,t+1),o.fromBufferAttribute(e,t+2),u.subVectors(o,i),l.subVectors(r,i),u.cross(l),n.setXYZ(t+0,u.x,u.y,u.z),n.setXYZ(t+1,u.x,u.y,u.z),n.setXYZ(t+2,u.x,u.y,u.z);this.normalizeNormals(),n.needsUpdate=!0}},merge:function(t,e){if(!t||!t.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const r in n){if(void 0===t.attributes[r])continue;const i=n[r].array,o=t.attributes[r],s=o.array,a=o.itemSize*e,c=Math.min(s.length,i.length-a);for(let t=0,e=a;t<c;t++,e++)i[e]=s[t]}return this},normalizeNormals:function(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)sm.fromBufferAttribute(t,e),sm.normalize(),t.setXYZ(e,sm.x,sm.y,sm.z)},toNonIndexed:function(){function t(t,e){const n=t.array,r=t.itemSize,i=t.normalized,o=new n.constructor(e.length*r);let s=0,a=0;for(let c=0,u=e.length;c<u;c++){s=e[c]*r;for(let t=0;t<r;t++)o[a++]=n[s++]}return new Up(o,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;const e=new am,n=this.index.array,r=this.attributes;for(const s in r){const i=t(r[s],n);e.setAttribute(s,i)}const i=this.morphAttributes;for(const s in i){const r=[],o=i[s];for(let e=0,i=o.length;e<i;e++){const i=t(o[e],n);r.push(i)}e.morphAttributes[s]=r}e.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let s=0,a=o.length;s<a;s++){const t=o[s];e.addGroup(t.start,t.count,t.materialIndex)}return e},toJSON:function(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const a in n){const e=n[a],r=e.toJSON(t.data);""!==e.name&&(r.name=e.name),t.data.attributes[a]=r}const r={};let i=!1;for(const a in this.morphAttributes){const e=this.morphAttributes[a],n=[];for(let r=0,i=e.length;r<i;r++){const i=e[r],o=i.toJSON(t.data);""!==i.name&&(o.name=i.name),n.push(o)}n.length>0&&(r[a]=n,i=!0)}i&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const s=this.boundingSphere;return null!==s&&(t.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),t},clone:function(){return(new am).copy(this)},copy:function(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const r=t.attributes;for(const c in r)this.setAttribute(c,r[c].clone(e));const i=t.morphAttributes;for(const c in i){const t=[],n=i[c];for(let r=0,i=n.length;r<i;r++)t.push(n[r].clone(e));this.morphAttributes[c]=t}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let c=0,u=o.length;c<u;c++){const t=o[c];this.addGroup(t.start,t.count,t.materialIndex)}const s=t.boundingBox;null!==s&&(this.boundingBox=s.clone());const a=t.boundingSphere;return null!==a&&(this.boundingSphere=a.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});const cm=new Uf,um=new Ff,lm=new Rf,hm=new hf,dm=new hf,fm=new hf,pm=new hf,mm=new hf,gm=new hf,ym=new hf,vm=new hf,bm=new hf,_m=new Qd,wm=new Qd,xm=new Qd,Sm=new hf,Em=new hf;function Tm(t=new am,e=new kp){lp.call(this),this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}function Mm(t,e,n,r,i,o,s,a){let c;if(c=e.side===Ou?r.intersectTriangle(s,o,i,!0,a):r.intersectTriangle(i,o,s,e.side!==Ru,a),null===c)return null;Em.copy(a),Em.applyMatrix4(t.matrixWorld);const u=n.ray.origin.distanceTo(Em);return u<n.near||u>n.far?null:{distance:u,point:Em.clone(),object:t}}function Am(t,e,n,r,i,o,s,a,c,u,l,h){hm.fromBufferAttribute(i,u),dm.fromBufferAttribute(i,l),fm.fromBufferAttribute(i,h);const d=t.morphTargetInfluences;if(e.morphTargets&&o&&d){ym.set(0,0,0),vm.set(0,0,0),bm.set(0,0,0);for(let t=0,e=o.length;t<e;t++){const e=d[t],n=o[t];0!==e&&(pm.fromBufferAttribute(n,u),mm.fromBufferAttribute(n,l),gm.fromBufferAttribute(n,h),s?(ym.addScaledVector(pm,e),vm.addScaledVector(mm,e),bm.addScaledVector(gm,e)):(ym.addScaledVector(pm.sub(hm),e),vm.addScaledVector(mm.sub(dm),e),bm.addScaledVector(gm.sub(fm),e)))}hm.add(ym),dm.add(vm),fm.add(bm)}t.isSkinnedMesh&&(t.boneTransform(u,hm),t.boneTransform(l,dm),t.boneTransform(h,fm));const f=Mm(t,e,n,r,hm,dm,fm,Sm);if(f){a&&(_m.fromBufferAttribute(a,u),wm.fromBufferAttribute(a,l),xm.fromBufferAttribute(a,h),f.uv=Tp.getUV(Sm,hm,dm,fm,_m,wm,xm,new Qd)),c&&(_m.fromBufferAttribute(c,u),wm.fromBufferAttribute(c,l),xm.fromBufferAttribute(c,h),f.uv2=Tp.getUV(Sm,hm,dm,fm,_m,wm,xm,new Qd));const t=new Pp(u,l,h);Tp.getNormal(hm,dm,fm,t.normal),f.face=t}return f}Tm.prototype=Object.assign(Object.create(lp.prototype),{constructor:Tm,isMesh:!0,copy:function(t){return lp.prototype.copy.call(this,t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this},updateMorphTargets:function(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(t,e){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0===r)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),lm.copy(n.boundingSphere),lm.applyMatrix4(i),!1===t.ray.intersectsSphere(lm))return;if(cm.copy(i).invert(),um.copy(t.ray).applyMatrix4(cm),null!==n.boundingBox&&!1===um.intersectsBox(n.boundingBox))return;let o;if(n.isBufferGeometry){const i=n.index,s=n.attributes.position,a=n.morphAttributes.position,c=n.morphTargetsRelative,u=n.attributes.uv,l=n.attributes.uv2,h=n.groups,d=n.drawRange;if(null!==i)if(Array.isArray(r))for(let n=0,f=h.length;n<f;n++){const f=h[n],p=r[f.materialIndex];for(let n=Math.max(f.start,d.start),r=Math.min(f.start+f.count,d.start+d.count);n<r;n+=3){const r=i.getX(n),h=i.getX(n+1),d=i.getX(n+2);o=Am(this,p,t,um,s,a,c,u,l,r,h,d),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=f.materialIndex,e.push(o))}}else for(let n=Math.max(0,d.start),f=Math.min(i.count,d.start+d.count);n<f;n+=3){const h=i.getX(n),d=i.getX(n+1),f=i.getX(n+2);o=Am(this,r,t,um,s,a,c,u,l,h,d,f),o&&(o.faceIndex=Math.floor(n/3),e.push(o))}else if(void 0!==s)if(Array.isArray(r))for(let n=0,f=h.length;n<f;n++){const i=h[n],f=r[i.materialIndex];for(let n=Math.max(i.start,d.start),r=Math.min(i.start+i.count,d.start+d.count);n<r;n+=3)o=Am(this,f,t,um,s,a,c,u,l,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=i.materialIndex,e.push(o))}else for(let n=Math.max(0,d.start),f=Math.min(s.count,d.start+d.count);n<f;n+=3)o=Am(this,r,t,um,s,a,c,u,l,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),e.push(o))}else if(n.isGeometry){const i=Array.isArray(r),s=n.vertices,a=n.faces;let c;const u=n.faceVertexUvs[0];u.length>0&&(c=u);for(let n=0,l=a.length;n<l;n++){const u=a[n],l=i?r[u.materialIndex]:r;if(void 0===l)continue;const h=s[u.a],d=s[u.b],f=s[u.c];if(o=Mm(this,l,t,um,h,d,f,Sm),o){if(c&&c[n]){const t=c[n];_m.copy(t[0]),wm.copy(t[1]),xm.copy(t[2]),o.uv=Tp.getUV(Sm,h,d,f,_m,wm,xm,new Qd)}o.face=u,o.faceIndex=n,e.push(o)}}}}});class Cm extends am{constructor(t=1,e=1,n=1,r=1,i=1,o=1){super(),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};const s=this;r=Math.floor(r),i=Math.floor(i),o=Math.floor(o);const a=[],c=[],u=[],l=[];let h=0,d=0;function f(t,e,n,r,i,o,f,p,m,g,y){const v=o/m,b=f/g,_=o/2,w=f/2,x=p/2,S=m+1,E=g+1;let T=0,M=0;const A=new hf;for(let s=0;s<E;s++){const o=s*b-w;for(let a=0;a<S;a++)A[t]=(a*v-_)*r,A[e]=o*i,A[n]=x,c.push(A.x,A.y,A.z),A[t]=0,A[e]=0,A[n]=p>0?1:-1,u.push(A.x,A.y,A.z),l.push(a/m),l.push(1-s/g),T+=1}for(let s=0;s<g;s++)for(let t=0;t<m;t++){const e=h+t+S*(s+1),n=h+(t+1)+S*(s+1),r=h+(t+1)+S*s;a.push(h+t+S*s,e,r),a.push(e,n,r),M+=6}s.addGroup(d,M,y),d+=M,h+=T}f("z","y","x",-1,-1,n,e,t,o,i,0),f("z","y","x",1,-1,n,e,-t,o,i,1),f("x","z","y",1,1,t,n,e,r,o,2),f("x","z","y",1,-1,t,n,-e,r,o,3),f("x","y","z",1,-1,t,e,n,r,i,4),f("x","y","z",-1,-1,t,e,-n,r,i,5),this.setIndex(a),this.setAttribute("position",new Zp(c,3)),this.setAttribute("normal",new Zp(u,3)),this.setAttribute("uv",new Zp(l,2))}}function Om(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];e[n][r]=i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?i.clone():Array.isArray(i)?i.slice():i}}return e}function Rm(t){const e={};for(let n=0;n<t.length;n++){const r=Om(t[n]);for(const t in r)e[t]=r[t]}return e}const Im={clone:Om,merge:Rm};function Lm(t){Dp.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function Pm(){lp.call(this),this.type="Camera",this.matrixWorldInverse=new Uf,this.projectionMatrix=new Uf,this.projectionMatrixInverse=new Uf}function Nm(t=50,e=1,n=.1,r=2e3){Pm.call(this),this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Dm(t,e,n){if(lp.call(this),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const r=new Nm(90,1,t,e);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new hf(1,0,0)),this.add(r);const i=new Nm(90,1,t,e);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new hf(-1,0,0)),this.add(i);const o=new Nm(90,1,t,e);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new hf(0,1,0)),this.add(o);const s=new Nm(90,1,t,e);s.layers=this.layers,s.up.set(0,0,-1),s.lookAt(new hf(0,-1,0)),this.add(s);const a=new Nm(90,1,t,e);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new hf(0,0,1)),this.add(a);const c=new Nm(90,1,t,e);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new hf(0,0,-1)),this.add(c),this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();const u=t.xr.enabled,l=t.getRenderTarget();t.xr.enabled=!1;const h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,r),t.setRenderTarget(n,1),t.render(e,i),t.setRenderTarget(n,2),t.render(e,o),t.setRenderTarget(n,3),t.render(e,s),t.setRenderTarget(n,4),t.render(e,a),n.texture.generateMipmaps=h,t.setRenderTarget(n,5),t.render(e,c),t.setRenderTarget(l),t.xr.enabled=u}}function km(t,e,n,r,i,o,s,a,c,u){of.call(this,t=void 0!==t?t:[],e=void 0!==e?e:bl,n,r,i,o,s=void 0!==s?s:$l,a,c,u),this.flipY=!1,this._needsFlipEnvMap=!0}function jm(t,e,n){Number.isInteger(e)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),e=n),cf.call(this,t,t,e),this.texture=new km(void 0,(e=e||{}).mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture._needsFlipEnvMap=!1}function Fm(t,e,n,r,i,o,s,a,c,u,l,h){of.call(this,null,o,s,a,c,u,r,i,l,h),this.image={data:t||null,width:e||1,height:n||1},this.magFilter=void 0!==c?c:Cl,this.minFilter=void 0!==u?u:Cl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}(Lm.prototype=Object.create(Dp.prototype)).constructor=Lm,Lm.prototype.isShaderMaterial=!0,Lm.prototype.copy=function(t){return Dp.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Om(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this},Lm.prototype.toJSON=function(t){const e=Dp.prototype.toJSON.call(this,t);e.glslVersion=this.glslVersion,e.uniforms={};for(const r in this.uniforms){const n=this.uniforms[r].value;e.uniforms[r]=n&&n.isTexture?{type:"t",value:n.toJSON(t).uuid}:n&&n.isColor?{type:"c",value:n.getHex()}:n&&n.isVector2?{type:"v2",value:n.toArray()}:n&&n.isVector3?{type:"v3",value:n.toArray()}:n&&n.isVector4?{type:"v4",value:n.toArray()}:n&&n.isMatrix3?{type:"m3",value:n.toArray()}:n&&n.isMatrix4?{type:"m4",value:n.toArray()}:{value:n}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(e.extensions=n),e},Pm.prototype=Object.assign(Object.create(lp.prototype),{constructor:Pm,isCamera:!0,copy:function(t,e){return lp.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new hf),this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){lp.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()},updateWorldMatrix:function(t,e){lp.prototype.updateWorldMatrix.call(this,t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()},clone:function(){return(new this.constructor).copy(this)}}),Nm.prototype=Object.assign(Object.create(Pm.prototype),{constructor:Nm,isPerspectiveCamera:!0,copy:function(t,e){return Pm.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){const e=.5*this.getFilmHeight()/t;this.fov=2*Jd.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){const t=Math.tan(.5*Jd.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*Jd.RAD2DEG*Math.atan(Math.tan(.5*Jd.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,r,i,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const t=this.near;let e=t*Math.tan(.5*Jd.DEG2RAD*this.fov)/this.zoom,n=2*e,r=this.aspect*n,i=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const t=o.fullWidth,s=o.fullHeight;i+=o.offsetX*r/t,e-=o.offsetY*n/s,r*=o.width/t,n*=o.height/s}const s=this.filmOffset;0!==s&&(i+=t*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,e,e-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(t){const e=lp.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}),(Dm.prototype=Object.create(lp.prototype)).constructor=Dm,(km.prototype=Object.create(of.prototype)).constructor=km,km.prototype.isCubeTexture=!0,Object.defineProperty(km.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}}),(jm.prototype=Object.create(cf.prototype)).constructor=jm,jm.prototype.isWebGLCubeRenderTarget=!0,jm.prototype.fromEquirectangularTexture=function(t,e){this.texture.type=e.type,this.texture.format=Jl,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n=new Cm(5,5,5),r=new Lm({name:"CubemapFromEquirect",uniforms:Om({tEquirect:{value:null}}),vertexShader:"\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t#include <begin_vertex>\n\t\t\t\t#include <project_vertex>\n\n\t\t\t}\n\t\t",fragmentShader:"\n\n\t\t\tuniform sampler2D tEquirect;\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t}\n\t\t",side:Ou,blending:Pu});r.uniforms.tEquirect.value=e;const i=new Tm(n,r),o=e.minFilter;return e.minFilter===kl&&(e.minFilter=Pl),new Dm(1,10,this).update(t,i),e.minFilter=o,i.geometry.dispose(),i.material.dispose(),this},jm.prototype.clear=function(t,e,n,r){const i=t.getRenderTarget();for(let o=0;o<6;o++)t.setRenderTarget(this,o),t.clear(e,n,r);t.setRenderTarget(i)},(Fm.prototype=Object.create(of.prototype)).constructor=Fm,Fm.prototype.isDataTexture=!0;const Um=new Rf,Bm=new hf;class zm{constructor(t,e,n,r,i,o){this.planes=[void 0!==t?t:new pp,void 0!==e?e:new pp,void 0!==n?n:new pp,void 0!==r?r:new pp,void 0!==i?i:new pp,void 0!==o?o:new pp]}set(t,e,n,r,i,o){const s=this.planes;return s[0].copy(t),s[1].copy(e),s[2].copy(n),s[3].copy(r),s[4].copy(i),s[5].copy(o),this}clone(){return(new this.constructor).copy(this)}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t){const e=this.planes,n=t.elements,r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],c=n[5],u=n[6],l=n[7],h=n[8],d=n[9],f=n[10],p=n[11],m=n[12],g=n[13],y=n[14],v=n[15];return e[0].setComponents(s-r,l-a,p-h,v-m).normalize(),e[1].setComponents(s+r,l+a,p+h,v+m).normalize(),e[2].setComponents(s+i,l+c,p+d,v+g).normalize(),e[3].setComponents(s-i,l-c,p-d,v-g).normalize(),e[4].setComponents(s-o,l-u,p-f,v-y).normalize(),e[5].setComponents(s+o,l+u,p+f,v+y).normalize(),this}intersectsObject(t){const e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),Um.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(Um)}intersectsSprite(t){return Um.center.set(0,0,0),Um.radius=.7071067811865476,Um.applyMatrix4(t.matrixWorld),this.intersectsSphere(Um)}intersectsSphere(t){const e=this.planes,n=t.center,r=-t.radius;for(let i=0;i<6;i++)if(e[i].distanceToPoint(n)<r)return!1;return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const r=e[n];if(Bm.x=r.normal.x>0?t.max.x:t.min.x,Bm.y=r.normal.y>0?t.max.y:t.min.y,Bm.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(Bm)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}}function Hm(){let t=null,e=!1,n=null,r=null;function i(e,o){n(e,o),r=t.requestAnimationFrame(i)}return{start:function(){!0!==e&&null!==n&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function Vm(t,e){const n=e.isWebGL2,r=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),r.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);const n=r.get(e);n&&(t.deleteBuffer(n.buffer),r.delete(e))},update:function(e,i){if(e.isGLBufferAttribute){const t=r.get(e);return void((!t||t.version<e.version)&&r.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version}))}e.isInterleavedBufferAttribute&&(e=e.data);const o=r.get(e);void 0===o?r.set(e,function(e,r){const i=e.array,o=e.usage,s=t.createBuffer();t.bindBuffer(r,s),t.bufferData(r,i,o),e.onUploadCallback();let a=5126;return i instanceof Float32Array?a=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?e.isFloat16BufferAttribute?n?a=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):a=5123:i instanceof Int16Array?a=5122:i instanceof Uint32Array?a=5125:i instanceof Int32Array?a=5124:i instanceof Int8Array?a=5120:i instanceof Uint8Array&&(a=5121),{buffer:s,type:a,bytesPerElement:i.BYTES_PER_ELEMENT,version:e.version}}(e,i)):o.version<e.version&&(function(e,r,i){const o=r.array,s=r.updateRange;t.bindBuffer(i,e),-1===s.count?t.bufferSubData(i,0,o):(n?t.bufferSubData(i,s.offset*o.BYTES_PER_ELEMENT,o,s.offset,s.count):t.bufferSubData(i,s.offset*o.BYTES_PER_ELEMENT,o.subarray(s.offset,s.offset+s.count)),s.count=-1)}(o.buffer,e,i),o.version=e.version)}}}class Gm extends am{constructor(t=1,e=1,n=1,r=1){super(),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};const i=t/2,o=e/2,s=Math.floor(n),a=Math.floor(r),c=s+1,u=a+1,l=t/s,h=e/a,d=[],f=[],p=[],m=[];for(let g=0;g<u;g++){const t=g*h-o;for(let e=0;e<c;e++)f.push(e*l-i,-t,0),p.push(0,0,1),m.push(e/s),m.push(1-g/a)}for(let g=0;g<a;g++)for(let t=0;t<s;t++){const e=t+c*(g+1),n=t+1+c*(g+1),r=t+1+c*g;d.push(t+c*g,e,r),d.push(e,n,r)}this.setIndex(d),this.setAttribute("position",new Zp(f,3)),this.setAttribute("normal",new Zp(p,3)),this.setAttribute("uv",new Zp(m,2))}}const Wm={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor.xyz *= color.xyz;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmissionmap_fragment:"#ifdef USE_TRANSMISSIONMAP\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n#endif",transmissionmap_pars_fragment:"#ifdef USE_TRANSMISSIONMAP\n\tuniform sampler2D transmissionMap;\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},qm={common:{diffuse:{value:new Lp(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new tf},uv2Transform:{value:new tf},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Qd(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Lp(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Lp(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new tf}},sprite:{diffuse:{value:new Lp(15658734)},opacity:{value:1},center:{value:new Qd(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new tf}}},Xm={basic:{uniforms:Rm([qm.common,qm.specularmap,qm.envmap,qm.aomap,qm.lightmap,qm.fog]),vertexShader:Wm.meshbasic_vert,fragmentShader:Wm.meshbasic_frag},lambert:{uniforms:Rm([qm.common,qm.specularmap,qm.envmap,qm.aomap,qm.lightmap,qm.emissivemap,qm.fog,qm.lights,{emissive:{value:new Lp(0)}}]),vertexShader:Wm.meshlambert_vert,fragmentShader:Wm.meshlambert_frag},phong:{uniforms:Rm([qm.common,qm.specularmap,qm.envmap,qm.aomap,qm.lightmap,qm.emissivemap,qm.bumpmap,qm.normalmap,qm.displacementmap,qm.fog,qm.lights,{emissive:{value:new Lp(0)},specular:{value:new Lp(1118481)},shininess:{value:30}}]),vertexShader:Wm.meshphong_vert,fragmentShader:Wm.meshphong_frag},standard:{uniforms:Rm([qm.common,qm.envmap,qm.aomap,qm.lightmap,qm.emissivemap,qm.bumpmap,qm.normalmap,qm.displacementmap,qm.roughnessmap,qm.metalnessmap,qm.fog,qm.lights,{emissive:{value:new Lp(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Wm.meshphysical_vert,fragmentShader:Wm.meshphysical_frag},toon:{uniforms:Rm([qm.common,qm.aomap,qm.lightmap,qm.emissivemap,qm.bumpmap,qm.normalmap,qm.displacementmap,qm.gradientmap,qm.fog,qm.lights,{emissive:{value:new Lp(0)}}]),vertexShader:Wm.meshtoon_vert,fragmentShader:Wm.meshtoon_frag},matcap:{uniforms:Rm([qm.common,qm.bumpmap,qm.normalmap,qm.displacementmap,qm.fog,{matcap:{value:null}}]),vertexShader:Wm.meshmatcap_vert,fragmentShader:Wm.meshmatcap_frag},points:{uniforms:Rm([qm.points,qm.fog]),vertexShader:Wm.points_vert,fragmentShader:Wm.points_frag},dashed:{uniforms:Rm([qm.common,qm.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Wm.linedashed_vert,fragmentShader:Wm.linedashed_frag},depth:{uniforms:Rm([qm.common,qm.displacementmap]),vertexShader:Wm.depth_vert,fragmentShader:Wm.depth_frag},normal:{uniforms:Rm([qm.common,qm.bumpmap,qm.normalmap,qm.displacementmap,{opacity:{value:1}}]),vertexShader:Wm.normal_vert,fragmentShader:Wm.normal_frag},sprite:{uniforms:Rm([qm.sprite,qm.fog]),vertexShader:Wm.sprite_vert,fragmentShader:Wm.sprite_frag},background:{uniforms:{uvTransform:{value:new tf},t2D:{value:null}},vertexShader:Wm.background_vert,fragmentShader:Wm.background_frag},cube:{uniforms:Rm([qm.envmap,{opacity:{value:1}}]),vertexShader:Wm.cube_vert,fragmentShader:Wm.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Wm.equirect_vert,fragmentShader:Wm.equirect_frag},distanceRGBA:{uniforms:Rm([qm.common,qm.displacementmap,{referencePosition:{value:new hf},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Wm.distanceRGBA_vert,fragmentShader:Wm.distanceRGBA_frag},shadow:{uniforms:Rm([qm.lights,qm.fog,{color:{value:new Lp(0)},opacity:{value:1}}]),vertexShader:Wm.shadow_vert,fragmentShader:Wm.shadow_frag}};function Zm(t,e,n,r,i){const o=new Lp(0);let s,a,c=0,u=null,l=0,h=null;function d(t,e){n.buffers.color.setClear(t.r,t.g,t.b,e,i)}return{getClearColor:function(){return o},setClearColor:function(t,e=1){o.set(t),c=e,d(o,c)},getClearAlpha:function(){return c},setClearAlpha:function(t){c=t,d(o,c)},render:function(n,i,f,p){let m=!0===i.isScene?i.background:null;m&&m.isTexture&&(m=e.get(m));const g=t.xr,y=g.getSession&&g.getSession();y&&"additive"===y.environmentBlendMode&&(m=null),null===m?d(o,c):m&&m.isColor&&(d(m,1),p=!0),(t.autoClear||p)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),m&&(m.isCubeTexture||m.isWebGLCubeRenderTarget||m.mapping===Sl)?(void 0===a&&(a=new Tm(new Cm(1,1,1),new Lm({name:"BackgroundCubeMaterial",uniforms:Om(Xm.cube.uniforms),vertexShader:Xm.cube.vertexShader,fragmentShader:Xm.cube.fragmentShader,side:Ou,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),a.geometry.deleteAttribute("uv"),a.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(a.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(a)),m.isWebGLCubeRenderTarget&&(m=m.texture),a.material.uniforms.envMap.value=m,a.material.uniforms.flipEnvMap.value=m.isCubeTexture&&m._needsFlipEnvMap?-1:1,u===m&&l===m.version&&h===t.toneMapping||(a.material.needsUpdate=!0,u=m,l=m.version,h=t.toneMapping),n.unshift(a,a.geometry,a.material,0,0,null)):m&&m.isTexture&&(void 0===s&&(s=new Tm(new Gm(2,2),new Lm({name:"BackgroundMaterial",uniforms:Om(Xm.background.uniforms),vertexShader:Xm.background.vertexShader,fragmentShader:Xm.background.fragmentShader,side:Cu,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.deleteAttribute("normal"),Object.defineProperty(s.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(s)),s.material.uniforms.t2D.value=m,!0===m.matrixAutoUpdate&&m.updateMatrix(),s.material.uniforms.uvTransform.value.copy(m.matrix),u===m&&l===m.version&&h===t.toneMapping||(s.material.needsUpdate=!0,u=m,l=m.version,h=t.toneMapping),n.unshift(s,s.geometry,s.material,0,0,null))}}}function Km(t,e,n,r){const i=t.getParameter(34921),o=r.isWebGL2?null:e.get("OES_vertex_array_object"),s=r.isWebGL2||null!==o,a={},c=d(null);let u=c;function l(e){return r.isWebGL2?t.bindVertexArray(e):o.bindVertexArrayOES(e)}function h(e){return r.isWebGL2?t.deleteVertexArray(e):o.deleteVertexArrayOES(e)}function d(t){const e=[],n=[],r=[];for(let o=0;o<i;o++)e[o]=0,n[o]=0,r[o]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:r,object:t,attributes:{},index:null}}function f(){const t=u.newAttributes;for(let e=0,n=t.length;e<n;e++)t[e]=0}function p(t){m(t,0)}function m(n,i){const o=u.enabledAttributes,s=u.attributeDivisors;u.newAttributes[n]=1,0===o[n]&&(t.enableVertexAttribArray(n),o[n]=1),s[n]!==i&&((r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i)}function g(){const e=u.newAttributes,n=u.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==e[r]&&(t.disableVertexAttribArray(r),n[r]=0)}function y(e,n,i,o,s,a){!0!==r.isWebGL2||5124!==i&&5125!==i?t.vertexAttribPointer(e,n,i,o,s,a):t.vertexAttribIPointer(e,n,i,s,a)}function v(){b(),u!==c&&(u=c,l(u.object))}function b(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:function(i,c,h,v,b){let _=!1;if(s){const e=function(e,n,i){const s=!0===i.wireframe;let c=a[e.id];void 0===c&&(c={},a[e.id]=c);let u=c[n.id];void 0===u&&(u={},c[n.id]=u);let l=u[s];return void 0===l&&(l=d(r.isWebGL2?t.createVertexArray():o.createVertexArrayOES()),u[s]=l),l}(v,h,c);u!==e&&(u=e,l(u.object)),_=function(t,e){const n=u.attributes,r=t.attributes;let i=0;for(const o in r){const t=n[o],e=r[o];if(void 0===t)return!0;if(t.attribute!==e)return!0;if(t.data!==e.data)return!0;i++}return u.attributesNum!==i||u.index!==e}(v,b),_&&function(t,e){const n={},r=t.attributes;let i=0;for(const o in r){const t=r[o],e={};e.attribute=t,t.data&&(e.data=t.data),n[o]=e,i++}u.attributes=n,u.attributesNum=i,u.index=e}(v,b)}else{const t=!0===c.wireframe;u.geometry===v.id&&u.program===h.id&&u.wireframe===t||(u.geometry=v.id,u.program=h.id,u.wireframe=t,_=!0)}!0===i.isInstancedMesh&&(_=!0),null!==b&&n.update(b,34963),_&&(function(i,o,s,a){if(!1===r.isWebGL2&&(i.isInstancedMesh||a.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;f();const c=a.attributes,u=s.getAttributes(),l=o.defaultAttributeValues;for(const e in u){const r=u[e];if(r>=0){const o=c[e];if(void 0!==o){const e=o.normalized,i=o.itemSize,s=n.get(o);if(void 0===s)continue;const c=s.buffer,u=s.type,l=s.bytesPerElement;if(o.isInterleavedBufferAttribute){const n=o.data,s=n.stride,h=o.offset;n&&n.isInstancedInterleavedBuffer?(m(r,n.meshPerAttribute),void 0===a._maxInstanceCount&&(a._maxInstanceCount=n.meshPerAttribute*n.count)):p(r),t.bindBuffer(34962,c),y(r,i,u,e,s*l,h*l)}else o.isInstancedBufferAttribute?(m(r,o.meshPerAttribute),void 0===a._maxInstanceCount&&(a._maxInstanceCount=o.meshPerAttribute*o.count)):p(r),t.bindBuffer(34962,c),y(r,i,u,e,0,0)}else if("instanceMatrix"===e){const e=n.get(i.instanceMatrix);if(void 0===e)continue;const o=e.buffer,s=e.type;m(r+0,1),m(r+1,1),m(r+2,1),m(r+3,1),t.bindBuffer(34962,o),t.vertexAttribPointer(r+0,4,s,!1,64,0),t.vertexAttribPointer(r+1,4,s,!1,64,16),t.vertexAttribPointer(r+2,4,s,!1,64,32),t.vertexAttribPointer(r+3,4,s,!1,64,48)}else if("instanceColor"===e){const e=n.get(i.instanceColor);if(void 0===e)continue;const o=e.buffer,s=e.type;m(r,1),t.bindBuffer(34962,o),t.vertexAttribPointer(r,3,s,!1,12,0)}else if(void 0!==l){const n=l[e];if(void 0!==n)switch(n.length){case 2:t.vertexAttrib2fv(r,n);break;case 3:t.vertexAttrib3fv(r,n);break;case 4:t.vertexAttrib4fv(r,n);break;default:t.vertexAttrib1fv(r,n)}}}}g()}(i,c,h,v),null!==b&&t.bindBuffer(34963,n.get(b).buffer))},reset:v,resetDefaultState:b,dispose:function(){v();for(const t in a){const e=a[t];for(const t in e){const n=e[t];for(const t in n)h(n[t].object),delete n[t];delete e[t]}delete a[t]}},releaseStatesOfGeometry:function(t){if(void 0===a[t.id])return;const e=a[t.id];for(const n in e){const t=e[n];for(const e in t)h(t[e].object),delete t[e];delete e[n]}delete a[t.id]},releaseStatesOfProgram:function(t){for(const e in a){const n=a[e];if(void 0===n[t.id])continue;const r=n[t.id];for(const t in r)h(r[t].object),delete r[t];delete n[t.id]}},initAttributes:f,enableAttribute:p,disableUnusedAttributes:g}}function Ym(t,e,n,r){const i=r.isWebGL2;let o;this.setMode=function(t){o=t},this.render=function(e,r){t.drawArrays(o,e,r),n.update(r,o,1)},this.renderInstances=function(r,s,a){if(0===a)return;let c,u;if(i)c=t,u="drawArraysInstanced";else if(c=e.get("ANGLE_instanced_arrays"),u="drawArraysInstancedANGLE",null===c)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[u](o,r,s,a),n.update(s,o,a)}}function $m(t,e,n){let r;function i(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext;let s=void 0!==n.precision?n.precision:"highp";const a=i(s);a!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",a,"instead."),s=a);const c=!0===n.logarithmicDepthBuffer,u=t.getParameter(34930),l=t.getParameter(35660),h=t.getParameter(3379),d=t.getParameter(34076),f=t.getParameter(34921),p=t.getParameter(36347),m=t.getParameter(36348),g=t.getParameter(36349),y=l>0,v=o||!!e.get("OES_texture_float");return{isWebGL2:o,getMaxAnisotropy:function(){if(void 0!==r)return r;const n=e.get("EXT_texture_filter_anisotropic");return r=null!==n?t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,r},getMaxPrecision:i,precision:s,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:l,maxTextureSize:h,maxCubemapSize:d,maxAttributes:f,maxVertexUniforms:p,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:y,floatFragmentTextures:v,floatVertexTextures:y&&v,maxSamples:o?t.getParameter(36183):0}}function Jm(t){const e=this;let n=null,r=0,i=!1,o=!1;const s=new pp,a=new tf,c={value:null,needsUpdate:!1};function u(){c.value!==n&&(c.value=n,c.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function l(t,n,r,i){const o=null!==t?t.length:0;let u=null;if(0!==o){if(u=c.value,!0!==i||null===u){const e=r+4*o,i=n.matrixWorldInverse;a.getNormalMatrix(i),(null===u||u.length<e)&&(u=new Float32Array(e));for(let n=0,c=r;n!==o;++n,c+=4)s.copy(t[n]).applyMatrix4(i,a),s.normal.toArray(u,c),u[c+3]=s.constant}c.value=u,c.needsUpdate=!0}return e.numPlanes=o,e.numIntersection=0,u}this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e,o){const s=0!==t.length||e||0!==r||i;return i=e,n=l(t,o,0),r=t.length,s},this.beginShadows=function(){o=!0,l(null)},this.endShadows=function(){o=!1,u()},this.setState=function(e,s,a){const h=e.clippingPlanes,d=e.clipIntersection,f=e.clipShadows,p=t.get(e);if(!i||null===h||0===h.length||o&&!f)o?l(null):u();else{const t=o?0:r,e=4*t;let i=p.clippingState||null;c.value=i,i=l(h,s,e,a);for(let r=0;r!==e;++r)i[r]=n[r];p.clippingState=i,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=t}}}function Qm(t){let e=new WeakMap;function n(t,e){return e===wl?t.mapping=bl:e===xl&&(t.mapping=_l),t}function r(t){const n=t.target;n.removeEventListener("dispose",r);const i=e.get(n);void 0!==i&&(e.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const o=i.mapping;if(o===wl||o===xl){if(e.has(i))return n(e.get(i).texture,i.mapping);{const o=i.image;if(o&&o.height>0){const s=t.getRenderList(),a=t.getRenderTarget(),c=new jm(o.height/2);return c.fromEquirectangularTexture(t,i),e.set(i,c),t.setRenderTarget(a),t.setRenderList(s),i.addEventListener("dispose",r),n(c.texture,i.mapping)}return null}}}return i},dispose:function(){e=new WeakMap}}}function tg(t){const e={};return{has:function(n){if(void 0!==e[n])return null!==e[n];let r;switch(n){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(n)}return e[n]=r,null!==r},get:function(t){return this.has(t)||console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e[t]}}}function eg(t,e,n,r){const i=new WeakMap,o=new WeakMap;function s(t){const a=t.target,c=i.get(a);null!==c.index&&e.remove(c.index);for(const n in c.attributes)e.remove(c.attributes[n]);a.removeEventListener("dispose",s),i.delete(a);const u=o.get(c);u&&(e.remove(u),o.delete(c)),r.releaseStatesOfGeometry(c),!0===a.isInstancedBufferGeometry&&delete a._maxInstanceCount,n.memory.geometries--}function a(t){const n=[],r=t.index,i=t.attributes.position;let s=0;if(null!==r){const t=r.array;s=r.version;for(let e=0,r=t.length;e<r;e+=3){const r=t[e+0],i=t[e+1],o=t[e+2];n.push(r,i,i,o,o,r)}}else{s=i.version;for(let t=0,e=i.array.length/3-1;t<e;t+=3){const e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}const a=new($p(n)>65535?qp:Gp)(n,1);a.version=s;const c=o.get(t);c&&e.remove(c),o.set(t,a)}return{get:function(t,e){let r=i.get(e);return r||(e.addEventListener("dispose",s),e.isBufferGeometry?r=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new am).setFromObject(t)),r=e._bufferGeometry),i.set(e,r),n.memory.geometries++,r)},update:function(t){const n=t.attributes;for(const i in n)e.update(n[i],34962);const r=t.morphAttributes;for(const i in r){const t=r[i];for(let n=0,r=t.length;n<r;n++)e.update(t[n],34962)}},getWireframeAttribute:function(t){const e=o.get(t);if(e){const n=t.index;null!==n&&e.version<n.version&&a(t)}else a(t);return o.get(t)}}}function ng(t,e,n,r){const i=r.isWebGL2;let o,s,a;this.setMode=function(t){o=t},this.setIndex=function(t){s=t.type,a=t.bytesPerElement},this.render=function(e,r){t.drawElements(o,r,s,e*a),n.update(r,o,1)},this.renderInstances=function(r,c,u){if(0===u)return;let l,h;if(i)l=t,h="drawElementsInstanced";else if(l=e.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===l)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[h](o,c,s,r*a,u),n.update(c,o,u)}}function rg(t){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,n,r){switch(e.calls++,n){case 4:e.triangles+=r*(t/3);break;case 1:e.lines+=r*(t/2);break;case 3:e.lines+=r*(t-1);break;case 2:e.lines+=r*t;break;case 0:e.points+=r*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function ig(t,e){return t[0]-e[0]}function og(t,e){return Math.abs(e[1])-Math.abs(t[1])}function sg(t){const e={},n=new Float32Array(8),r=[];for(let i=0;i<8;i++)r[i]=[i,0];return{update:function(i,o,s,a){const c=i.morphTargetInfluences,u=void 0===c?0:c.length;let l=e[o.id];if(void 0===l){l=[];for(let t=0;t<u;t++)l[t]=[t,0];e[o.id]=l}for(let t=0;t<u;t++){const e=l[t];e[0]=t,e[1]=c[t]}l.sort(og);for(let t=0;t<8;t++)t<u&&l[t][1]?(r[t][0]=l[t][0],r[t][1]=l[t][1]):(r[t][0]=Number.MAX_SAFE_INTEGER,r[t][1]=0);r.sort(ig);const h=s.morphTargets&&o.morphAttributes.position,d=s.morphNormals&&o.morphAttributes.normal;let f=0;for(let t=0;t<8;t++){const e=r[t],i=e[0],s=e[1];i!==Number.MAX_SAFE_INTEGER&&s?(h&&o.getAttribute("morphTarget"+t)!==h[i]&&o.setAttribute("morphTarget"+t,h[i]),d&&o.getAttribute("morphNormal"+t)!==d[i]&&o.setAttribute("morphNormal"+t,d[i]),n[t]=s,f+=s):(h&&!0===o.hasAttribute("morphTarget"+t)&&o.deleteAttribute("morphTarget"+t),d&&!0===o.hasAttribute("morphNormal"+t)&&o.deleteAttribute("morphNormal"+t),n[t]=0)}const p=o.morphTargetsRelative?1:1-f;a.getUniforms().setValue(t,"morphTargetBaseInfluence",p),a.getUniforms().setValue(t,"morphTargetInfluences",n)}}}function ag(t,e,n,r){let i=new WeakMap;function o(t){const e=t.target;e.removeEventListener("dispose",o),n.remove(e.instanceMatrix),null!==e.instanceColor&&n.remove(e.instanceColor)}return{update:function(t){const s=r.render.frame,a=t.geometry,c=e.get(t,a);return i.get(c)!==s&&(a.isGeometry&&c.updateFromObject(t),e.update(c),i.set(c,s)),t.isInstancedMesh&&(!1===t.hasEventListener("dispose",o)&&t.addEventListener("dispose",o),n.update(t.instanceMatrix,34962),null!==t.instanceColor&&n.update(t.instanceColor,34962)),c},dispose:function(){i=new WeakMap}}}function cg(t=null,e=1,n=1,r=1){of.call(this,null),this.image={data:t,width:e,height:n,depth:r},this.magFilter=Cl,this.minFilter=Cl,this.wrapR=Ml,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function ug(t=null,e=1,n=1,r=1){of.call(this,null),this.image={data:t,width:e,height:n,depth:r},this.magFilter=Cl,this.minFilter=Cl,this.wrapR=Ml,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}Xm.physical={uniforms:Rm([Xm.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Qd(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Lp(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:Wm.meshphysical_vert,fragmentShader:Wm.meshphysical_frag},(cg.prototype=Object.create(of.prototype)).constructor=cg,cg.prototype.isDataTexture2DArray=!0,(ug.prototype=Object.create(of.prototype)).constructor=ug,ug.prototype.isDataTexture3D=!0;const lg=new of,hg=new cg,dg=new ug,fg=new km,pg=[],mg=[],gg=new Float32Array(16),yg=new Float32Array(9),vg=new Float32Array(4);function bg(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let o=pg[i];if(void 0===o&&(o=new Float32Array(i),pg[i]=o),0!==e){r.toArray(o,0);for(let r=1,i=0;r!==e;++r)i+=n,t[r].toArray(o,i)}return o}function _g(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function wg(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function xg(t,e){let n=mg[e];void 0===n&&(n=new Int32Array(e),mg[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function Sg(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Eg(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(_g(n,e))return;t.uniform2fv(this.addr,e),wg(n,e)}}function Tg(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(_g(n,e))return;t.uniform3fv(this.addr,e),wg(n,e)}}function Mg(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(_g(n,e))return;t.uniform4fv(this.addr,e),wg(n,e)}}function Ag(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(_g(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),wg(n,e)}else{if(_g(n,r))return;vg.set(r),t.uniformMatrix2fv(this.addr,!1,vg),wg(n,r)}}function Cg(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(_g(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),wg(n,e)}else{if(_g(n,r))return;yg.set(r),t.uniformMatrix3fv(this.addr,!1,yg),wg(n,r)}}function Og(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(_g(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),wg(n,e)}else{if(_g(n,r))return;gg.set(r),t.uniformMatrix4fv(this.addr,!1,gg),wg(n,r)}}function Rg(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(e||lg,i)}function Ig(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||hg,i)}function Lg(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||dg,i)}function Pg(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(e||fg,i)}function Ng(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Dg(t,e){const n=this.cache;_g(n,e)||(t.uniform2iv(this.addr,e),wg(n,e))}function kg(t,e){const n=this.cache;_g(n,e)||(t.uniform3iv(this.addr,e),wg(n,e))}function jg(t,e){const n=this.cache;_g(n,e)||(t.uniform4iv(this.addr,e),wg(n,e))}function Fg(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Ug(t,e){t.uniform1fv(this.addr,e)}function Bg(t,e){t.uniform1iv(this.addr,e)}function zg(t,e){t.uniform2iv(this.addr,e)}function Hg(t,e){t.uniform3iv(this.addr,e)}function Vg(t,e){t.uniform4iv(this.addr,e)}function Gg(t,e){const n=bg(e,this.size,2);t.uniform2fv(this.addr,n)}function Wg(t,e){const n=bg(e,this.size,3);t.uniform3fv(this.addr,n)}function qg(t,e){const n=bg(e,this.size,4);t.uniform4fv(this.addr,n)}function Xg(t,e){const n=bg(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function Zg(t,e){const n=bg(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function Kg(t,e){const n=bg(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function Yg(t,e,n){const r=e.length,i=xg(n,r);t.uniform1iv(this.addr,i);for(let o=0;o!==r;++o)n.safeSetTexture2D(e[o]||lg,i[o])}function $g(t,e,n){const r=e.length,i=xg(n,r);t.uniform1iv(this.addr,i);for(let o=0;o!==r;++o)n.safeSetTextureCube(e[o]||fg,i[o])}function Jg(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(t){case 5126:return Sg;case 35664:return Eg;case 35665:return Tg;case 35666:return Mg;case 35674:return Ag;case 35675:return Cg;case 35676:return Og;case 5124:case 35670:return Ng;case 35667:case 35671:return Dg;case 35668:case 35672:return kg;case 35669:case 35673:return jg;case 5125:return Fg;case 35678:case 36198:case 36298:case 36306:case 35682:return Rg;case 35679:case 36299:case 36307:return Lg;case 35680:case 36300:case 36308:case 36293:return Pg;case 36289:case 36303:case 36311:case 36292:return Ig}}(e.type)}function Qg(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return Ug;case 35664:return Gg;case 35665:return Wg;case 35666:return qg;case 35674:return Xg;case 35675:return Zg;case 35676:return Kg;case 5124:case 35670:return Bg;case 35667:case 35671:return zg;case 35668:case 35672:return Hg;case 35669:case 35673:return Vg;case 35678:case 36198:case 36298:case 36306:case 35682:return Yg;case 35680:case 36300:case 36308:case 36293:return $g}}(e.type)}function ty(t){this.id=t,this.seq=[],this.map={}}Qg.prototype.updateCache=function(t){const e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),wg(e,t)},ty.prototype.setValue=function(t,e,n){const r=this.seq;for(let i=0,o=r.length;i!==o;++i){const o=r[i];o.setValue(t,e[o.id],n)}};const ey=/(\w+)(\])?(\[|\.)?/g;function ny(t,e){t.seq.push(e),t.map[e.id]=e}function ry(t,e,n){const r=t.name,i=r.length;for(ey.lastIndex=0;;){const o=ey.exec(r),s=ey.lastIndex;let a=o[1];const c=o[3];if("]"===o[2]&&(a|=0),void 0===c||"["===c&&s+2===i){ny(n,void 0===c?new Jg(a,t,e):new Qg(a,t,e));break}{let t=n.map[a];void 0===t&&(t=new ty(a),ny(n,t)),n=t}}}function iy(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,35718);for(let r=0;r<n;++r){const n=t.getActiveUniform(e,r);ry(n,t.getUniformLocation(e,n.name),this)}}function oy(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}iy.prototype.setValue=function(t,e,n,r){const i=this.map[e];void 0!==i&&i.setValue(t,n,r)},iy.prototype.setOptional=function(t,e,n){const r=e[n];void 0!==r&&this.setValue(t,n,r)},iy.upload=function(t,e,n,r){for(let i=0,o=e.length;i!==o;++i){const o=e[i],s=n[o.id];!1!==s.needsUpdate&&o.setValue(t,s.value,r)}},iy.seqWithValue=function(t,e){const n=[];for(let r=0,i=t.length;r!==i;++r){const i=t[r];i.id in e&&n.push(i)}return n};let sy=0;function ay(t){switch(t){case ld:return["Linear","( value )"];case hd:return["sRGB","( value )"];case fd:return["RGBE","( value )"];case md:return["RGBM","( value, 7.0 )"];case gd:return["RGBM","( value, 16.0 )"];case yd:return["RGBD","( value, 256.0 )"];case dd:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case pd:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function cy(t,e,n){const r=t.getShaderParameter(e,35713),i=t.getShaderInfoLog(e).trim();return r&&""===i?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+i+function(t){const e=t.split("\n");for(let n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join("\n")}(t.getShaderSource(e))}function uy(t,e){const n=ay(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function ly(t,e){const n=ay(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function hy(t,e){let n;switch(e){case fl:n="Linear";break;case pl:n="Reinhard";break;case ml:n="OptimizedCineon";break;case gl:n="ACESFilmic";break;case yl:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function dy(t){return""!==t}function fy(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function py(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const my=/^[ \t]*#include +<([\w\d./]+)>/gm;function gy(t){return t.replace(my,yy)}function yy(t,e){const n=Wm[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return gy(n)}const vy=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,by=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function _y(t){return t.replace(by,xy).replace(vy,wy)}function wy(t,e,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),xy(0,e,n,r)}function xy(t,e,n,r){let i="";for(let o=parseInt(e);o<parseInt(n);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function Sy(t){let e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function Ey(t,e,n,r){const i=t.getContext(),o=n.defines;let s=n.vertexShader,a=n.fragmentShader;const c=function(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===Tu?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===Mu?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===Au&&(e="SHADOWMAP_TYPE_VSM"),e}(n),u=function(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case bl:case _l:e="ENVMAP_TYPE_CUBE";break;case Sl:case El:e="ENVMAP_TYPE_CUBE_UV"}return e}(n),l=function(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case _l:case El:e="ENVMAP_MODE_REFRACTION"}return e}(n),h=function(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case ul:e="ENVMAP_BLENDING_MULTIPLY";break;case ll:e="ENVMAP_BLENDING_MIX";break;case hl:e="ENVMAP_BLENDING_ADD"}return e}(n),d=t.gammaFactor>0?t.gammaFactor:1,f=n.isWebGL2?"":function(t){return[t.extensionDerivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(dy).join("\n")}(n),p=function(t){const e=[];for(const n in t){const r=t[n];!1!==r&&e.push("#define "+n+" "+r)}return e.join("\n")}(o),m=i.createProgram();let g,y,v=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=[p].filter(dy).join("\n"),g.length>0&&(g+="\n"),y=[f,p].filter(dy).join("\n"),y.length>0&&(y+="\n")):(g=[Sy(n),"#define SHADER_NAME "+n.shaderName,p,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+d,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+l:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(dy).join("\n"),y=[f,Sy(n),"#define SHADER_NAME "+n.shaderName,p,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+d,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.envMap?"#define "+l:"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==dl?"#define TONE_MAPPING":"",n.toneMapping!==dl?Wm.tonemapping_pars_fragment:"",n.toneMapping!==dl?hy("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",Wm.encodings_pars_fragment,n.map?uy("mapTexelToLinear",n.mapEncoding):"",n.matcap?uy("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?uy("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?uy("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMap?uy("lightMapTexelToLinear",n.lightMapEncoding):"",ly("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(dy).join("\n")),s=gy(s),s=fy(s,n),s=py(s,n),a=gy(a),a=fy(a,n),a=py(a,n),s=_y(s),a=_y(a),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(v="#version 300 es\n",g=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,y=["#define varying in",n.glslVersion===Zd?"":"out highp vec4 pc_fragColor;",n.glslVersion===Zd?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+y);const b=v+y+a,_=oy(i,35633,v+g+s),w=oy(i,35632,b);if(i.attachShader(m,_),i.attachShader(m,w),void 0!==n.index0AttributeName?i.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m),t.debug.checkShaderErrors){const t=i.getProgramInfoLog(m).trim(),e=i.getShaderInfoLog(_).trim(),n=i.getShaderInfoLog(w).trim();let r=!0,o=!0;if(!1===i.getProgramParameter(m,35714)){r=!1;const e=cy(i,_,"vertex"),n=cy(i,w,"fragment");console.error("THREE.WebGLProgram: shader error: ",i.getError(),"35715",i.getProgramParameter(m,35715),"gl.getProgramInfoLog",t,e,n)}else""!==t?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",t):""!==e&&""!==n||(o=!1);o&&(this.diagnostics={runnable:r,programLog:t,vertexShader:{log:e,prefix:g},fragmentShader:{log:n,prefix:y}})}let x,S;return i.deleteShader(_),i.deleteShader(w),this.getUniforms=function(){return void 0===x&&(x=new iy(i,m)),x},this.getAttributes=function(){return void 0===S&&(S=function(t,e){const n={},r=t.getProgramParameter(e,35721);for(let i=0;i<r;i++){const r=t.getActiveAttrib(e,i).name;n[r]=t.getAttribLocation(e,r)}return n}(i,m)),S},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.name=n.shaderName,this.id=sy++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=_,this.fragmentShader=w,this}function Ty(t,e,n,r,i,o){const s=[],a=r.isWebGL2,c=r.logarithmicDepthBuffer,u=r.floatVertexTextures,l=r.maxVertexUniforms,h=r.vertexTextures;let d=r.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},p=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function m(t){let e;return t&&t.isTexture?e=t.encoding:t&&t.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),e=t.texture.encoding):e=ld,e}return{getParameters:function(i,s,p,g,y){const v=g.fog,b=e.get(i.envMap||(i.isMeshStandardMaterial?g.environment:null)),_=f[i.type],w=y.isSkinnedMesh?function(t){const e=t.skeleton.bones;if(u)return 1024;{const t=Math.floor((l-20)/4),n=Math.min(t,e.length);return n<e.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+e.length+" bones. This GPU supports "+n+"."),0):n}}(y):0;let x,S;if(null!==i.precision&&(d=r.getMaxPrecision(i.precision),d!==i.precision&&console.warn("THREE.WebGLProgram.getParameters:",i.precision,"not supported, using",d,"instead.")),_){const t=Xm[_];x=t.vertexShader,S=t.fragmentShader}else x=i.vertexShader,S=i.fragmentShader;const E=t.getRenderTarget();return{isWebGL2:a,shaderID:_,shaderName:i.type,vertexShader:x,fragmentShader:S,defines:i.defines,isRawShaderMaterial:!0===i.isRawShaderMaterial,glslVersion:i.glslVersion,precision:d,instancing:!0===y.isInstancedMesh,instancingColor:!0===y.isInstancedMesh&&null!==y.instanceColor,supportsVertexTextures:h,outputEncoding:null!==E?m(E.texture):t.outputEncoding,map:!!i.map,mapEncoding:m(i.map),matcap:!!i.matcap,matcapEncoding:m(i.matcap),envMap:!!b,envMapMode:b&&b.mapping,envMapEncoding:m(b),envMapCubeUV:!!b&&(b.mapping===Sl||b.mapping===El),lightMap:!!i.lightMap,lightMapEncoding:m(i.lightMap),aoMap:!!i.aoMap,emissiveMap:!!i.emissiveMap,emissiveMapEncoding:m(i.emissiveMap),bumpMap:!!i.bumpMap,normalMap:!!i.normalMap,objectSpaceNormalMap:i.normalMapType===wd,tangentSpaceNormalMap:i.normalMapType===_d,clearcoatMap:!!i.clearcoatMap,clearcoatRoughnessMap:!!i.clearcoatRoughnessMap,clearcoatNormalMap:!!i.clearcoatNormalMap,displacementMap:!!i.displacementMap,roughnessMap:!!i.roughnessMap,metalnessMap:!!i.metalnessMap,specularMap:!!i.specularMap,alphaMap:!!i.alphaMap,gradientMap:!!i.gradientMap,sheen:!!i.sheen,transmissionMap:!!i.transmissionMap,combine:i.combine,vertexTangents:i.normalMap&&i.vertexTangents,vertexColors:i.vertexColors,vertexUvs:!!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatMap||i.clearcoatRoughnessMap||i.clearcoatNormalMap||i.displacementMap||i.transmissionMap),uvsVertexOnly:!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatNormalMap||i.transmissionMap||!i.displacementMap),fog:!!v,useFog:i.fog,fogExp2:v&&v.isFogExp2,flatShading:i.flatShading,sizeAttenuation:i.sizeAttenuation,logarithmicDepthBuffer:c,skinning:i.skinning&&w>0,maxBones:w,useVertexTexture:u,morphTargets:i.morphTargets,morphNormals:i.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:i.dithering,shadowMapEnabled:t.shadowMap.enabled&&p.length>0,shadowMapType:t.shadowMap.type,toneMapping:i.toneMapped?t.toneMapping:dl,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:i.premultipliedAlpha,alphaTest:i.alphaTest,doubleSided:i.side===Ru,flipSided:i.side===Ou,depthPacking:void 0!==i.depthPacking&&i.depthPacking,index0AttributeName:i.index0AttributeName,extensionDerivatives:i.extensions&&i.extensions.derivatives,extensionFragDepth:i.extensions&&i.extensions.fragDepth,extensionDrawBuffers:i.extensions&&i.extensions.drawBuffers,extensionShaderTextureLOD:i.extensions&&i.extensions.shaderTextureLOD,rendererExtensionFragDepth:a||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:a||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:a||n.has("EXT_shader_texture_lod"),customProgramCacheKey:i.customProgramCacheKey()}},getProgramCacheKey:function(e){const n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.fragmentShader),n.push(e.vertexShader)),void 0!==e.defines)for(const t in e.defines)n.push(t),n.push(e.defines[t]);if(!1===e.isRawShaderMaterial){for(let t=0;t<p.length;t++)n.push(e[p[t]]);n.push(t.outputEncoding),n.push(t.gammaFactor)}return n.push(e.customProgramCacheKey),n.join()},getUniforms:function(t){const e=f[t.type];let n;return n=e?Im.clone(Xm[e].uniforms):t.uniforms,n},acquireProgram:function(e,n){let r;for(let t=0,i=s.length;t<i;t++){const e=s[t];if(e.cacheKey===n){r=e,++r.usedTimes;break}}return void 0===r&&(r=new Ey(t,n,e,i),s.push(r)),r},releaseProgram:function(t){if(0==--t.usedTimes){const e=s.indexOf(t);s[e]=s[s.length-1],s.pop(),t.destroy()}},programs:s}}function My(){let t=new WeakMap;return{get:function(e){let n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,r){t.get(e)[n]=r},dispose:function(){t=new WeakMap}}}function Ay(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function Cy(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function Oy(t){const e=[];let n=0;const r=[],i=[],o={id:-1};function s(r,i,s,a,c,u){let l=e[n];const h=t.get(s);return void 0===l?(l={id:r.id,object:r,geometry:i,material:s,program:h.program||o,groupOrder:a,renderOrder:r.renderOrder,z:c,group:u},e[n]=l):(l.id=r.id,l.object=r,l.geometry=i,l.material=s,l.program=h.program||o,l.groupOrder=a,l.renderOrder=r.renderOrder,l.z=c,l.group=u),n++,l}return{opaque:r,transparent:i,init:function(){n=0,r.length=0,i.length=0},push:function(t,e,n,o,a,c){const u=s(t,e,n,o,a,c);(!0===n.transparent?i:r).push(u)},unshift:function(t,e,n,o,a,c){const u=s(t,e,n,o,a,c);(!0===n.transparent?i:r).unshift(u)},finish:function(){for(let t=n,r=e.length;t<r;t++){const n=e[t];if(null===n.id)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.program=null,n.group=null}},sort:function(t,e){r.length>1&&r.sort(t||Ay),i.length>1&&i.sort(e||Cy)}}}function Ry(t){let e=new WeakMap;return{get:function(n,r){const i=e.get(n);let o;return void 0===i?(o=new Oy(t),e.set(n,new WeakMap),e.get(n).set(r,o)):(o=i.get(r),void 0===o&&(o=new Oy(t),i.set(r,o))),o},dispose:function(){e=new WeakMap}}}function Iy(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new hf,color:new Lp};break;case"SpotLight":n={position:new hf,direction:new hf,color:new Lp,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new hf,color:new Lp,distance:0,decay:0};break;case"HemisphereLight":n={direction:new hf,skyColor:new Lp,groundColor:new Lp};break;case"RectAreaLight":n={color:new Lp,position:new hf,halfWidth:new hf,halfHeight:new hf}}return t[e.id]=n,n}}}let Ly=0;function Py(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function Ny(t,e){const n=new Iy,r=function(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Qd};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Qd,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let c=0;c<9;c++)i.probe.push(new hf);const o=new hf,s=new Uf,a=new Uf;return{setup:function(o){let s=0,a=0,c=0;for(let t=0;t<9;t++)i.probe[t].set(0,0,0);let u=0,l=0,h=0,d=0,f=0,p=0,m=0,g=0;o.sort(Py);for(let t=0,e=o.length;t<e;t++){const e=o[t],y=e.color,v=e.intensity,b=e.distance,_=e.shadow&&e.shadow.map?e.shadow.map.texture:null;if(e.isAmbientLight)s+=y.r*v,a+=y.g*v,c+=y.b*v;else if(e.isLightProbe)for(let t=0;t<9;t++)i.probe[t].addScaledVector(e.sh.coefficients[t],v);else if(e.isDirectionalLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity),e.castShadow){const t=e.shadow,n=r.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,i.directionalShadow[u]=n,i.directionalShadowMap[u]=_,i.directionalShadowMatrix[u]=e.shadow.matrix,p++}i.directional[u]=t,u++}else if(e.isSpotLight){const t=n.get(e);if(t.position.setFromMatrixPosition(e.matrixWorld),t.color.copy(y).multiplyScalar(v),t.distance=b,t.coneCos=Math.cos(e.angle),t.penumbraCos=Math.cos(e.angle*(1-e.penumbra)),t.decay=e.decay,e.castShadow){const t=e.shadow,n=r.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,i.spotShadow[h]=n,i.spotShadowMap[h]=_,i.spotShadowMatrix[h]=e.shadow.matrix,g++}i.spot[h]=t,h++}else if(e.isRectAreaLight){const t=n.get(e);t.color.copy(y).multiplyScalar(v),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),i.rectArea[d]=t,d++}else if(e.isPointLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity),t.distance=e.distance,t.decay=e.decay,e.castShadow){const t=e.shadow,n=r.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,n.shadowCameraNear=t.camera.near,n.shadowCameraFar=t.camera.far,i.pointShadow[l]=n,i.pointShadowMap[l]=_,i.pointShadowMatrix[l]=e.shadow.matrix,m++}i.point[l]=t,l++}else if(e.isHemisphereLight){const t=n.get(e);t.skyColor.copy(e.color).multiplyScalar(v),t.groundColor.copy(e.groundColor).multiplyScalar(v),i.hemi[f]=t,f++}}d>0&&(e.isWebGL2?(i.rectAreaLTC1=qm.LTC_FLOAT_1,i.rectAreaLTC2=qm.LTC_FLOAT_2):!0===t.has("OES_texture_float_linear")?(i.rectAreaLTC1=qm.LTC_FLOAT_1,i.rectAreaLTC2=qm.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=qm.LTC_HALF_1,i.rectAreaLTC2=qm.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=s,i.ambient[1]=a,i.ambient[2]=c;const y=i.hash;y.directionalLength===u&&y.pointLength===l&&y.spotLength===h&&y.rectAreaLength===d&&y.hemiLength===f&&y.numDirectionalShadows===p&&y.numPointShadows===m&&y.numSpotShadows===g||(i.directional.length=u,i.spot.length=h,i.rectArea.length=d,i.point.length=l,i.hemi.length=f,i.directionalShadow.length=p,i.directionalShadowMap.length=p,i.pointShadow.length=m,i.pointShadowMap.length=m,i.spotShadow.length=g,i.spotShadowMap.length=g,i.directionalShadowMatrix.length=p,i.pointShadowMatrix.length=m,i.spotShadowMatrix.length=g,y.directionalLength=u,y.pointLength=l,y.spotLength=h,y.rectAreaLength=d,y.hemiLength=f,y.numDirectionalShadows=p,y.numPointShadows=m,y.numSpotShadows=g,i.version=Ly++)},setupView:function(t,e){let n=0,r=0,c=0,u=0,l=0;const h=e.matrixWorldInverse;for(let d=0,f=t.length;d<f;d++){const e=t[d];if(e.isDirectionalLight){const t=i.directional[n];t.direction.setFromMatrixPosition(e.matrixWorld),o.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(o),t.direction.transformDirection(h),n++}else if(e.isSpotLight){const t=i.spot[c];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(h),t.direction.setFromMatrixPosition(e.matrixWorld),o.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(o),t.direction.transformDirection(h),c++}else if(e.isRectAreaLight){const t=i.rectArea[u];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(h),a.identity(),s.copy(e.matrixWorld),s.premultiply(h),a.extractRotation(s),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),t.halfWidth.applyMatrix4(a),t.halfHeight.applyMatrix4(a),u++}else if(e.isPointLight){const t=i.point[r];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(h),r++}else if(e.isHemisphereLight){const t=i.hemi[l];t.direction.setFromMatrixPosition(e.matrixWorld),t.direction.transformDirection(h),t.direction.normalize(),l++}}},state:i}}function Dy(t,e){const n=new Ny(t,e),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(){n.setup(r)},setupLightsView:function(t){n.setupView(r,t)},pushLight:function(t){r.push(t)},pushShadow:function(t){i.push(t)}}}function ky(t,e){let n=new WeakMap;return{get:function(r,i=0){let o;return!1===n.has(r)?(o=new Dy(t,e),n.set(r,[]),n.get(r).push(o)):i>=n.get(r).length?(o=new Dy(t,e),n.get(r).push(o)):o=n.get(r)[i],o},dispose:function(){n=new WeakMap}}}function jy(t){Dp.call(this),this.type="MeshDepthMaterial",this.depthPacking=vd,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}function Fy(t){Dp.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new hf,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}function Uy(t,e,n){let r=new zm;const i=new Qd,o=new Qd,s=new af,a=[],c=[],u={},l={0:Ou,1:Cu,2:Ru},h=new Lm({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Qd},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),d=h.clone();d.defines.HORIZONTAL_PASS=1;const f=new am;f.setAttribute("position",new Up(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const p=new Tm(f,h),m=this;function g(n,r){const i=e.update(p);h.uniforms.shadow_pass.value=n.map.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(r,null,i,h,p,null),d.uniforms.shadow_pass.value=n.mapPass.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(r,null,i,d,p,null)}function y(t,e,n){const r=t<<0|e<<1|n<<2;let i=a[r];return void 0===i&&(i=new jy({depthPacking:bd,morphTargets:t,skinning:e}),a[r]=i),i}function v(t,e,n){const r=t<<0|e<<1|n<<2;let i=c[r];return void 0===i&&(i=new Fy({morphTargets:t,skinning:e}),c[r]=i),i}function b(e,n,r,i,o,s,a){let c=null,h=y,d=e.customDepthMaterial;if(!0===i.isPointLight&&(h=v,d=e.customDistanceMaterial),void 0===d){let t=!1;!0===r.morphTargets&&(t=n.morphAttributes&&n.morphAttributes.position&&n.morphAttributes.position.length>0);let i=!1;!0===e.isSkinnedMesh&&(!0===r.skinning?i=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e)),c=h(t,i,!0===e.isInstancedMesh)}else c=d;if(t.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length){const t=c.uuid,e=r.uuid;let n=u[t];void 0===n&&(n={},u[t]=n);let i=n[e];void 0===i&&(i=c.clone(),n[e]=i),c=i}return c.visible=r.visible,c.wireframe=r.wireframe,c.side=a===Au?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:l[r.side],c.clipShadows=r.clipShadows,c.clippingPlanes=r.clippingPlanes,c.clipIntersection=r.clipIntersection,c.wireframeLinewidth=r.wireframeLinewidth,c.linewidth=r.linewidth,!0===i.isPointLight&&!0===c.isMeshDistanceMaterial&&(c.referencePosition.setFromMatrixPosition(i.matrixWorld),c.nearDistance=o,c.farDistance=s),c}function _(n,i,o,s,a){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&a===Au)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const r=e.update(n),i=n.material;if(Array.isArray(i)){const e=r.groups;for(let c=0,u=e.length;c<u;c++){const u=e[c],l=i[u.materialIndex];if(l&&l.visible){const e=b(n,r,l,s,o.near,o.far,a);t.renderBufferDirect(o,null,r,e,n,u)}}}else if(i.visible){const e=b(n,r,i,s,o.near,o.far,a);t.renderBufferDirect(o,null,r,e,n,null)}}const c=n.children;for(let t=0,e=c.length;t<e;t++)_(c[t],i,o,s,a)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Tu,this.render=function(e,a,c){if(!1===m.enabled)return;if(!1===m.autoUpdate&&!1===m.needsUpdate)return;if(0===e.length)return;const u=t.getRenderTarget(),l=t.getActiveCubeFace(),h=t.getActiveMipmapLevel(),d=t.state;d.setBlending(Pu),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(let f=0,p=e.length;f<p;f++){const u=e[f],l=u.shadow;if(void 0===l){console.warn("THREE.WebGLShadowMap:",u,"has no shadow.");continue}if(!1===l.autoUpdate&&!1===l.needsUpdate)continue;i.copy(l.mapSize);const h=l.getFrameExtents();if(i.multiply(h),o.copy(l.mapSize),(i.x>n||i.y>n)&&(i.x>n&&(o.x=Math.floor(n/h.x),i.x=o.x*h.x,l.mapSize.x=o.x),i.y>n&&(o.y=Math.floor(n/h.y),i.y=o.y*h.y,l.mapSize.y=o.y)),null===l.map&&!l.isPointLightShadow&&this.type===Au){const t={minFilter:Pl,magFilter:Pl,format:Jl};l.map=new cf(i.x,i.y,t),l.map.texture.name=u.name+".shadowMap",l.mapPass=new cf(i.x,i.y,t),l.camera.updateProjectionMatrix()}null===l.map&&(l.map=new cf(i.x,i.y,{minFilter:Cl,magFilter:Cl,format:Jl}),l.map.texture.name=u.name+".shadowMap",l.camera.updateProjectionMatrix()),t.setRenderTarget(l.map),t.clear();const p=l.getViewportCount();for(let t=0;t<p;t++){const e=l.getViewport(t);s.set(o.x*e.x,o.y*e.y,o.x*e.z,o.y*e.w),d.viewport(s),l.updateMatrices(u,t),r=l.getFrustum(),_(a,c,l.camera,u,this.type)}l.isPointLightShadow||this.type!==Au||g(l,c),l.needsUpdate=!1}m.needsUpdate=!1,t.setRenderTarget(u,l,h)}}function By(t,e,n){const r=n.isWebGL2,i=new function(){let e=!1;const n=new af;let r=null;const i=new af(0,0,0,0);return{setMask:function(n){r===n||e||(t.colorMask(n,n,n,n),r=n)},setLocked:function(t){e=t},setClear:function(e,r,o,s,a){!0===a&&(e*=s,r*=s,o*=s),n.set(e,r,o,s),!1===i.equals(n)&&(t.clearColor(e,r,o,s),i.copy(n))},reset:function(){e=!1,r=null,i.set(-1,0,0,0)}}},o=new function(){let e=!1,n=null,r=null,i=null;return{setTest:function(t){t?P(2929):N(2929)},setMask:function(r){n===r||e||(t.depthMask(r),n=r)},setFunc:function(e){if(r!==e){if(e)switch(e){case el:t.depthFunc(512);break;case nl:t.depthFunc(519);break;case rl:t.depthFunc(513);break;case il:t.depthFunc(515);break;case ol:t.depthFunc(514);break;case sl:t.depthFunc(518);break;case al:t.depthFunc(516);break;case cl:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);r=e}},setLocked:function(t){e=t},setClear:function(e){i!==e&&(t.clearDepth(e),i=e)},reset:function(){e=!1,n=null,r=null,i=null}}},s=new function(){let e=!1,n=null,r=null,i=null,o=null,s=null,a=null,c=null,u=null;return{setTest:function(t){e||(t?P(2960):N(2960))},setMask:function(r){n===r||e||(t.stencilMask(r),n=r)},setFunc:function(e,n,s){r===e&&i===n&&o===s||(t.stencilFunc(e,n,s),r=e,i=n,o=s)},setOp:function(e,n,r){s===e&&a===n&&c===r||(t.stencilOp(e,n,r),s=e,a=n,c=r)},setLocked:function(t){e=t},setClear:function(e){u!==e&&(t.clearStencil(e),u=e)},reset:function(){e=!1,n=null,r=null,i=null,o=null,s=null,a=null,c=null,u=null}}};let a={},c=null,u=null,l=null,h=null,d=null,f=null,p=null,m=null,g=null,y=!1,v=null,b=null,_=null,w=null,x=null;const S=t.getParameter(35661);let E=!1,T=0;const M=t.getParameter(7938);-1!==M.indexOf("WebGL")?(T=parseFloat(/^WebGL (\d)/.exec(M)[1]),E=T>=1):-1!==M.indexOf("OpenGL ES")&&(T=parseFloat(/^OpenGL ES (\d)/.exec(M)[1]),E=T>=2);let A=null,C={};const O=new af,R=new af;function I(e,n,r){const i=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(let s=0;s<r;s++)t.texImage2D(n+s,0,6408,1,1,0,6408,5121,i);return o}const L={};function P(e){!0!==a[e]&&(t.enable(e),a[e]=!0)}function N(e){!1!==a[e]&&(t.disable(e),a[e]=!1)}L[3553]=I(3553,3553,1),L[34067]=I(34067,34069,6),i.setClear(0,0,0,1),o.setClear(1),s.setClear(0),P(2929),o.setFunc(il),F(!1),U(wu),P(2884),j(Pu);const D={[Uu]:32774,[Bu]:32778,[zu]:32779};if(r)D[Hu]=32775,D[Vu]=32776;else{const t=e.get("EXT_blend_minmax");null!==t&&(D[Hu]=t.MIN_EXT,D[Vu]=t.MAX_EXT)}const k={[Gu]:0,[Wu]:1,[qu]:768,[Zu]:770,[tl]:776,[Ju]:774,[Yu]:772,[Xu]:769,[Ku]:771,[Qu]:775,[$u]:773};function j(e,n,r,i,o,s,a,c){if(e!==Pu){if(u||(P(3042),u=!0),e===Fu)o=o||n,s=s||r,a=a||i,n===h&&o===p||(t.blendEquationSeparate(D[n],D[o]),h=n,p=o),r===d&&i===f&&s===m&&a===g||(t.blendFuncSeparate(k[r],k[i],k[s],k[a]),d=r,f=i,m=s,g=a),l=e,y=null;else if(e!==l||c!==y){if(h===Uu&&p===Uu||(t.blendEquation(32774),h=Uu,p=Uu),c)switch(e){case Nu:t.blendFuncSeparate(1,771,1,771);break;case Du:t.blendFunc(1,1);break;case ku:t.blendFuncSeparate(0,0,769,771);break;case ju:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case Nu:t.blendFuncSeparate(770,771,1,771);break;case Du:t.blendFunc(770,1);break;case ku:t.blendFunc(0,769);break;case ju:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}d=null,f=null,m=null,g=null,l=e,y=c}}else u&&(N(3042),u=!1)}function F(e){v!==e&&(t.frontFace(e?2304:2305),v=e)}function U(e){e!==_u?(P(2884),e!==b&&t.cullFace(e===wu?1029:e===xu?1028:1032)):N(2884),b=e}function B(e,n,r){e?(P(32823),w===n&&x===r||(t.polygonOffset(n,r),w=n,x=r)):N(32823)}function z(e){void 0===e&&(e=33984+S-1),A!==e&&(t.activeTexture(e),A=e)}return{buffers:{color:i,depth:o,stencil:s},enable:P,disable:N,useProgram:function(e){return c!==e&&(t.useProgram(e),c=e,!0)},setBlending:j,setMaterial:function(t,e){t.side===Ru?N(2884):P(2884);let n=t.side===Ou;e&&(n=!n),F(n),t.blending===Nu&&!1===t.transparent?j(Pu):j(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),o.setFunc(t.depthFunc),o.setTest(t.depthTest),o.setMask(t.depthWrite),i.setMask(t.colorWrite);const r=t.stencilWrite;s.setTest(r),r&&(s.setMask(t.stencilWriteMask),s.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),s.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),B(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:F,setCullFace:U,setLineWidth:function(e){e!==_&&(E&&t.lineWidth(e),_=e)},setPolygonOffset:B,setScissorTest:function(t){t?P(3089):N(3089)},activeTexture:z,bindTexture:function(e,n){null===A&&z();let r=C[A];void 0===r&&(r={type:void 0,texture:void 0},C[A]=r),r.type===e&&r.texture===n||(t.bindTexture(e,n||L[e]),r.type=e,r.texture=n)},unbindTexture:function(){const e=C[A];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(e){!1===O.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),O.copy(e))},viewport:function(e){!1===R.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),R.copy(e))},reset:function(){a={},A=null,C={},c=null,u=null,l=null,h=null,d=null,f=null,p=null,m=null,g=null,y=!1,v=null,b=null,_=null,w=null,x=null,i.reset(),o.reset(),s.reset()}}}function zy(t,e,n,r,i,o,s){const a=i.isWebGL2,c=i.maxTextures,u=i.maxCubemapSize,l=i.maxTextureSize,h=i.maxSamples,d=new WeakMap;let f,p=!1;try{p="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(j){}function m(t,e){return p?new OffscreenCanvas(t,e):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function g(t,e,n,r){let i=1;if((t.width>r||t.height>r)&&(i=r/Math.max(t.width,t.height)),i<1||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const r=e?Jd.floorPowerOfTwo:Math.floor,o=r(i*t.width),s=r(i*t.height);void 0===f&&(f=m(o,s));const a=n?m(o,s):f;return a.width=o,a.height=s,a.getContext("2d").drawImage(t,0,0,o,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+o+"x"+s+")."),a}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function y(t){return Jd.isPowerOfTwo(t.width)&&Jd.isPowerOfTwo(t.height)}function v(t,e){return t.generateMipmaps&&e&&t.minFilter!==Cl&&t.minFilter!==Pl}function b(e,n,i,o){t.generateMipmap(e),r.get(n).__maxMipLevel=Math.log(Math.max(i,o))*Math.LOG2E}function _(n,r,i){if(!1===a)return r;if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let o=r;return 6403===r&&(5126===i&&(o=33326),5131===i&&(o=33325),5121===i&&(o=33321)),6407===r&&(5126===i&&(o=34837),5131===i&&(o=34843),5121===i&&(o=32849)),6408===r&&(5126===i&&(o=34836),5131===i&&(o=34842),5121===i&&(o=32856)),33325!==o&&33326!==o&&34842!==o&&34836!==o||e.get("EXT_color_buffer_float"),o}function w(t){return t===Cl||t===Ol||t===Il?9728:9729}function x(e){const n=e.target;n.removeEventListener("dispose",x),function(e){const n=r.get(e);void 0!==n.__webglInit&&(t.deleteTexture(n.__webglTexture),r.remove(e))}(n),n.isVideoTexture&&d.delete(n),s.memory.textures--}function S(e){const n=e.target;n.removeEventListener("dispose",S),function(e){const n=r.get(e),i=r.get(e.texture);if(e){if(void 0!==i.__webglTexture&&t.deleteTexture(i.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLCubeRenderTarget)for(let e=0;e<6;e++)t.deleteFramebuffer(n.__webglFramebuffer[e]),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[e]);else t.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&t.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer&&t.deleteRenderbuffer(n.__webglColorRenderbuffer),n.__webglDepthRenderbuffer&&t.deleteRenderbuffer(n.__webglDepthRenderbuffer);r.remove(e.texture),r.remove(e)}}(n),s.memory.textures--}let E=0;function T(t,e){const i=r.get(t);if(t.isVideoTexture&&function(t){const e=s.render.frame;d.get(t)!==e&&(d.set(t,e),t.update())}(t),t.version>0&&i.__version!==t.version){const n=t.image;if(void 0===n)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==n.complete)return void I(i,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+e),n.bindTexture(3553,i.__webglTexture)}function M(e,i){const s=r.get(e);e.version>0&&s.__version!==e.version?function(e,r,i){if(6!==r.image.length)return;R(e,r),n.activeTexture(33984+i),n.bindTexture(34067,e.__webglTexture),t.pixelStorei(37440,r.flipY);const s=r&&(r.isCompressedTexture||r.image[0].isCompressedTexture),c=r.image[0]&&r.image[0].isDataTexture,l=[];for(let t=0;t<6;t++)l[t]=s||c?c?r.image[t].image:r.image[t]:g(r.image[t],!1,!0,u);const h=l[0],d=y(h)||a,f=o.convert(r.format),p=o.convert(r.type),m=_(r.internalFormat,f,p);let w;if(O(34067,r,d),s){for(let t=0;t<6;t++){w=l[t].mipmaps;for(let e=0;e<w.length;e++){const i=w[e];r.format!==Jl&&r.format!==$l?null!==f?n.compressedTexImage2D(34069+t,e,m,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+t,e,m,i.width,i.height,0,f,p,i.data)}}e.__maxMipLevel=w.length-1}else{w=r.mipmaps;for(let t=0;t<6;t++)if(c){n.texImage2D(34069+t,0,m,l[t].width,l[t].height,0,f,p,l[t].data);for(let e=0;e<w.length;e++){const r=w[e].image[t].image;n.texImage2D(34069+t,e+1,m,r.width,r.height,0,f,p,r.data)}}else{n.texImage2D(34069+t,0,m,f,p,l[t]);for(let e=0;e<w.length;e++)n.texImage2D(34069+t,e+1,m,f,p,w[e].image[t])}e.__maxMipLevel=w.length}v(r,d)&&b(34067,r,h.width,h.height),e.__version=r.version,r.onUpdate&&r.onUpdate(r)}(s,e,i):(n.activeTexture(33984+i),n.bindTexture(34067,s.__webglTexture))}const A={[Tl]:10497,[Ml]:33071,[Al]:33648},C={[Cl]:9728,[Ol]:9984,[Il]:9986,[Pl]:9729,[Nl]:9985,[kl]:9987};function O(n,o,s){s?(t.texParameteri(n,10242,A[o.wrapS]),t.texParameteri(n,10243,A[o.wrapT]),32879!==n&&35866!==n||t.texParameteri(n,32882,A[o.wrapR]),t.texParameteri(n,10240,C[o.magFilter]),t.texParameteri(n,10241,C[o.minFilter])):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),o.wrapS===Ml&&o.wrapT===Ml||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,w(o.magFilter)),t.texParameteri(n,10241,w(o.minFilter)),o.minFilter!==Cl&&o.minFilter!==Pl&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));const c=e.get("EXT_texture_filter_anisotropic");if(c){if(o.type===Gl&&null===e.get("OES_texture_float_linear"))return;if(o.type===Wl&&null===(a||e.get("OES_texture_half_float_linear")))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(t.texParameterf(n,c.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function R(e,n){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",x),e.__webglTexture=t.createTexture(),s.memory.textures++)}function I(e,r,i){let s=3553;r.isDataTexture2DArray&&(s=35866),r.isDataTexture3D&&(s=32879),R(e,r),n.activeTexture(33984+i),n.bindTexture(s,e.__webglTexture),t.pixelStorei(37440,r.flipY),t.pixelStorei(37441,r.premultiplyAlpha),t.pixelStorei(3317,r.unpackAlignment);const c=function(t){return!a&&(t.wrapS!==Ml||t.wrapT!==Ml||t.minFilter!==Cl&&t.minFilter!==Pl)}(r)&&!1===y(r.image),u=g(r.image,c,!1,l),h=y(u)||a,d=o.convert(r.format);let f,p=o.convert(r.type),m=_(r.internalFormat,d,p);O(s,r,h);const w=r.mipmaps;if(r.isDepthTexture)m=6402,a?m=r.type===Gl?36012:r.type===Vl?33190:r.type===Kl?35056:33189:r.type===Gl&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===nh&&6402===m&&r.type!==zl&&r.type!==Vl&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=zl,p=o.convert(r.type)),r.format===rh&&6402===m&&(m=34041,r.type!==Kl&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=Kl,p=o.convert(r.type))),n.texImage2D(3553,0,m,u.width,u.height,0,d,p,null);else if(r.isDataTexture)if(w.length>0&&h){for(let t=0,e=w.length;t<e;t++)f=w[t],n.texImage2D(3553,t,m,f.width,f.height,0,d,p,f.data);r.generateMipmaps=!1,e.__maxMipLevel=w.length-1}else n.texImage2D(3553,0,m,u.width,u.height,0,d,p,u.data),e.__maxMipLevel=0;else if(r.isCompressedTexture){for(let t=0,e=w.length;t<e;t++)f=w[t],r.format!==Jl&&r.format!==$l?null!==d?n.compressedTexImage2D(3553,t,m,f.width,f.height,0,f.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,t,m,f.width,f.height,0,d,p,f.data);e.__maxMipLevel=w.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,m,u.width,u.height,u.depth,0,d,p,u.data),e.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,m,u.width,u.height,u.depth,0,d,p,u.data),e.__maxMipLevel=0;else if(w.length>0&&h){for(let t=0,e=w.length;t<e;t++)f=w[t],n.texImage2D(3553,t,m,d,p,f);r.generateMipmaps=!1,e.__maxMipLevel=w.length-1}else n.texImage2D(3553,0,m,d,p,u),e.__maxMipLevel=0;v(r,h)&&b(s,r,u.width,u.height),e.__version=r.version,r.onUpdate&&r.onUpdate(r)}function L(e,i,s,a){const c=o.convert(i.texture.format),u=o.convert(i.texture.type),l=_(i.texture.internalFormat,c,u);n.texImage2D(a,0,l,i.width,i.height,0,c,u,null),t.bindFramebuffer(36160,e),t.framebufferTexture2D(36160,s,a,r.get(i.texture).__webglTexture,0),t.bindFramebuffer(36160,null)}function P(e,n,r){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){let i=33189;if(r){const e=n.depthTexture;e&&e.isDepthTexture&&(e.type===Gl?i=36012:e.type===Vl&&(i=33190));const r=N(n);t.renderbufferStorageMultisample(36161,r,i,n.width,n.height)}else t.renderbufferStorage(36161,i,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer){if(r){const e=N(n);t.renderbufferStorageMultisample(36161,e,35056,n.width,n.height)}else t.renderbufferStorage(36161,34041,n.width,n.height);t.framebufferRenderbuffer(36160,33306,36161,e)}else{const e=o.convert(n.texture.format),i=o.convert(n.texture.type),s=_(n.texture.internalFormat,e,i);if(r){const e=N(n);t.renderbufferStorageMultisample(36161,e,s,n.width,n.height)}else t.renderbufferStorage(36161,s,n.width,n.height)}t.bindRenderbuffer(36161,null)}function N(t){return a&&t.isWebGLMultisampleRenderTarget?Math.min(h,t.samples):0}let D=!1,k=!1;this.allocateTextureUnit=function(){const t=E;return t>=c&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+c),E+=1,t},this.resetTextureUnits=function(){E=0},this.setTexture2D=T,this.setTexture2DArray=function(t,e){const i=r.get(t);t.version>0&&i.__version!==t.version?I(i,t,e):(n.activeTexture(33984+e),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(t,e){const i=r.get(t);t.version>0&&i.__version!==t.version?I(i,t,e):(n.activeTexture(33984+e),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=M,this.setupRenderTarget=function(e){const i=r.get(e),c=r.get(e.texture);e.addEventListener("dispose",S),c.__webglTexture=t.createTexture(),s.memory.textures++;const u=!0===e.isWebGLCubeRenderTarget,l=!0===e.isWebGLMultisampleRenderTarget,h=y(e)||a;if(!a||e.texture.format!==$l||e.texture.type!==Gl&&e.texture.type!==Wl||(e.texture.format=Jl,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),u){i.__webglFramebuffer=[];for(let e=0;e<6;e++)i.__webglFramebuffer[e]=t.createFramebuffer()}else if(i.__webglFramebuffer=t.createFramebuffer(),l)if(a){i.__webglMultisampledFramebuffer=t.createFramebuffer(),i.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,i.__webglColorRenderbuffer);const n=o.convert(e.texture.format),r=o.convert(e.texture.type),s=_(e.texture.internalFormat,n,r),a=N(e);t.renderbufferStorageMultisample(36161,a,s,e.width,e.height),t.bindFramebuffer(36160,i.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,i.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(i.__webglDepthRenderbuffer=t.createRenderbuffer(),P(i.__webglDepthRenderbuffer,e,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(u){n.bindTexture(34067,c.__webglTexture),O(34067,e.texture,h);for(let t=0;t<6;t++)L(i.__webglFramebuffer[t],e,36064,34069+t);v(e.texture,h)&&b(34067,e.texture,e.width,e.height),n.bindTexture(34067,null)}else n.bindTexture(3553,c.__webglTexture),O(3553,e.texture,h),L(i.__webglFramebuffer,e,36064,3553),v(e.texture,h)&&b(3553,e.texture,e.width,e.height),n.bindTexture(3553,null);e.depthBuffer&&function(e){const n=r.get(e),i=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,n){if(n&&n.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,e),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),T(n.depthTexture,0);const i=r.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===nh)t.framebufferTexture2D(36160,36096,3553,i,0);else{if(n.depthTexture.format!==rh)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(36160,33306,3553,i,0)}}(n.__webglFramebuffer,e)}else if(i){n.__webglDepthbuffer=[];for(let r=0;r<6;r++)t.bindFramebuffer(36160,n.__webglFramebuffer[r]),n.__webglDepthbuffer[r]=t.createRenderbuffer(),P(n.__webglDepthbuffer[r],e,!1)}else t.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=t.createRenderbuffer(),P(n.__webglDepthbuffer,e,!1);t.bindFramebuffer(36160,null)}(e)},this.updateRenderTargetMipmap=function(t){const e=t.texture;if(v(e,y(t)||a)){const i=t.isWebGLCubeRenderTarget?34067:3553,o=r.get(e).__webglTexture;n.bindTexture(i,o),b(i,e,t.width,t.height),n.bindTexture(i,null)}},this.updateMultisampleRenderTarget=function(e){if(e.isWebGLMultisampleRenderTarget)if(a){const n=r.get(e);t.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,n.__webglFramebuffer);const i=e.width,o=e.height;let s=16384;e.depthBuffer&&(s|=256),e.stencilBuffer&&(s|=1024),t.blitFramebuffer(0,0,i,o,0,0,i,o,s,9728),t.bindFramebuffer(36160,n.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(t,e){t&&t.isWebGLRenderTarget&&(!1===D&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),D=!0),t=t.texture),T(t,e)},this.safeSetTextureCube=function(t,e){t&&t.isWebGLCubeRenderTarget&&(!1===k&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),k=!0),t=t.texture),M(t,e)}}function Hy(t,e,n){const r=n.isWebGL2;return{convert:function(t){let n;if(t===Fl)return 5121;if(t===ql)return 32819;if(t===Xl)return 32820;if(t===Zl)return 33635;if(t===Ul)return 5120;if(t===Bl)return 5122;if(t===zl)return 5123;if(t===Hl)return 5124;if(t===Vl)return 5125;if(t===Gl)return 5126;if(t===Wl)return r?5131:(n=e.get("OES_texture_half_float"),null!==n?n.HALF_FLOAT_OES:null);if(t===Yl)return 6406;if(t===$l)return 6407;if(t===Jl)return 6408;if(t===Ql)return 6409;if(t===th)return 6410;if(t===nh)return 6402;if(t===rh)return 34041;if(t===ih)return 6403;if(t===oh)return 36244;if(t===sh)return 33319;if(t===ah)return 33320;if(t===ch)return 36248;if(t===uh)return 36249;if(t===lh||t===hh||t===dh||t===fh){if(n=e.get("WEBGL_compressed_texture_s3tc"),null===n)return null;if(t===lh)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===hh)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===dh)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===fh)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(t===ph||t===mh||t===gh||t===yh){if(n=e.get("WEBGL_compressed_texture_pvrtc"),null===n)return null;if(t===ph)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===mh)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===gh)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===yh)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t===vh)return n=e.get("WEBGL_compressed_texture_etc1"),null!==n?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((t===bh||t===_h)&&(n=e.get("WEBGL_compressed_texture_etc"),null!==n)){if(t===bh)return n.COMPRESSED_RGB8_ETC2;if(t===_h)return n.COMPRESSED_RGBA8_ETC2_EAC}return t===wh||t===xh||t===Sh||t===Eh||t===Th||t===Mh||t===Ah||t===Ch||t===Oh||t===Rh||t===Ih||t===Lh||t===Ph||t===Nh||t===kh||t===jh||t===Fh||t===Uh||t===Bh||t===zh||t===Hh||t===Vh||t===Gh||t===Wh||t===qh||t===Xh||t===Zh||t===Kh?(n=e.get("WEBGL_compressed_texture_astc"),null!==n?t:null):t===Dh?(n=e.get("EXT_texture_compression_bptc"),null!==n?t:null):t===Kl?r?34042:(n=e.get("WEBGL_depth_texture"),null!==n?n.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}function Vy(t=[]){Nm.call(this),this.cameras=t}function Gy(){lp.call(this),this.type="Group"}function Wy(){this._targetRay=null,this._grip=null,this._hand=null}function qy(t,e){const n=this;let r=null,i=1,o=null,s="local-floor",a=null;const c=[],u=new Map,l=new Nm;l.layers.enable(1),l.viewport=new af;const h=new Nm;h.layers.enable(2),h.viewport=new af;const d=[l,h],f=new Vy;f.layers.enable(1),f.layers.enable(2);let p=null,m=null;function g(t){const e=u.get(t.inputSource);e&&e.dispatchEvent({type:t.type,data:t.inputSource})}function y(){u.forEach((function(t,e){t.disconnect(e)})),u.clear(),t.setFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),E.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function v(t){o=t,E.setContext(r),E.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}function b(t){const e=r.inputSources;for(let n=0;n<c.length;n++)u.set(e[n],c[n]);for(let n=0;n<t.removed.length;n++){const e=t.removed[n],r=u.get(e);r&&(r.dispatchEvent({type:"disconnected",data:e}),u.delete(e))}for(let n=0;n<t.added.length;n++){const e=t.added[n],r=u.get(e);r&&r.dispatchEvent({type:"connected",data:e})}}this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=c[t];return void 0===e&&(e=new Wy,c[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=c[t];return void 0===e&&(e=new Wy,c[t]=e),e.getGripSpace()},this.getHand=function(t){let e=c[t];return void 0===e&&(e=new Wy,c[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){i=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){s=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o},this.getSession=function(){return r},this.setSession=function(t){if(r=t,null!==r){r.addEventListener("select",g),r.addEventListener("selectstart",g),r.addEventListener("selectend",g),r.addEventListener("squeeze",g),r.addEventListener("squeezestart",g),r.addEventListener("squeezeend",g),r.addEventListener("end",y);const t=e.getContextAttributes();!0!==t.xrCompatible&&e.makeXRCompatible();const n=new XRWebGLLayer(r,e,{antialias:t.antialias,alpha:t.alpha,depth:t.depth,stencil:t.stencil,framebufferScaleFactor:i});r.updateRenderState({baseLayer:n}),r.requestReferenceSpace(s).then(v),r.addEventListener("inputsourceschange",b)}};const _=new hf,w=new hf;function x(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.getCamera=function(t){f.near=h.near=l.near=t.near,f.far=h.far=l.far=t.far,p===f.near&&m===f.far||(r.updateRenderState({depthNear:f.near,depthFar:f.far}),p=f.near,m=f.far);const e=t.parent,n=f.cameras;x(f,e);for(let r=0;r<n.length;r++)x(n[r],e);t.matrixWorld.copy(f.matrixWorld);const i=t.children;for(let r=0,o=i.length;r<o;r++)i[r].updateMatrixWorld(!0);return 2===n.length?function(t,e,n){_.setFromMatrixPosition(e.matrixWorld),w.setFromMatrixPosition(n.matrixWorld);const r=_.distanceTo(w),i=e.projectionMatrix.elements,o=n.projectionMatrix.elements,s=i[14]/(i[10]-1),a=i[14]/(i[10]+1),c=(i[9]+1)/i[5],u=(i[9]-1)/i[5],l=(i[8]-1)/i[0],h=(o[8]+1)/o[0],d=s*l,f=s*h,p=r/(-l+h),m=p*-l;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(p),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();const g=s+p,y=a+p;t.projectionMatrix.makePerspective(d-m,f+(r-m),c*a/y*g,u*a/y*g,g,y)}(f,l,h):f.projectionMatrix.copy(l.projectionMatrix),f};let S=null;const E=new Hm;E.setAnimationLoop((function(e,n){if(a=n.getViewerPose(o),null!==a){const e=a.views,n=r.renderState.baseLayer;t.setFramebuffer(n.framebuffer);let i=!1;e.length!==f.cameras.length&&(f.cameras.length=0,i=!0);for(let t=0;t<e.length;t++){const r=e[t],o=n.getViewport(r),s=d[t];s.matrix.fromArray(r.transform.matrix),s.projectionMatrix.fromArray(r.projectionMatrix),s.viewport.set(o.x,o.y,o.width,o.height),0===t&&f.matrix.copy(s.matrix),!0===i&&f.cameras.push(s)}}const i=r.inputSources;for(let t=0;t<c.length;t++)c[t].update(i[t],n,o);S&&S(e,n)})),this.setAnimationLoop=function(t){S=t},this.dispose=function(){}}function Xy(t){function e(e,n){e.opacity.value=n.opacity,n.color&&e.diffuse.value.copy(n.color),n.emissive&&e.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(e.map.value=n.map),n.alphaMap&&(e.alphaMap.value=n.alphaMap),n.specularMap&&(e.specularMap.value=n.specularMap);const r=t.get(n).envMap;if(r){e.envMap.value=r,e.flipEnvMap.value=r.isCubeTexture&&r._needsFlipEnvMap?-1:1,e.reflectivity.value=n.reflectivity,e.refractionRatio.value=n.refractionRatio;const i=t.get(r).__maxMipLevel;void 0!==i&&(e.maxMipLevel.value=i)}let i,o;n.lightMap&&(e.lightMap.value=n.lightMap,e.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(e.aoMap.value=n.aoMap,e.aoMapIntensity.value=n.aoMapIntensity),n.map?i=n.map:n.specularMap?i=n.specularMap:n.displacementMap?i=n.displacementMap:n.normalMap?i=n.normalMap:n.bumpMap?i=n.bumpMap:n.roughnessMap?i=n.roughnessMap:n.metalnessMap?i=n.metalnessMap:n.alphaMap?i=n.alphaMap:n.emissiveMap?i=n.emissiveMap:n.clearcoatMap?i=n.clearcoatMap:n.clearcoatNormalMap?i=n.clearcoatNormalMap:n.clearcoatRoughnessMap&&(i=n.clearcoatRoughnessMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix)),n.aoMap?o=n.aoMap:n.lightMap&&(o=n.lightMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),e.uv2Transform.value.copy(o.matrix))}function n(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(e.emissiveMap.value=n.emissiveMap),n.bumpMap&&(e.bumpMap.value=n.bumpMap,e.bumpScale.value=n.bumpScale,n.side===Ou&&(e.bumpScale.value*=-1)),n.normalMap&&(e.normalMap.value=n.normalMap,e.normalScale.value.copy(n.normalScale),n.side===Ou&&e.normalScale.value.negate()),n.displacementMap&&(e.displacementMap.value=n.displacementMap,e.displacementScale.value=n.displacementScale,e.displacementBias.value=n.displacementBias),t.get(n).envMap&&(e.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)},refreshMaterialUniforms:function(t,r,i,o){r.isMeshBasicMaterial?e(t,r):r.isMeshLambertMaterial?(e(t,r),function(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}(t,r)):r.isMeshToonMaterial?(e(t,r),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===Ou&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===Ou&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isMeshPhongMaterial?(e(t,r),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===Ou&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===Ou&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isMeshStandardMaterial?(e(t,r),r.isMeshPhysicalMaterial?function(t,e){n(t,e),t.reflectivity.value=e.reflectivity,t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.sheen&&t.sheen.value.copy(e.sheen),e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap),e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,e.side===Ou&&t.clearcoatNormalScale.value.negate()),t.transmission.value=e.transmission,e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap)}(t,r):n(t,r)):r.isMeshMatcapMaterial?(e(t,r),function(t,e){e.matcap&&(t.matcap.value=e.matcap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===Ou&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===Ou&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isMeshDepthMaterial?(e(t,r),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isMeshDistanceMaterial?(e(t,r),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(t,r)):r.isMeshNormalMaterial?(e(t,r),function(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===Ou&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===Ou&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}(t,r),r.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,r)):r.isPointsMaterial?function(t,e,n,r){let i;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*n,t.scale.value=.5*r,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.map?i=e.map:e.alphaMap&&(i=e.alphaMap),void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix))}(t,r,i,o):r.isSpriteMaterial?function(t,e){let n;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.map?n=e.map:e.alphaMap&&(n=e.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}(t,r):r.isShadowMaterial?(t.color.value.copy(r.color),t.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function Zy(t){const e=void 0!==(t=t||{}).canvas?t.canvas:function(){const t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return t.style.display="block",t}(),n=void 0!==t.context?t.context:null,r=void 0!==t.alpha&&t.alpha,i=void 0===t.depth||t.depth,o=void 0===t.stencil||t.stencil,s=void 0!==t.antialias&&t.antialias,a=void 0===t.premultipliedAlpha||t.premultipliedAlpha,c=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,u=void 0!==t.powerPreference?t.powerPreference:"default",l=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat;let h=null,d=null;const f=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=ld,this.physicallyCorrectLights=!1,this.toneMapping=dl,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;const p=this;let m=!1,g=null,y=0,v=0,b=null,_=null,w=-1,x=null;const S=new af,E=new af;let T=null,M=e.width,A=e.height,C=1,O=null,R=null;const I=new af(0,0,M,A),L=new af(0,0,M,A);let P=!1;const N=new zm;let D=!1,k=!1;const j=new Uf,F=new hf,U={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function B(){return null===b?C:1}let z,H,V,G,W,q,X,Z,K,Y,$,J,Q,tt,et,nt,rt,it,ot,st,at,ct=n;function ut(t,n){for(let r=0;r<t.length;r++){const i=e.getContext(t[r],n);if(null!==i)return i}return null}try{const t={alpha:r,depth:i,stencil:o,antialias:s,premultipliedAlpha:a,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:l};if(e.addEventListener("webglcontextlost",ft,!1),e.addEventListener("webglcontextrestored",pt,!1),null===ct){const e=["webgl2","webgl","experimental-webgl"];if(!0===p.isWebGL1Renderer&&e.shift(),ct=ut(e,t),null===ct)throw ut(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ct.getShaderPrecisionFormat&&(ct.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Et){throw console.error("THREE.WebGLRenderer: "+Et.message),Et}function lt(){z=new tg(ct),H=new $m(ct,z,t),!1===H.isWebGL2&&(z.get("WEBGL_depth_texture"),z.get("OES_texture_float"),z.get("OES_texture_half_float"),z.get("OES_texture_half_float_linear"),z.get("OES_standard_derivatives"),z.get("OES_element_index_uint"),z.get("OES_vertex_array_object"),z.get("ANGLE_instanced_arrays")),z.get("OES_texture_float_linear"),st=new Hy(ct,z,H),V=new By(ct,z,H),V.scissor(E.copy(L).multiplyScalar(C).floor()),V.viewport(S.copy(I).multiplyScalar(C).floor()),G=new rg(ct),W=new My,q=new zy(ct,z,V,W,H,st,G),X=new Qm(p),Z=new Vm(ct,H),at=new Km(ct,z,Z,H),K=new eg(ct,Z,G,at),Y=new ag(ct,K,Z,G),rt=new sg(ct),et=new Jm(W),$=new Ty(p,X,z,H,at,et),J=new Xy(W),Q=new Ry(W),tt=new ky(z,H),nt=new Zm(p,X,V,Y,a),it=new Ym(ct,z,G,H),ot=new ng(ct,z,G,H),G.programs=$.programs,p.capabilities=H,p.extensions=z,p.properties=W,p.renderLists=Q,p.state=V,p.info=G}lt();const ht=new qy(p,ct);this.xr=ht;const dt=new Uy(p,Y,H.maxTextureSize);function ft(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),m=!0}function pt(){console.log("THREE.WebGLRenderer: Context Restored."),m=!1,lt()}function mt(t){const e=t.target;e.removeEventListener("dispose",mt),function(t){gt(t),W.remove(t)}(e)}function gt(t){const e=W.get(t).program;void 0!==e&&$.releaseProgram(e)}this.shadowMap=dt,this.getContext=function(){return ct},this.getContextAttributes=function(){return ct.getContextAttributes()},this.forceContextLoss=function(){const t=z.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=z.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return C},this.setPixelRatio=function(t){void 0!==t&&(C=t,this.setSize(M,A,!1))},this.getSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),t=new Qd),t.set(M,A)},this.setSize=function(t,n,r){ht.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(M=t,A=n,e.width=Math.floor(t*C),e.height=Math.floor(n*C),!1!==r&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),t=new Qd),t.set(M*C,A*C).floor()},this.setDrawingBufferSize=function(t,n,r){M=t,A=n,C=r,e.width=Math.floor(t*r),e.height=Math.floor(n*r),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),t=new af),t.copy(S)},this.getViewport=function(t){return t.copy(I)},this.setViewport=function(t,e,n,r){t.isVector4?I.set(t.x,t.y,t.z,t.w):I.set(t,e,n,r),V.viewport(S.copy(I).multiplyScalar(C).floor())},this.getScissor=function(t){return t.copy(L)},this.setScissor=function(t,e,n,r){t.isVector4?L.set(t.x,t.y,t.z,t.w):L.set(t,e,n,r),V.scissor(E.copy(L).multiplyScalar(C).floor())},this.getScissorTest=function(){return P},this.setScissorTest=function(t){V.setScissorTest(P=t)},this.setOpaqueSort=function(t){O=t},this.setTransparentSort=function(t){R=t},this.getClearColor=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getClearColor() now requires a Color as an argument"),t=new Lp),t.copy(nt.getClearColor())},this.setClearColor=function(){nt.setClearColor.apply(nt,arguments)},this.getClearAlpha=function(){return nt.getClearAlpha()},this.setClearAlpha=function(){nt.setClearAlpha.apply(nt,arguments)},this.clear=function(t,e,n){let r=0;(void 0===t||t)&&(r|=16384),(void 0===e||e)&&(r|=256),(void 0===n||n)&&(r|=1024),ct.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",ft,!1),e.removeEventListener("webglcontextrestored",pt,!1),Q.dispose(),tt.dispose(),W.dispose(),X.dispose(),Y.dispose(),at.dispose(),ht.dispose(),vt.stop()},this.renderBufferImmediate=function(t,e){at.initAttributes();const n=W.get(t);t.hasPositions&&!n.position&&(n.position=ct.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=ct.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=ct.createBuffer()),t.hasColors&&!n.color&&(n.color=ct.createBuffer());const r=e.getAttributes();t.hasPositions&&(ct.bindBuffer(34962,n.position),ct.bufferData(34962,t.positionArray,35048),at.enableAttribute(r.position),ct.vertexAttribPointer(r.position,3,5126,!1,0,0)),t.hasNormals&&(ct.bindBuffer(34962,n.normal),ct.bufferData(34962,t.normalArray,35048),at.enableAttribute(r.normal),ct.vertexAttribPointer(r.normal,3,5126,!1,0,0)),t.hasUvs&&(ct.bindBuffer(34962,n.uv),ct.bufferData(34962,t.uvArray,35048),at.enableAttribute(r.uv),ct.vertexAttribPointer(r.uv,2,5126,!1,0,0)),t.hasColors&&(ct.bindBuffer(34962,n.color),ct.bufferData(34962,t.colorArray,35048),at.enableAttribute(r.color),ct.vertexAttribPointer(r.color,3,5126,!1,0,0)),at.disableUnusedAttributes(),ct.drawArrays(4,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,n,r,i,o){null===e&&(e=U);const s=i.isMesh&&i.matrixWorld.determinant()<0,a=St(t,e,r,i);V.setMaterial(r,s);let c=n.index;const u=n.attributes.position;if(null===c){if(void 0===u||0===u.count)return}else if(0===c.count)return;let l,h=1;!0===r.wireframe&&(c=K.getWireframeAttribute(n),h=2),(r.morphTargets||r.morphNormals)&&rt.update(i,n,r,a),at.setup(i,r,a,n,c);let d=it;null!==c&&(l=Z.get(c),d=ot,d.setIndex(l));const f=null!==c?c.count:u.count,p=n.drawRange.start*h,m=n.drawRange.count*h,g=null!==o?o.start*h:0,y=null!==o?o.count*h:1/0,v=Math.max(p,g),b=Math.min(f,p+m,g+y)-1,_=Math.max(0,b-v+1);if(0!==_){if(i.isMesh)!0===r.wireframe?(V.setLineWidth(r.wireframeLinewidth*B()),d.setMode(1)):d.setMode(4);else if(i.isLine){let t=r.linewidth;void 0===t&&(t=1),V.setLineWidth(t*B()),d.setMode(i.isLineSegments?1:i.isLineLoop?2:3)}else i.isPoints?d.setMode(0):i.isSprite&&d.setMode(4);if(i.isInstancedMesh)d.renderInstances(v,_,i.count);else if(n.isInstancedBufferGeometry){const t=Math.min(n.instanceCount,n._maxInstanceCount);d.renderInstances(v,_,t)}else d.render(v,_)}},this.compile=function(t,e){d=tt.get(t),d.init(),t.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(d.pushLight(t),t.castShadow&&d.pushShadow(t))})),d.setupLights();const n=new WeakMap;t.traverse((function(e){const r=e.material;if(r)if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];!1===n.has(o)&&(xt(o,t,e),n.set(o))}else!1===n.has(r)&&(xt(r,t,e),n.set(r))}))};let yt=null;const vt=new Hm;function bt(t,e,n,r){if(!1===t.visible)return;if(t.layers.test(e.layers))if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)d.pushLight(t),t.castShadow&&d.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||N.intersectsSprite(t)){r&&F.setFromMatrixPosition(t.matrixWorld).applyMatrix4(j);const e=Y.update(t),i=t.material;i.visible&&h.push(t,e,i,n,F.z,null)}}else if(t.isImmediateRenderObject)r&&F.setFromMatrixPosition(t.matrixWorld).applyMatrix4(j),h.push(t,null,t.material,n,F.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.frame!==G.render.frame&&(t.skeleton.update(),t.skeleton.frame=G.render.frame),!t.frustumCulled||N.intersectsObject(t))){r&&F.setFromMatrixPosition(t.matrixWorld).applyMatrix4(j);const e=Y.update(t),i=t.material;if(Array.isArray(i)){const r=e.groups;for(let o=0,s=r.length;o<s;o++){const s=r[o],a=i[s.materialIndex];a&&a.visible&&h.push(t,e,a,n,F.z,s)}}else i.visible&&h.push(t,e,i,n,F.z,null)}const i=t.children;for(let o=0,s=i.length;o<s;o++)bt(i[o],e,n,r)}function _t(t,e,n){const r=!0===e.isScene?e.overrideMaterial:null;for(let i=0,o=t.length;i<o;i++){const o=t[i],s=o.object,a=o.geometry,c=null===r?o.material:r,u=o.group;if(n.isArrayCamera){const t=n.cameras;for(let n=0,r=t.length;n<r;n++){const r=t[n];s.layers.test(r.layers)&&(V.viewport(S.copy(r.viewport)),d.setupLightsView(r),wt(s,e,r,a,c,u))}}else wt(s,e,n,a,c,u)}}function wt(t,e,n,r,i,o){if(t.onBeforeRender(p,e,n,r,i,o),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){const r=St(n,e,i,t);V.setMaterial(i),at.reset(),function(t,e){t.render((function(t){p.renderBufferImmediate(t,e)}))}(t,r)}else p.renderBufferDirect(n,e,r,i,t,o);t.onAfterRender(p,e,n,r,i,o)}function xt(t,e,n){!0!==e.isScene&&(e=U);const r=W.get(t),i=d.state.lights,o=i.state.version,s=$.getParameters(t,i.state,d.state.shadowsArray,e,n),a=$.getProgramCacheKey(s);let c=r.program,u=!0;if(void 0===c)t.addEventListener("dispose",mt);else if(c.cacheKey!==a)gt(t);else if(r.lightsStateVersion!==o)u=!1;else{if(void 0!==s.shaderID){const n=t.isMeshStandardMaterial?e.environment:null;return void(r.envMap=X.get(t.envMap||n))}u=!1}u&&(s.uniforms=$.getUniforms(t),t.onBeforeCompile(s,p),c=$.acquireProgram(s,a),r.program=c,r.uniforms=s.uniforms,r.outputEncoding=s.outputEncoding);const l=r.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(r.numClippingPlanes=et.numPlanes,r.numIntersection=et.numIntersection,l.clippingPlanes=et.uniform),r.environment=t.isMeshStandardMaterial?e.environment:null,r.fog=e.fog,r.envMap=X.get(t.envMap||r.environment),r.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),r.lightsStateVersion=o,r.needsLights&&(l.ambientLightColor.value=i.state.ambient,l.lightProbe.value=i.state.probe,l.directionalLights.value=i.state.directional,l.directionalLightShadows.value=i.state.directionalShadow,l.spotLights.value=i.state.spot,l.spotLightShadows.value=i.state.spotShadow,l.rectAreaLights.value=i.state.rectArea,l.ltc_1.value=i.state.rectAreaLTC1,l.ltc_2.value=i.state.rectAreaLTC2,l.pointLights.value=i.state.point,l.pointLightShadows.value=i.state.pointShadow,l.hemisphereLights.value=i.state.hemi,l.directionalShadowMap.value=i.state.directionalShadowMap,l.directionalShadowMatrix.value=i.state.directionalShadowMatrix,l.spotShadowMap.value=i.state.spotShadowMap,l.spotShadowMatrix.value=i.state.spotShadowMatrix,l.pointShadowMap.value=i.state.pointShadowMap,l.pointShadowMatrix.value=i.state.pointShadowMatrix);const h=r.program.getUniforms(),f=iy.seqWithValue(h.seq,l);r.uniformsList=f}function St(t,e,n,r){!0!==e.isScene&&(e=U),q.resetTextureUnits();const i=e.fog,o=n.isMeshStandardMaterial?e.environment:null,s=null===b?p.outputEncoding:b.texture.encoding,a=X.get(n.envMap||o),c=W.get(n),u=d.state.lights;!0!==D||!0!==k&&t===x||et.setState(n,t,t===x&&n.id===w),n.version===c.__version?n.fog&&c.fog!==i?xt(n,e,r):c.environment!==o?xt(n,e,r):c.needsLights&&c.lightsStateVersion!==u.state.version?xt(n,e,r):void 0===c.numClippingPlanes||c.numClippingPlanes===et.numPlanes&&c.numIntersection===et.numIntersection?c.outputEncoding!==s?xt(n,e,r):c.envMap!==a&&xt(n,e,r):xt(n,e,r):(xt(n,e,r),c.__version=n.version);let l=!1,h=!1,f=!1;const m=c.program,g=m.getUniforms(),y=c.uniforms;if(V.useProgram(m.program)&&(l=!0,h=!0,f=!0),n.id!==w&&(w=n.id,h=!0),l||x!==t){if(g.setValue(ct,"projectionMatrix",t.projectionMatrix),H.logarithmicDepthBuffer&&g.setValue(ct,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),x!==t&&(x=t,h=!0,f=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){const e=g.map.cameraPosition;void 0!==e&&e.setValue(ct,F.setFromMatrixPosition(t.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&g.setValue(ct,"isOrthographic",!0===t.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||n.skinning)&&g.setValue(ct,"viewMatrix",t.matrixWorldInverse)}if(n.skinning){g.setOptional(ct,r,"bindMatrix"),g.setOptional(ct,r,"bindMatrixInverse");const t=r.skeleton;if(t){const e=t.bones;if(H.floatVertexTextures){if(null===t.boneTexture){let n=Math.sqrt(4*e.length);n=Jd.ceilPowerOfTwo(n),n=Math.max(n,4);const r=new Float32Array(n*n*4);r.set(t.boneMatrices);const i=new Fm(r,n,n,Jl,Gl);t.boneMatrices=r,t.boneTexture=i,t.boneTextureSize=n}g.setValue(ct,"boneTexture",t.boneTexture,q),g.setValue(ct,"boneTextureSize",t.boneTextureSize)}else g.setOptional(ct,t,"boneMatrices")}}var v,_;return(h||c.receiveShadow!==r.receiveShadow)&&(c.receiveShadow=r.receiveShadow,g.setValue(ct,"receiveShadow",r.receiveShadow)),h&&(g.setValue(ct,"toneMappingExposure",p.toneMappingExposure),c.needsLights&&((v=y).ambientLightColor.needsUpdate=_=f,v.lightProbe.needsUpdate=_,v.directionalLights.needsUpdate=_,v.directionalLightShadows.needsUpdate=_,v.pointLights.needsUpdate=_,v.pointLightShadows.needsUpdate=_,v.spotLights.needsUpdate=_,v.spotLightShadows.needsUpdate=_,v.rectAreaLights.needsUpdate=_,v.hemisphereLights.needsUpdate=_),i&&n.fog&&J.refreshFogUniforms(y,i),J.refreshMaterialUniforms(y,n,C,A),iy.upload(ct,c.uniformsList,y,q)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(iy.upload(ct,c.uniformsList,y,q),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&g.setValue(ct,"center",r.center),g.setValue(ct,"modelViewMatrix",r.modelViewMatrix),g.setValue(ct,"normalMatrix",r.normalMatrix),g.setValue(ct,"modelMatrix",r.matrixWorld),m}vt.setAnimationLoop((function(t){ht.isPresenting||yt&&yt(t)})),"undefined"!=typeof window&&vt.setContext(window),this.setAnimationLoop=function(t){yt=t,ht.setAnimationLoop(t),null===t?vt.stop():vt.start()},this.render=function(t,e){let n,r;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),r=arguments[3]),void 0!==e&&!0!==e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===m)return;at.resetDefaultState(),w=-1,x=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),!0===ht.enabled&&!0===ht.isPresenting&&(e=ht.getCamera(e)),!0===t.isScene&&t.onBeforeRender(p,t,e,n||b),d=tt.get(t,f.length),d.init(),f.push(d),j.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),N.setFromProjectionMatrix(j),k=this.localClippingEnabled,D=et.init(this.clippingPlanes,k,e),h=Q.get(t,e),h.init(),bt(t,e,0,p.sortObjects),h.finish(),!0===p.sortObjects&&h.sort(O,R),!0===D&&et.beginShadows();const i=d.state.shadowsArray;dt.render(i,t,e),d.setupLights(),d.setupLightsView(e),!0===D&&et.endShadows(),!0===this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),nt.render(h,t,e,r);const o=h.opaque,s=h.transparent;o.length>0&&_t(o,t,e),s.length>0&&_t(s,t,e),!0===t.isScene&&t.onAfterRender(p,t,e),null!==b&&(q.updateRenderTargetMipmap(b),q.updateMultisampleRenderTarget(b)),V.buffers.depth.setTest(!0),V.buffers.depth.setMask(!0),V.buffers.color.setMask(!0),V.setPolygonOffset(!1),f.pop(),d=f.length>0?f[f.length-1]:null,h=null},this.setFramebuffer=function(t){g!==t&&null===b&&ct.bindFramebuffer(36160,t),g=t},this.getActiveCubeFace=function(){return y},this.getActiveMipmapLevel=function(){return v},this.getRenderList=function(){return h},this.setRenderList=function(t){h=t},this.getRenderTarget=function(){return b},this.setRenderTarget=function(t,e=0,n=0){b=t,y=e,v=n,t&&void 0===W.get(t).__webglFramebuffer&&q.setupRenderTarget(t);let r=g,i=!1;if(t){const n=W.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(r=n[e],i=!0):r=t.isWebGLMultisampleRenderTarget?W.get(t).__webglMultisampledFramebuffer:n,S.copy(t.viewport),E.copy(t.scissor),T=t.scissorTest}else S.copy(I).multiplyScalar(C).floor(),E.copy(L).multiplyScalar(C).floor(),T=P;if(_!==r&&(ct.bindFramebuffer(36160,r),_=r),V.viewport(S),V.scissor(E),V.setScissorTest(T),i){const r=W.get(t.texture);ct.framebufferTexture2D(36160,36064,34069+e,r.__webglTexture,n)}},this.readRenderTargetPixels=function(t,e,n,r,i,o,s){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let a=W.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==s&&(a=a[s]),a){let s=!1;a!==_&&(ct.bindFramebuffer(36160,a),s=!0);try{const a=t.texture,c=a.format,u=a.type;if(c!==Jl&&st.convert(c)!==ct.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(u===Fl||st.convert(u)===ct.getParameter(35738)||u===Gl&&(H.isWebGL2||z.get("OES_texture_float")||z.get("WEBGL_color_buffer_float"))||u===Wl&&z.get(H.isWebGL2?"EXT_color_buffer_float":"EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===ct.checkFramebufferStatus(36160)?e>=0&&e<=t.width-r&&n>=0&&n<=t.height-i&&ct.readPixels(e,n,r,i,st.convert(c),st.convert(u),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&ct.bindFramebuffer(36160,_)}}},this.copyFramebufferToTexture=function(t,e,n=0){const r=Math.pow(2,-n),i=Math.floor(e.image.width*r),o=Math.floor(e.image.height*r),s=st.convert(e.format);q.setTexture2D(e,0),ct.copyTexImage2D(3553,n,s,t.x,t.y,i,o,0),V.unbindTexture()},this.copyTextureToTexture=function(t,e,n,r=0){const i=e.image.width,o=e.image.height,s=st.convert(n.format),a=st.convert(n.type);q.setTexture2D(n,0),ct.pixelStorei(37440,n.flipY),ct.pixelStorei(37441,n.premultiplyAlpha),ct.pixelStorei(3317,n.unpackAlignment),e.isDataTexture?ct.texSubImage2D(3553,r,t.x,t.y,i,o,s,a,e.image.data):e.isCompressedTexture?ct.compressedTexSubImage2D(3553,r,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,s,e.mipmaps[0].data):ct.texSubImage2D(3553,r,t.x,t.y,s,a,e.image),0===r&&n.generateMipmaps&&ct.generateMipmap(3553),V.unbindTexture()},this.initTexture=function(t){q.setTexture2D(t,0),V.unbindTexture()},this.resetState=function(){V.reset(),at.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function Ky(t){Zy.call(this,t)}(jy.prototype=Object.create(Dp.prototype)).constructor=jy,jy.prototype.isMeshDepthMaterial=!0,jy.prototype.copy=function(t){return Dp.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},(Fy.prototype=Object.create(Dp.prototype)).constructor=Fy,Fy.prototype.isMeshDistanceMaterial=!0,Fy.prototype.copy=function(t){return Dp.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this},Vy.prototype=Object.assign(Object.create(Nm.prototype),{constructor:Vy,isArrayCamera:!0}),Gy.prototype=Object.assign(Object.create(lp.prototype),{constructor:Gy,isGroup:!0}),Object.assign(Wy.prototype,{constructor:Wy,getHandSpace:function(){if(null===this._hand&&(this._hand=new Gy,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints=[],this._hand.inputState={pinching:!1},window.XRHand))for(let t=0;t<=window.XRHand.LITTLE_PHALANX_TIP;t++){const t=new Gy;t.matrixAutoUpdate=!1,t.visible=!1,this._hand.joints.push(t),this._hand.add(t)}return this._hand},getTargetRaySpace:function(){return null===this._targetRay&&(this._targetRay=new Gy,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return null===this._grip&&(this._grip=new Gy,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this},disconnect:function(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this},update:function(t,e,n){let r=null,i=null,o=null;const s=this._targetRay,a=this._grip,c=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState)if(c&&t.hand){o=!0;for(let r=0;r<=window.XRHand.LITTLE_PHALANX_TIP;r++)if(t.hand[r]){const i=e.getJointPose(t.hand[r],n),o=c.joints[r];null!==i&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.jointRadius=i.radius),o.visible=null!==i;const s=c.joints[window.XRHand.INDEX_PHALANX_TIP],a=c.joints[window.XRHand.THUMB_PHALANX_TIP],u=s.position.distanceTo(a.position),l=.02,h=.005;c.inputState.pinching&&u>l+h?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!c.inputState.pinching&&u<=l-h&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}}else null!==s&&(r=e.getPose(t.targetRaySpace,n),null!==r&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale))),null!==a&&t.gripSpace&&(i=e.getPose(t.gripSpace,n),null!==i&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale)));return null!==s&&(s.visible=null!==r),null!==a&&(a.visible=null!==i),null!==c&&(c.visible=null!==o),this}}),Object.assign(qy.prototype,Kd.prototype),Ky.prototype=Object.assign(Object.create(Zy.prototype),{constructor:Ky,isWebGL1Renderer:!0});class Yy{constructor(t,e){Object.defineProperty(this,"isFogExp2",{value:!0}),this.name="",this.color=new Lp(t),this.density=void 0!==e?e:25e-5}clone(){return new Yy(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class $y{constructor(t,e,n){Object.defineProperty(this,"isFog",{value:!0}),this.name="",this.color=new Lp(t),this.near=void 0!==e?e:1,this.far=void 0!==n?n:1e3}clone(){return new $y(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Jy extends lp{constructor(){super(),Object.defineProperty(this,"isScene",{value:!0}),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.environment&&(e.object.environment=this.environment.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}function Qy(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=Fd,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Jd.generateUUID()}Object.defineProperty(Qy.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Qy.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(let r=0,i=this.stride;r<i;r++)this.array[t+r]=e.array[n+r];return this},set:function(t,e=0){return this.array.set(t,e),this},clone:function(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Jd.generateUUID()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new Qy(new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),this.stride);return e.setUsage(this.usage),e},onUpload:function(t){return this.onUploadCallback=t,this},toJSON:function(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Jd.generateUUID()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});const tv=new hf;function ev(t,e,n,r){this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===r}function nv(t){Dp.call(this),this.type="SpriteMaterial",this.color=new Lp(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}let rv;Object.defineProperties(ev.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(t){this.data.needsUpdate=t}}}),Object.assign(ev.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(t){for(let e=0,n=this.data.count;e<n;e++)tv.x=this.getX(e),tv.y=this.getY(e),tv.z=this.getZ(e),tv.applyMatrix4(t),this.setXYZ(e,tv.x,tv.y,tv.z);return this},setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return this.data.array[(t=t*this.data.stride+this.offset)+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,r){return this.data.array[(t=t*this.data.stride+this.offset)+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return this.data.array[(t=t*this.data.stride+this.offset)+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=i,this},clone:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return new Up(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new ev(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}),(nv.prototype=Object.create(Dp.prototype)).constructor=nv,nv.prototype.isSpriteMaterial=!0,nv.prototype.copy=function(t){return Dp.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this};const iv=new hf,ov=new hf,sv=new hf,av=new Qd,cv=new Qd,uv=new Uf,lv=new hf,hv=new hf,dv=new hf,fv=new Qd,pv=new Qd,mv=new Qd;function gv(t){if(lp.call(this),this.type="Sprite",void 0===rv){rv=new am;const t=new Qy(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);rv.setIndex([0,1,2,0,2,3]),rv.setAttribute("position",new ev(t,3,0,!1)),rv.setAttribute("uv",new ev(t,2,3,!1))}this.geometry=rv,this.material=void 0!==t?t:new nv,this.center=new Qd(.5,.5)}function yv(t,e,n,r,i,o){av.subVectors(t,n).addScalar(.5).multiply(r),void 0!==i?(cv.x=o*av.x-i*av.y,cv.y=i*av.x+o*av.y):cv.copy(av),t.copy(e),t.x+=cv.x,t.y+=cv.y,t.applyMatrix4(uv)}gv.prototype=Object.assign(Object.create(lp.prototype),{constructor:gv,isSprite:!0,raycast:function(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),ov.setFromMatrixScale(this.matrixWorld),uv.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),sv.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&ov.multiplyScalar(-sv.z);const n=this.material.rotation;let r,i;0!==n&&(i=Math.cos(n),r=Math.sin(n));const o=this.center;yv(lv.set(-.5,-.5,0),sv,o,ov,r,i),yv(hv.set(.5,-.5,0),sv,o,ov,r,i),yv(dv.set(.5,.5,0),sv,o,ov,r,i),fv.set(0,0),pv.set(1,0),mv.set(1,1);let s=t.ray.intersectTriangle(lv,hv,dv,!1,iv);if(null===s&&(yv(hv.set(-.5,.5,0),sv,o,ov,r,i),pv.set(0,1),s=t.ray.intersectTriangle(lv,dv,hv,!1,iv),null===s))return;const a=t.ray.origin.distanceTo(iv);a<t.near||a>t.far||e.push({distance:a,point:iv.clone(),uv:Tp.getUV(iv,lv,hv,dv,fv,pv,mv,new Qd),face:null,object:this})},copy:function(t){return lp.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}});const vv=new hf,bv=new hf;function _v(){lp.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}_v.prototype=Object.assign(Object.create(lp.prototype),{constructor:_v,isLOD:!0,copy:function(t){lp.prototype.copy.call(this,t,!1);const e=t.levels;for(let n=0,r=e.length;n<r;n++){const t=e[n];this.addLevel(t.object.clone(),t.distance)}return this.autoUpdate=t.autoUpdate,this},addLevel:function(t,e=0){e=Math.abs(e);const n=this.levels;let r;for(r=0;r<n.length&&!(e<n[r].distance);r++);return n.splice(r,0,{distance:e,object:t}),this.add(t),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(t){const e=this.levels;if(e.length>0){let n,r;for(n=1,r=e.length;n<r&&!(t<e[n].distance);n++);return e[n-1].object}return null},raycast:function(t,e){if(this.levels.length>0){vv.setFromMatrixPosition(this.matrixWorld);const n=t.ray.origin.distanceTo(vv);this.getObjectForDistance(n).raycast(t,e)}},update:function(t){const e=this.levels;if(e.length>1){vv.setFromMatrixPosition(t.matrixWorld),bv.setFromMatrixPosition(this.matrixWorld);const n=vv.distanceTo(bv)/t.zoom;let r,i;for(e[0].object.visible=!0,r=1,i=e.length;r<i&&n>=e[r].distance;r++)e[r-1].object.visible=!1,e[r].object.visible=!0;for(this._currentLevel=r-1;r<i;r++)e[r].object.visible=!1}},toJSON:function(t){const e=lp.prototype.toJSON.call(this,t);!1===this.autoUpdate&&(e.object.autoUpdate=!1),e.object.levels=[];const n=this.levels;for(let r=0,i=n.length;r<i;r++){const t=n[r];e.object.levels.push({object:t.object.uuid,distance:t.distance})}return e}});const wv=new hf,xv=new af,Sv=new af,Ev=new hf,Tv=new Uf;function Mv(t,e){t&&t.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Tm.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Uf,this.bindMatrixInverse=new Uf}function Av(){lp.call(this),this.type="Bone"}Mv.prototype=Object.assign(Object.create(Tm.prototype),{constructor:Mv,isSkinnedMesh:!0,copy:function(t){return Tm.prototype.copy.call(this,t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this},bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){const t=new af,e=this.geometry.attributes.skinWeight;for(let n=0,r=e.count;n<r;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);const r=1/t.manhattanLength();r!==1/0?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){Tm.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:function(t,e){const n=this.skeleton,r=this.geometry;xv.fromBufferAttribute(r.attributes.skinIndex,t),Sv.fromBufferAttribute(r.attributes.skinWeight,t),wv.fromBufferAttribute(r.attributes.position,t).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let i=0;i<4;i++){const t=Sv.getComponent(i);if(0!==t){const r=xv.getComponent(i);Tv.multiplyMatrices(n.bones[r].matrixWorld,n.boneInverses[r]),e.addScaledVector(Ev.copy(wv).applyMatrix4(Tv),t)}}return e.applyMatrix4(this.bindMatrixInverse)}}),Av.prototype=Object.assign(Object.create(lp.prototype),{constructor:Av,isBone:!0});const Cv=new Uf,Ov=new Uf;function Rv(t=[],e=[]){this.uuid=Jd.generateUUID(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}Object.assign(Rv.prototype,{init:function(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new Uf)}},calculateInverses:function(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const e=new Uf;this.bones[t]&&e.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(e)}},pose:function(){for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&e.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&(e.parent&&e.parent.isBone?(e.matrix.copy(e.parent.matrixWorld).invert(),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))}},update:function(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let i=0,o=t.length;i<o;i++)Cv.multiplyMatrices(t[i]?t[i].matrixWorld:Ov,e[i]),Cv.toArray(n,16*i);null!==r&&(r.needsUpdate=!0)},clone:function(){return new Rv(this.bones,this.boneInverses)},getBoneByName:function(t){for(let e=0,n=this.bones.length;e<n;e++){const n=this.bones[e];if(n.name===t)return n}},dispose:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)},fromJSON:function(t,e){this.uuid=t.uuid;for(let n=0,r=t.bones.length;n<r;n++){const r=t.bones[n];let i=e[r];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),i=new Av),this.bones.push(i),this.boneInverses.push((new Uf).fromArray(t.boneInverses[n]))}return this.init(),this},toJSON:function(){const t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,n=this.boneInverses;for(let r=0,i=e.length;r<i;r++)t.bones.push(e[r].uuid),t.boneInverses.push(n[r].toArray());return t}});const Iv=new Uf,Lv=new Uf,Pv=[],Nv=new Tm;function Dv(t,e,n){Tm.call(this,t,e),this.instanceMatrix=new Up(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}function kv(t){Dp.call(this),this.type="LineBasicMaterial",this.color=new Lp(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(t)}Dv.prototype=Object.assign(Object.create(Tm.prototype),{constructor:Dv,isInstancedMesh:!0,copy:function(t){return Tm.prototype.copy.call(this,t),this.instanceMatrix.copy(t.instanceMatrix),this.count=t.count,this},getColorAt:function(t,e){e.fromArray(this.instanceColor.array,3*t)},getMatrixAt:function(t,e){e.fromArray(this.instanceMatrix.array,16*t)},raycast:function(t,e){const n=this.matrixWorld,r=this.count;if(Nv.geometry=this.geometry,Nv.material=this.material,void 0!==Nv.material)for(let i=0;i<r;i++){this.getMatrixAt(i,Iv),Lv.multiplyMatrices(n,Iv),Nv.matrixWorld=Lv,Nv.raycast(t,Pv);for(let t=0,n=Pv.length;t<n;t++){const n=Pv[t];n.instanceId=i,n.object=this,e.push(n)}Pv.length=0}},setColorAt:function(t,e){null===this.instanceColor&&(this.instanceColor=new Up(new Float32Array(3*this.count),3)),e.toArray(this.instanceColor.array,3*t)},setMatrixAt:function(t,e){e.toArray(this.instanceMatrix.array,16*t)},updateMorphTargets:function(){},dispose:function(){this.dispatchEvent({type:"dispose"})}}),(kv.prototype=Object.create(Dp.prototype)).constructor=kv,kv.prototype.isLineBasicMaterial=!0,kv.prototype.copy=function(t){return Dp.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.morphTargets=t.morphTargets,this};const jv=new hf,Fv=new hf,Uv=new Uf,Bv=new Ff,zv=new Rf;function Hv(t=new am,e=new kv){lp.call(this),this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}Hv.prototype=Object.assign(Object.create(lp.prototype),{constructor:Hv,isLine:!0,copy:function(t){return lp.prototype.copy.call(this,t),this.material=t.material,this.geometry=t.geometry,this},computeLineDistances:function(){const t=this.geometry;if(t.isBufferGeometry)if(null===t.index){const e=t.attributes.position,n=[0];for(let t=1,r=e.count;t<r;t++)jv.fromBufferAttribute(e,t-1),Fv.fromBufferAttribute(e,t),n[t]=n[t-1],n[t]+=jv.distanceTo(Fv);t.setAttribute("lineDistance",new Zp(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){const e=t.vertices,n=t.lineDistances;n[0]=0;for(let t=1,r=e.length;t<r;t++)n[t]=n[t-1],n[t]+=e[t-1].distanceTo(e[t])}return this},raycast:function(t,e){const n=this.geometry,r=this.matrixWorld,i=t.params.Line.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),zv.copy(n.boundingSphere),zv.applyMatrix4(r),zv.radius+=i,!1===t.ray.intersectsSphere(zv))return;Uv.copy(r).invert(),Bv.copy(t.ray).applyMatrix4(Uv);const o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,a=new hf,c=new hf,u=new hf,l=new hf,h=this.isLineSegments?2:1;if(n.isBufferGeometry){const r=n.index,i=n.attributes.position;if(null!==r){const n=r.array;for(let r=0,o=n.length-1;r<o;r+=h){const o=n[r+1];if(a.fromBufferAttribute(i,n[r]),c.fromBufferAttribute(i,o),Bv.distanceSqToSegment(a,c,l,u)>s)continue;l.applyMatrix4(this.matrixWorld);const h=t.ray.origin.distanceTo(l);h<t.near||h>t.far||e.push({distance:h,point:u.clone().applyMatrix4(this.matrixWorld),index:r,face:null,faceIndex:null,object:this})}}else for(let n=0,o=i.count-1;n<o;n+=h){if(a.fromBufferAttribute(i,n),c.fromBufferAttribute(i,n+1),Bv.distanceSqToSegment(a,c,l,u)>s)continue;l.applyMatrix4(this.matrixWorld);const r=t.ray.origin.distanceTo(l);r<t.near||r>t.far||e.push({distance:r,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else if(n.isGeometry){const r=n.vertices,i=r.length;for(let n=0;n<i-1;n+=h){if(Bv.distanceSqToSegment(r[n],r[n+1],l,u)>s)continue;l.applyMatrix4(this.matrixWorld);const i=t.ray.origin.distanceTo(l);i<t.near||i>t.far||e.push({distance:i,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}},updateMorphTargets:function(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});const Vv=new hf,Gv=new hf;function Wv(t,e){Hv.call(this,t,e),this.type="LineSegments"}function qv(t,e){Hv.call(this,t,e),this.type="LineLoop"}function Xv(t){Dp.call(this),this.type="PointsMaterial",this.color=new Lp(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(t)}Wv.prototype=Object.assign(Object.create(Hv.prototype),{constructor:Wv,isLineSegments:!0,computeLineDistances:function(){const t=this.geometry;if(t.isBufferGeometry)if(null===t.index){const e=t.attributes.position,n=[];for(let t=0,r=e.count;t<r;t+=2)Vv.fromBufferAttribute(e,t),Gv.fromBufferAttribute(e,t+1),n[t]=0===t?0:n[t-1],n[t+1]=n[t]+Vv.distanceTo(Gv);t.setAttribute("lineDistance",new Zp(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){const e=t.vertices,n=t.lineDistances;for(let t=0,r=e.length;t<r;t+=2)Vv.copy(e[t]),Gv.copy(e[t+1]),n[t]=0===t?0:n[t-1],n[t+1]=n[t]+Vv.distanceTo(Gv)}return this}}),qv.prototype=Object.assign(Object.create(Hv.prototype),{constructor:qv,isLineLoop:!0}),(Xv.prototype=Object.create(Dp.prototype)).constructor=Xv,Xv.prototype.isPointsMaterial=!0,Xv.prototype.copy=function(t){return Dp.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this};const Zv=new Uf,Kv=new Ff,Yv=new Rf,$v=new hf;function Jv(t=new am,e=new Xv){lp.call(this),this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}function Qv(t,e,n,r,i,o,s){const a=Kv.distanceSqToPoint(t);if(a<n){const n=new hf;Kv.closestPointToPoint(t,n),n.applyMatrix4(r);const c=i.ray.origin.distanceTo(n);if(c<i.near||c>i.far)return;o.push({distance:c,distanceToRay:Math.sqrt(a),point:n,index:e,face:null,object:s})}}function tb(t,e,n,r,i,o,s,a,c){of.call(this,t,e,n,r,i,o,s,a,c),this.format=void 0!==s?s:$l,this.minFilter=void 0!==o?o:Pl,this.magFilter=void 0!==i?i:Pl,this.generateMipmaps=!1;const u=this;"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback((function e(){u.needsUpdate=!0,t.requestVideoFrameCallback(e)}))}function eb(t,e,n,r,i,o,s,a,c,u,l,h){of.call(this,null,o,s,a,c,u,r,i,l,h),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function nb(t,e,n,r,i,o,s,a,c){of.call(this,t,e,n,r,i,o,s,a,c),this.needsUpdate=!0}function rb(t,e,n,r,i,o,s,a,c,u){if((u=void 0!==u?u:nh)!==nh&&u!==rh)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&u===nh&&(n=zl),void 0===n&&u===rh&&(n=Kl),of.call(this,null,r,i,o,s,a,u,n,c),this.image={width:t,height:e},this.magFilter=void 0!==s?s:Cl,this.minFilter=void 0!==a?a:Cl,this.flipY=!1,this.generateMipmaps=!1}Jv.prototype=Object.assign(Object.create(lp.prototype),{constructor:Jv,isPoints:!0,copy:function(t){return lp.prototype.copy.call(this,t),this.material=t.material,this.geometry=t.geometry,this},raycast:function(t,e){const n=this.geometry,r=this.matrixWorld,i=t.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),Yv.copy(n.boundingSphere),Yv.applyMatrix4(r),Yv.radius+=i,!1===t.ray.intersectsSphere(Yv))return;Zv.copy(r).invert(),Kv.copy(t.ray).applyMatrix4(Zv);const o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o;if(n.isBufferGeometry){const i=n.index,o=n.attributes.position;if(null!==i){const n=i.array;for(let i=0,a=n.length;i<a;i++){const a=n[i];$v.fromBufferAttribute(o,a),Qv($v,a,s,r,t,e,this)}}else for(let n=0,a=o.count;n<a;n++)$v.fromBufferAttribute(o,n),Qv($v,n,s,r,t,e,this)}else{const i=n.vertices;for(let n=0,o=i.length;n<o;n++)Qv(i[n],n,s,r,t,e,this)}},updateMorphTargets:function(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}),tb.prototype=Object.assign(Object.create(of.prototype),{constructor:tb,clone:function(){return new this.constructor(this.image).copy(this)},isVideoTexture:!0,update:function(){const t=this.image;0=="requestVideoFrameCallback"in t&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),(eb.prototype=Object.create(of.prototype)).constructor=eb,eb.prototype.isCompressedTexture=!0,(nb.prototype=Object.create(of.prototype)).constructor=nb,nb.prototype.isCanvasTexture=!0,(rb.prototype=Object.create(of.prototype)).constructor=rb,rb.prototype.isDepthTexture=!0;let ib=0;const ob=new Uf,sb=new lp,ab=new hf;function cb(){Object.defineProperty(this,"id",{value:ib+=2}),this.uuid=Jd.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}cb.prototype=Object.assign(Object.create(Kd.prototype),{constructor:cb,isGeometry:!0,applyMatrix4:function(t){const e=(new tf).getNormalMatrix(t);for(let n=0,r=this.vertices.length;n<r;n++)this.vertices[n].applyMatrix4(t);for(let n=0,r=this.faces.length;n<r;n++){const t=this.faces[n];t.normal.applyMatrix3(e).normalize();for(let n=0,r=t.vertexNormals.length;n<r;n++)t.vertexNormals[n].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(t){return ob.makeRotationX(t),this.applyMatrix4(ob),this},rotateY:function(t){return ob.makeRotationY(t),this.applyMatrix4(ob),this},rotateZ:function(t){return ob.makeRotationZ(t),this.applyMatrix4(ob),this},translate:function(t,e,n){return ob.makeTranslation(t,e,n),this.applyMatrix4(ob),this},scale:function(t,e,n){return ob.makeScale(t,e,n),this.applyMatrix4(ob),this},lookAt:function(t){return sb.lookAt(t),sb.updateMatrix(),this.applyMatrix4(sb.matrix),this},fromBufferGeometry:function(t){const e=this,n=null!==t.index?t.index:void 0,r=t.attributes;if(void 0===r.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;const i=r.position,o=r.normal,s=r.color,a=r.uv,c=r.uv2;void 0!==c&&(this.faceVertexUvs[1]=[]);for(let h=0;h<i.count;h++)e.vertices.push((new hf).fromBufferAttribute(i,h)),void 0!==s&&e.colors.push((new Lp).fromBufferAttribute(s,h));function u(t,n,r,i){const u=void 0===s?[]:[e.colors[t].clone(),e.colors[n].clone(),e.colors[r].clone()],l=void 0===o?[]:[(new hf).fromBufferAttribute(o,t),(new hf).fromBufferAttribute(o,n),(new hf).fromBufferAttribute(o,r)],h=new Pp(t,n,r,l,u,i);e.faces.push(h),void 0!==a&&e.faceVertexUvs[0].push([(new Qd).fromBufferAttribute(a,t),(new Qd).fromBufferAttribute(a,n),(new Qd).fromBufferAttribute(a,r)]),void 0!==c&&e.faceVertexUvs[1].push([(new Qd).fromBufferAttribute(c,t),(new Qd).fromBufferAttribute(c,n),(new Qd).fromBufferAttribute(c,r)])}const l=t.groups;if(l.length>0)for(let h=0;h<l.length;h++){const t=l[h],e=t.start;for(let r=e,i=e+t.count;r<i;r+=3)void 0!==n?u(n.getX(r),n.getX(r+1),n.getX(r+2),t.materialIndex):u(r,r+1,r+2,t.materialIndex)}else if(void 0!==n)for(let h=0;h<n.count;h+=3)u(n.getX(h),n.getX(h+1),n.getX(h+2));else for(let h=0;h<i.count;h+=3)u(h,h+1,h+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(ab).negate(),this.translate(ab.x,ab.y,ab.z),this},normalize:function(){this.computeBoundingSphere();const t=this.boundingSphere.center,e=this.boundingSphere.radius,n=0===e?1:1/e,r=new Uf;return r.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix4(r),this},computeFaceNormals:function(){const t=new hf,e=new hf;for(let n=0,r=this.faces.length;n<r;n++){const r=this.faces[n],i=this.vertices[r.a],o=this.vertices[r.b];t.subVectors(this.vertices[r.c],o),e.subVectors(i,o),t.cross(e),t.normalize(),r.normal.copy(t)}},computeVertexNormals:function(t=!0){const e=new Array(this.vertices.length);for(let n=0,r=this.vertices.length;n<r;n++)e[n]=new hf;if(t){const t=new hf,n=new hf;for(let r=0,i=this.faces.length;r<i;r++){const i=this.faces[r],o=this.vertices[i.a],s=this.vertices[i.b];t.subVectors(this.vertices[i.c],s),n.subVectors(o,s),t.cross(n),e[i.a].add(t),e[i.b].add(t),e[i.c].add(t)}}else{this.computeFaceNormals();for(let t=0,n=this.faces.length;t<n;t++){const n=this.faces[t];e[n.a].add(n.normal),e[n.b].add(n.normal),e[n.c].add(n.normal)}}for(let n=0,r=this.vertices.length;n<r;n++)e[n].normalize();for(let n=0,r=this.faces.length;n<r;n++){const t=this.faces[n],r=t.vertexNormals;3===r.length?(r[0].copy(e[t.a]),r[1].copy(e[t.b]),r[2].copy(e[t.c])):(r[0]=e[t.a].clone(),r[1]=e[t.b].clone(),r[2]=e[t.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();for(let t=0,e=this.faces.length;t<e;t++){const e=this.faces[t],n=e.vertexNormals;3===n.length?(n[0].copy(e.normal),n[1].copy(e.normal),n[2].copy(e.normal)):(n[0]=e.normal.clone(),n[1]=e.normal.clone(),n[2]=e.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){for(let e=0,n=this.faces.length;e<n;e++){const t=this.faces[e];t.__originalFaceNormal?t.__originalFaceNormal.copy(t.normal):t.__originalFaceNormal=t.normal.clone(),t.__originalVertexNormals||(t.__originalVertexNormals=[]);for(let e=0,n=t.vertexNormals.length;e<n;e++)t.__originalVertexNormals[e]?t.__originalVertexNormals[e].copy(t.vertexNormals[e]):t.__originalVertexNormals[e]=t.vertexNormals[e].clone()}const t=new cb;t.faces=this.faces;for(let e=0,n=this.morphTargets.length;e<n;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];const t=this.morphNormals[e].faceNormals,n=this.morphNormals[e].vertexNormals;for(let e=0,r=this.faces.length;e<r;e++){const e=new hf,r={a:new hf,b:new hf,c:new hf};t.push(e),n.push(r)}}const n=this.morphNormals[e];t.vertices=this.morphTargets[e].vertices,t.computeFaceNormals(),t.computeVertexNormals();for(let t=0,e=this.faces.length;t<e;t++){const e=this.faces[t],r=n.vertexNormals[t];n.faceNormals[t].copy(e.normal),r.a.copy(e.vertexNormals[0]),r.b.copy(e.vertexNormals[1]),r.c.copy(e.vertexNormals[2])}}for(let e=0,n=this.faces.length;e<n;e++){const t=this.faces[e];t.normal=t.__originalFaceNormal,t.vertexNormals=t.__originalVertexNormals}},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new pf),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Rf),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n=0){if(!t||!t.isGeometry)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t);let r;const i=this.vertices.length,o=this.vertices,s=t.vertices,a=this.faces,c=t.faces,u=this.colors,l=t.colors;void 0!==e&&(r=(new tf).getNormalMatrix(e));for(let h=0,d=s.length;h<d;h++){const t=s[h].clone();void 0!==e&&t.applyMatrix4(e),o.push(t)}for(let h=0,d=l.length;h<d;h++)u.push(l[h].clone());for(let h=0,d=c.length;h<d;h++){const t=c[h];let e,o;const s=t.vertexNormals,u=t.vertexColors,l=new Pp(t.a+i,t.b+i,t.c+i);l.normal.copy(t.normal),void 0!==r&&l.normal.applyMatrix3(r).normalize();for(let n=0,i=s.length;n<i;n++)e=s[n].clone(),void 0!==r&&e.applyMatrix3(r).normalize(),l.vertexNormals.push(e);l.color.copy(t.color);for(let n=0,r=u.length;n<r;n++)o=u[n],l.vertexColors.push(o.clone());l.materialIndex=t.materialIndex+n,a.push(l)}for(let h=0,d=t.faceVertexUvs.length;h<d;h++){const e=t.faceVertexUvs[h];void 0===this.faceVertexUvs[h]&&(this.faceVertexUvs[h]=[]);for(let t=0,n=e.length;t<n;t++){const n=e[t],r=[];for(let t=0,e=n.length;t<e;t++)r.push(n[t].clone());this.faceVertexUvs[h].push(r)}}},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(t=4){const e={},n=[],r=[],i=Math.pow(10,t);for(let a=0,c=this.vertices.length;a<c;a++){const t=this.vertices[a],o=Math.round(t.x*i)+"_"+Math.round(t.y*i)+"_"+Math.round(t.z*i);void 0===e[o]?(e[o]=a,n.push(this.vertices[a]),r[a]=n.length-1):r[a]=r[e[o]]}const o=[];for(let a=0,c=this.faces.length;a<c;a++){const t=this.faces[a];t.a=r[t.a],t.b=r[t.b],t.c=r[t.c];const e=[t.a,t.b,t.c];for(let n=0;n<3;n++)if(e[n]===e[(n+1)%3]){o.push(a);break}}for(let a=o.length-1;a>=0;a--){const t=o[a];this.faces.splice(t,1);for(let e=0,n=this.faceVertexUvs.length;e<n;e++)this.faceVertexUvs[e].splice(t,1)}const s=this.vertices.length-n.length;return this.vertices=n,s},setFromPoints:function(t){this.vertices=[];for(let e=0,n=t.length;e<n;e++){const n=t[e];this.vertices.push(new hf(n.x,n.y,n.z||0))}return this},sortFacesByMaterialIndex:function(){const t=this.faces,e=t.length;for(let s=0;s<e;s++)t[s]._id=s;t.sort((function(t,e){return t.materialIndex-e.materialIndex}));const n=this.faceVertexUvs[0],r=this.faceVertexUvs[1];let i,o;n&&n.length===e&&(i=[]),r&&r.length===e&&(o=[]);for(let s=0;s<e;s++){const e=t[s]._id;i&&i.push(n[e]),o&&o.push(r[e])}i&&(this.faceVertexUvs[0]=i),o&&(this.faceVertexUvs[1]=o)},toJSON:function(){const t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){const e=this.parameters;for(const n in e)void 0!==e[n]&&(t[n]=e[n]);return t}const e=[];for(let f=0;f<this.vertices.length;f++){const t=this.vertices[f];e.push(t.x,t.y,t.z)}const n=[],r=[],i={},o=[],s={},a=[],c={};for(let f=0;f<this.faces.length;f++){const t=this.faces[f],e=!0,r=!1,i=void 0!==this.faceVertexUvs[0][f],o=t.normal.length()>0,s=t.vertexNormals.length>0,a=1!==t.color.r||1!==t.color.g||1!==t.color.b,c=t.vertexColors.length>0;let p=0;if(p=u(p,0,0),p=u(p,1,e),p=u(p,2,r),p=u(p,3,i),p=u(p,4,o),p=u(p,5,s),p=u(p,6,a),p=u(p,7,c),n.push(p),n.push(t.a,t.b,t.c),n.push(t.materialIndex),i){const t=this.faceVertexUvs[0][f];n.push(d(t[0]),d(t[1]),d(t[2]))}if(o&&n.push(l(t.normal)),s){const e=t.vertexNormals;n.push(l(e[0]),l(e[1]),l(e[2]))}if(a&&n.push(h(t.color)),c){const e=t.vertexColors;n.push(h(e[0]),h(e[1]),h(e[2]))}}function u(t,e,n){return n?t|1<<e:t&~(1<<e)}function l(t){const e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==i[e]?i[e]:(i[e]=r.length/3,r.push(t.x,t.y,t.z),i[e])}function h(t){const e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==s[e]?s[e]:(s[e]=o.length,o.push(t.getHex()),s[e])}function d(t){const e=t.x.toString()+t.y.toString();return void 0!==c[e]?c[e]:(c[e]=a.length/2,a.push(t.x,t.y),c[e])}return t.data={},t.data.vertices=e,t.data.normals=r,o.length>0&&(t.data.colors=o),a.length>0&&(t.data.uvs=[a]),t.data.faces=n,t},clone:function(){return(new cb).copy(this)},copy:function(t){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;const e=t.vertices;for(let h=0,d=e.length;h<d;h++)this.vertices.push(e[h].clone());const n=t.colors;for(let h=0,d=n.length;h<d;h++)this.colors.push(n[h].clone());const r=t.faces;for(let h=0,d=r.length;h<d;h++)this.faces.push(r[h].clone());for(let h=0,d=t.faceVertexUvs.length;h<d;h++){const e=t.faceVertexUvs[h];void 0===this.faceVertexUvs[h]&&(this.faceVertexUvs[h]=[]);for(let t=0,n=e.length;t<n;t++){const n=e[t],r=[];for(let t=0,e=n.length;t<e;t++)r.push(n[t].clone());this.faceVertexUvs[h].push(r)}}const i=t.morphTargets;for(let h=0,d=i.length;h<d;h++){const t={};if(t.name=i[h].name,void 0!==i[h].vertices){t.vertices=[];for(let e=0,n=i[h].vertices.length;e<n;e++)t.vertices.push(i[h].vertices[e].clone())}if(void 0!==i[h].normals){t.normals=[];for(let e=0,n=i[h].normals.length;e<n;e++)t.normals.push(i[h].normals[e].clone())}this.morphTargets.push(t)}const o=t.morphNormals;for(let h=0,d=o.length;h<d;h++){const t={};if(void 0!==o[h].vertexNormals){t.vertexNormals=[];for(let e=0,n=o[h].vertexNormals.length;e<n;e++){const n=o[h].vertexNormals[e],r={};r.a=n.a.clone(),r.b=n.b.clone(),r.c=n.c.clone(),t.vertexNormals.push(r)}}if(void 0!==o[h].faceNormals){t.faceNormals=[];for(let e=0,n=o[h].faceNormals.length;e<n;e++)t.faceNormals.push(o[h].faceNormals[e].clone())}this.morphNormals.push(t)}const s=t.skinWeights;for(let h=0,d=s.length;h<d;h++)this.skinWeights.push(s[h].clone());const a=t.skinIndices;for(let h=0,d=a.length;h<d;h++)this.skinIndices.push(a[h].clone());const c=t.lineDistances;for(let h=0,d=c.length;h<d;h++)this.lineDistances.push(c[h]);const u=t.boundingBox;null!==u&&(this.boundingBox=u.clone());const l=t.boundingSphere;return null!==l&&(this.boundingSphere=l.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});class ub extends cb{constructor(t,e,n,r,i,o){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:o},this.fromBufferGeometry(new Cm(t,e,n,r,i,o)),this.mergeVertices()}}class lb extends am{constructor(t=1,e=8,n=0,r=2*Math.PI){super(),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},e=Math.max(3,e);const i=[],o=[],s=[],a=[],c=new hf,u=new Qd;o.push(0,0,0),s.push(0,0,1),a.push(.5,.5);for(let l=0,h=3;l<=e;l++,h+=3){const i=n+l/e*r;c.x=t*Math.cos(i),c.y=t*Math.sin(i),o.push(c.x,c.y,c.z),s.push(0,0,1),u.x=(o[h]/t+1)/2,u.y=(o[h+1]/t+1)/2,a.push(u.x,u.y)}for(let l=1;l<=e;l++)i.push(l,l+1,0);this.setIndex(i),this.setAttribute("position",new Zp(o,3)),this.setAttribute("normal",new Zp(s,3)),this.setAttribute("uv",new Zp(a,2))}}class hb extends cb{constructor(t,e,n,r){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new lb(t,e,n,r)),this.mergeVertices()}}class db extends am{constructor(t=1,e=1,n=1,r=8,i=1,o=!1,s=0,a=2*Math.PI){super(),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:s,thetaLength:a};const c=this;r=Math.floor(r),i=Math.floor(i);const u=[],l=[],h=[],d=[];let f=0;const p=[],m=n/2;let g=0;function y(n){const i=f,o=new Qd,p=new hf;let y=0;const v=!0===n?t:e,b=!0===n?1:-1;for(let t=1;t<=r;t++)l.push(0,m*b,0),h.push(0,b,0),d.push(.5,.5),f++;const _=f;for(let t=0;t<=r;t++){const e=t/r*a+s,n=Math.cos(e),i=Math.sin(e);p.x=v*i,p.y=m*b,p.z=v*n,l.push(p.x,p.y,p.z),h.push(0,b,0),o.x=.5*n+.5,o.y=.5*i*b+.5,d.push(o.x,o.y),f++}for(let t=0;t<r;t++){const e=i+t,r=_+t;!0===n?u.push(r,r+1,e):u.push(r+1,r,e),y+=3}c.addGroup(g,y,!0===n?1:2),g+=y}!function(){const o=new hf,y=new hf;let v=0;const b=(e-t)/n;for(let c=0;c<=i;c++){const u=[],g=c/i,v=g*(e-t)+t;for(let t=0;t<=r;t++){const e=t/r,i=e*a+s,c=Math.sin(i),p=Math.cos(i);y.x=v*c,y.y=-g*n+m,y.z=v*p,l.push(y.x,y.y,y.z),o.set(c,b,p).normalize(),h.push(o.x,o.y,o.z),d.push(e,1-g),u.push(f++)}p.push(u)}for(let t=0;t<r;t++)for(let e=0;e<i;e++){const n=p[e+1][t],r=p[e+1][t+1],i=p[e][t+1];u.push(p[e][t],n,i),u.push(n,r,i),v+=6}c.addGroup(g,v,0),g+=v}(),!1===o&&(t>0&&y(!0),e>0&&y(!1)),this.setIndex(u),this.setAttribute("position",new Zp(l,3)),this.setAttribute("normal",new Zp(h,3)),this.setAttribute("uv",new Zp(d,2))}}class fb extends cb{constructor(t,e,n,r,i,o,s,a){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:s,thetaLength:a},this.fromBufferGeometry(new db(t,e,n,r,i,o,s,a)),this.mergeVertices()}}class pb extends fb{constructor(t,e,n,r,i,o,s){super(0,t,e,n,r,i,o,s),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:s}}}class mb extends db{constructor(t=1,e=1,n=8,r=1,i=!1,o=0,s=2*Math.PI){super(0,t,e,n,r,i,o,s),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:s}}}class gb extends am{constructor(t,e,n=1,r=0){super(),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:r};const i=[],o=[];function s(t,e,n,r){const i=r+1,o=[];for(let s=0;s<=i;s++){o[s]=[];const r=t.clone().lerp(n,s/i),a=e.clone().lerp(n,s/i),c=i-s;for(let t=0;t<=c;t++)o[s][t]=0===t&&s===i?r:r.clone().lerp(a,t/c)}for(let s=0;s<i;s++)for(let t=0;t<2*(i-s)-1;t++){const e=Math.floor(t/2);t%2==0?(a(o[s][e+1]),a(o[s+1][e]),a(o[s][e])):(a(o[s][e+1]),a(o[s+1][e+1]),a(o[s+1][e]))}}function a(t){i.push(t.x,t.y,t.z)}function c(e,n){const r=3*e;n.x=t[r+0],n.y=t[r+1],n.z=t[r+2]}function u(t,e,n,r){r<0&&1===t.x&&(o[e]=t.x-1),0===n.x&&0===n.z&&(o[e]=r/2/Math.PI+.5)}function l(t){return Math.atan2(t.z,-t.x)}!function(t){const n=new hf,r=new hf,i=new hf;for(let o=0;o<e.length;o+=3)c(e[o+0],n),c(e[o+1],r),c(e[o+2],i),s(n,r,i,t)}(r),function(t){const e=new hf;for(let n=0;n<i.length;n+=3)e.x=i[n+0],e.y=i[n+1],e.z=i[n+2],e.normalize().multiplyScalar(t),i[n+0]=e.x,i[n+1]=e.y,i[n+2]=e.z}(n),function(){const t=new hf;for(let n=0;n<i.length;n+=3){t.x=i[n+0],t.y=i[n+1],t.z=i[n+2];const r=l(t)/2/Math.PI+.5,s=(e=t,Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))/Math.PI+.5);o.push(r,1-s)}var e;(function(){const t=new hf,e=new hf,n=new hf,r=new hf,s=new Qd,a=new Qd,c=new Qd;for(let h=0,d=0;h<i.length;h+=9,d+=6){t.set(i[h+0],i[h+1],i[h+2]),e.set(i[h+3],i[h+4],i[h+5]),n.set(i[h+6],i[h+7],i[h+8]),s.set(o[d+0],o[d+1]),a.set(o[d+2],o[d+3]),c.set(o[d+4],o[d+5]),r.copy(t).add(e).add(n).divideScalar(3);const f=l(r);u(s,d+0,t,f),u(a,d+2,e,f),u(c,d+4,n,f)}})(),function(){for(let t=0;t<o.length;t+=6){const e=o[t+0],n=o[t+2],r=o[t+4],i=Math.max(e,n,r),s=Math.min(e,n,r);i>.9&&s<.1&&(e<.2&&(o[t+0]+=1),n<.2&&(o[t+2]+=1),r<.2&&(o[t+4]+=1))}}()}(),this.setAttribute("position",new Zp(i,3)),this.setAttribute("normal",new Zp(i.slice(),3)),this.setAttribute("uv",new Zp(o,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}}class yb extends gb{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2,r=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}}class vb extends cb{constructor(t,e){super(),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new yb(t,e)),this.mergeVertices()}}const bb=new hf,_b=new hf,wb=new hf,xb=new Tp;class Sb extends am{constructor(t,e){super(),this.type="EdgesGeometry",this.parameters={thresholdAngle:e},e=void 0!==e?e:1,t.isGeometry&&(t=(new am).fromGeometry(t));const n=Math.pow(10,4),r=Math.cos(Jd.DEG2RAD*e),i=t.getIndex(),o=t.getAttribute("position"),s=i?i.count:o.count,a=[0,0,0],c=["a","b","c"],u=new Array(3),l={},h=[];for(let d=0;d<s;d+=3){i?(a[0]=i.getX(d),a[1]=i.getX(d+1),a[2]=i.getX(d+2)):(a[0]=d,a[1]=d+1,a[2]=d+2);const{a:t,b:e,c:s}=xb;if(t.fromBufferAttribute(o,a[0]),e.fromBufferAttribute(o,a[1]),s.fromBufferAttribute(o,a[2]),xb.getNormal(wb),u[0]=`${Math.round(t.x*n)},${Math.round(t.y*n)},${Math.round(t.z*n)}`,u[1]=`${Math.round(e.x*n)},${Math.round(e.y*n)},${Math.round(e.z*n)}`,u[2]=`${Math.round(s.x*n)},${Math.round(s.y*n)},${Math.round(s.z*n)}`,u[0]!==u[1]&&u[1]!==u[2]&&u[2]!==u[0])for(let n=0;n<3;n++){const t=(n+1)%3,e=u[n],i=u[t],o=xb[c[n]],s=xb[c[t]],d=`${e}_${i}`,f=`${i}_${e}`;f in l&&l[f]?(wb.dot(l[f].normal)<=r&&(h.push(o.x,o.y,o.z),h.push(s.x,s.y,s.z)),l[f]=null):d in l||(l[d]={index0:a[n],index1:a[t],normal:wb.clone()})}}for(const d in l)if(l[d]){const{index0:t,index1:e}=l[d];bb.fromBufferAttribute(o,t),_b.fromBufferAttribute(o,e),h.push(bb.x,bb.y,bb.z),h.push(_b.x,_b.y,_b.z)}this.setAttribute("position",new Zp(h,3))}}function Eb(t,e,n,r,i){let o,s;if(i===function(t,e,n,r){let i=0;for(let o=e,s=n-r;o<n;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}(t,e,n,r)>0)for(o=e;o<n;o+=r)s=Wb(o,t[o],t[o+1],s);else for(o=n-r;o>=e;o-=r)s=Wb(o,t[o],t[o+1],s);return s&&Ub(s,s.next)&&(qb(s),s=s.next),s}function Tb(t,e){if(!t)return t;e||(e=t);let n,r=t;do{if(n=!1,r.steiner||!Ub(r,r.next)&&0!==Fb(r.prev,r,r.next))r=r.next;else{if(qb(r),r=e=r.prev,r===r.next)break;n=!0}}while(n||r!==e);return e}function Mb(t,e,n,r,i,o,s){if(!t)return;!s&&o&&function(t,e,n,r){let i=t;do{null===i.z&&(i.z=Nb(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){let e,n,r,i,o,s,a,c,u=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,r=n,a=0,e=0;e<u&&(a++,r=r.nextZ,r);e++);for(c=u;a>0||c>0&&r;)0!==a&&(0===c||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,c--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,u*=2}while(s>1)}(i)}(t,r,i,o);let a,c,u=t;for(;t.prev!==t.next;)if(a=t.prev,c=t.next,o?Cb(t,r,i,o):Ab(t))e.push(a.i/n),e.push(t.i/n),e.push(c.i/n),qb(t),t=c.next,u=c.next;else if((t=c)===u){s?1===s?Mb(t=Ob(Tb(t),e,n),e,n,r,i,o,2):2===s&&Rb(t,e,n,r,i,o):Mb(Tb(t),e,n,r,i,o,1);break}}function Ab(t){const e=t.prev,n=t,r=t.next;if(Fb(e,n,r)>=0)return!1;let i=t.next.next;for(;i!==t.prev;){if(kb(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Fb(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Cb(t,e,n,r){const i=t.prev,o=t,s=t.next;if(Fb(i,o,s)>=0)return!1;const a=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,c=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,u=Nb(i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,e,n,r),l=Nb(a,c,e,n,r);let h=t.prevZ,d=t.nextZ;for(;h&&h.z>=u&&d&&d.z<=l;){if(h!==t.prev&&h!==t.next&&kb(i.x,i.y,o.x,o.y,s.x,s.y,h.x,h.y)&&Fb(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,d!==t.prev&&d!==t.next&&kb(i.x,i.y,o.x,o.y,s.x,s.y,d.x,d.y)&&Fb(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;h&&h.z>=u;){if(h!==t.prev&&h!==t.next&&kb(i.x,i.y,o.x,o.y,s.x,s.y,h.x,h.y)&&Fb(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;d&&d.z<=l;){if(d!==t.prev&&d!==t.next&&kb(i.x,i.y,o.x,o.y,s.x,s.y,d.x,d.y)&&Fb(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function Ob(t,e,n){let r=t;do{const i=r.prev,o=r.next.next;!Ub(i,o)&&Bb(i,r,r.next,o)&&Vb(i,o)&&Vb(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),qb(r),qb(r.next),r=t=o),r=r.next}while(r!==t);return Tb(r)}function Rb(t,e,n,r,i,o){let s=t;do{let t=s.next.next;for(;t!==s.prev;){if(s.i!==t.i&&jb(s,t)){let a=Gb(s,t);return s=Tb(s,s.next),a=Tb(a,a.next),Mb(s,e,n,r,i,o),void Mb(a,e,n,r,i,o)}t=t.next}s=s.next}while(s!==t)}function Ib(t,e){return t.x-e.x}function Lb(t,e){if(e=function(t,e){let n=e;const r=t.x,i=t.y;let o,s=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){const t=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(t<=r&&t>s){if(s=t,t===r){if(i===n.y)return n;if(i===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!o)return null;if(r===s)return o;const a=o,c=o.x,u=o.y;let l,h=1/0;n=o;do{r>=n.x&&n.x>=c&&r!==n.x&&kb(i<u?r:s,i,c,u,i<u?s:r,i,n.x,n.y)&&(l=Math.abs(i-n.y)/(r-n.x),Vb(n,t)&&(l<h||l===h&&(n.x>o.x||n.x===o.x&&Pb(o,n)))&&(o=n,h=l)),n=n.next}while(n!==a);return o}(t,e)){const n=Gb(e,t);Tb(e,e.next),Tb(n,n.next)}}function Pb(t,e){return Fb(t.prev,t,e.prev)<0&&Fb(e.next,t,t.next)<0}function Nb(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Db(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function kb(t,e,n,r,i,o,s,a){return(i-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(r-a)-(n-s)*(e-a)>=0&&(n-s)*(o-a)-(i-s)*(r-a)>=0}function jb(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Bb(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(Vb(t,e)&&Vb(e,t)&&function(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(Fb(t.prev,t,e.prev)||Fb(t,e.prev,e))||Ub(t,e)&&Fb(t.prev,t,t.next)>0&&Fb(e.prev,e,e.next)>0)}function Fb(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Ub(t,e){return t.x===e.x&&t.y===e.y}function Bb(t,e,n,r){const i=Hb(Fb(t,e,n)),o=Hb(Fb(t,e,r)),s=Hb(Fb(n,r,t)),a=Hb(Fb(n,r,e));return i!==o&&s!==a||!(0!==i||!zb(t,n,e))||!(0!==o||!zb(t,r,e))||!(0!==s||!zb(n,t,r))||!(0!==a||!zb(n,e,r))}function zb(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Hb(t){return t>0?1:t<0?-1:0}function Vb(t,e){return Fb(t.prev,t,t.next)<0?Fb(t,e,t.next)>=0&&Fb(t,t.prev,e)>=0:Fb(t,e,t.prev)<0||Fb(t,t.next,e)<0}function Gb(t,e){const n=new Xb(t.i,t.x,t.y),r=new Xb(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Wb(t,e,n,r){const i=new Xb(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function qb(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Xb(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}const Zb={area:function(t){const e=t.length;let n=0;for(let r=e-1,i=0;i<e;r=i++)n+=t[r].x*t[i].y-t[i].x*t[r].y;return.5*n},isClockWise:function(t){return Zb.area(t)<0},triangulateShape:function(t,e){const n=[],r=[],i=[];Kb(t),Yb(n,t);let o=t.length;e.forEach(Kb);for(let a=0;a<e.length;a++)r.push(o),o+=e[a].length,Yb(n,e[a]);const s=function(t,e,n){n=n||2;const r=e&&e.length,i=r?e[0]*n:t.length;let o=Eb(t,0,i,n,!0);const s=[];if(!o||o.next===o.prev)return s;let a,c,u,l,h,d,f;if(r&&(o=function(t,e,n,r){const i=[];let o,s,a,c,u;for(o=0,s=e.length;o<s;o++)a=e[o]*r,c=o<s-1?e[o+1]*r:t.length,u=Eb(t,a,c,r,!1),u===u.next&&(u.steiner=!0),i.push(Db(u));for(i.sort(Ib),o=0;o<i.length;o++)Lb(i[o],n),n=Tb(n,n.next);return n}(t,e,o,n)),t.length>80*n){a=u=t[0],c=l=t[1];for(let e=n;e<i;e+=n)h=t[e],d=t[e+1],h<a&&(a=h),d<c&&(c=d),h>u&&(u=h),d>l&&(l=d);f=Math.max(u-a,l-c),f=0!==f?1/f:0}return Mb(o,s,n,a,c,f),s}(n,r);for(let a=0;a<s.length;a+=3)i.push(s.slice(a,a+3));return i}};function Kb(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function Yb(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class $b extends am{constructor(t,e){super(),this.type="ExtrudeBufferGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,r=[],i=[];for(let s=0,a=t.length;s<a;s++)o(t[s]);function o(t){const o=[],s=void 0!==e.curveSegments?e.curveSegments:12,a=void 0!==e.steps?e.steps:1;let c=void 0!==e.depth?e.depth:100,u=void 0===e.bevelEnabled||e.bevelEnabled,l=void 0!==e.bevelThickness?e.bevelThickness:6,h=void 0!==e.bevelSize?e.bevelSize:l-2,d=void 0!==e.bevelOffset?e.bevelOffset:0,f=void 0!==e.bevelSegments?e.bevelSegments:3;const p=e.extrudePath,m=void 0!==e.UVGenerator?e.UVGenerator:Jb;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),c=e.amount);let g,y,v,b,_,w=!1;p&&(g=p.getSpacedPoints(a),w=!0,u=!1,y=p.computeFrenetFrames(a,!1),v=new hf,b=new hf,_=new hf),u||(f=0,l=0,h=0,d=0);const x=t.extractPoints(s);let S=x.shape;const E=x.holes;if(!Zb.isClockWise(S)){S=S.reverse();for(let t=0,e=E.length;t<e;t++){const e=E[t];Zb.isClockWise(e)&&(E[t]=e.reverse())}}const T=Zb.triangulateShape(S,E),M=S;for(let e=0,n=E.length;e<n;e++)S=S.concat(E[e]);function A(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}const C=S.length,O=T.length;function R(t,e,n){let r,i,o;const s=t.x-e.x,a=t.y-e.y,c=n.x-t.x,u=n.y-t.y,l=s*s+a*a;if(Math.abs(s*u-a*c)>Number.EPSILON){const h=Math.sqrt(l),d=Math.sqrt(c*c+u*u),f=e.x-a/h,p=e.y+s/h,m=((n.x-u/d-f)*u-(n.y+c/d-p)*c)/(s*u-a*c);r=f+s*m-t.x,i=p+a*m-t.y;const g=r*r+i*i;if(g<=2)return new Qd(r,i);o=Math.sqrt(g/2)}else{let t=!1;s>Number.EPSILON?c>Number.EPSILON&&(t=!0):s<-Number.EPSILON?c<-Number.EPSILON&&(t=!0):Math.sign(a)===Math.sign(u)&&(t=!0),t?(r=-a,i=s,o=Math.sqrt(l)):(r=s,i=a,o=Math.sqrt(l/2))}return new Qd(r/o,i/o)}const I=[];for(let e=0,n=M.length,r=n-1,i=e+1;e<n;e++,r++,i++)r===n&&(r=0),i===n&&(i=0),I[e]=R(M[e],M[r],M[i]);const L=[];let P,N=I.concat();for(let e=0,n=E.length;e<n;e++){const t=E[e];P=[];for(let e=0,n=t.length,r=n-1,i=e+1;e<n;e++,r++,i++)r===n&&(r=0),i===n&&(i=0),P[e]=R(t[e],t[r],t[i]);L.push(P),N=N.concat(P)}for(let e=0;e<f;e++){const t=e/f,n=l*Math.cos(t*Math.PI/2),r=h*Math.sin(t*Math.PI/2)+d;for(let e=0,i=M.length;e<i;e++){const t=A(M[e],I[e],r);j(t.x,t.y,-n)}for(let e=0,i=E.length;e<i;e++){const t=E[e];P=L[e];for(let e=0,i=t.length;e<i;e++){const i=A(t[e],P[e],r);j(i.x,i.y,-n)}}}const D=h+d;for(let e=0;e<C;e++){const t=u?A(S[e],N[e],D):S[e];w?(b.copy(y.normals[0]).multiplyScalar(t.x),v.copy(y.binormals[0]).multiplyScalar(t.y),_.copy(g[0]).add(b).add(v),j(_.x,_.y,_.z)):j(t.x,t.y,0)}for(let e=1;e<=a;e++)for(let t=0;t<C;t++){const n=u?A(S[t],N[t],D):S[t];w?(b.copy(y.normals[e]).multiplyScalar(n.x),v.copy(y.binormals[e]).multiplyScalar(n.y),_.copy(g[e]).add(b).add(v),j(_.x,_.y,_.z)):j(n.x,n.y,c/a*e)}for(let e=f-1;e>=0;e--){const t=e/f,n=l*Math.cos(t*Math.PI/2),r=h*Math.sin(t*Math.PI/2)+d;for(let e=0,i=M.length;e<i;e++){const t=A(M[e],I[e],r);j(t.x,t.y,c+n)}for(let e=0,i=E.length;e<i;e++){const t=E[e];P=L[e];for(let e=0,i=t.length;e<i;e++){const i=A(t[e],P[e],r);w?j(i.x,i.y+g[a-1].y,g[a-1].x+n):j(i.x,i.y,c+n)}}}function k(t,e){let n=t.length;for(;--n>=0;){const r=n;let i=n-1;i<0&&(i=t.length-1);for(let t=0,n=a+2*f;t<n;t++){const n=C*t,o=C*(t+1);U(e+r+n,e+i+n,e+i+o,e+r+o)}}}function j(t,e,n){o.push(t),o.push(e),o.push(n)}function F(t,e,i){B(t),B(e),B(i);const o=r.length/3,s=m.generateTopUV(n,r,o-3,o-2,o-1);z(s[0]),z(s[1]),z(s[2])}function U(t,e,i,o){B(t),B(e),B(o),B(e),B(i),B(o);const s=r.length/3,a=m.generateSideWallUV(n,r,s-6,s-3,s-2,s-1);z(a[0]),z(a[1]),z(a[3]),z(a[1]),z(a[2]),z(a[3])}function B(t){r.push(o[3*t+0]),r.push(o[3*t+1]),r.push(o[3*t+2])}function z(t){i.push(t.x),i.push(t.y)}!function(){const t=r.length/3;if(u){let t=0,e=C*t;for(let n=0;n<O;n++){const t=T[n];F(t[2]+e,t[1]+e,t[0]+e)}t=a+2*f,e=C*t;for(let n=0;n<O;n++){const t=T[n];F(t[0]+e,t[1]+e,t[2]+e)}}else{for(let t=0;t<O;t++){const e=T[t];F(e[2],e[1],e[0])}for(let t=0;t<O;t++){const e=T[t];F(e[0]+C*a,e[1]+C*a,e[2]+C*a)}}n.addGroup(t,r.length/3-t,0)}(),function(){const t=r.length/3;let e=0;k(M,e),e+=M.length;for(let n=0,r=E.length;n<r;n++){const t=E[n];k(t,e),e+=t.length}n.addGroup(t,r.length/3-t,1)}()}this.setAttribute("position",new Zp(r,3)),this.setAttribute("uv",new Zp(i,2)),this.computeVertexNormals()}toJSON(){const t=am.prototype.toJSON.call(this);return function(t,e,n){if(n.shapes=[],Array.isArray(t))for(let r=0,i=t.length;r<i;r++)n.shapes.push(t[r].uuid);else n.shapes.push(t.uuid);return void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON()),n}(this.parameters.shapes,this.parameters.options,t)}}const Jb={generateTopUV:function(t,e,n,r,i){const o=e[3*r],s=e[3*r+1],a=e[3*i],c=e[3*i+1];return[new Qd(e[3*n],e[3*n+1]),new Qd(o,s),new Qd(a,c)]},generateSideWallUV:function(t,e,n,r,i,o){const s=e[3*n],a=e[3*n+1],c=e[3*n+2],u=e[3*r],l=e[3*r+1],h=e[3*r+2],d=e[3*i],f=e[3*i+1],p=e[3*i+2],m=e[3*o],g=e[3*o+1],y=e[3*o+2];return Math.abs(a-l)<.01?[new Qd(s,1-c),new Qd(u,1-h),new Qd(d,1-p),new Qd(m,1-y)]:[new Qd(a,1-c),new Qd(l,1-h),new Qd(f,1-p),new Qd(g,1-y)]}};class Qb extends cb{constructor(t,e){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new $b(t,e)),this.mergeVertices()}toJSON(){const t=super.toJSON();return function(t,e,n){if(n.shapes=[],Array.isArray(t))for(let r=0,i=t.length;r<i;r++)n.shapes.push(t[r].uuid);else n.shapes.push(t.uuid);return void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON()),n}(this.parameters.shapes,this.parameters.options,t)}}class t_ extends gb{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}}class e_ extends cb{constructor(t,e){super(),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new t_(t,e)),this.mergeVertices()}}class n_ extends am{constructor(t,e=12,n=0,r=2*Math.PI){super(),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},e=Math.floor(e),r=Jd.clamp(r,0,2*Math.PI);const i=[],o=[],s=[],a=1/e,c=new hf,u=new Qd;for(let l=0;l<=e;l++){const i=n+l*a*r,h=Math.sin(i),d=Math.cos(i);for(let n=0;n<=t.length-1;n++)c.x=t[n].x*h,c.y=t[n].y,c.z=t[n].x*d,o.push(c.x,c.y,c.z),u.x=l/e,u.y=n/(t.length-1),s.push(u.x,u.y)}for(let l=0;l<e;l++)for(let e=0;e<t.length-1;e++){const n=e+l*t.length,r=n+t.length,o=n+t.length+1,s=n+1;i.push(n,r,s),i.push(r,o,s)}if(this.setIndex(i),this.setAttribute("position",new Zp(o,3)),this.setAttribute("uv",new Zp(s,2)),this.computeVertexNormals(),r===2*Math.PI){const n=this.attributes.normal.array,r=new hf,i=new hf,o=new hf,s=e*t.length*3;for(let e=0,a=0;e<t.length;e++,a+=3)r.x=n[a+0],r.y=n[a+1],r.z=n[a+2],i.x=n[s+a+0],i.y=n[s+a+1],i.z=n[s+a+2],o.addVectors(r,i).normalize(),n[a+0]=n[s+a+0]=o.x,n[a+1]=n[s+a+1]=o.y,n[a+2]=n[s+a+2]=o.z}}}class r_ extends cb{constructor(t,e,n,r){super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},this.fromBufferGeometry(new n_(t,e,n,r)),this.mergeVertices()}}class i_ extends gb{constructor(t=1,e=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}}class o_ extends cb{constructor(t,e){super(),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new i_(t,e)),this.mergeVertices()}}function s_(t,e,n){am.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:n};const r=[],i=[],o=[],s=[],a=new hf,c=new hf,u=new hf,l=new hf,h=new hf;t.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");const d=e+1;for(let f=0;f<=n;f++){const r=f/n;for(let n=0;n<=e;n++){const d=n/e;t(d,r,c),i.push(c.x,c.y,c.z),d-1e-5>=0?(t(d-1e-5,r,u),l.subVectors(c,u)):(t(d+1e-5,r,u),l.subVectors(u,c)),r-1e-5>=0?(t(d,r-1e-5,u),h.subVectors(c,u)):(t(d,r+1e-5,u),h.subVectors(u,c)),a.crossVectors(l,h).normalize(),o.push(a.x,a.y,a.z),s.push(d,r)}}for(let f=0;f<n;f++)for(let t=0;t<e;t++){const e=f*d+t+1,n=(f+1)*d+t+1,i=(f+1)*d+t;r.push(f*d+t,e,i),r.push(e,n,i)}this.setIndex(r),this.setAttribute("position",new Zp(i,3)),this.setAttribute("normal",new Zp(o,3)),this.setAttribute("uv",new Zp(s,2))}function a_(t,e,n){cb.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:n},this.fromBufferGeometry(new s_(t,e,n)),this.mergeVertices()}(s_.prototype=Object.create(am.prototype)).constructor=s_,(a_.prototype=Object.create(cb.prototype)).constructor=a_;class c_ extends cb{constructor(t,e,n,r){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new Gm(t,e,n,r)),this.mergeVertices()}}class u_ extends cb{constructor(t,e,n,r){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:r},this.fromBufferGeometry(new gb(t,e,n,r)),this.mergeVertices()}}class l_ extends am{constructor(t=.5,e=1,n=8,r=1,i=0,o=2*Math.PI){super(),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},n=Math.max(3,n);const s=[],a=[],c=[],u=[];let l=t;const h=(e-t)/(r=Math.max(1,r)),d=new hf,f=new Qd;for(let p=0;p<=r;p++){for(let t=0;t<=n;t++){const r=i+t/n*o;d.x=l*Math.cos(r),d.y=l*Math.sin(r),a.push(d.x,d.y,d.z),c.push(0,0,1),f.x=(d.x/e+1)/2,f.y=(d.y/e+1)/2,u.push(f.x,f.y)}l+=h}for(let p=0;p<r;p++){const t=p*(n+1);for(let e=0;e<n;e++){const r=e+t,i=r+n+1,o=r+n+2,a=r+1;s.push(r,i,a),s.push(i,o,a)}}this.setIndex(s),this.setAttribute("position",new Zp(a,3)),this.setAttribute("normal",new Zp(c,3)),this.setAttribute("uv",new Zp(u,2))}}class h_ extends cb{constructor(t,e,n,r,i,o){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},this.fromBufferGeometry(new l_(t,e,n,r,i,o)),this.mergeVertices()}}class d_ extends am{constructor(t,e=12){super(),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e};const n=[],r=[],i=[],o=[];let s=0,a=0;if(!1===Array.isArray(t))c(t);else for(let u=0;u<t.length;u++)c(t[u]),this.addGroup(s,a,u),s+=a,a=0;function c(t){const s=r.length/3,c=t.extractPoints(e);let u=c.shape;const l=c.holes;!1===Zb.isClockWise(u)&&(u=u.reverse());for(let e=0,n=l.length;e<n;e++){const t=l[e];!0===Zb.isClockWise(t)&&(l[e]=t.reverse())}const h=Zb.triangulateShape(u,l);for(let e=0,n=l.length;e<n;e++)u=u.concat(l[e]);for(let e=0,n=u.length;e<n;e++){const t=u[e];r.push(t.x,t.y,0),i.push(0,0,1),o.push(t.x,t.y)}for(let e=0,r=h.length;e<r;e++){const t=h[e];n.push(t[0]+s,t[1]+s,t[2]+s),a+=3}}this.setIndex(n),this.setAttribute("position",new Zp(r,3)),this.setAttribute("normal",new Zp(i,3)),this.setAttribute("uv",new Zp(o,2))}toJSON(){const t=am.prototype.toJSON.call(this);return function(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++)e.shapes.push(t[n].uuid);else e.shapes.push(t.uuid);return e}(this.parameters.shapes,t)}}class f_ extends cb{constructor(t,e){super(),this.type="ShapeGeometry","object"==typeof e&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new d_(t,e)),this.mergeVertices()}toJSON(){const t=cb.prototype.toJSON.call(this);return function(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++)e.shapes.push(t[n].uuid);else e.shapes.push(t.uuid);return e}(this.parameters.shapes,t)}}class p_ extends am{constructor(t=1,e=8,n=6,r=0,i=2*Math.PI,o=0,s=Math.PI){super(),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:s},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const a=Math.min(o+s,Math.PI);let c=0;const u=[],l=new hf,h=new hf,d=[],f=[],p=[],m=[];for(let g=0;g<=n;g++){const d=[],y=g/n;let v=0;0==g&&0==o?v=.5/e:g==n&&a==Math.PI&&(v=-.5/e);for(let n=0;n<=e;n++){const a=n/e;l.x=-t*Math.cos(r+a*i)*Math.sin(o+y*s),l.y=t*Math.cos(o+y*s),l.z=t*Math.sin(r+a*i)*Math.sin(o+y*s),f.push(l.x,l.y,l.z),h.copy(l).normalize(),p.push(h.x,h.y,h.z),m.push(a+v,1-y),d.push(c++)}u.push(d)}for(let g=0;g<n;g++)for(let t=0;t<e;t++){const e=u[g][t+1],r=u[g][t],i=u[g+1][t],s=u[g+1][t+1];(0!==g||o>0)&&d.push(e,r,s),(g!==n-1||a<Math.PI)&&d.push(r,i,s)}this.setIndex(d),this.setAttribute("position",new Zp(f,3)),this.setAttribute("normal",new Zp(p,3)),this.setAttribute("uv",new Zp(m,2))}}class m_ extends cb{constructor(t,e,n,r,i,o,s){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new p_(t,e,n,r,i,o,s)),this.mergeVertices()}}class g_ extends gb{constructor(t=1,e=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}}class y_ extends cb{constructor(t,e){super(),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new g_(t,e)),this.mergeVertices()}}class v_ extends $b{constructor(t,e={}){const n=e.font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new am;const r=n.generateShapes(t,e.size);e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),super(r,e),this.type="TextBufferGeometry"}}class b_ extends cb{constructor(t,e){super(),this.type="TextGeometry",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new v_(t,e)),this.mergeVertices()}}class __ extends am{constructor(t=1,e=.4,n=8,r=6,i=2*Math.PI){super(),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:i},n=Math.floor(n),r=Math.floor(r);const o=[],s=[],a=[],c=[],u=new hf,l=new hf,h=new hf;for(let d=0;d<=n;d++)for(let o=0;o<=r;o++){const f=o/r*i,p=d/n*Math.PI*2;l.x=(t+e*Math.cos(p))*Math.cos(f),l.y=(t+e*Math.cos(p))*Math.sin(f),l.z=e*Math.sin(p),s.push(l.x,l.y,l.z),u.x=t*Math.cos(f),u.y=t*Math.sin(f),h.subVectors(l,u).normalize(),a.push(h.x,h.y,h.z),c.push(o/r),c.push(d/n)}for(let d=1;d<=n;d++)for(let t=1;t<=r;t++){const e=(r+1)*(d-1)+t-1,n=(r+1)*(d-1)+t,i=(r+1)*d+t;o.push((r+1)*d+t-1,e,i),o.push(e,n,i)}this.setIndex(o),this.setAttribute("position",new Zp(s,3)),this.setAttribute("normal",new Zp(a,3)),this.setAttribute("uv",new Zp(c,2))}}class w_ extends cb{constructor(t,e,n,r,i){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new __(t,e,n,r,i)),this.mergeVertices()}}class x_ extends am{constructor(t=1,e=.4,n=64,r=8,i=2,o=3){super(),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:i,q:o},n=Math.floor(n),r=Math.floor(r);const s=[],a=[],c=[],u=[],l=new hf,h=new hf,d=new hf,f=new hf,p=new hf,m=new hf,g=new hf;for(let v=0;v<=n;++v){const s=v/n*i*Math.PI*2;y(s,i,o,t,d),y(s+.01,i,o,t,f),m.subVectors(f,d),g.addVectors(f,d),p.crossVectors(m,g),g.crossVectors(p,m),p.normalize(),g.normalize();for(let t=0;t<=r;++t){const i=t/r*Math.PI*2,o=-e*Math.cos(i),s=e*Math.sin(i);l.x=d.x+(o*g.x+s*p.x),l.y=d.y+(o*g.y+s*p.y),l.z=d.z+(o*g.z+s*p.z),a.push(l.x,l.y,l.z),h.subVectors(l,d).normalize(),c.push(h.x,h.y,h.z),u.push(v/n),u.push(t/r)}}for(let v=1;v<=n;v++)for(let t=1;t<=r;t++){const e=(r+1)*v+(t-1),n=(r+1)*v+t,i=(r+1)*(v-1)+t;s.push((r+1)*(v-1)+(t-1),e,i),s.push(e,n,i)}function y(t,e,n,r,i){const o=Math.cos(t),s=Math.sin(t),a=n/e*t,c=Math.cos(a);i.x=r*(2+c)*.5*o,i.y=r*(2+c)*s*.5,i.z=r*Math.sin(a)*.5}this.setIndex(s),this.setAttribute("position",new Zp(a,3)),this.setAttribute("normal",new Zp(c,3)),this.setAttribute("uv",new Zp(u,2))}}class S_ extends cb{constructor(t,e,n,r,i,o,s){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:i,q:o},void 0!==s&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new x_(t,e,n,r,i,o)),this.mergeVertices()}}class E_ extends am{constructor(t,e=64,n=1,r=8,i=!1){super(),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:r,closed:i};const o=t.computeFrenetFrames(e,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const s=new hf,a=new hf,c=new Qd;let u=new hf;const l=[],h=[],d=[],f=[];function p(i){u=t.getPointAt(i/e,u);const c=o.normals[i],d=o.binormals[i];for(let t=0;t<=r;t++){const e=t/r*Math.PI*2,i=Math.sin(e),o=-Math.cos(e);a.x=o*c.x+i*d.x,a.y=o*c.y+i*d.y,a.z=o*c.z+i*d.z,a.normalize(),h.push(a.x,a.y,a.z),s.x=u.x+n*a.x,s.y=u.y+n*a.y,s.z=u.z+n*a.z,l.push(s.x,s.y,s.z)}}!function(){for(let t=0;t<e;t++)p(t);p(!1===i?e:0),function(){for(let t=0;t<=e;t++)for(let n=0;n<=r;n++)c.x=t/e,c.y=n/r,d.push(c.x,c.y)}(),function(){for(let t=1;t<=e;t++)for(let e=1;e<=r;e++){const n=(r+1)*t+(e-1),i=(r+1)*t+e,o=(r+1)*(t-1)+e;f.push((r+1)*(t-1)+(e-1),n,o),f.push(n,i,o)}}()}(),this.setIndex(f),this.setAttribute("position",new Zp(l,3)),this.setAttribute("normal",new Zp(h,3)),this.setAttribute("uv",new Zp(d,2))}toJSON(){const t=am.prototype.toJSON.call(this);return t.path=this.parameters.path.toJSON(),t}}class T_ extends cb{constructor(t,e,n,r,i,o){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:r,closed:i},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");const s=new E_(t,e,n,r,i);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals,this.fromBufferGeometry(s),this.mergeVertices()}}class M_ extends am{constructor(t){super(),this.type="WireframeGeometry";const e=[],n=[0,0],r={},i=["a","b","c"];if(t&&t.isGeometry){const o=t.faces;for(let t=0,e=o.length;t<e;t++){const e=o[t];for(let t=0;t<3;t++){const o=e[i[t]],s=e[i[(t+1)%3]];n[0]=Math.min(o,s),n[1]=Math.max(o,s);const a=n[0]+","+n[1];void 0===r[a]&&(r[a]={index1:n[0],index2:n[1]})}}for(const n in r){const i=r[n];let o=t.vertices[i.index1];e.push(o.x,o.y,o.z),o=t.vertices[i.index2],e.push(o.x,o.y,o.z)}}else if(t&&t.isBufferGeometry){const i=new hf;if(null!==t.index){const o=t.attributes.position,s=t.index;let a=t.groups;0===a.length&&(a=[{start:0,count:s.count,materialIndex:0}]);for(let t=0,e=a.length;t<e;++t){const e=a[t],i=e.start;for(let t=i,o=i+e.count;t<o;t+=3)for(let e=0;e<3;e++){const i=s.getX(t+e),o=s.getX(t+(e+1)%3);n[0]=Math.min(i,o),n[1]=Math.max(i,o);const a=n[0]+","+n[1];void 0===r[a]&&(r[a]={index1:n[0],index2:n[1]})}}for(const t in r){const n=r[t];i.fromBufferAttribute(o,n.index1),e.push(i.x,i.y,i.z),i.fromBufferAttribute(o,n.index2),e.push(i.x,i.y,i.z)}}else{const n=t.attributes.position;for(let t=0,r=n.count/3;t<r;t++)for(let o=0;o<3;o++)i.fromBufferAttribute(n,3*t+o),e.push(i.x,i.y,i.z),i.fromBufferAttribute(n,3*t+(o+1)%3),e.push(i.x,i.y,i.z)}}this.setAttribute("position",new Zp(e,3))}}var A_=Object.freeze({__proto__:null,BoxGeometry:ub,BoxBufferGeometry:Cm,CircleGeometry:hb,CircleBufferGeometry:lb,ConeGeometry:pb,ConeBufferGeometry:mb,CylinderGeometry:fb,CylinderBufferGeometry:db,DodecahedronGeometry:vb,DodecahedronBufferGeometry:yb,EdgesGeometry:Sb,ExtrudeGeometry:Qb,ExtrudeBufferGeometry:$b,IcosahedronGeometry:e_,IcosahedronBufferGeometry:t_,LatheGeometry:r_,LatheBufferGeometry:n_,OctahedronGeometry:o_,OctahedronBufferGeometry:i_,ParametricGeometry:a_,ParametricBufferGeometry:s_,PlaneGeometry:c_,PlaneBufferGeometry:Gm,PolyhedronGeometry:u_,PolyhedronBufferGeometry:gb,RingGeometry:h_,RingBufferGeometry:l_,ShapeGeometry:f_,ShapeBufferGeometry:d_,SphereGeometry:m_,SphereBufferGeometry:p_,TetrahedronGeometry:y_,TetrahedronBufferGeometry:g_,TextGeometry:b_,TextBufferGeometry:v_,TorusGeometry:w_,TorusBufferGeometry:__,TorusKnotGeometry:S_,TorusKnotBufferGeometry:x_,TubeGeometry:T_,TubeBufferGeometry:E_,WireframeGeometry:M_});function C_(t){Dp.call(this),this.type="ShadowMaterial",this.color=new Lp(0),this.transparent=!0,this.setValues(t)}function O_(t){Lm.call(this,t),this.type="RawShaderMaterial"}function R_(t){Dp.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Lp(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Lp(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_d,this.normalScale=new Qd(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(t)}function I_(t){R_.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Qd(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(t){this.reflectivity=Jd.clamp(2.5*(t-1)/(t+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(t)}function L_(t){Dp.call(this),this.type="MeshPhongMaterial",this.color=new Lp(16777215),this.specular=new Lp(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Lp(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_d,this.normalScale=new Qd(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ul,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function P_(t){Dp.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Lp(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Lp(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_d,this.normalScale=new Qd(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function N_(t){Dp.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_d,this.normalScale=new Qd(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function D_(t){Dp.call(this),this.type="MeshLambertMaterial",this.color=new Lp(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Lp(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ul,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function k_(t){Dp.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Lp(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_d,this.normalScale=new Qd(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function j_(t){kv.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}(C_.prototype=Object.create(Dp.prototype)).constructor=C_,C_.prototype.isShadowMaterial=!0,C_.prototype.copy=function(t){return Dp.prototype.copy.call(this,t),this.color.copy(t.color),this},(O_.prototype=Object.create(Lm.prototype)).constructor=O_,O_.prototype.isRawShaderMaterial=!0,(R_.prototype=Object.create(Dp.prototype)).constructor=R_,R_.prototype.isMeshStandardMaterial=!0,R_.prototype.copy=function(t){return Dp.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.vertexTangents=t.vertexTangents,this},(I_.prototype=Object.create(R_.prototype)).constructor=I_,I_.prototype.isMeshPhysicalMaterial=!0,I_.prototype.copy=function(t){return R_.prototype.copy.call(this,t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.reflectivity=t.reflectivity,this.sheen=t.sheen?(this.sheen||new Lp).copy(t.sheen):null,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this},(L_.prototype=Object.create(Dp.prototype)).constructor=L_,L_.prototype.isMeshPhongMaterial=!0,L_.prototype.copy=function(t){return Dp.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(P_.prototype=Object.create(Dp.prototype)).constructor=P_,P_.prototype.isMeshToonMaterial=!0,P_.prototype.copy=function(t){return Dp.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(N_.prototype=Object.create(Dp.prototype)).constructor=N_,N_.prototype.isMeshNormalMaterial=!0,N_.prototype.copy=function(t){return Dp.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(D_.prototype=Object.create(Dp.prototype)).constructor=D_,D_.prototype.isMeshLambertMaterial=!0,D_.prototype.copy=function(t){return Dp.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(k_.prototype=Object.create(Dp.prototype)).constructor=k_,k_.prototype.isMeshMatcapMaterial=!0,k_.prototype.copy=function(t){return Dp.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(j_.prototype=Object.create(kv.prototype)).constructor=j_,j_.prototype.isLineDashedMaterial=!0,j_.prototype.copy=function(t){return kv.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var F_=Object.freeze({__proto__:null,ShadowMaterial:C_,SpriteMaterial:nv,RawShaderMaterial:O_,ShaderMaterial:Lm,PointsMaterial:Xv,MeshPhysicalMaterial:I_,MeshStandardMaterial:R_,MeshPhongMaterial:L_,MeshToonMaterial:P_,MeshNormalMaterial:N_,MeshLambertMaterial:D_,MeshDepthMaterial:jy,MeshDistanceMaterial:Fy,MeshBasicMaterial:kp,MeshMatcapMaterial:k_,LineDashedMaterial:j_,LineBasicMaterial:kv,Material:Dp});const U_={arraySlice:function(t,e,n){return U_.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){const e=t.length,n=new Array(e);for(let r=0;r!==e;++r)n[r]=r;return n.sort((function(e,n){return t[e]-t[n]})),n},sortedArray:function(t,e,n){const r=t.length,i=new t.constructor(r);for(let o=0,s=0;s!==r;++o){const r=n[o]*e;for(let n=0;n!==e;++n)i[s++]=t[r+n]}return i},flattenJSON:function(t,e,n,r){let i=1,o=t[0];for(;void 0!==o&&void 0===o[r];)o=t[i++];if(void 0===o)return;let s=o[r];if(void 0!==s)if(Array.isArray(s))do{s=o[r],void 0!==s&&(e.push(o.time),n.push.apply(n,s)),o=t[i++]}while(void 0!==o);else if(void 0!==s.toArray)do{s=o[r],void 0!==s&&(e.push(o.time),s.toArray(n,n.length)),o=t[i++]}while(void 0!==o);else do{s=o[r],void 0!==s&&(e.push(o.time),n.push(s)),o=t[i++]}while(void 0!==o)},subclip:function(t,e,n,r,i=30){const o=t.clone();o.name=e;const s=[];for(let c=0;c<o.tracks.length;++c){const t=o.tracks[c],e=t.getValueSize(),a=[],u=[];for(let o=0;o<t.times.length;++o){const s=t.times[o]*i;if(!(s<n||s>=r)){a.push(t.times[o]);for(let n=0;n<e;++n)u.push(t.values[o*e+n])}}0!==a.length&&(t.times=U_.convertArray(a,t.times.constructor),t.values=U_.convertArray(u,t.values.constructor),s.push(t))}o.tracks=s;let a=1/0;for(let c=0;c<o.tracks.length;++c)a>o.tracks[c].times[0]&&(a=o.tracks[c].times[0]);for(let c=0;c<o.tracks.length;++c)o.tracks[c].shift(-1*a);return o.resetDuration(),o},makeClipAdditive:function(t,e=0,n=t,r=30){r<=0&&(r=30);const i=n.tracks.length,o=e/r;for(let s=0;s<i;++s){const e=n.tracks[s],r=e.ValueTypeName;if("bool"===r||"string"===r)continue;const i=t.tracks.find((function(t){return t.name===e.name&&t.ValueTypeName===r}));if(void 0===i)continue;let a=0;const c=e.getValueSize();e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(a=c/3);let u=0;const l=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=l/3);const h=e.times.length-1;let d;if(o<=e.times[0])d=U_.arraySlice(e.values,a,c-a);else if(o>=e.times[h]){const t=h*c+a;d=U_.arraySlice(e.values,t,t+c-a)}else{const t=e.createInterpolant(),n=a,r=c-a;t.evaluate(o),d=U_.arraySlice(t.resultBuffer,n,r)}"quaternion"===r&&(new lf).fromArray(d).normalize().conjugate().toArray(d);const f=i.times.length;for(let t=0;t<f;++t){const e=t*l+u;if("quaternion"===r)lf.multiplyQuaternionsFlat(i.values,e,d,0,i.values,e);else{const t=l-2*u;for(let n=0;n<t;++n)i.values[e+n]-=d[n]}}}return t.blendMode=sd,t}};function B_(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n}function z_(t,e,n,r){B_.call(this,t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function H_(t,e,n,r){B_.call(this,t,e,n,r)}function V_(t,e,n,r){B_.call(this,t,e,n,r)}function G_(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=U_.convertArray(e,this.TimeBufferType),this.values=U_.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}function W_(t,e,n){G_.call(this,t,e,n)}function q_(t,e,n,r){G_.call(this,t,e,n,r)}function X_(t,e,n,r){G_.call(this,t,e,n,r)}function Z_(t,e,n,r){B_.call(this,t,e,n,r)}function K_(t,e,n,r){G_.call(this,t,e,n,r)}function Y_(t,e,n,r){G_.call(this,t,e,n,r)}function $_(t,e,n,r){G_.call(this,t,e,n,r)}function J_(t,e=-1,n,r=od){this.name=t,this.tracks=n,this.duration=e,this.blendMode=r,this.uuid=Jd.generateUUID(),this.duration<0&&this.resetDuration()}function Q_(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return X_;case"vector":case"vector2":case"vector3":case"vector4":return $_;case"color":return q_;case"quaternion":return K_;case"bool":case"boolean":return W_;case"string":return Y_}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){const e=[],n=[];U_.flattenJSON(t.keys,e,n,"value"),t.times=e,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}Object.assign(B_.prototype,{evaluate:function(t){const e=this.parameterPositions;let n=this._cachedIndex,r=e[n],i=e[n-1];t:{e:{let o;n:{r:if(!(t<r)){for(let o=n+2;;){if(void 0===r){if(t<i)break r;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,i)}if(n===o)break;if(i=r,r=e[++n],t<r)break e}o=e.length;break n}if(t>=i)break t;{const s=e[1];t<s&&(n=2,i=s);for(let o=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(n===o)break;if(r=i,i=e[--n-1],t>=i)break e}o=n,n=0}}for(;n<o;){const r=n+o>>>1;t<e[r]?o=r:n=r+1}if(r=e[n],i=e[n-1],void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(void 0===r)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,i,t)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,t,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r;for(let o=0;o!==r;++o)e[o]=n[i+o];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(B_.prototype,{beforeStart_:B_.prototype.copySampleValue_,afterEnd_:B_.prototype.copySampleValue_}),z_.prototype=Object.assign(Object.create(B_.prototype),{constructor:z_,DefaultSettings_:{endingStart:nd,endingEnd:nd},intervalChanged_:function(t,e,n){const r=this.parameterPositions;let i=t-2,o=t+1,s=r[i],a=r[o];if(void 0===s)switch(this.getSettings_().endingStart){case rd:i=t,s=2*e-n;break;case id:i=r.length-2,s=e+r[i]-r[i+1];break;default:i=t,s=n}if(void 0===a)switch(this.getSettings_().endingEnd){case rd:o=t,a=2*n-e;break;case id:o=1,a=n+r[1]-r[0];break;default:o=t-1,a=e}const c=.5*(n-e),u=this.valueSize;this._weightPrev=c/(e-s),this._weightNext=c/(a-n),this._offsetPrev=i*u,this._offsetNext=o*u},interpolate_:function(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=t*s,c=a-s,u=this._offsetPrev,l=this._offsetNext,h=this._weightPrev,d=this._weightNext,f=(n-e)/(r-e),p=f*f,m=p*f,g=-h*m+2*h*p-h*f,y=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*f+1,v=(-1-d)*m+(1.5+d)*p+.5*f,b=d*m-d*p;for(let _=0;_!==s;++_)i[_]=g*o[u+_]+y*o[c+_]+v*o[a+_]+b*o[l+_];return i}}),H_.prototype=Object.assign(Object.create(B_.prototype),{constructor:H_,interpolate_:function(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=t*s,c=a-s,u=(n-e)/(r-e),l=1-u;for(let h=0;h!==s;++h)i[h]=o[c+h]*l+o[a+h]*u;return i}}),V_.prototype=Object.assign(Object.create(B_.prototype),{constructor:V_,interpolate_:function(t){return this.copySampleValue_(t-1)}}),Object.assign(G_,{toJSON:function(t){const e=t.constructor;let n;if(void 0!==e.toJSON)n=e.toJSON(t);else{n={name:t.name,times:U_.convertArray(t.times,Array),values:U_.convertArray(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(n.interpolation=e)}return n.type=t.ValueTypeName,n}}),Object.assign(G_.prototype,{constructor:G_,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:td,InterpolantFactoryMethodDiscrete:function(t){return new V_(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new H_(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new z_(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){let e;switch(t){case Qh:e=this.InterpolantFactoryMethodDiscrete;break;case td:e=this.InterpolantFactoryMethodLinear;break;case ed:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Qh;case this.InterpolantFactoryMethodLinear:return td;case this.InterpolantFactoryMethodSmooth:return ed}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]+=t}return this},scale:function(t){if(1!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]*=t}return this},trim:function(t,e){const n=this.times,r=n.length;let i=0,o=r-1;for(;i!==r&&n[i]<t;)++i;for(;-1!==o&&n[o]>e;)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);const t=this.getValueSize();this.times=U_.arraySlice(n,i,o),this.values=U_.arraySlice(this.values,i*t,o*t)}return this},validate:function(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let s=0;s!==i;s++){const e=n[s];if("number"==typeof e&&isNaN(e)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,e),t=!1;break}if(null!==o&&o>e){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,e,o),t=!1;break}o=e}if(void 0!==r&&U_.isTypedArray(r))for(let s=0,a=r.length;s!==a;++s){const e=r[s];if(isNaN(e)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,e),t=!1;break}}return t},optimize:function(){const t=U_.arraySlice(this.times),e=U_.arraySlice(this.values),n=this.getValueSize(),r=this.getInterpolation()===ed,i=t.length-1;let o=1;for(let s=1;s<i;++s){let i=!1;const a=t[s];if(a!==t[s+1]&&(1!==s||a!==a[0]))if(r)i=!0;else{const t=s*n,r=t-n,o=t+n;for(let s=0;s!==n;++s){const n=e[t+s];if(n!==e[r+s]||n!==e[o+s]){i=!0;break}}}if(i){if(s!==o){t[o]=t[s];const r=s*n,i=o*n;for(let t=0;t!==n;++t)e[i+t]=e[r+t]}++o}}if(i>0){t[o]=t[i];for(let t=i*n,r=o*n,s=0;s!==n;++s)e[r+s]=e[t+s];++o}return o!==t.length?(this.times=U_.arraySlice(t,0,o),this.values=U_.arraySlice(e,0,o*n)):(this.times=t,this.values=e),this},clone:function(){const t=U_.arraySlice(this.times,0),e=U_.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}),W_.prototype=Object.assign(Object.create(G_.prototype),{constructor:W_,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Qh,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),q_.prototype=Object.assign(Object.create(G_.prototype),{constructor:q_,ValueTypeName:"color"}),X_.prototype=Object.assign(Object.create(G_.prototype),{constructor:X_,ValueTypeName:"number"}),Z_.prototype=Object.assign(Object.create(B_.prototype),{constructor:Z_,interpolate_:function(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=(n-e)/(r-e);let c=t*s;for(let u=c+s;c!==u;c+=4)lf.slerpFlat(i,0,o,c-s,o,c,a);return i}}),K_.prototype=Object.assign(Object.create(G_.prototype),{constructor:K_,ValueTypeName:"quaternion",DefaultInterpolation:td,InterpolantFactoryMethodLinear:function(t){return new Z_(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),Y_.prototype=Object.assign(Object.create(G_.prototype),{constructor:Y_,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Qh,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),$_.prototype=Object.assign(Object.create(G_.prototype),{constructor:$_,ValueTypeName:"vector"}),Object.assign(J_,{parse:function(t){const e=[],n=t.tracks,r=1/(t.fps||1);for(let o=0,s=n.length;o!==s;++o)e.push(Q_(n[o]).scale(r));const i=new J_(t.name,t.duration,e,t.blendMode);return i.uuid=t.uuid,i},toJSON:function(t){const e=[],n=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let i=0,o=n.length;i!==o;++i)e.push(G_.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(t,e,n,r){const i=e.length,o=[];for(let s=0;s<i;s++){let t=[],a=[];t.push((s+i-1)%i,s,(s+1)%i),a.push(0,1,0);const c=U_.getKeyframeOrder(t);t=U_.sortedArray(t,1,c),a=U_.sortedArray(a,1,c),r||0!==t[0]||(t.push(i),a.push(a[0])),o.push(new X_(".morphTargetInfluences["+e[s].name+"]",t,a).scale(1/n))}return new J_(t,-1,o)},findByName:function(t,e){let n=t;if(!Array.isArray(t)){const e=t;n=e.geometry&&e.geometry.animations||e.animations}for(let r=0;r<n.length;r++)if(n[r].name===e)return n[r];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let s=0,a=t.length;s<a;s++){const e=t[s],n=e.name.match(i);if(n&&n.length>1){const t=n[1];let i=r[t];i||(r[t]=i=[]),i.push(e)}}const o=[];for(const s in r)o.push(J_.CreateFromMorphTargetSequence(s,r[s],e,n));return o},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(t,e,n,r,i){if(0!==n.length){const o=[],s=[];U_.flattenJSON(n,o,s,r),0!==o.length&&i.push(new t(e,o,s))}},r=[],i=t.name||"default",o=t.fps||30,s=t.blendMode;let a=t.length||-1;const c=t.hierarchy||[];for(let u=0;u<c.length;u++){const t=c[u].keys;if(t&&0!==t.length)if(t[0].morphTargets){const e={};let n;for(n=0;n<t.length;n++)if(t[n].morphTargets)for(let r=0;r<t[n].morphTargets.length;r++)e[t[n].morphTargets[r]]=-1;for(const i in e){const e=[],o=[];for(let r=0;r!==t[n].morphTargets.length;++r){const r=t[n];e.push(r.time),o.push(r.morphTarget===i?1:0)}r.push(new X_(".morphTargetInfluence["+i+"]",e,o))}a=e.length*(o||1)}else{const i=".bones["+e[u].name+"]";n($_,i+".position",t,"pos",r),n(K_,i+".quaternion",t,"rot",r),n($_,i+".scale",t,"scl",r)}}return 0===r.length?null:new J_(i,a,r,s)}}),Object.assign(J_.prototype,{resetDuration:function(){let t=0;for(let e=0,n=this.tracks.length;e!==n;++e){const n=this.tracks[e];t=Math.max(t,n.times[n.times.length-1])}return this.duration=t,this},trim:function(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new J_(this.name,this.duration,t,this.blendMode)},toJSON:function(){return J_.toJSON(this)}});const tw={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};function ew(t,e,n){const r=this;let i=!1,o=0,s=0,a=void 0;const c=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){s++,!1===i&&void 0!==r.onStart&&r.onStart(t,o,s),i=!0},this.itemEnd=function(t){o++,void 0!==r.onProgress&&r.onProgress(t,o,s),o===s&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return a?a(t):t},this.setURLModifier=function(t){return a=t,this},this.addHandler=function(t,e){return c.push(t,e),this},this.removeHandler=function(t){const e=c.indexOf(t);return-1!==e&&c.splice(e,2),this},this.getHandler=function(t){for(let e=0,n=c.length;e<n;e+=2){const n=c[e],r=c[e+1];if(n.global&&(n.lastIndex=0),n.test(t))return r}return null}}const nw=new ew;function rw(t){this.manager=void 0!==t?t:nw,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(rw.prototype,{load:function(){},loadAsync:function(t,e){const n=this;return new Promise((function(r,i){n.load(t,r,e,i)}))},parse:function(){},setCrossOrigin:function(t){return this.crossOrigin=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}});const iw={};function ow(t){rw.call(this,t)}function sw(t){rw.call(this,t)}function aw(t){rw.call(this,t)}function cw(t){rw.call(this,t)}function uw(t){rw.call(this,t)}function lw(t){rw.call(this,t)}function hw(t){rw.call(this,t)}function dw(){this.type="Curve",this.arcLengthDivisions=200}function fw(t,e,n,r,i,o,s,a){dw.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=s||!1,this.aRotation=a||0}function pw(t,e,n,r,i,o){fw.call(this,t,e,n,n,r,i,o),this.type="ArcCurve"}function mw(){let t=0,e=0,n=0,r=0;function i(i,o,s,a){t=i,e=s,n=-3*i+3*o-2*s-a,r=2*i-2*o+s+a}return{initCatmullRom:function(t,e,n,r,o){i(e,n,o*(n-t),o*(r-e))},initNonuniformCatmullRom:function(t,e,n,r,o,s,a){let c=(e-t)/o-(n-t)/(o+s)+(n-e)/s,u=(n-e)/s-(r-e)/(s+a)+(r-n)/a;c*=s,u*=s,i(e,n,c,u)},calc:function(i){const o=i*i;return t+e*i+n*o+r*(o*i)}}}ow.prototype=Object.assign(Object.create(rw.prototype),{constructor:ow,load:function(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=this,o=tw.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;if(void 0!==iw[t])return void iw[t].push({onLoad:e,onProgress:n,onError:r});const s=t.match(/^data:(.*?)(;base64)?,(.*)$/);let a;if(s){const n=s[1],o=!!s[2];let a=s[3];a=decodeURIComponent(a),o&&(a=atob(a));try{let r;const o=(this.responseType||"").toLowerCase();switch(o){case"arraybuffer":case"blob":const t=new Uint8Array(a.length);for(let n=0;n<a.length;n++)t[n]=a.charCodeAt(n);r="blob"===o?new Blob([t.buffer],{type:n}):t.buffer;break;case"document":const e=new DOMParser;r=e.parseFromString(a,n);break;case"json":r=JSON.parse(a);break;default:r=a}setTimeout((function(){e&&e(r),i.manager.itemEnd(t)}),0)}catch(c){setTimeout((function(){r&&r(c),i.manager.itemError(t),i.manager.itemEnd(t)}),0)}}else{iw[t]=[],iw[t].push({onLoad:e,onProgress:n,onError:r}),a=new XMLHttpRequest,a.open("GET",t,!0),a.addEventListener("load",(function(e){const n=this.response,r=iw[t];if(delete iw[t],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),tw.add(t,n);for(let t=0,e=r.length;t<e;t++){const e=r[t];e.onLoad&&e.onLoad(n)}i.manager.itemEnd(t)}else{for(let t=0,n=r.length;t<n;t++){const n=r[t];n.onError&&n.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}}),!1),a.addEventListener("progress",(function(e){const n=iw[t];for(let t=0,r=n.length;t<r;t++){const r=n[t];r.onProgress&&r.onProgress(e)}}),!1),a.addEventListener("error",(function(e){const n=iw[t];delete iw[t];for(let t=0,r=n.length;t<r;t++){const r=n[t];r.onError&&r.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}),!1),a.addEventListener("abort",(function(e){const n=iw[t];delete iw[t];for(let t=0,r=n.length;t<r;t++){const r=n[t];r.onError&&r.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}),!1),void 0!==this.responseType&&(a.responseType=this.responseType),void 0!==this.withCredentials&&(a.withCredentials=this.withCredentials),a.overrideMimeType&&a.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(const t in this.requestHeader)a.setRequestHeader(t,this.requestHeader[t]);a.send(null)}return i.manager.itemStart(t),a},setResponseType:function(t){return this.responseType=t,this},setMimeType:function(t){return this.mimeType=t,this}}),sw.prototype=Object.assign(Object.create(rw.prototype),{constructor:sw,load:function(t,e,n,r){const i=this,o=new ow(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(t,(function(n){try{e(i.parse(JSON.parse(n)))}catch(cU){r?r(cU):console.error(cU),i.manager.itemError(t)}}),n,r)},parse:function(t){const e=[];for(let n=0;n<t.length;n++){const r=J_.parse(t[n]);e.push(r)}return e}}),aw.prototype=Object.assign(Object.create(rw.prototype),{constructor:aw,load:function(t,e,n,r){const i=this,o=[],s=new eb,a=new ow(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(i.withCredentials);let c=0;function u(u){a.load(t[u],(function(t){const n=i.parse(t,!0);o[u]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},c+=1,6===c&&(1===n.mipmapCount&&(s.minFilter=Pl),s.image=o,s.format=n.format,s.needsUpdate=!0,e&&e(s))}),n,r)}if(Array.isArray(t))for(let l=0,h=t.length;l<h;++l)u(l);else a.load(t,(function(t){const n=i.parse(t,!0);if(n.isCubemap){const t=n.mipmaps.length/n.mipmapCount;for(let e=0;e<t;e++){o[e]={mipmaps:[]};for(let t=0;t<n.mipmapCount;t++)o[e].mipmaps.push(n.mipmaps[e*n.mipmapCount+t]),o[e].format=n.format,o[e].width=n.width,o[e].height=n.height}s.image=o}else s.image.width=n.width,s.image.height=n.height,s.mipmaps=n.mipmaps;1===n.mipmapCount&&(s.minFilter=Pl),s.format=n.format,s.needsUpdate=!0,e&&e(s)}),n,r);return s}}),cw.prototype=Object.assign(Object.create(rw.prototype),{constructor:cw,load:function(t,e,n,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=this,o=tw.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;const s=document.createElementNS("http://www.w3.org/1999/xhtml","img");function a(){s.removeEventListener("load",a,!1),s.removeEventListener("error",c,!1),tw.add(t,this),e&&e(this),i.manager.itemEnd(t)}function c(e){s.removeEventListener("load",a,!1),s.removeEventListener("error",c,!1),r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)}return s.addEventListener("load",a,!1),s.addEventListener("error",c,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),i.manager.itemStart(t),s.src=t,s}}),uw.prototype=Object.assign(Object.create(rw.prototype),{constructor:uw,load:function(t,e,n,r){const i=new km,o=new cw(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let s=0;function a(n){o.load(t[n],(function(t){i.images[n]=t,s++,6===s&&(i.needsUpdate=!0,e&&e(i))}),void 0,r)}for(let c=0;c<t.length;++c)a(c);return i}}),lw.prototype=Object.assign(Object.create(rw.prototype),{constructor:lw,load:function(t,e,n,r){const i=this,o=new Fm,s=new ow(this.manager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(i.withCredentials),s.load(t,(function(t){const n=i.parse(t);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:Ml,o.wrapT=void 0!==n.wrapT?n.wrapT:Ml,o.magFilter=void 0!==n.magFilter?n.magFilter:Pl,o.minFilter=void 0!==n.minFilter?n.minFilter:Pl,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps,o.minFilter=kl),1===n.mipmapCount&&(o.minFilter=Pl),o.needsUpdate=!0,e&&e(o,n))}),n,r),o}}),hw.prototype=Object.assign(Object.create(rw.prototype),{constructor:hw,load:function(t,e,n,r){const i=new of,o=new cw(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,(function(n){i.image=n;const r=t.search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/);i.format=r?$l:Jl,i.needsUpdate=!0,void 0!==e&&e(i)}),n,r),i}}),Object.assign(dw.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)},getPoints:function(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){const t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,r=this.getPoint(0),i=0;e.push(0);for(let o=1;o<=t;o++)n=this.getPoint(o/t),i+=n.distanceTo(r),e.push(i),r=n;return this.cacheArcLengths=e,e},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){const n=this.getLengths();let r=0;const i=n.length;let o;o=e||t*n[i-1];let s,a=0,c=i-1;for(;a<=c;)if(r=Math.floor(a+(c-a)/2),s=n[r]-o,s<0)a=r+1;else{if(!(s>0)){c=r;break}c=r-1}if(r=c,n[r]===o)return r/(i-1);const u=n[r];return(r+(o-u)/(n[r+1]-u))/(i-1)},getTangent:function(t,e){let n=t-1e-4,r=t+1e-4;n<0&&(n=0),r>1&&(r=1);const i=this.getPoint(n),o=this.getPoint(r),s=e||(i.isVector2?new Qd:new hf);return s.copy(o).sub(i).normalize(),s},getTangentAt:function(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)},computeFrenetFrames:function(t,e){const n=new hf,r=[],i=[],o=[],s=new hf,a=new Uf;for(let d=0;d<=t;d++)r[d]=this.getTangentAt(d/t,new hf),r[d].normalize();i[0]=new hf,o[0]=new hf;let c=Number.MAX_VALUE;const u=Math.abs(r[0].x),l=Math.abs(r[0].y),h=Math.abs(r[0].z);u<=c&&(c=u,n.set(1,0,0)),l<=c&&(c=l,n.set(0,1,0)),h<=c&&n.set(0,0,1),s.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],s),o[0].crossVectors(r[0],i[0]);for(let d=1;d<=t;d++){if(i[d]=i[d-1].clone(),o[d]=o[d-1].clone(),s.crossVectors(r[d-1],r[d]),s.length()>Number.EPSILON){s.normalize();const t=Math.acos(Jd.clamp(r[d-1].dot(r[d]),-1,1));i[d].applyMatrix4(a.makeRotationAxis(s,t))}o[d].crossVectors(r[d],i[d])}if(!0===e){let e=Math.acos(Jd.clamp(i[0].dot(i[t]),-1,1));e/=t,r[0].dot(s.crossVectors(i[0],i[t]))>0&&(e=-e);for(let n=1;n<=t;n++)i[n].applyMatrix4(a.makeRotationAxis(r[n],e*n)),o[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:o}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),(fw.prototype=Object.create(dw.prototype)).constructor=fw,fw.prototype.isEllipseCurve=!0,fw.prototype.getPoint=function(t,e){const n=e||new Qd,r=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const o=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);const s=this.aStartAngle+t*i;let a=this.aX+this.xRadius*Math.cos(s),c=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){const t=Math.cos(this.aRotation),e=Math.sin(this.aRotation),n=a-this.aX,r=c-this.aY;a=n*t-r*e+this.aX,c=n*e+r*t+this.aY}return n.set(a,c)},fw.prototype.copy=function(t){return dw.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},fw.prototype.toJSON=function(){const t=dw.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},fw.prototype.fromJSON=function(t){return dw.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},(pw.prototype=Object.create(fw.prototype)).constructor=pw,pw.prototype.isArcCurve=!0;const gw=new hf,yw=new mw,vw=new mw,bw=new mw;function _w(t=[],e=!1,n="centripetal",r=.5){dw.call(this),this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=r}function ww(t,e,n,r,i){const o=.5*(r-e),s=.5*(i-n),a=t*t;return(2*n-2*r+o+s)*(t*a)+(-3*n+3*r-2*o-s)*a+o*t+n}function xw(t,e,n,r){return function(t,e){const n=1-t;return n*n*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,n)+function(t,e){return t*t*e}(t,r)}function Sw(t,e,n,r,i){return function(t,e){const n=1-t;return n*n*n*e}(t,e)+function(t,e){const n=1-t;return 3*n*n*t*e}(t,n)+function(t,e){return 3*(1-t)*t*t*e}(t,r)+function(t,e){return t*t*t*e}(t,i)}function Ew(t=new Qd,e=new Qd,n=new Qd,r=new Qd){dw.call(this),this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=r}function Tw(t=new hf,e=new hf,n=new hf,r=new hf){dw.call(this),this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=r}function Mw(t=new Qd,e=new Qd){dw.call(this),this.type="LineCurve",this.v1=t,this.v2=e}function Aw(t=new hf,e=new hf){dw.call(this),this.type="LineCurve3",this.v1=t,this.v2=e}function Cw(t=new Qd,e=new Qd,n=new Qd){dw.call(this),this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}function Ow(t=new hf,e=new hf,n=new hf){dw.call(this),this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}function Rw(t=[]){dw.call(this),this.type="SplineCurve",this.points=t}(_w.prototype=Object.create(dw.prototype)).constructor=_w,_w.prototype.isCatmullRomCurve3=!0,_w.prototype.getPoint=function(t,e=new hf){const n=e,r=this.points,i=r.length,o=(i-(this.closed?0:1))*t;let s,a,c=Math.floor(o),u=o-c;this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/i)+1)*i:0===u&&c===i-1&&(c=i-2,u=1),this.closed||c>0?s=r[(c-1)%i]:(gw.subVectors(r[0],r[1]).add(r[0]),s=gw);const l=r[c%i],h=r[(c+1)%i];if(this.closed||c+2<i?a=r[(c+2)%i]:(gw.subVectors(r[i-1],r[i-2]).add(r[i-1]),a=gw),"centripetal"===this.curveType||"chordal"===this.curveType){const t="chordal"===this.curveType?.5:.25;let e=Math.pow(s.distanceToSquared(l),t),n=Math.pow(l.distanceToSquared(h),t),r=Math.pow(h.distanceToSquared(a),t);n<1e-4&&(n=1),e<1e-4&&(e=n),r<1e-4&&(r=n),yw.initNonuniformCatmullRom(s.x,l.x,h.x,a.x,e,n,r),vw.initNonuniformCatmullRom(s.y,l.y,h.y,a.y,e,n,r),bw.initNonuniformCatmullRom(s.z,l.z,h.z,a.z,e,n,r)}else"catmullrom"===this.curveType&&(yw.initCatmullRom(s.x,l.x,h.x,a.x,this.tension),vw.initCatmullRom(s.y,l.y,h.y,a.y,this.tension),bw.initCatmullRom(s.z,l.z,h.z,a.z,this.tension));return n.set(yw.calc(u),vw.calc(u),bw.calc(u)),n},_w.prototype.copy=function(t){dw.prototype.copy.call(this,t),this.points=[];for(let e=0,n=t.points.length;e<n;e++)this.points.push(t.points[e].clone());return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},_w.prototype.toJSON=function(){const t=dw.prototype.toJSON.call(this);t.points=[];for(let e=0,n=this.points.length;e<n;e++)t.points.push(this.points[e].toArray());return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},_w.prototype.fromJSON=function(t){dw.prototype.fromJSON.call(this,t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new hf).fromArray(n))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},(Ew.prototype=Object.create(dw.prototype)).constructor=Ew,Ew.prototype.isCubicBezierCurve=!0,Ew.prototype.getPoint=function(t,e=new Qd){const n=e,r=this.v0,i=this.v1,o=this.v2,s=this.v3;return n.set(Sw(t,r.x,i.x,o.x,s.x),Sw(t,r.y,i.y,o.y,s.y)),n},Ew.prototype.copy=function(t){return dw.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},Ew.prototype.toJSON=function(){const t=dw.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},Ew.prototype.fromJSON=function(t){return dw.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},(Tw.prototype=Object.create(dw.prototype)).constructor=Tw,Tw.prototype.isCubicBezierCurve3=!0,Tw.prototype.getPoint=function(t,e=new hf){const n=e,r=this.v0,i=this.v1,o=this.v2,s=this.v3;return n.set(Sw(t,r.x,i.x,o.x,s.x),Sw(t,r.y,i.y,o.y,s.y),Sw(t,r.z,i.z,o.z,s.z)),n},Tw.prototype.copy=function(t){return dw.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},Tw.prototype.toJSON=function(){const t=dw.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},Tw.prototype.fromJSON=function(t){return dw.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},(Mw.prototype=Object.create(dw.prototype)).constructor=Mw,Mw.prototype.isLineCurve=!0,Mw.prototype.getPoint=function(t,e=new Qd){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},Mw.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},Mw.prototype.getTangent=function(t,e){const n=e||new Qd;return n.copy(this.v2).sub(this.v1).normalize(),n},Mw.prototype.copy=function(t){return dw.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Mw.prototype.toJSON=function(){const t=dw.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Mw.prototype.fromJSON=function(t){return dw.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},(Aw.prototype=Object.create(dw.prototype)).constructor=Aw,Aw.prototype.isLineCurve3=!0,Aw.prototype.getPoint=function(t,e=new hf){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},Aw.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},Aw.prototype.copy=function(t){return dw.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Aw.prototype.toJSON=function(){const t=dw.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Aw.prototype.fromJSON=function(t){return dw.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},(Cw.prototype=Object.create(dw.prototype)).constructor=Cw,Cw.prototype.isQuadraticBezierCurve=!0,Cw.prototype.getPoint=function(t,e=new Qd){const n=e,r=this.v0,i=this.v1,o=this.v2;return n.set(xw(t,r.x,i.x,o.x),xw(t,r.y,i.y,o.y)),n},Cw.prototype.copy=function(t){return dw.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Cw.prototype.toJSON=function(){const t=dw.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Cw.prototype.fromJSON=function(t){return dw.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},(Ow.prototype=Object.create(dw.prototype)).constructor=Ow,Ow.prototype.isQuadraticBezierCurve3=!0,Ow.prototype.getPoint=function(t,e=new hf){const n=e,r=this.v0,i=this.v1,o=this.v2;return n.set(xw(t,r.x,i.x,o.x),xw(t,r.y,i.y,o.y),xw(t,r.z,i.z,o.z)),n},Ow.prototype.copy=function(t){return dw.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Ow.prototype.toJSON=function(){const t=dw.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Ow.prototype.fromJSON=function(t){return dw.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},(Rw.prototype=Object.create(dw.prototype)).constructor=Rw,Rw.prototype.isSplineCurve=!0,Rw.prototype.getPoint=function(t,e=new Qd){const n=e,r=this.points,i=(r.length-1)*t,o=Math.floor(i),s=i-o,a=r[0===o?o:o-1],c=r[o],u=r[o>r.length-2?r.length-1:o+1],l=r[o>r.length-3?r.length-1:o+2];return n.set(ww(s,a.x,c.x,u.x,l.x),ww(s,a.y,c.y,u.y,l.y)),n},Rw.prototype.copy=function(t){dw.prototype.copy.call(this,t),this.points=[];for(let e=0,n=t.points.length;e<n;e++)this.points.push(t.points[e].clone());return this},Rw.prototype.toJSON=function(){const t=dw.prototype.toJSON.call(this);t.points=[];for(let e=0,n=this.points.length;e<n;e++)t.points.push(this.points[e].toArray());return t},Rw.prototype.fromJSON=function(t){dw.prototype.fromJSON.call(this,t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new Qd).fromArray(n))}return this};var Iw=Object.freeze({__proto__:null,ArcCurve:pw,CatmullRomCurve3:_w,CubicBezierCurve:Ew,CubicBezierCurve3:Tw,EllipseCurve:fw,LineCurve:Mw,LineCurve3:Aw,QuadraticBezierCurve:Cw,QuadraticBezierCurve3:Ow,SplineCurve:Rw});function Lw(){dw.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Pw(t){Lw.call(this),this.type="Path",this.currentPoint=new Qd,t&&this.setFromPoints(t)}function Nw(t){Pw.call(this,t),this.uuid=Jd.generateUUID(),this.type="Shape",this.holes=[]}function Dw(t,e=1){lp.call(this),this.type="Light",this.color=new Lp(t),this.intensity=e}function kw(t,e,n){Dw.call(this,t,n),this.type="HemisphereLight",this.position.copy(lp.DefaultUp),this.updateMatrix(),this.groundColor=new Lp(e)}function jw(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new Qd(512,512),this.map=null,this.mapPass=null,this.matrix=new Uf,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new zm,this._frameExtents=new Qd(1,1),this._viewportCount=1,this._viewports=[new af(0,0,1,1)]}function Fw(){jw.call(this,new Nm(50,1,.5,500)),this.focus=1}function Uw(t,e,n,r,i,o){Dw.call(this,t,e),this.type="SpotLight",this.position.copy(lp.DefaultUp),this.updateMatrix(),this.target=new lp,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==o?o:1,this.shadow=new Fw}function Bw(){jw.call(this,new Nm(90,1,.5,500)),this._frameExtents=new Qd(4,2),this._viewportCount=6,this._viewports=[new af(2,1,1,1),new af(0,1,1,1),new af(3,1,1,1),new af(1,1,1,1),new af(3,0,1,1),new af(1,0,1,1)],this._cubeDirections=[new hf(1,0,0),new hf(-1,0,0),new hf(0,0,1),new hf(0,0,-1),new hf(0,1,0),new hf(0,-1,0)],this._cubeUps=[new hf(0,1,0),new hf(0,1,0),new hf(0,1,0),new hf(0,1,0),new hf(0,0,1),new hf(0,0,-1)]}function zw(t,e,n,r){Dw.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new Bw}function Hw(t=-1,e=1,n=1,r=-1,i=.1,o=2e3){Pm.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=r,this.near=i,this.far=o,this.updateProjectionMatrix()}function Vw(){jw.call(this,new Hw(-5,5,5,-5,.5,500))}function Gw(t,e){Dw.call(this,t,e),this.type="DirectionalLight",this.position.copy(lp.DefaultUp),this.updateMatrix(),this.target=new lp,this.shadow=new Vw}function Ww(t,e){Dw.call(this,t,e),this.type="AmbientLight"}function qw(t,e,n,r){Dw.call(this,t,e),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}Lw.prototype=Object.assign(Object.create(dw.prototype),{constructor:Lw,add:function(t){this.curves.push(t)},closePath:function(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Mw(e,t))},getPoint:function(t){const e=t*this.getLength(),n=this.getCurveLengths();let r=0;for(;r<n.length;){if(n[r]>=e){const t=n[r]-e,i=this.curves[r],o=i.getLength();return i.getPointAt(0===o?0:1-t/o)}r++}return null},getLength:function(){const t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t=40){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t=12){const e=[];let n;for(let r=0,i=this.curves;r<i.length;r++){const o=i[r],s=o.getPoints(o&&o.isEllipseCurve?2*t:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?t*o.points.length:t);for(let t=0;t<s.length;t++){const r=s[t];n&&n.equals(r)||(e.push(r),n=r)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e},copy:function(t){dw.prototype.copy.call(this,t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++)this.curves.push(t.curves[e].clone());return this.autoClose=t.autoClose,this},toJSON:function(){const t=dw.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++)t.curves.push(this.curves[e].toJSON());return t},fromJSON:function(t){dw.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push((new Iw[n.type]).fromJSON(n))}return this}}),Pw.prototype=Object.assign(Object.create(Lw.prototype),{constructor:Pw,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this},moveTo:function(t,e){return this.currentPoint.set(t,e),this},lineTo:function(t,e){const n=new Mw(this.currentPoint.clone(),new Qd(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this},quadraticCurveTo:function(t,e,n,r){const i=new Cw(this.currentPoint.clone(),new Qd(t,e),new Qd(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this},bezierCurveTo:function(t,e,n,r,i,o){const s=new Ew(this.currentPoint.clone(),new Qd(t,e),new Qd(n,r),new Qd(i,o));return this.curves.push(s),this.currentPoint.set(i,o),this},splineThru:function(t){const e=new Rw([this.currentPoint.clone()].concat(t));return this.curves.push(e),this.currentPoint.copy(t[t.length-1]),this},arc:function(t,e,n,r,i,o){return this.absarc(t+this.currentPoint.x,e+this.currentPoint.y,n,r,i,o),this},absarc:function(t,e,n,r,i,o){return this.absellipse(t,e,n,n,r,i,o),this},ellipse:function(t,e,n,r,i,o,s,a){return this.absellipse(t+this.currentPoint.x,e+this.currentPoint.y,n,r,i,o,s,a),this},absellipse:function(t,e,n,r,i,o,s,a){const c=new fw(t,e,n,r,i,o,s,a);if(this.curves.length>0){const t=c.getPoint(0);t.equals(this.currentPoint)||this.lineTo(t.x,t.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this},copy:function(t){return Lw.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){const t=Lw.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return Lw.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),Nw.prototype=Object.assign(Object.create(Pw.prototype),{constructor:Nw,getPointsHoles:function(t){const e=[];for(let n=0,r=this.holes.length;n<r;n++)e[n]=this.holes[n].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){Pw.prototype.copy.call(this,t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++)this.holes.push(t.holes[e].clone());return this},toJSON:function(){const t=Pw.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++)t.holes.push(this.holes[e].toJSON());return t},fromJSON:function(t){Pw.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push((new Pw).fromJSON(n))}return this}}),Dw.prototype=Object.assign(Object.create(lp.prototype),{constructor:Dw,isLight:!0,copy:function(t){return lp.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){const e=lp.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),kw.prototype=Object.assign(Object.create(Dw.prototype),{constructor:kw,isHemisphereLight:!0,copy:function(t){return Dw.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(jw.prototype,{_projScreenMatrix:new Uf,_lightPositionWorld:new hf,_lookTarget:new hf,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(t){const e=this.camera,n=this.matrix,r=this._projScreenMatrix,i=this._lookTarget,o=this._lightPositionWorld;o.setFromMatrixPosition(t.matrixWorld),e.position.copy(o),i.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(i),e.updateMatrixWorld(),r.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(r),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)},getViewport:function(t){return this._viewports[t]},getFrameExtents:function(){return this._frameExtents},copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),Fw.prototype=Object.assign(Object.create(jw.prototype),{constructor:Fw,isSpotLightShadow:!0,updateMatrices:function(t){const e=this.camera,n=2*Jd.RAD2DEG*t.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=t.distance||e.far;n===e.fov&&r===e.aspect&&i===e.far||(e.fov=n,e.aspect=r,e.far=i,e.updateProjectionMatrix()),jw.prototype.updateMatrices.call(this,t)}}),Uw.prototype=Object.assign(Object.create(Dw.prototype),{constructor:Uw,isSpotLight:!0,copy:function(t){return Dw.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Bw.prototype=Object.assign(Object.create(jw.prototype),{constructor:Bw,isPointLightShadow:!0,updateMatrices:function(t,e=0){const n=this.camera,r=this.matrix,i=this._lightPositionWorld,o=this._lookTarget,s=this._projScreenMatrix;i.setFromMatrixPosition(t.matrixWorld),n.position.copy(i),o.copy(n.position),o.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(o),n.updateMatrixWorld(),r.makeTranslation(-i.x,-i.y,-i.z),s.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(s)}}),zw.prototype=Object.assign(Object.create(Dw.prototype),{constructor:zw,isPointLight:!0,copy:function(t){return Dw.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),Hw.prototype=Object.assign(Object.create(Pm.prototype),{constructor:Hw,isOrthographicCamera:!0,copy:function(t,e){return Pm.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-t,o=n+t,s=r+e,a=r-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=t*this.view.offsetX,o=i+t*this.view.width,s-=e*this.view.offsetY,a=s-e*this.view.height}this.projectionMatrix.makeOrthographic(i,o,s,a,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(t){const e=lp.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),Vw.prototype=Object.assign(Object.create(jw.prototype),{constructor:Vw,isDirectionalLightShadow:!0,updateMatrices:function(t){jw.prototype.updateMatrices.call(this,t)}}),Gw.prototype=Object.assign(Object.create(Dw.prototype),{constructor:Gw,isDirectionalLight:!0,copy:function(t){return Dw.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Ww.prototype=Object.assign(Object.create(Dw.prototype),{constructor:Ww,isAmbientLight:!0}),qw.prototype=Object.assign(Object.create(Dw.prototype),{constructor:qw,isRectAreaLight:!0,copy:function(t){return Dw.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){const e=Dw.prototype.toJSON.call(this,t);return e.object.width=this.width,e.object.height=this.height,e}});class Xw{constructor(){Object.defineProperty(this,"isSphericalHarmonics3",{value:!0}),this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new hf)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const n=t.x,r=t.y,i=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.282095),e.addScaledVector(o[1],.488603*r),e.addScaledVector(o[2],.488603*i),e.addScaledVector(o[3],.488603*n),e.addScaledVector(o[4],n*r*1.092548),e.addScaledVector(o[5],r*i*1.092548),e.addScaledVector(o[6],.315392*(3*i*i-1)),e.addScaledVector(o[7],n*i*1.092548),e.addScaledVector(o[8],.546274*(n*n-r*r)),e}getIrradianceAt(t,e){const n=t.x,r=t.y,i=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.886227),e.addScaledVector(o[1],1.023328*r),e.addScaledVector(o[2],1.023328*i),e.addScaledVector(o[3],1.023328*n),e.addScaledVector(o[4],.858086*n*r),e.addScaledVector(o[5],.858086*r*i),e.addScaledVector(o[6],.743125*i*i-.247708),e.addScaledVector(o[7],.858086*n*i),e.addScaledVector(o[8],.429043*(n*n-r*r)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(t,e=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(t,e+3*r);return this}toArray(t=[],e=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(t,e+3*r);return t}static getBasisAt(t,e){const n=t.x,r=t.y,i=t.z;e[0]=.282095,e[1]=.488603*r,e[2]=.488603*i,e[3]=.488603*n,e[4]=1.092548*n*r,e[5]=1.092548*r*i,e[6]=.315392*(3*i*i-1),e[7]=1.092548*n*i,e[8]=.546274*(n*n-r*r)}}function Zw(t,e){Dw.call(this,void 0,e),this.type="LightProbe",this.sh=void 0!==t?t:new Xw}function Kw(t){rw.call(this,t),this.textures={}}Zw.prototype=Object.assign(Object.create(Dw.prototype),{constructor:Zw,isLightProbe:!0,copy:function(t){return Dw.prototype.copy.call(this,t),this.sh.copy(t.sh),this},fromJSON:function(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this},toJSON:function(t){const e=Dw.prototype.toJSON.call(this,t);return e.object.sh=this.sh.toArray(),e}}),Kw.prototype=Object.assign(Object.create(rw.prototype),{constructor:Kw,load:function(t,e,n,r){const i=this,o=new ow(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(t,(function(n){try{e(i.parse(JSON.parse(n)))}catch(cU){r?r(cU):console.error(cU),i.manager.itemError(t)}}),n,r)},parse:function(t){const e=this.textures;function n(t){return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]}const r=new F_[t.type];if(void 0!==t.uuid&&(r.uuid=t.uuid),void 0!==t.name&&(r.name=t.name),void 0!==t.color&&void 0!==r.color&&r.color.setHex(t.color),void 0!==t.roughness&&(r.roughness=t.roughness),void 0!==t.metalness&&(r.metalness=t.metalness),void 0!==t.sheen&&(r.sheen=(new Lp).setHex(t.sheen)),void 0!==t.emissive&&void 0!==r.emissive&&r.emissive.setHex(t.emissive),void 0!==t.specular&&void 0!==r.specular&&r.specular.setHex(t.specular),void 0!==t.shininess&&(r.shininess=t.shininess),void 0!==t.clearcoat&&(r.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(r.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.fog&&(r.fog=t.fog),void 0!==t.flatShading&&(r.flatShading=t.flatShading),void 0!==t.blending&&(r.blending=t.blending),void 0!==t.combine&&(r.combine=t.combine),void 0!==t.side&&(r.side=t.side),void 0!==t.opacity&&(r.opacity=t.opacity),void 0!==t.transparent&&(r.transparent=t.transparent),void 0!==t.alphaTest&&(r.alphaTest=t.alphaTest),void 0!==t.depthTest&&(r.depthTest=t.depthTest),void 0!==t.depthWrite&&(r.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(r.colorWrite=t.colorWrite),void 0!==t.stencilWrite&&(r.stencilWrite=t.stencilWrite),void 0!==t.stencilWriteMask&&(r.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(r.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(r.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(r.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(r.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(r.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(r.stencilZPass=t.stencilZPass),void 0!==t.wireframe&&(r.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(r.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(r.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(r.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(r.rotation=t.rotation),1!==t.linewidth&&(r.linewidth=t.linewidth),void 0!==t.dashSize&&(r.dashSize=t.dashSize),void 0!==t.gapSize&&(r.gapSize=t.gapSize),void 0!==t.scale&&(r.scale=t.scale),void 0!==t.polygonOffset&&(r.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(r.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(r.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(r.skinning=t.skinning),void 0!==t.morphTargets&&(r.morphTargets=t.morphTargets),void 0!==t.morphNormals&&(r.morphNormals=t.morphNormals),void 0!==t.dithering&&(r.dithering=t.dithering),void 0!==t.vertexTangents&&(r.vertexTangents=t.vertexTangents),void 0!==t.visible&&(r.visible=t.visible),void 0!==t.toneMapped&&(r.toneMapped=t.toneMapped),void 0!==t.userData&&(r.userData=t.userData),void 0!==t.vertexColors&&(r.vertexColors="number"==typeof t.vertexColors?t.vertexColors>0:t.vertexColors),void 0!==t.uniforms)for(const i in t.uniforms){const e=t.uniforms[i];switch(r.uniforms[i]={},e.type){case"t":r.uniforms[i].value=n(e.value);break;case"c":r.uniforms[i].value=(new Lp).setHex(e.value);break;case"v2":r.uniforms[i].value=(new Qd).fromArray(e.value);break;case"v3":r.uniforms[i].value=(new hf).fromArray(e.value);break;case"v4":r.uniforms[i].value=(new af).fromArray(e.value);break;case"m3":r.uniforms[i].value=(new tf).fromArray(e.value);break;case"m4":r.uniforms[i].value=(new Uf).fromArray(e.value);break;default:r.uniforms[i].value=e.value}}if(void 0!==t.defines&&(r.defines=t.defines),void 0!==t.vertexShader&&(r.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(r.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(const i in t.extensions)r.extensions[i]=t.extensions[i];if(void 0!==t.shading&&(r.flatShading=1===t.shading),void 0!==t.size&&(r.size=t.size),void 0!==t.sizeAttenuation&&(r.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(r.map=n(t.map)),void 0!==t.matcap&&(r.matcap=n(t.matcap)),void 0!==t.alphaMap&&(r.alphaMap=n(t.alphaMap)),void 0!==t.bumpMap&&(r.bumpMap=n(t.bumpMap)),void 0!==t.bumpScale&&(r.bumpScale=t.bumpScale),void 0!==t.normalMap&&(r.normalMap=n(t.normalMap)),void 0!==t.normalMapType&&(r.normalMapType=t.normalMapType),void 0!==t.normalScale){let e=t.normalScale;!1===Array.isArray(e)&&(e=[e,e]),r.normalScale=(new Qd).fromArray(e)}return void 0!==t.displacementMap&&(r.displacementMap=n(t.displacementMap)),void 0!==t.displacementScale&&(r.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(r.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(r.roughnessMap=n(t.roughnessMap)),void 0!==t.metalnessMap&&(r.metalnessMap=n(t.metalnessMap)),void 0!==t.emissiveMap&&(r.emissiveMap=n(t.emissiveMap)),void 0!==t.emissiveIntensity&&(r.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(r.specularMap=n(t.specularMap)),void 0!==t.envMap&&(r.envMap=n(t.envMap)),void 0!==t.envMapIntensity&&(r.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(r.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(r.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(r.lightMap=n(t.lightMap)),void 0!==t.lightMapIntensity&&(r.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(r.aoMap=n(t.aoMap)),void 0!==t.aoMapIntensity&&(r.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(r.gradientMap=n(t.gradientMap)),void 0!==t.clearcoatMap&&(r.clearcoatMap=n(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(r.clearcoatNormalMap=n(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(r.clearcoatNormalScale=(new Qd).fromArray(t.clearcoatNormalScale)),void 0!==t.transmission&&(r.transmission=t.transmission),void 0!==t.transmissionMap&&(r.transmissionMap=n(t.transmissionMap)),r},setTextures:function(t){return this.textures=t,this}});const Yw={decodeText:function(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);let e="";for(let n=0,r=t.length;n<r;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(cU){return e}},extractUrlBase:function(t){const e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}};function $w(){am.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}function Jw(t,e,n,r){"number"==typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),Up.call(this,t,e,n),this.meshPerAttribute=r||1}function Qw(t){rw.call(this,t)}$w.prototype=Object.assign(Object.create(am.prototype),{constructor:$w,isInstancedBufferGeometry:!0,copy:function(t){return am.prototype.copy.call(this,t),this.instanceCount=t.instanceCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){const t=am.prototype.toJSON.call(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}),Jw.prototype=Object.assign(Object.create(Up.prototype),{constructor:Jw,isInstancedBufferAttribute:!0,copy:function(t){return Up.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function(){const t=Up.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}),Qw.prototype=Object.assign(Object.create(rw.prototype),{constructor:Qw,load:function(t,e,n,r){const i=this,o=new ow(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(t,(function(n){try{e(i.parse(JSON.parse(n)))}catch(cU){r?r(cU):console.error(cU),i.manager.itemError(t)}}),n,r)},parse:function(t){const e={},n={};function r(t,r){if(void 0!==e[r])return e[r];const i=t.interleavedBuffers[r],o=function(t,e){if(void 0!==n[e])return n[e];const r=new Uint32Array(t.arrayBuffers[e]).buffer;return n[e]=r,r}(t,i.buffer),s=new Qy(Qp(i.type,o),i.stride);return s.uuid=i.uuid,e[r]=s,s}const i=t.isInstancedBufferGeometry?new $w:new am,o=t.data.index;if(void 0!==o){const t=Qp(o.type,o.array);i.setIndex(new Up(t,1))}const s=t.data.attributes;for(const l in s){const e=s[l];let n;if(e.isInterleavedBufferAttribute)n=new ev(r(t.data,e.data),e.itemSize,e.offset,e.normalized);else{const t=Qp(e.type,e.array);n=new(e.isInstancedBufferAttribute?Jw:Up)(t,e.itemSize,e.normalized)}void 0!==e.name&&(n.name=e.name),i.setAttribute(l,n)}const a=t.data.morphAttributes;if(a)for(const l in a){const e=a[l],n=[];for(let i=0,o=e.length;i<o;i++){const o=e[i];let s;s=o.isInterleavedBufferAttribute?new ev(r(t.data,o.data),o.itemSize,o.offset,o.normalized):new Up(Qp(o.type,o.array),o.itemSize,o.normalized),void 0!==o.name&&(s.name=o.name),n.push(s)}i.morphAttributes[l]=n}t.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);const c=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==c)for(let l=0,h=c.length;l!==h;++l){const t=c[l];i.addGroup(t.start,t.count,t.materialIndex)}const u=t.data.boundingSphere;if(void 0!==u){const t=new hf;void 0!==u.center&&t.fromArray(u.center),i.boundingSphere=new Rf(t,u.radius)}return t.name&&(i.name=t.name),t.userData&&(i.userData=t.userData),i}});class tx extends rw{constructor(t){super(t)}load(t,e,n,r){const i=this,o=""===this.path?Yw.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||o;const s=new ow(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(t,(function(n){let o=null;try{o=JSON.parse(n)}catch(a){return void 0!==r&&r(a),void console.error("THREE:ObjectLoader: Can't parse "+t+".",a.message)}const s=o.metadata;void 0!==s&&void 0!==s.type&&"geometry"!==s.type.toLowerCase()?i.parse(o,e):console.error("THREE.ObjectLoader: Can't load "+t)}),n,r)}parse(t,e){const n=this.parseAnimations(t.animations),r=this.parseShapes(t.shapes),i=this.parseGeometries(t.geometries,r),o=this.parseImages(t.images,(function(){void 0!==e&&e(c)})),s=this.parseTextures(t.textures,o),a=this.parseMaterials(t.materials,s),c=this.parseObject(t.object,i,a,n),u=this.parseSkeletons(t.skeletons,c);if(this.bindSkeletons(c,u),void 0!==e){let t=!1;for(const e in o)if(o[e]instanceof HTMLImageElement){t=!0;break}!1===t&&e(c)}return c}parseShapes(t){const e={};if(void 0!==t)for(let n=0,r=t.length;n<r;n++){const r=(new Nw).fromJSON(t[n]);e[r.uuid]=r}return e}parseSkeletons(t,e){const n={},r={};if(e.traverse((function(t){t.isBone&&(r[t.uuid]=t)})),void 0!==t)for(let i=0,o=t.length;i<o;i++){const e=(new Rv).fromJSON(t[i],r);n[e.uuid]=e}return n}parseGeometries(t,e){const n={};let r;if(void 0!==t){const i=new Qw;for(let o=0,s=t.length;o<s;o++){let s;const a=t[o];switch(a.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new A_[a.type](a.width,a.height,a.widthSegments,a.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new A_[a.type](a.width,a.height,a.depth,a.widthSegments,a.heightSegments,a.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new A_[a.type](a.radius,a.segments,a.thetaStart,a.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new A_[a.type](a.radiusTop,a.radiusBottom,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new A_[a.type](a.radius,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new A_[a.type](a.radius,a.widthSegments,a.heightSegments,a.phiStart,a.phiLength,a.thetaStart,a.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new A_[a.type](a.radius,a.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new A_[a.type](a.innerRadius,a.outerRadius,a.thetaSegments,a.phiSegments,a.thetaStart,a.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new A_[a.type](a.radius,a.tube,a.radialSegments,a.tubularSegments,a.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new A_[a.type](a.radius,a.tube,a.tubularSegments,a.radialSegments,a.p,a.q);break;case"TubeGeometry":case"TubeBufferGeometry":s=new A_[a.type]((new Iw[a.path.type]).fromJSON(a.path),a.tubularSegments,a.radius,a.radialSegments,a.closed);break;case"LatheGeometry":case"LatheBufferGeometry":s=new A_[a.type](a.points,a.segments,a.phiStart,a.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new A_[a.type](a.vertices,a.indices,a.radius,a.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":r=[];for(let n=0,i=a.shapes.length;n<i;n++)r.push(e[a.shapes[n]]);s=new A_[a.type](r,a.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":r=[];for(let n=0,i=a.shapes.length;n<i;n++)r.push(e[a.shapes[n]]);const t=a.options.extrudePath;void 0!==t&&(a.options.extrudePath=(new Iw[t.type]).fromJSON(t)),s=new A_[a.type](r,a.options);break;case"BufferGeometry":case"InstancedBufferGeometry":s=i.parse(a);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+a.type+'"');continue}s.uuid=a.uuid,void 0!==a.name&&(s.name=a.name),!0===s.isBufferGeometry&&void 0!==a.userData&&(s.userData=a.userData),n[a.uuid]=s}}return n}parseMaterials(t,e){const n={},r={};if(void 0!==t){const i=new Kw;i.setTextures(e);for(let e=0,o=t.length;e<o;e++){const o=t[e];if("MultiMaterial"===o.type){const t=[];for(let e=0;e<o.materials.length;e++){const r=o.materials[e];void 0===n[r.uuid]&&(n[r.uuid]=i.parse(r)),t.push(n[r.uuid])}r[o.uuid]=t}else void 0===n[o.uuid]&&(n[o.uuid]=i.parse(o)),r[o.uuid]=n[o.uuid]}}return r}parseAnimations(t){const e={};if(void 0!==t)for(let n=0;n<t.length;n++){const r=J_.parse(t[n]);e[r.uuid]=r}return e}parseImages(t,e){const n=this,r={};let i;function o(t){if("string"==typeof t){const e=t;return function(t){return n.manager.itemStart(t),i.load(t,(function(){n.manager.itemEnd(t)}),void 0,(function(){n.manager.itemError(t),n.manager.itemEnd(t)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(e)?e:n.resourcePath+e)}return t.data?{data:Qp(t.type,t.data),width:t.width,height:t.height}:null}if(void 0!==t&&t.length>0){const n=new ew(e);i=new cw(n),i.setCrossOrigin(this.crossOrigin);for(let e=0,i=t.length;e<i;e++){const n=t[e],i=n.url;if(Array.isArray(i)){r[n.uuid]=[];for(let t=0,e=i.length;t<e;t++){const e=o(i[t]);null!==e&&(e instanceof HTMLImageElement?r[n.uuid].push(e):r[n.uuid].push(new Fm(e.data,e.width,e.height)))}}else{const t=o(n.url);null!==t&&(r[n.uuid]=t)}}}return r}parseTextures(t,e){function n(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}const r={};if(void 0!==t)for(let i=0,o=t.length;i<o;i++){const o=t[i];let s;void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===e[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const a=e[o.image];Array.isArray(a)?(s=new km(a),6===a.length&&(s.needsUpdate=!0)):(s=a&&a.data?new Fm(a.data,a.width,a.height):new of(a),a&&(s.needsUpdate=!0)),s.uuid=o.uuid,void 0!==o.name&&(s.name=o.name),void 0!==o.mapping&&(s.mapping=n(o.mapping,ex)),void 0!==o.offset&&s.offset.fromArray(o.offset),void 0!==o.repeat&&s.repeat.fromArray(o.repeat),void 0!==o.center&&s.center.fromArray(o.center),void 0!==o.rotation&&(s.rotation=o.rotation),void 0!==o.wrap&&(s.wrapS=n(o.wrap[0],nx),s.wrapT=n(o.wrap[1],nx)),void 0!==o.format&&(s.format=o.format),void 0!==o.type&&(s.type=o.type),void 0!==o.encoding&&(s.encoding=o.encoding),void 0!==o.minFilter&&(s.minFilter=n(o.minFilter,rx)),void 0!==o.magFilter&&(s.magFilter=n(o.magFilter,rx)),void 0!==o.anisotropy&&(s.anisotropy=o.anisotropy),void 0!==o.flipY&&(s.flipY=o.flipY),void 0!==o.premultiplyAlpha&&(s.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(s.unpackAlignment=o.unpackAlignment),r[o.uuid]=s}return r}parseObject(t,e,n,r){let i,o,s;function a(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function c(t){if(void 0!==t){if(Array.isArray(t)){const e=[];for(let r=0,i=t.length;r<i;r++){const i=t[r];void 0===n[i]&&console.warn("THREE.ObjectLoader: Undefined material",i),e.push(n[i])}return e}return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),n[t]}}switch(t.type){case"Scene":i=new Jy,void 0!==t.background&&Number.isInteger(t.background)&&(i.background=new Lp(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?i.fog=new $y(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(i.fog=new Yy(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":i=new Nm(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(i.focus=t.focus),void 0!==t.zoom&&(i.zoom=t.zoom),void 0!==t.filmGauge&&(i.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(i.filmOffset=t.filmOffset),void 0!==t.view&&(i.view=Object.assign({},t.view));break;case"OrthographicCamera":i=new Hw(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(i.zoom=t.zoom),void 0!==t.view&&(i.view=Object.assign({},t.view));break;case"AmbientLight":i=new Ww(t.color,t.intensity);break;case"DirectionalLight":i=new Gw(t.color,t.intensity);break;case"PointLight":i=new zw(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":i=new qw(t.color,t.intensity,t.width,t.height);break;case"SpotLight":i=new Uw(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":i=new kw(t.color,t.groundColor,t.intensity);break;case"LightProbe":i=(new Zw).fromJSON(t);break;case"SkinnedMesh":o=a(t.geometry),s=c(t.material),i=new Mv(o,s),void 0!==t.bindMode&&(i.bindMode=t.bindMode),void 0!==t.bindMatrix&&i.bindMatrix.fromArray(t.bindMatrix),void 0!==t.skeleton&&(i.skeleton=t.skeleton);break;case"Mesh":o=a(t.geometry),s=c(t.material),i=new Tm(o,s);break;case"InstancedMesh":o=a(t.geometry),s=c(t.material);const e=t.instanceMatrix;i=new Dv(o,s,t.count),i.instanceMatrix=new Up(new Float32Array(e.array),16);break;case"LOD":i=new _v;break;case"Line":i=new Hv(a(t.geometry),c(t.material));break;case"LineLoop":i=new qv(a(t.geometry),c(t.material));break;case"LineSegments":i=new Wv(a(t.geometry),c(t.material));break;case"PointCloud":case"Points":i=new Jv(a(t.geometry),c(t.material));break;case"Sprite":i=new gv(c(t.material));break;case"Group":i=new Gy;break;case"Bone":i=new Av;break;default:i=new lp}if(i.uuid=t.uuid,void 0!==t.name&&(i.name=t.name),void 0!==t.matrix?(i.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(i.matrixAutoUpdate=t.matrixAutoUpdate),i.matrixAutoUpdate&&i.matrix.decompose(i.position,i.quaternion,i.scale)):(void 0!==t.position&&i.position.fromArray(t.position),void 0!==t.rotation&&i.rotation.fromArray(t.rotation),void 0!==t.quaternion&&i.quaternion.fromArray(t.quaternion),void 0!==t.scale&&i.scale.fromArray(t.scale)),void 0!==t.castShadow&&(i.castShadow=t.castShadow),void 0!==t.receiveShadow&&(i.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(i.shadow.bias=t.shadow.bias),void 0!==t.shadow.normalBias&&(i.shadow.normalBias=t.shadow.normalBias),void 0!==t.shadow.radius&&(i.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&i.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(i.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.frustumCulled&&(i.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(i.renderOrder=t.renderOrder),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.layers&&(i.layers.mask=t.layers),void 0!==t.children){const o=t.children;for(let t=0;t<o.length;t++)i.add(this.parseObject(o[t],e,n,r))}if(void 0!==t.animations){const e=t.animations;for(let t=0;t<e.length;t++)i.animations.push(r[e[t]])}if("LOD"===t.type){void 0!==t.autoUpdate&&(i.autoUpdate=t.autoUpdate);const e=t.levels;for(let t=0;t<e.length;t++){const n=e[t],r=i.getObjectByProperty("uuid",n.object);void 0!==r&&i.addLevel(r,n.distance)}}return i}bindSkeletons(t,e){0!==Object.keys(e).length&&t.traverse((function(t){if(!0===t.isSkinnedMesh&&void 0!==t.skeleton){const n=e[t.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",t.skeleton):t.bind(n,t.bindMatrix)}}))}setTexturePath(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}}const ex={UVMapping:vl,CubeReflectionMapping:bl,CubeRefractionMapping:_l,EquirectangularReflectionMapping:wl,EquirectangularRefractionMapping:xl,CubeUVReflectionMapping:Sl,CubeUVRefractionMapping:El},nx={RepeatWrapping:Tl,ClampToEdgeWrapping:Ml,MirroredRepeatWrapping:Al},rx={NearestFilter:Cl,NearestMipmapNearestFilter:Ol,NearestMipmapLinearFilter:Il,LinearFilter:Pl,LinearMipmapNearestFilter:Nl,LinearMipmapLinearFilter:kl};function ix(t){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),rw.call(this,t),this.options={premultiplyAlpha:"none"}}function ox(){this.type="ShapePath",this.color=new Lp,this.subPaths=[],this.currentPath=null}function sx(t){this.type="Font",this.data=t}function ax(t,e,n,r,i){const o=i.glyphs[t]||i.glyphs["?"];if(!o)return void console.error('THREE.Font: character "'+t+'" does not exists in font family '+i.familyName+".");const s=new ox;let a,c,u,l,h,d,f,p;if(o.o){const t=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(let i=0,o=t.length;i<o;)switch(t[i++]){case"m":a=t[i++]*e+n,c=t[i++]*e+r,s.moveTo(a,c);break;case"l":a=t[i++]*e+n,c=t[i++]*e+r,s.lineTo(a,c);break;case"q":u=t[i++]*e+n,l=t[i++]*e+r,h=t[i++]*e+n,d=t[i++]*e+r,s.quadraticCurveTo(h,d,u,l);break;case"b":u=t[i++]*e+n,l=t[i++]*e+r,h=t[i++]*e+n,d=t[i++]*e+r,f=t[i++]*e+n,p=t[i++]*e+r,s.bezierCurveTo(h,d,f,p,u,l)}}return{offsetX:o.ha*e,path:s}}function cx(t){rw.call(this,t)}let ux;ix.prototype=Object.assign(Object.create(rw.prototype),{constructor:ix,isImageBitmapLoader:!0,setOptions:function(t){return this.options=t,this},load:function(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=this,o=tw.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;const s={};s.credentials="anonymous"===this.crossOrigin?"same-origin":"include",fetch(t,s).then((function(t){return t.blob()})).then((function(t){return createImageBitmap(t,i.options)})).then((function(n){tw.add(t,n),e&&e(n),i.manager.itemEnd(t)})).catch((function(e){r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)})),i.manager.itemStart(t)}}),Object.assign(ox.prototype,{moveTo:function(t,e){return this.currentPath=new Pw,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this},lineTo:function(t,e){return this.currentPath.lineTo(t,e),this},quadraticCurveTo:function(t,e,n,r){return this.currentPath.quadraticCurveTo(t,e,n,r),this},bezierCurveTo:function(t,e,n,r,i,o){return this.currentPath.bezierCurveTo(t,e,n,r,i,o),this},splineThru:function(t){return this.currentPath.splineThru(t),this},toShapes:function(t,e){function n(t){const e=[];for(let n=0,r=t.length;n<r;n++){const r=t[n],i=new Nw;i.curves=r.curves,e.push(i)}return e}function r(t,e){const n=e.length;let r=!1;for(let i=n-1,o=0;o<n;i=o++){let n=e[i],s=e[o],a=s.x-n.x,c=s.y-n.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(n=e[o],a=-a,s=e[i],c=-c),t.y<n.y||t.y>s.y)continue;if(t.y===n.y){if(t.x===n.x)return!0}else{const e=c*(t.x-n.x)-a*(t.y-n.y);if(0===e)return!0;if(e<0)continue;r=!r}}else{if(t.y!==n.y)continue;if(s.x<=t.x&&t.x<=n.x||n.x<=t.x&&t.x<=s.x)return!0}}return r}const i=Zb.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===e)return n(o);let s,a,c;const u=[];if(1===o.length)return a=o[0],c=new Nw,c.curves=a.curves,u.push(c),u;let l=!i(o[0].getPoints());l=t?!l:l;const h=[],d=[];let f,p,m=[],g=0;d[g]=void 0,m[g]=[];for(let y=0,v=o.length;y<v;y++)a=o[y],f=a.getPoints(),s=i(f),s=t?!s:s,s?(!l&&d[g]&&g++,d[g]={s:new Nw,p:f},d[g].s.curves=a.curves,l&&g++,m[g]=[]):m[g].push({h:a,p:f[0]});if(!d[0])return n(o);if(d.length>1){let t=!1;const e=[];for(let n=0,r=d.length;n<r;n++)h[n]=[];for(let n=0,i=d.length;n<i;n++){const i=m[n];for(let o=0;o<i.length;o++){const s=i[o];let a=!0;for(let i=0;i<d.length;i++)r(s.p,d[i].p)&&(n!==i&&e.push({froms:n,tos:i,hole:o}),a?(a=!1,h[i].push(s)):t=!0);a&&h[n].push(s)}}e.length>0&&(t||(m=h))}for(let y=0,v=d.length;y<v;y++){c=d[y].s,u.push(c),p=m[y];for(let t=0,e=p.length;t<e;t++)c.holes.push(p[t].h)}return u}}),Object.assign(sx.prototype,{isFont:!0,generateShapes:function(t,e=100){const n=[],r=function(t,e,n){const r=Array.from?Array.from(t):String(t).split(""),i=e/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,s=[];let a=0,c=0;for(let u=0;u<r.length;u++){const t=r[u];if("\n"===t)a=0,c-=o;else{const e=ax(t,i,a,c,n);a+=e.offsetX,s.push(e.path)}}return s}(t,e,this.data);for(let i=0,o=r.length;i<o;i++)Array.prototype.push.apply(n,r[i].toShapes());return n}}),cx.prototype=Object.assign(Object.create(rw.prototype),{constructor:cx,load:function(t,e,n,r){const i=this,o=new ow(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(i.withCredentials),o.load(t,(function(t){let n;try{n=JSON.parse(t)}catch(cU){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(t.substring(65,t.length-2))}const r=i.parse(n);e&&e(r)}),n,r)},parse:function(t){return new sx(t)}});const lx={getContext:function(){return void 0===ux&&(ux=new(window.AudioContext||window.webkitAudioContext)),ux},setContext:function(t){ux=t}};function hx(t){rw.call(this,t)}function dx(t,e,n){Zw.call(this,void 0,n);const r=(new Lp).set(t),i=(new Lp).set(e),o=new hf(r.r,r.g,r.b),s=new hf(i.r,i.g,i.b),a=Math.sqrt(Math.PI),c=a*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(s).multiplyScalar(a),this.sh.coefficients[1].copy(o).sub(s).multiplyScalar(c)}function fx(t,e){Zw.call(this,void 0,e);const n=(new Lp).set(t);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}hx.prototype=Object.assign(Object.create(rw.prototype),{constructor:hx,load:function(t,e,n,r){const i=this,o=new ow(i.manager);o.setResponseType("arraybuffer"),o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(t,(function(n){try{const t=n.slice(0);lx.getContext().decodeAudioData(t,(function(t){e(t)}))}catch(cU){r?r(cU):console.error(cU),i.manager.itemError(t)}}),n,r)}}),dx.prototype=Object.assign(Object.create(Zw.prototype),{constructor:dx,isHemisphereLightProbe:!0,copy:function(t){return Zw.prototype.copy.call(this,t),this},toJSON:function(t){return Zw.prototype.toJSON.call(this,t)}}),fx.prototype=Object.assign(Object.create(Zw.prototype),{constructor:fx,isAmbientLightProbe:!0,copy:function(t){return Zw.prototype.copy.call(this,t),this},toJSON:function(t){return Zw.prototype.toJSON.call(this,t)}});const px=new Uf,mx=new Uf;function gx(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Nm,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Nm,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign(gx.prototype,{update:function(t){const e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep;const n=t.projectionMatrix.clone(),r=e.eyeSep/2,i=r*e.near/e.focus,o=e.near*Math.tan(Jd.DEG2RAD*e.fov*.5)/e.zoom;let s,a;mx.elements[12]=-r,px.elements[12]=r,s=-o*e.aspect+i,a=o*e.aspect+i,n.elements[0]=2*e.near/(a-s),n.elements[8]=(a+s)/(a-s),this.cameraL.projectionMatrix.copy(n),s=-o*e.aspect-i,a=o*e.aspect-i,n.elements[0]=2*e.near/(a-s),n.elements[8]=(a+s)/(a-s),this.cameraR.projectionMatrix.copy(n)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(mx),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(px)}});class yx{constructor(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=vx(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=vx();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}function vx(){return("undefined"==typeof performance?Date:performance).now()}const bx=new hf,_x=new lf,wx=new hf,xx=new hf;class Sx extends lp{constructor(){super(),this.type="AudioListener",this.context=lx.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new yx}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const e=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(bx,_x,wx),xx.set(0,0,-1).applyQuaternion(_x),e.positionX){const t=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(bx.x,t),e.positionY.linearRampToValueAtTime(bx.y,t),e.positionZ.linearRampToValueAtTime(bx.z,t),e.forwardX.linearRampToValueAtTime(xx.x,t),e.forwardY.linearRampToValueAtTime(xx.y,t),e.forwardZ.linearRampToValueAtTime(xx.z,t),e.upX.linearRampToValueAtTime(n.x,t),e.upY.linearRampToValueAtTime(n.y,t),e.upZ.linearRampToValueAtTime(n.z,t)}else e.setPosition(bx.x,bx.y,bx.z),e.setOrientation(xx.x,xx.y,xx.z,n.x,n.y,n.z)}}class Ex extends lp{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(t){return t||(t=[]),!0===this._connected?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}const Tx=new hf,Mx=new lf,Ax=new hf,Cx=new hf;class Ox extends Ex{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(Tx,Mx,Ax),Cx.set(0,0,1).applyQuaternion(Mx);const e=this.panner;if(e.positionX){const t=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(Tx.x,t),e.positionY.linearRampToValueAtTime(Tx.y,t),e.positionZ.linearRampToValueAtTime(Tx.z,t),e.orientationX.linearRampToValueAtTime(Cx.x,t),e.orientationY.linearRampToValueAtTime(Cx.y,t),e.orientationZ.linearRampToValueAtTime(Cx.z,t)}else e.setPosition(Tx.x,Tx.y,Tx.z),e.setOrientation(Cx.x,Cx.y,Cx.z)}}class Rx{constructor(t,e=2048){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=e,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const e=this.getFrequencyData();for(let n=0;n<e.length;n++)t+=e[n];return t/e.length}}function Ix(t,e,n){let r,i,o;switch(this.binding=t,this.valueSize=n,e){case"quaternion":r=this._slerp,i=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(Ix.prototype,{accumulate:function(t,e){const n=this.buffer,r=this.valueSize,i=t*r+r;let o=this.cumulativeWeight;if(0===o){for(let t=0;t!==r;++t)n[i+t]=n[t];o=e}else o+=e,this._mixBufferRegion(n,i,0,e/o,r);this.cumulativeWeight=o},accumulateAdditive:function(t){const e=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,r,0,t,n),this.cumulativeWeightAdditive+=t},apply:function(t){const e=this.valueSize,n=this.buffer,r=t*e+e,i=this.cumulativeWeight,o=this.cumulativeWeightAdditive,s=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1&&this._mixBufferRegion(n,r,e*this._origIndex,1-i,e),o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*e,1,e);for(let a=e,c=e+e;a!==c;++a)if(n[a]!==n[a+e]){s.setValue(n,r);break}},saveOriginalState:function(){const t=this.buffer,e=this.valueSize,n=e*this._origIndex;this.binding.getValue(t,n);for(let r=e,i=n;r!==i;++r)t[r]=t[n+r%e];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_setAdditiveIdentityNumeric:function(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let n=t;n<e;n++)this.buffer[n]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1},_setAdditiveIdentityOther:function(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]},_select:function(t,e,n,r,i){if(r>=.5)for(let o=0;o!==i;++o)t[e+o]=t[n+o]},_slerp:function(t,e,n,r){lf.slerpFlat(t,e,t,e,t,n,r)},_slerpAdditive:function(t,e,n,r,i){const o=this._workIndex*i;lf.multiplyQuaternionsFlat(t,o,t,e,t,n),lf.slerpFlat(t,e,t,e,t,o,r)},_lerp:function(t,e,n,r,i){const o=1-r;for(let s=0;s!==i;++s){const i=e+s;t[i]=t[i]*o+t[n+s]*r}},_lerpAdditive:function(t,e,n,r,i){for(let o=0;o!==i;++o){const i=e+o;t[i]=t[i]+t[n+o]*r}}});const Lx=new RegExp("[\\[\\]\\.:\\/]","g"),Px="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",Nx=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),Dx=/(WCOD+)?/.source.replace("WCOD",Px),kx=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),jx=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Fx=new RegExp("^"+Nx+Dx+kx+jx+"$"),Ux=["material","materials","bones"];function Bx(t,e,n){const r=n||zx.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}function zx(t,e,n){this.path=e,this.parsedPath=n||zx.parseTrackName(e),this.node=zx.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function Hx(){this.uuid=Jd.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let n=0,r=arguments.length;n!==r;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}Object.assign(Bx.prototype,{getValue:function(t,e){this.bind();const n=this._bindings[this._targetGroup.nCachedObjects_];void 0!==n&&n.getValue(t,e)},setValue:function(t,e){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(t,e)},bind:function(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}),Object.assign(zx,{Composite:Bx,create:function(t,e,n){return t&&t.isAnimationObjectGroup?new zx.Composite(t,e,n):new zx(t,e,n)},sanitizeNodeName:function(t){return t.replace(/\s/g,"_").replace(Lx,"")},parseTrackName:function(t){const e=Fx.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const t=n.nodeName.substring(r+1);-1!==Ux.indexOf(t)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=t)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n},findNode:function(t,e){if(!e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){const n=function(t){for(let r=0;r<t.length;r++){const i=t[r];if(i.name===e||i.uuid===e)return i;const o=n(i.children);if(o)return o}return null},r=n(t.children);if(r)return r}return null}}),Object.assign(zx.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)t[e++]=n[r]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++]},function(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){let t=this.node;const e=this.parsedPath,n=e.objectName,r=e.propertyName;let i=e.propertyIndex;if(t||(t=zx.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===r){r=e;break}break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==r){if(void 0===t[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[r]}}const o=t[r];if(void 0===o)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+e.nodeName+"."+r+" but it wasn't found.",t);let s=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?s=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(s=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[i]&&(i=t.morphTargetDictionary[i])}a=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else void 0!==o.fromArray&&void 0!==o.toArray?(a=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(a=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][s]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(zx.prototype,{_getValue_unbound:zx.prototype.getValue,_setValue_unbound:zx.prototype.setValue}),Object.assign(Hx.prototype,{isAnimationObjectGroup:!0,add:function(){const t=this._objects,e=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,o=i.length;let s=void 0,a=t.length,c=this.nCachedObjects_;for(let u=0,l=arguments.length;u!==l;++u){const l=arguments[u],h=l.uuid;let d=e[h];if(void 0===d){d=a++,e[h]=d,t.push(l);for(let t=0,e=o;t!==e;++t)i[t].push(new zx(l,n[t],r[t]))}else if(d<c){s=t[d];const a=--c,u=t[a];e[u.uuid]=d,t[d]=u,e[h]=a,t[a]=l;for(let t=0,e=o;t!==e;++t){const e=i[t];let o=e[d];e[d]=e[a],void 0===o&&(o=new zx(l,n[t],r[t])),e[a]=o}}else t[d]!==s&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c},remove:function(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_;for(let o=0,s=arguments.length;o!==s;++o){const s=arguments[o],a=s.uuid,c=e[a];if(void 0!==c&&c>=i){const o=i++,u=t[o];e[u.uuid]=c,t[c]=u,e[a]=o,t[o]=s;for(let t=0,e=r;t!==e;++t){const e=n[t],r=e[c];e[c]=e[o],e[o]=r}}}this.nCachedObjects_=i},uncache:function(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_,o=t.length;for(let s=0,a=arguments.length;s!==a;++s){const a=arguments[s].uuid,c=e[a];if(void 0!==c)if(delete e[a],c<i){const s=--i,a=t[s],u=--o,l=t[u];e[a.uuid]=c,t[c]=a,e[l.uuid]=s,t[s]=l,t.pop();for(let t=0,e=r;t!==e;++t){const e=n[t],r=e[u];e[c]=e[s],e[s]=r,e.pop()}}else{const i=--o,s=t[i];i>0&&(e[s.uuid]=c),t[c]=s,t.pop();for(let t=0,e=r;t!==e;++t){const e=n[t];e[c]=e[i],e.pop()}}}this.nCachedObjects_=i},subscribe_:function(t,e){const n=this._bindingsIndicesByPath;let r=n[t];const i=this._bindings;if(void 0!==r)return i[r];const o=this._paths,s=this._parsedPaths,a=this._objects,c=this.nCachedObjects_,u=new Array(a.length);r=i.length,n[t]=r,o.push(t),s.push(e),i.push(u);for(let l=c,h=a.length;l!==h;++l)u[l]=new zx(a[l],t,e);return u},unsubscribe_:function(t){const e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){const r=this._paths,i=this._parsedPaths,o=this._bindings,s=o.length-1,a=o[s];e[t[s]]=n,o[n]=a,o.pop(),i[n]=i[s],i.pop(),r[n]=r[s],r.pop()}}});class Vx{constructor(t,e,n=null,r=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=n,this.blendMode=r;const i=e.tracks,o=i.length,s=new Array(o),a={endingStart:nd,endingEnd:nd};for(let c=0;c!==o;++c){const t=i[c].createInterpolant(null);s[c]=t,t.settings=a}this._interpolantSettings=a,this._interpolants=s,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=$h,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){const n=this._clip.duration,r=t._clip.duration,i=n/r;t.warp(1,r/n,e),this.warp(i,1,e)}return this}crossFadeTo(t,e,n){return t.crossFadeFrom(this,e,n)}stopFading(){const t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,n){const r=this._mixer,i=r.time,o=this.timeScale;let s=this._timeScaleInterpolant;null===s&&(s=r._lendControlInterpolant(),this._timeScaleInterpolant=s);const a=s.parameterPositions,c=s.sampleValues;return a[0]=i,a[1]=i+n,c[0]=t/o,c[1]=e/o,this}stopWarping(){const t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,n,r){if(!this.enabled)return void this._updateWeight(t);const i=this._startTime;if(null!==i){const r=(t-i)*n;if(r<0||0===n)return;this._startTime=null,e=n*r}e*=this._updateTimeScale(t);const o=this._updateTime(e),s=this._updateWeight(t);if(s>0){const t=this._interpolants,e=this._propertyBindings;switch(this.blendMode){case sd:for(let n=0,r=t.length;n!==r;++n)t[n].evaluate(o),e[n].accumulateAdditive(s);break;case od:default:for(let n=0,i=t.length;n!==i;++n)t[n].evaluate(o),e[n].accumulate(r,s)}}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(t)[0];e*=r,t>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const n=this._timeScaleInterpolant;null!==n&&(e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e))}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,n=this.loop;let r=this.time+t,i=this._loopCount;const o=n===Jh;if(0===t)return-1===i?r:o&&1==(1&i)?e-r:r;if(n===Yh){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(r>=e)r=e;else{if(!(r<0)){this.time=r;break t}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===i&&(t>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=e||r<0){const n=Math.floor(r/e);r-=e*n,i+=Math.abs(n);const s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=t>0?e:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===s){const e=t<0;this._setEndings(e,!e,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(o&&1==(1&i))return e-r}return r}_setEndings(t,e,n){const r=this._interpolantSettings;n?(r.endingStart=rd,r.endingEnd=rd):(r.endingStart=t?this.zeroSlopeAtStart?rd:nd:id,r.endingEnd=e?this.zeroSlopeAtEnd?rd:nd:id)}_scheduleFading(t,e,n){const r=this._mixer,i=r.time;let o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const s=o.parameterPositions,a=o.sampleValues;return s[0]=i,a[0]=e,s[1]=i+t,a[1]=n,this}}function Gx(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}Gx.prototype=Object.assign(Object.create(Kd.prototype),{constructor:Gx,_bindAction:function(t,e){const n=t._localRoot||this._root,r=t._clip.tracks,i=r.length,o=t._propertyBindings,s=t._interpolants,a=n.uuid,c=this._bindingsByRootAndName;let u=c[a];void 0===u&&(u={},c[a]=u);for(let l=0;l!==i;++l){const t=r[l],i=t.name;let c=u[i];if(void 0!==c)o[l]=c;else{if(c=o[l],void 0!==c){null===c._cacheIndex&&(++c.referenceCount,this._addInactiveBinding(c,a,i));continue}c=new Ix(zx.create(n,i,e&&e._propertyBindings[l].binding.parsedPath),t.ValueTypeName,t.getValueSize()),++c.referenceCount,this._addInactiveBinding(c,a,i),o[l]=c}s[l].resultBuffer=c.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){const e=(t._localRoot||this._root).uuid,n=t._clip.uuid,r=this._actionsByClip[n];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,n,e)}const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){const e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,n){const r=this._actions,i=this._actionsByClip;let o=i[e];if(void 0===o)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,i[e]=o;else{const e=o.knownActions;t._byClipCacheIndex=e.length,e.push(t)}t._cacheIndex=r.length,r.push(t),o.actionByRoot[n]=t},_removeInactiveAction:function(t){const e=this._actions,n=e[e.length-1],r=t._cacheIndex;n._cacheIndex=r,e[r]=n,e.pop(),t._cacheIndex=null;const i=t._clip.uuid,o=this._actionsByClip,s=o[i],a=s.knownActions,c=a[a.length-1],u=t._byClipCacheIndex;c._byClipCacheIndex=u,a[u]=c,a.pop(),t._byClipCacheIndex=null,delete s.actionByRoot[(t._localRoot||this._root).uuid],0===a.length&&delete o[i],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){const e=t._propertyBindings;for(let n=0,r=e.length;n!==r;++n){const t=e[n];0==--t.referenceCount&&this._removeInactiveBinding(t)}},_lendAction:function(t){const e=this._actions,n=t._cacheIndex,r=this._nActiveActions++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_takeBackAction:function(t){const e=this._actions,n=t._cacheIndex,r=--this._nActiveActions,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_addInactiveBinding:function(t,e,n){const r=this._bindingsByRootAndName,i=this._bindings;let o=r[e];void 0===o&&(o={},r[e]=o),o[n]=t,t._cacheIndex=i.length,i.push(t)},_removeInactiveBinding:function(t){const e=this._bindings,n=t.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,s=o[r],a=e[e.length-1],c=t._cacheIndex;a._cacheIndex=c,e[c]=a,e.pop(),delete s[i],0===Object.keys(s).length&&delete o[r]},_lendBinding:function(t){const e=this._bindings,n=t._cacheIndex,r=this._nActiveBindings++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_takeBackBinding:function(t){const e=this._bindings,n=t._cacheIndex,r=--this._nActiveBindings,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_lendControlInterpolant:function(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let n=t[e];return void 0===n&&(n=new H_(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=e,t[e]=n),n},_takeBackControlInterpolant:function(t){const e=this._controlInterpolants,n=t.__cacheIndex,r=--this._nActiveControlInterpolants,i=e[r];t.__cacheIndex=r,e[r]=t,i.__cacheIndex=n,e[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e,n){const r=e||this._root,i=r.uuid;let o="string"==typeof t?J_.findByName(r,t):t;const s=null!==o?o.uuid:t,a=this._actionsByClip[s];let c=null;if(void 0===n&&(n=null!==o?o.blendMode:od),void 0!==a){const t=a.actionByRoot[i];if(void 0!==t&&t.blendMode===n)return t;c=a.knownActions[0],null===o&&(o=c._clip)}if(null===o)return null;const u=new Vx(this,o,e,n);return this._bindAction(u,c),this._addInactiveAction(u,s,i),u},existingAction:function(t,e){const n=e||this._root,r=n.uuid,i="string"==typeof t?J_.findByName(n,t):t,o=this._actionsByClip[i?i.uuid:t];return void 0!==o&&o.actionByRoot[r]||null},stopAllAction:function(){const t=this._actions;for(let e=this._nActiveActions-1;e>=0;--e)t[e].stop();return this},update:function(t){const e=this._actions,n=this._nActiveActions,r=this.time+=t*=this.timeScale,i=Math.sign(t),o=this._accuIndex^=1;for(let c=0;c!==n;++c)e[c]._update(r,t,i,o);const s=this._bindings,a=this._nActiveBindings;for(let c=0;c!==a;++c)s[c].apply(o);return this},setTime:function(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)},getRoot:function(){return this._root},uncacheClip:function(t){const e=this._actions,n=t.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){const t=i.knownActions;for(let n=0,r=t.length;n!==r;++n){const r=t[n];this._deactivateAction(r);const i=r._cacheIndex,o=e[e.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,o._cacheIndex=i,e[i]=o,e.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}},uncacheRoot:function(t){const e=t.uuid,n=this._actionsByClip;for(const i in n){const t=n[i].actionByRoot[e];void 0!==t&&(this._deactivateAction(t),this._removeInactiveAction(t))}const r=this._bindingsByRootAndName[e];if(void 0!==r)for(const i in r){const t=r[i];t.restoreOriginalState(),this._removeInactiveBinding(t)}},uncacheAction:function(t,e){const n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}});class Wx{constructor(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}clone(){return new Wx(void 0===this.value.clone?this.value:this.value.clone())}}function qx(t,e,n){Qy.call(this,t,e),this.meshPerAttribute=n||1}function Xx(t,e,n,r,i){this.buffer=t,this.type=e,this.itemSize=n,this.elementSize=r,this.count=i,this.version=0}function Zx(t,e,n,r){this.ray=new Ff(t,e),this.near=n||0,this.far=r||1/0,this.camera=null,this.layers=new Yf,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Kx(t,e){return t.distance-e.distance}function Yx(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),!0===r){const r=t.children;for(let t=0,i=r.length;t<i;t++)Yx(r[t],e,n,!0)}}qx.prototype=Object.assign(Object.create(Qy.prototype),{constructor:qx,isInstancedInterleavedBuffer:!0,copy:function(t){return Qy.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},clone:function(t){const e=Qy.prototype.clone.call(this,t);return e.meshPerAttribute=this.meshPerAttribute,e},toJSON:function(t){const e=Qy.prototype.toJSON.call(this,t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}),Object.defineProperty(Xx.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Xx.prototype,{isGLBufferAttribute:!0,setBuffer:function(t){return this.buffer=t,this},setType:function(t,e){return this.type=t,this.elementSize=e,this},setItemSize:function(t){return this.itemSize=t,this},setCount:function(t){return this.count=t,this}}),Object.assign(Zx.prototype,{set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)},intersectObject:function(t,e,n){const r=n||[];return Yx(t,this,r,e),r.sort(Kx),r},intersectObjects:function(t,e,n){const r=n||[];if(!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(let i=0,o=t.length;i<o;i++)Yx(t[i],this,r,e);return r.sort(Kx),r}});class $x{constructor(t=1,e=0,n=0){return this.radius=t,this.phi=e,this.theta=n,this}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}clone(){return(new this.constructor).copy(this)}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(Jd.clamp(e/this.radius,-1,1))),this}}class Jx{constructor(t,e,n){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==n?n:0,this}set(t,e,n){return this.radius=t,this.theta=e,this.y=n,this}clone(){return(new this.constructor).copy(this)}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}}const Qx=new Qd;class tS{constructor(t,e){Object.defineProperty(this,"isBox2",{value:!0}),this.min=void 0!==t?t:new Qd(1/0,1/0),this.max=void 0!==e?e:new Qd(-1/0,-1/0)}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=Qx.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new Qd),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new Qd),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return void 0===e&&(console.warn("THREE.Box2: .getParameter() target is now required"),e=new Qd),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,e){return void 0===e&&(console.warn("THREE.Box2: .clampPoint() target is now required"),e=new Qd),e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return Qx.copy(t).clamp(this.min,this.max).sub(t).length()}intersect(t){return this.min.max(t.min),this.max.min(t.max),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const eS=new hf,nS=new hf;class rS{constructor(t,e){this.start=void 0!==t?t:new hf,this.end=void 0!==e?e:new hf}set(t,e){return this.start.copy(t),this.end.copy(e),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return void 0===t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new hf),t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new hf),t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return void 0===e&&(console.warn("THREE.Line3: .at() target is now required"),e=new hf),this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){eS.subVectors(t,this.start),nS.subVectors(this.end,this.start);const n=nS.dot(nS);let r=nS.dot(eS)/n;return e&&(r=Jd.clamp(r,0,1)),r}closestPointToPoint(t,e,n){const r=this.closestPointToPointParameter(t,e);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new hf),this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}function iS(t){lp.call(this),this.material=t,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}(iS.prototype=Object.create(lp.prototype)).constructor=iS,iS.prototype.isImmediateRenderObject=!0;const oS=new hf;class sS extends lp{constructor(t,e){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;const n=new am,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,s=1,a=32;o<a;o++,s++){const t=o/a*Math.PI*2,e=s/a*Math.PI*2;r.push(Math.cos(t),Math.sin(t),1,Math.cos(e),Math.sin(e),1)}n.setAttribute("position",new Zp(r,3));const i=new kv({fog:!1,toneMapped:!1});this.cone=new Wv(n,i),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),oS.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(oS),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const aS=new hf,cS=new Uf,uS=new Uf;class lS extends Wv{constructor(t){const e=function t(e){const n=[];e&&e.isBone&&n.push(e);for(let r=0;r<e.children.length;r++)n.push.apply(n,t(e.children[r]));return n}(t),n=new am,r=[],i=[],o=new Lp(0,0,1),s=new Lp(0,1,0);for(let a=0;a<e.length;a++){const t=e[a];t.parent&&t.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(s.r,s.g,s.b))}n.setAttribute("position",new Zp(r,3)),n.setAttribute("color",new Zp(i,3)),super(n,new kv({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,n=this.geometry,r=n.getAttribute("position");uS.copy(this.root.matrixWorld).invert();for(let i=0,o=0;i<e.length;i++){const t=e[i];t.parent&&t.parent.isBone&&(cS.multiplyMatrices(uS,t.matrixWorld),aS.setFromMatrixPosition(cS),r.setXYZ(o,aS.x,aS.y,aS.z),cS.multiplyMatrices(uS,t.parent.matrixWorld),aS.setFromMatrixPosition(cS),r.setXYZ(o+1,aS.x,aS.y,aS.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}}class hS extends Tm{constructor(t,e,n){super(new p_(e,4,2),new kp({wireframe:!0,fog:!1,toneMapped:!1})),this.light=t,this.light.updateMatrixWorld(),this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const dS=new hf,fS=new Lp,pS=new Lp;class mS extends lp{constructor(t,e,n){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;const r=new i_(e);r.rotateY(.5*Math.PI),this.material=new kp({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const i=r.getAttribute("position"),o=new Float32Array(3*i.count);r.setAttribute("color",new Up(o,3)),this.add(new Tm(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const e=t.geometry.getAttribute("color");fS.copy(this.light.color),pS.copy(this.light.groundColor);for(let t=0,n=e.count;t<n;t++){const r=t<n/2?fS:pS;e.setXYZ(t,r.r,r.g,r.b)}e.needsUpdate=!0}t.lookAt(dS.setFromMatrixPosition(this.light.matrixWorld).negate())}}class gS extends Wv{constructor(t=10,e=10,n=4473924,r=8947848){n=new Lp(n),r=new Lp(r);const i=e/2,o=t/e,s=t/2,a=[],c=[];for(let l=0,h=0,d=-s;l<=e;l++,d+=o){a.push(-s,0,d,s,0,d),a.push(d,0,-s,d,0,s);const t=l===i?n:r;t.toArray(c,h),h+=3,t.toArray(c,h),h+=3,t.toArray(c,h),h+=3,t.toArray(c,h),h+=3}const u=new am;u.setAttribute("position",new Zp(a,3)),u.setAttribute("color",new Zp(c,3)),super(u,new kv({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}class yS extends Wv{constructor(t=10,e=16,n=8,r=64,i=4473924,o=8947848){i=new Lp(i),o=new Lp(o);const s=[],a=[];for(let u=0;u<=e;u++){const n=u/e*(2*Math.PI),r=Math.sin(n)*t,c=Math.cos(n)*t;s.push(0,0,0),s.push(r,0,c);const l=1&u?i:o;a.push(l.r,l.g,l.b),a.push(l.r,l.g,l.b)}for(let u=0;u<=n;u++){const e=1&u?i:o,c=t-t/n*u;for(let t=0;t<r;t++){let n=t/r*(2*Math.PI),i=Math.sin(n)*c,o=Math.cos(n)*c;s.push(i,0,o),a.push(e.r,e.g,e.b),n=(t+1)/r*(2*Math.PI),i=Math.sin(n)*c,o=Math.cos(n)*c,s.push(i,0,o),a.push(e.r,e.g,e.b)}}const c=new am;c.setAttribute("position",new Zp(s,3)),c.setAttribute("color",new Zp(a,3)),super(c,new kv({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}}const vS=new hf,bS=new hf,_S=new hf;class wS extends lp{constructor(t,e,n){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===e&&(e=1);let r=new am;r.setAttribute("position",new Zp([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));const i=new kv({fog:!1,toneMapped:!1});this.lightPlane=new Hv(r,i),this.add(this.lightPlane),r=new am,r.setAttribute("position",new Zp([0,0,0,0,0,1],3)),this.targetLine=new Hv(r,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){vS.setFromMatrixPosition(this.light.matrixWorld),bS.setFromMatrixPosition(this.light.target.matrixWorld),_S.subVectors(bS,vS),this.lightPlane.lookAt(bS),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(bS),this.targetLine.scale.z=_S.length()}}const xS=new hf,SS=new Pm;class ES extends Wv{constructor(t){const e=new am,n=new kv({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],o={},s=new Lp(16755200),a=new Lp(16711680),c=new Lp(43775),u=new Lp(16777215),l=new Lp(3355443);function h(t,e,n){d(t,n),d(e,n)}function d(t,e){r.push(0,0,0),i.push(e.r,e.g,e.b),void 0===o[t]&&(o[t]=[]),o[t].push(r.length/3-1)}h("n1","n2",s),h("n2","n4",s),h("n4","n3",s),h("n3","n1",s),h("f1","f2",s),h("f2","f4",s),h("f4","f3",s),h("f3","f1",s),h("n1","f1",s),h("n2","f2",s),h("n3","f3",s),h("n4","f4",s),h("p","n1",a),h("p","n2",a),h("p","n3",a),h("p","n4",a),h("u1","u2",c),h("u2","u3",c),h("u3","u1",c),h("c","t",u),h("p","c",l),h("cn1","cn2",l),h("cn3","cn4",l),h("cf1","cf2",l),h("cf3","cf4",l),e.setAttribute("position",new Zp(r,3)),e.setAttribute("color",new Zp(i,3)),super(e,n),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}update(){const t=this.geometry,e=this.pointMap;SS.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),TS("c",e,t,SS,0,0,-1),TS("t",e,t,SS,0,0,1),TS("n1",e,t,SS,-1,-1,-1),TS("n2",e,t,SS,1,-1,-1),TS("n3",e,t,SS,-1,1,-1),TS("n4",e,t,SS,1,1,-1),TS("f1",e,t,SS,-1,-1,1),TS("f2",e,t,SS,1,-1,1),TS("f3",e,t,SS,-1,1,1),TS("f4",e,t,SS,1,1,1),TS("u1",e,t,SS,.7,1.1,-1),TS("u2",e,t,SS,-.7,1.1,-1),TS("u3",e,t,SS,0,2,-1),TS("cf1",e,t,SS,-1,0,1),TS("cf2",e,t,SS,1,0,1),TS("cf3",e,t,SS,0,-1,1),TS("cf4",e,t,SS,0,1,1),TS("cn1",e,t,SS,-1,0,-1),TS("cn2",e,t,SS,1,0,-1),TS("cn3",e,t,SS,0,-1,-1),TS("cn4",e,t,SS,0,1,-1),t.getAttribute("position").needsUpdate=!0}}function TS(t,e,n,r,i,o,s){xS.set(i,o,s).unproject(r);const a=e[t];if(void 0!==a){const t=n.getAttribute("position");for(let e=0,n=a.length;e<n;e++)t.setXYZ(a[e],xS.x,xS.y,xS.z)}}const MS=new pf;class AS extends Wv{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new am;i.setIndex(new Up(n,1)),i.setAttribute("position",new Up(r,3)),super(i,new kv({color:e,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&MS.setFromObject(this.object),MS.isEmpty())return;const e=MS.min,n=MS.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=e.x,i[4]=n.y,i[5]=n.z,i[6]=e.x,i[7]=e.y,i[8]=n.z,i[9]=n.x,i[10]=e.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=e.z,i[15]=e.x,i[16]=n.y,i[17]=e.z,i[18]=e.x,i[19]=e.y,i[20]=e.z,i[21]=n.x,i[22]=e.y,i[23]=e.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t){return Wv.prototype.copy.call(this,t),this.object=t.object,this}}class CS extends Wv{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new am;r.setIndex(new Up(n,1)),r.setAttribute("position",new Zp([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new kv({color:e,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}}class OS extends Hv{constructor(t,e=1,n=16776960){const r=n,i=new am;i.setAttribute("position",new Zp([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),i.computeBoundingSphere(),super(i,new kv({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=e;const o=new am;o.setAttribute("position",new Zp([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new Tm(o,new kp({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){let e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.children[0].material.side=e<0?Ou:Cu,this.lookAt(this.plane.normal),super.updateMatrixWorld(t)}}const RS=new hf;let IS,LS;class PS extends lp{constructor(t,e,n,r,i,o){super(),this.type="ArrowHelper",void 0===t&&(t=new hf(0,0,1)),void 0===e&&(e=new hf(0,0,0)),void 0===n&&(n=1),void 0===r&&(r=16776960),void 0===i&&(i=.2*n),void 0===o&&(o=.2*i),void 0===IS&&(IS=new am,IS.setAttribute("position",new Zp([0,0,0,0,1,0],3)),LS=new db(0,.5,1,5,1),LS.translate(0,-.5,0)),this.position.copy(e),this.line=new Hv(IS,new kv({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Tm(LS,new kp({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,i,o)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{RS.set(t.z,0,-t.x).normalize();const e=Math.acos(t.y);this.quaternion.setFromAxisAngle(RS,e)}}setLength(t,e,n){void 0===e&&(e=.2*t),void 0===n&&(n=.2*e),this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}}class NS extends Wv{constructor(t=1){const e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=new am;n.setAttribute("position",new Zp(e,3)),n.setAttribute("color",new Zp([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(n,new kv({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}}const DS=new Float32Array(1),kS=new Int32Array(DS.buffer),jS={toHalfFloat:function(t){DS[0]=t;const e=kS[0];let n=e>>16&32768,r=e>>12&2047;const i=e>>23&255;return i<103?n:i>142?(n|=31744,n|=(255==i?0:1)&&8388607&e,n):i<113?(r|=2048,n|=(r>>114-i)+(r>>113-i&1),n):(n|=i-112<<10|r>>1,n+=1&r,n)}},FS=Math.pow(2,8),US=[.125,.215,.35,.446,.526,.582],BS=5+US.length,zS={[ld]:0,[hd]:1,[fd]:2,[md]:3,[gd]:4,[yd]:5,[dd]:6},HS=new Hw,{_lodPlanes:VS,_sizeLods:GS,_sigmas:WS}=QS(),qS=new Lp;let XS=null;const ZS=(1+Math.sqrt(5))/2,KS=1/ZS,YS=[new hf(1,1,1),new hf(-1,1,1),new hf(1,1,-1),new hf(-1,1,-1),new hf(0,ZS,KS),new hf(0,ZS,-KS),new hf(KS,0,ZS),new hf(-KS,0,ZS),new hf(ZS,KS,0),new hf(-ZS,KS,0)];class $S{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._blurMaterial=new O_({name:"SphericalGaussianBlur",defines:{n:20},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:new Float32Array(20)},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:new hf(0,1,0)},inputEncoding:{value:zS[ld]},outputEncoding:{value:zS[ld]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:Pu,depthTest:!1,depthWrite:!1}),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,r=100){XS=this._renderer.getRenderTarget();const i=this._allocateTargets();return this._sceneToCubeUV(t,n,r,i),e>0&&this._blur(i,0,0,e),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(t){return this._fromTexture(t)}fromCubemap(t){return this._fromTexture(t)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=rE(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=nE(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let t=0;t<VS.length;t++)VS[t].dispose()}_cleanup(t){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(XS),t.scissorTest=!1,eE(t,0,0,t.width,t.height)}_fromTexture(t){XS=this._renderer.getRenderTarget();const e=this._allocateTargets(t);return this._textureToCubeUV(t,e),this._applyPMREM(e),this._cleanup(e),e}_allocateTargets(t){const e={magFilter:Cl,minFilter:Cl,generateMipmaps:!1,type:Fl,format:eh,encoding:JS(t)?t.encoding:fd,depthBuffer:!1},n=tE(e);return n.depthBuffer=!t,this._pingPongRenderTarget=tE(e),n}_compileMaterial(t){const e=new Tm(VS[0],t);this._renderer.compile(e,HS)}_sceneToCubeUV(t,e,n,r){const i=new Nm(90,1,e,n),o=[1,-1,1,1,1,1],s=[1,1,1,-1,-1,-1],a=this._renderer,c=a.outputEncoding,u=a.toneMapping;a.getClearColor(qS);const l=a.getClearAlpha();a.toneMapping=dl,a.outputEncoding=ld;let h=t.background;if(h&&h.isColor){h.convertSRGBToLinear();const e=Math.max(h.r,h.g,h.b),n=Math.min(Math.max(Math.ceil(Math.log2(e)),-128),127);h=h.multiplyScalar(Math.pow(2,-n)),a.setClearColor(h,(n+128)/255),t.background=null}for(let d=0;d<6;d++){const e=d%3;0==e?(i.up.set(0,o[d],0),i.lookAt(s[d],0,0)):1==e?(i.up.set(0,0,o[d]),i.lookAt(0,s[d],0)):(i.up.set(0,o[d],0),i.lookAt(0,0,s[d])),eE(r,e*FS,d>2?FS:0,FS,FS),a.setRenderTarget(r),a.render(t,i)}a.toneMapping=u,a.outputEncoding=c,a.setClearColor(qS,l)}_textureToCubeUV(t,e){const n=this._renderer;t.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=rE()):null==this._equirectShader&&(this._equirectShader=nE());const r=t.isCubeTexture?this._cubemapShader:this._equirectShader,i=new Tm(VS[0],r),o=r.uniforms;o.envMap.value=t,t.isCubeTexture||o.texelSize.value.set(1/t.image.width,1/t.image.height),o.inputEncoding.value=zS[t.encoding],o.outputEncoding.value=zS[e.texture.encoding],eE(e,0,0,3*FS,2*FS),n.setRenderTarget(e),n.render(i,HS)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let r=1;r<BS;r++){const e=Math.sqrt(WS[r]*WS[r]-WS[r-1]*WS[r-1]);this._blur(t,r-1,r,e,YS[(r-1)%YS.length])}e.autoClear=n}_blur(t,e,n,r,i){const o=this._pingPongRenderTarget;this._halfBlur(t,o,e,n,r,"latitudinal",i),this._halfBlur(o,t,n,n,r,"longitudinal",i)}_halfBlur(t,e,n,r,i,o,s){const a=this._renderer,c=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const u=new Tm(VS[r],c),l=c.uniforms,h=GS[n]-1,d=isFinite(i)?Math.PI/(2*h):2*Math.PI/39,f=i/d,p=isFinite(i)?1+Math.floor(3*f):20;p>20&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${p} samples when the maximum is set to 20`);const m=[];let g=0;for(let v=0;v<20;++v){const t=v/f,e=Math.exp(-t*t/2);m.push(e),0==v?g+=e:v<p&&(g+=2*e)}for(let v=0;v<m.length;v++)m[v]=m[v]/g;l.envMap.value=t.texture,l.samples.value=p,l.weights.value=m,l.latitudinal.value="latitudinal"===o,s&&(l.poleAxis.value=s),l.dTheta.value=d,l.mipInt.value=8-n,l.inputEncoding.value=zS[t.texture.encoding],l.outputEncoding.value=zS[t.texture.encoding];const y=GS[r];eE(e,3*Math.max(0,FS-2*y),(0===r?0:2*FS)+2*y*(r>4?r-8+4:0),3*y,2*y),a.setRenderTarget(e),a.render(u,HS)}}function JS(t){return void 0!==t&&t.type===Fl&&(t.encoding===ld||t.encoding===hd||t.encoding===dd)}function QS(){const t=[],e=[],n=[];let r=8;for(let i=0;i<BS;i++){const o=Math.pow(2,r);e.push(o);let s=1/o;i>4?s=US[i-8+4-1]:0==i&&(s=0),n.push(s);const a=1/(o-1),c=-a/2,u=1+a/2,l=[c,c,u,c,u,u,c,c,u,u,c,u],h=6,d=6,f=3,p=2,m=1,g=new Float32Array(f*d*h),y=new Float32Array(p*d*h),v=new Float32Array(m*d*h);for(let t=0;t<h;t++){const e=t%3*2/3-1,n=t>2?0:-1;g.set([e,n,0,e+2/3,n,0,e+2/3,n+1,0,e,n,0,e+2/3,n+1,0,e,n+1,0],f*d*t),y.set(l,p*d*t),v.set([t,t,t,t,t,t],m*d*t)}const b=new am;b.setAttribute("position",new Up(g,f)),b.setAttribute("uv",new Up(y,p)),b.setAttribute("faceIndex",new Up(v,m)),t.push(b),r>4&&r--}return{_lodPlanes:t,_sizeLods:e,_sigmas:n}}function tE(t){const e=new cf(3*FS,3*FS,t);return e.texture.mapping=Sl,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function eE(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function nE(){return new O_({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:new Qd(1,1)},inputEncoding:{value:zS[ld]},outputEncoding:{value:zS[ld]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:Pu,depthTest:!1,depthWrite:!1})}function rE(){return new O_({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:zS[ld]},outputEncoding:{value:zS[ld]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:Pu,depthTest:!1,depthWrite:!1})}function iE(t,e,n,r,i,o,s){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Pp(t,e,n,i,o,s)}const oE=0,sE=1,aE=0,cE=1,uE=2;function lE(t){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),t}function hE(t=[]){return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),t.isMultiMaterial=!0,t.materials=t,t.clone=function(){return t.slice()},t}function dE(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Jv(t,e)}function fE(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new gv(t)}function pE(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Jv(t,e)}function mE(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Xv(t)}function gE(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Xv(t)}function yE(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Xv(t)}function vE(t,e,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new hf(t,e,n)}function bE(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new Up(t,e).setUsage(Ud)}function _E(t,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Bp(t,e)}function wE(t,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new zp(t,e)}function xE(t,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Hp(t,e)}function SE(t,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Vp(t,e)}function EE(t,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Gp(t,e)}function TE(t,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Wp(t,e)}function ME(t,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new qp(t,e)}function AE(t,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Zp(t,e)}function CE(t,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Kp(t,e)}function OE(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),_w.call(this,t),this.type="catmullrom",this.closed=!0}function RE(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),_w.call(this,t),this.type="catmullrom"}function IE(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),_w.call(this,t),this.type="catmullrom"}function LE(t){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new NS(t)}function PE(t,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new AS(t,e)}function NE(t,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Wv(new Sb(t.geometry),new kv({color:void 0!==e?e:16777215}))}function DE(t,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Wv(new M_(t.geometry),new kv({color:void 0!==e?e:16777215}))}function kE(t){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new ow(t)}function jE(t){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new lw(t)}function FE(t,e,n){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new jm(t,n)}dw.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(dw.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Object.assign(Lw.prototype,{createPointsGeometry:function(t){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const e=new cb;for(let n=0,r=t.length;n<r;n++){const r=t[n];e.vertices.push(new hf(r.x,r.y,r.z||0))}return e}}),Object.assign(Pw.prototype,{fromPoints:function(t){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}}),OE.prototype=Object.create(_w.prototype),RE.prototype=Object.create(_w.prototype),IE.prototype=Object.create(_w.prototype),Object.assign(IE.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),gS.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},lS.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(rw.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Yw.extractUrlBase(t)}}),rw.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Object.assign(tS.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(pf.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(Rf.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}}),zm.prototype.setFromMatrix=function(t){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(t)},rS.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Object.assign(Jd,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Jd.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Jd.ceilPowerOfTwo(t)}}),Object.assign(tf.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(t){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},getInverse:function(t){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()}}),Object.assign(Uf.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new hf).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(t){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,r,n,i,o)},getInverse:function(t){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()}}),pp.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},Object.assign(lf.prototype,{multiplyVector3:function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},inverse:function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()}}),Object.assign(Ff.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(Tp.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}}),Object.assign(Tp,{barycoordFromPoint:function(t,e,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Tp.getBarycoord(t,e,n,r,i)},normal:function(t,e,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Tp.getNormal(t,e,n,r)}}),Object.assign(Nw.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Qb(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new f_(this,t)}}),Object.assign(Qd.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(hf.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(af.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(cb.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(t){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.assign(lp.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(t){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.defineProperties(lp.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.assign(Tm.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}),Object.defineProperties(Tm.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),ad},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Object.defineProperties(_v.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Rv.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Mv.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(dw.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),Nm.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(Dw.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(Up.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Ud},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Ud)}}}),Object.assign(Up.prototype,{setDynamic:function(t){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?Ud:Fd),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(am.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addAttribute:function(t,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(t,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(t,new Up(arguments[1],arguments[2])))},addDrawCall:function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(t){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(t)},applyMatrix:function(t){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.defineProperties(am.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties($w.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(t){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=t}}}),Object.defineProperties(Zx.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(t){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=t}}}),Object.defineProperties(Qy.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===Ud},set:function(t){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(t)}}}),Object.assign(Qy.prototype,{setDynamic:function(t){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?Ud:Fd),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign($b.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.assign(Jy.prototype,{dispose:function(){console.error("THREE.Scene: .dispose() has been removed.")}}),Object.defineProperties(Wx.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(Dp.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Lp}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===Iu}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(t){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=t}}}),Object.defineProperties(L_.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(I_.prototype,{transparency:{get:function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},set:function(t){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=t}}}),Object.defineProperties(Lm.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(Zy.prototype,{clearTarget:function(t,e,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,n,r)},animate:function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(Zy.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(t){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===t?hd:ld}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(Uy.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(cf.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.defineProperties(Ex.prototype,{load:{value:function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return(new hx).load(t,(function(t){e.setBuffer(t)})),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),Rx.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Dm.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)},Dm.prototype.clear=function(t,e,n,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(t,e,n,r)};const UE={merge:function(t,e,n){let r;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),r=e.matrix,e=e.geometry),t.merge(e,r,n)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}};function BE(){console.error("THREE.CanvasRenderer has been removed")}function zE(){console.error("THREE.JSONLoader has been removed.")}nf.crossOrigin=void 0,nf.loadTexture=function(t,e,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const i=new hw;i.setCrossOrigin(this.crossOrigin);const o=i.load(t,n,void 0,r);return e&&(o.mapping=e),o},nf.loadTextureCube=function(t,e,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const i=new uw;i.setCrossOrigin(this.crossOrigin);const o=i.load(t,n,void 0,r);return e&&(o.mapping=e),o},nf.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},nf.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};const HE={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function VE(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:yu}}));var GE=new(n("By2D")(r)),WE=n("rjcF")(r);let qE=(()=>{class t{constructor(t){this.ngZone=t,this.light=new Gw(16777215,1),this.frameId=null}ngOnDestroy(){null!=this.frameId&&cancelAnimationFrame(this.frameId)}createScene(t,e,n){window.onresize=t=>{this.ngZone.run(()=>{n&&this.resize()})},this.canvas=t,this.renderer=new Zy({canvas:this.canvas,alpha:!1,antialias:!0}),this.scene=new Jy,this.scene.background=new Lp(14737632),this.camera=new Nm(75,window.innerWidth/window.innerHeight,.1,1e3),this.camera.position.z=5,this.scene.add(this.camera),this.light.position.copy(this.camera.position),this.light.position.set(0,1,0),this.scene.add(this.light),this.controls=new WE(this.camera,this.renderer.domElement),GE.load(e,t=>{var e=new I_({});e.color=new Lp(2200782),e.emissive=new Lp(460377),e.roughness=1,e.metalness=1,e.reflectivity=1,e.clearcoat=1;var n=new Tm(t,e);n.position.x=-1.5,this.scene.add(n)}),n=!1}animate(){this.renderer.render(this.scene,this.camera),window.requestAnimationFrame(t=>this.animate())}light_update(){console.log(this.light.position)}resize(){this.camera.updateProjectionMatrix(),this.scene.add(this.light)}clearScene(){for(;this.scene.children.length>0;)this.scene.remove(this.scene.children[0])}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(i.z))},t.\u0275prov=i.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var XE=n("spgP"),ZE=n("Jgta"),KE=n("zIRd"),YE=n("q/0M"),$E=n("qOnz"),JE=function(t,e){return(JE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function QE(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var tT,eT="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},nT=nT||{},rT=eT||self;function iT(){}function oT(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function sT(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var aT="closure_uid_"+(1e9*Math.random()>>>0),cT=0;function uT(t,e,n){return t.call.apply(t.bind,arguments)}function lT(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function hT(t,e,n){return(hT=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?uT:lT).apply(null,arguments)}function dT(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function fT(){return Date.now()}function pT(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function mT(){this.j=this.j,this.i=this.i}mT.prototype.j=!1,mT.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,aT)&&t[aT]||(t[aT]=++cT)}(this)},mT.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var gT=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},yT=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function vT(t){return Array.prototype.concat.apply([],arguments)}function bT(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function _T(t){return/^[\s\xa0]*$/.test(t)}var wT,xT=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function ST(t,e){return-1!=t.indexOf(e)}function ET(t,e){return t<e?-1:t>e?1:0}t:{var TT=rT.navigator;if(TT){var MT=TT.userAgent;if(MT){wT=MT;break t}}wT=""}function AT(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function CT(t){var e={};for(var n in t)e[n]=t[n];return e}var OT="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function RT(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<OT.length;o++)n=OT[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function IT(t){return IT[" "](t),t}IT[" "]=iT;var LT,PT,NT=ST(wT,"Opera"),DT=ST(wT,"Trident")||ST(wT,"MSIE"),kT=ST(wT,"Edge"),jT=kT||DT,FT=ST(wT,"Gecko")&&!(ST(wT.toLowerCase(),"webkit")&&!ST(wT,"Edge"))&&!(ST(wT,"Trident")||ST(wT,"MSIE"))&&!ST(wT,"Edge"),UT=ST(wT.toLowerCase(),"webkit")&&!ST(wT,"Edge");function BT(){var t=rT.document;return t?t.documentMode:void 0}t:{var zT="",HT=(PT=wT,FT?/rv:([^\);]+)(\)|;)/.exec(PT):kT?/Edge\/([\d\.]+)/.exec(PT):DT?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(PT):UT?/WebKit\/(\S+)/.exec(PT):NT?/(?:Version)[ \/]?(\S+)/.exec(PT):void 0);if(HT&&(zT=HT?HT[1]:""),DT){var VT=BT();if(null!=VT&&VT>parseFloat(zT)){LT=String(VT);break t}}LT=zT}var GT={};function WT(t){return function(t,e){var n=GT;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=xT(String(LT)).split("."),r=xT(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=ET(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||ET(0==s[2].length,0==a[2].length)||ET(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}var qT=rT.document&&DT&&(BT()||parseInt(LT,10))||void 0,XT=!DT||9<=Number(qT),ZT=DT&&!WT("9"),KT=function(){if(!rT.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{rT.addEventListener("test",iT,e),rT.removeEventListener("test",iT,e)}catch(n){}return t}();function YT(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function $T(t,e){if(YT.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(FT){t:{try{IT(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:JT[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}YT.prototype.b=function(){this.defaultPrevented=!0},pT($T,YT);var JT={2:"touch",3:"pen",4:"mouse"};$T.prototype.b=function(){$T.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,ZT)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var QT="closure_listenable_"+(1e6*Math.random()|0),tM=0;function eM(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++tM,this.Y=this.Z=!1}function nM(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function rM(t){this.src=t,this.a={},this.b=0}function iM(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=gT(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(nM(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function oM(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}rM.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=oM(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new eM(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var sM="closure_lm_"+(1e6*Math.random()|0),aM={};function cM(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=gM(r),e&&e[QT]?e.wa(n,r,sT(i)?!!i.capture:!!i,o):uM(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)cM(t,e[o],n,r,i);return null}return n=gM(n),t&&t[QT]?t.va(e,n,sT(r)?!!r.capture:!!r,i):uM(t,e,n,!1,r,i)}function uM(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=sT(i)?!!i.capture:!!i;if(s&&!XT)return null;var a=pM(t);if(a||(t[sM]=a=new rM(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=fM,e=XT?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)KT||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(hM(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function lM(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[QT])iM(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(hM(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=pM(e))?(iM(n,t),0==n.b&&(n.src=null,e[sM]=null)):nM(t)}}}function hM(t){return t in aM?aM[t]:aM[t]="on"+t}function dM(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&lM(t),n.call(r,e)}function fM(t,e){if(t.Y)return!0;if(!XT){if(!e)t:{e=["window","event"];for(var n=rT,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return dM(t,e=new $T(e,this))}return dM(t,new $T(e,this))}function pM(t){return(t=t[sM])instanceof rM?t:null}var mM="__closure_events_fn_"+(1e9*Math.random()>>>0);function gM(t){return"function"==typeof t?t:(t[mM]||(t[mM]=function(e){return t.handleEvent(e)}),t[mM])}function yM(){mT.call(this),this.c=new rM(this),this.J=this,this.C=null}function vM(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new YT(e,t);else if(e instanceof YT)e.target=e.target||t;else{var i=e;RT(e=new YT(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=bM(s,r,!0,e)&&i}if(i=bM(s=e.a=t,r,!0,e)&&i,i=bM(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=bM(s=e.a=n[o],r,!1,e)&&i}function bM(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,c=s.ca||s.src;s.Z&&iM(t.c,s),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}pT(yM,mT),yM.prototype[QT]=!0,(tT=yM.prototype).addEventListener=function(t,e,n,r){cM(this,t,e,n,r)},tT.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=sT(i)?!!i.capture:!!i,r=gM(r),e&&e[QT]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=oM(s=e.a[n],r,i,o))&&(nM(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):e&&(e=pM(e))&&(n=e.a[n.toString()],e=-1,n&&(e=oM(n,r,i,o)),(r=-1<e?n[e]:null)&&lM(r))}(this,t,e,n,r)},tT.G=function(){if(yM.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)nM(n[r]);delete e.a[t],e.b--}}this.C=null},tT.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},tT.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var _M=rT.JSON.stringify;function wM(){this.b=this.a=null}var xM,SM=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())((function(){return new TM}),(function(t){t.reset()}));function EM(){var t=OM,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function TM(){this.next=this.b=this.a=null}function MM(t){rT.setTimeout((function(){throw t}),0)}function AM(t,e){xM||function(){var t=rT.Promise.resolve(void 0);xM=function(){t.then(RM)}}(),CM||(xM(),CM=!0),OM.add(t,e)}wM.prototype.add=function(t,e){var n=SM.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},TM.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},TM.prototype.reset=function(){this.next=this.b=this.a=null};var CM=!1,OM=new wM;function RM(){for(var t;t=EM();){try{t.a.call(t.b)}catch(n){MM(n)}var e=SM;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}CM=!1}function IM(t,e){yM.call(this),this.b=t||1,this.a=e||rT,this.f=hT(this.Za,this),this.g=fT()}function LM(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function PM(t,e,n){if("function"==typeof t)n&&(t=hT(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=hT(t.handleEvent,t)}return 2147483647<Number(e)?-1:rT.setTimeout(t,e||0)}function NM(t){t.a=PM((function(){t.a=null,t.c&&(t.c=!1,NM(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}pT(IM,yM),(tT=IM.prototype).aa=!1,tT.M=null,tT.Za=function(){if(this.aa){var t=fT()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),vM(this,"tick"),this.aa&&(LM(this),this.start()))}},tT.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=fT())},tT.G=function(){IM.X.G.call(this),LM(this),delete this.a};var DM=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}JE(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:NM(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(rT.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(mT);function kM(t){mT.call(this),this.b=t,this.a={}}pT(kM,mT);var jM=[];function FM(t,e,n,r){Array.isArray(n)||(n&&(jM[0]=n.toString()),n=jM);for(var i=0;i<n.length;i++){var o=cM(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function UM(t){AT(t.a,(function(t,e){this.a.hasOwnProperty(e)&&lM(t)}),t),t.a={}}function BM(){this.a=!0}function zM(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return _M(n)}catch(a){return e}}(t,n)+(r?" "+r:"")}))}kM.prototype.G=function(){kM.X.G.call(this),UM(this)},kM.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},BM.prototype.info=function(){};var HM={},VM=null;function GM(){return VM=VM||new yM}function WM(t){YT.call(this,HM.Fa,t)}function qM(t){var e=GM();vM(e,new WM(e,t))}function XM(t,e){YT.call(this,HM.STAT_EVENT,t),this.stat=e}function ZM(t){var e=GM();vM(e,new XM(e,t))}function KM(t){YT.call(this,HM.Ga,t)}function YM(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return rT.setTimeout((function(){t()}),e)}HM.Fa="serverreachability",pT(WM,YT),HM.STAT_EVENT="statevent",pT(XM,YT),HM.Ga="timingevent",pT(KM,YT);var $M={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},JM={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function QM(){}function tA(){}QM.prototype.a=null;var eA,nA={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function rA(){YT.call(this,"d")}function iA(){YT.call(this,"c")}function oA(){}function sA(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new kM(this),this.P=aA,this.R=new IM(t=jT?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}pT(rA,YT),pT(iA,YT),pT(oA,QM),eA=new oA;var aA=45e3,cA={},uA={};function lA(t,e,n){t.H=1,t.i=LA(MA(e)),t.j=n,t.I=!0,hA(t,null)}function hA(t,e){t.u=fT(),pA(t),t.l=MA(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),WA(n.b,"t",r),t.D=0,t.a=UC(t.g,t.g.C?e:null),0<t.O&&(t.F=new DM(hT(t.Ca,t,t.a),t.O)),FM(t.J,t.a,"readystatechange",t.Xa),e=t.B?CT(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),qM(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",a=o.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+u+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function dA(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=fA(t,n);if(i==uA){4==e&&(t.h=4,ZM(14),r=!1),zM(t.c,t.f,null,"[Incomplete Response]");break}if(i==cA){t.h=4,ZM(15),zM(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}zM(t.c,t.f,i,null),bA(t,i)}4==e&&0==n.length&&(t.h=1,ZM(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),IC(e),e.F=!0,ZM(11))):(zM(t.c,t.f,n,"[Invalid Chunked Response]"),vA(t),yA(t))}function fA(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?uA:(n=Number(e.substring(n,r)),isNaN(n)?cA:(r+=1)+n>e.length?uA:(e=e.substr(r,n),t.D=r+n,e))}function pA(t){t.T=fT()+t.P,mA(t,t.P)}function mA(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=YM(hT(t.Va,t),e)}function gA(t){t.o&&(rT.clearTimeout(t.o),t.o=null)}function yA(t){0==t.g.v||t.A||NC(t.g,t)}function vA(t){gA(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,LM(t.R),UM(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function bA(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||JA(n.b,t)))if(n.I=t.N,!t.C&&JA(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(_F){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;PC(n),xC(n)}RC(n),ZM(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=YM(hT(n.Sa,n),6e3));if(1>=$A(n.b)&&n.ea){try{n.ea()}catch(_F){}n.ea=void 0}}else kC(n,11)}else if((t.C||n.a==t)&&PC(n),!_T(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var c=1.5*a;n.D=c,n.c.info("backChannelRequestTimeoutMs_="+c)}c=n;var u=t.a;if(u){var l=u.a?u.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=c.b;!h.a&&(ST(l,"spdy")||ST(l,"quic")||ST(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(QA(h,h.b),h.b=null))}if(c.A){var d=u.a?u.a.getResponseHeader("X-HTTP-Session-Id"):null;d&&(c.na=d,IA(c.B,c.A,d))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=fT()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var f=t;if((c=n).la=FC(c,c.C?c.ga:null,c.fa),f.C){tC(c.b,f);var p=f,m=c.D;m&&p.setTimeout(m),p.o&&(gA(p),pA(p)),c.a=f}else OC(c);0<n.g.length&&TC(n)}else"stop"!=i[0]&&"close"!=i[0]||kC(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?kC(n,7):wC(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);qM(4)}catch(_F){}}function _A(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(oT(t)||"string"==typeof t)yT(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(oT(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(oT(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function wA(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof wA)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function xA(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];SA(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)SA(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function SA(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(tT=sA.prototype).setTimeout=function(t){this.P=t},tT.Xa=function(t){t=t.target;var e=this.F;e&&3==yC(t)?e.f():this.Ca(t)},tT.Ca=function(t){try{if(t==this.a)t:{var e=yC(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!jT&&!this.a.$())){this.A||4!=e||7==n||qM(8==n||0>=r?3:2),gA(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_T(s)){var c=s;break e}}c=null}if(!c){this.b=!1,this.h=3,ZM(12),vA(this),yA(this);break t}zM(this.c,this.f,c,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,bA(this,c)}this.I?(dA(this,e,o),jT&&this.b&&3==e&&(FM(this.J,this.R,"tick",this.Wa),this.R.start())):(zM(this.c,this.f,o,null),bA(this,o)),4==e&&vA(this),this.b&&!this.A&&(4==e?NC(this.g,this):(this.b=!1,pA(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,ZM(12)):(this.h=0,ZM(13)),vA(this),yA(this)}}}catch(u){}},tT.Wa=function(){if(this.a){var t=yC(this.a),e=this.a.$();this.D<e.length&&(gA(this),dA(this,t,e),this.b&&4!=t&&pA(this))}},tT.cancel=function(){this.A=!0,vA(this)},tT.Va=function(){this.o=null;var t=fT();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(qM(3),ZM(17)),vA(this),this.h=2,yA(this)):mA(this,this.T-t)},(tT=wA.prototype).K=function(){xA(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},tT.L=function(){return xA(this),this.a.concat()},tT.get=function(t,e){return SA(this.b,t)?this.b[t]:e},tT.set=function(t,e){SA(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},tT.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var EA=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function TA(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof TA){this.a=void 0!==e?e:t.a,AA(this,t.f),this.j=t.j,CA(this,t.c),OA(this,t.h),this.g=t.g,e=t.b;var n=new zA;n.c=e.c,e.a&&(n.a=new wA(e.a),n.b=e.b),RA(this,n),this.i=t.i}else t&&(n=String(t).match(EA))?(this.a=!!e,AA(this,n[1]||"",!0),this.j=PA(n[2]||""),CA(this,n[3]||"",!0),OA(this,n[4]),this.g=PA(n[5]||"",!0),RA(this,n[6]||"",!0),this.i=PA(n[7]||"")):(this.a=!!e,this.b=new zA(null,this.a))}function MA(t){return new TA(t)}function AA(t,e,n){t.f=n?PA(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function CA(t,e,n){t.c=n?PA(e,!0):e}function OA(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function RA(t,e,n){e instanceof zA?(t.b=e,function(t,e){e&&!t.f&&(HA(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(VA(this,e),WA(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=NA(e,UA)),t.b=new zA(e,t.a))}function IA(t,e,n){t.b.set(e,n)}function LA(t){return IA(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^fT()).toString(36)),t}function PA(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function NA(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,DA),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function DA(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}TA.prototype.toString=function(){var t=[],e=this.f;e&&t.push(NA(e,kA,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(NA(e,kA,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(NA(n,"/"==n.charAt(0)?FA:jA,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",NA(n,BA)),t.join("")};var kA=/[#\/\?@]/g,jA=/[#\?:]/g,FA=/[#\?]/g,UA=/[#\?@]/g,BA=/#/g;function zA(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function HA(t){t.a||(t.a=new wA,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function VA(t,e){HA(t),e=qA(t,e),SA(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,SA((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&xA(t)))}function GA(t,e){return HA(t),e=qA(t,e),SA(t.a.b,e)}function WA(t,e,n){VA(t,e),0<n.length&&(t.c=null,t.a.set(qA(t,e),bT(n)),t.b+=n.length)}function qA(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(tT=zA.prototype).add=function(t,e){HA(this),this.c=null,t=qA(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},tT.forEach=function(t,e){HA(this),this.a.forEach((function(n,r){yT(n,(function(n){t.call(e,n,r,this)}),this)}),this)},tT.L=function(){HA(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},tT.K=function(t){HA(this);var e=[];if("string"==typeof t)GA(this,t)&&(e=vT(e,this.a.get(qA(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=vT(e,t[n])}return e},tT.set=function(t,e){return HA(this),this.c=null,GA(this,t=qA(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},tT.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},tT.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var XA=function(){return function(t,e){this.b=t,this.a=e}}();function ZA(t){this.g=t||KA,t=rT.PerformanceNavigationTiming?0<(t=rT.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(rT.ia&&rT.ia.ya&&rT.ia.ya()&&rT.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var KA=10;function YA(t){return!!t.b||!!t.a&&t.a.size>=t.f}function $A(t){return t.b?1:t.a?t.a.size:0}function JA(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function QA(t,e){t.a?t.a.add(e):t.b=e}function tC(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function eC(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=QE(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return bT(t.c)}function nC(){}function rC(){this.a=new nC}function iC(t,e,n){var r=n||"";try{_A(t,(function(t,n){var i=t;sT(t)&&(i=_M(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(cU){throw e.push(r+"type="+encodeURIComponent("_badmap")),cU}}function oC(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}ZA.prototype.cancel=function(){var t,e;if(this.c=eC(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=QE(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},nC.prototype.stringify=function(t){return rT.JSON.stringify(t,void 0)},nC.prototype.parse=function(t){return rT.JSON.parse(t,void 0)};var sC=rT.JSON.parse;function aC(t){yM.call(this),this.headers=new wA,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=cC,this.D=this.F=!1}pT(aC,yM);var cC="",uC=/^https?$/i,lC=["POST","PUT"];function hC(t){return"content-type"==t.toLowerCase()}function dC(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,fC(t),mC(t)}function fC(t){t.u||(t.u=!0,vM(t,"complete"),vM(t,"error"))}function pC(t){if(t.b&&void 0!==nT&&(!t.s[1]||4!=yC(t)||2!=t.W()))if(t.l&&4==yC(t))PM(t.za,0,t);else if(vM(t,"readystatechange"),4==yC(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(EA)[1]||null;if(!o&&rT.self&&rT.self.location){var s=rT.self.location.protocol;o=s.substr(0,s.length-1)}i=!uC.test(o?o.toLowerCase():"")}e=i}if(e)vM(t,"complete"),vM(t,"success");else{t.h=6;try{var a=2<yC(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",fC(t)}}finally{mC(t)}}}function mC(t,e){if(t.a){gC(t);var n=t.a,r=t.s[0]?iT:null;t.a=null,t.s=null,e||vM(t,"ready");try{n.onreadystatechange=r}catch(cU){}}}function gC(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(rT.clearTimeout(t.m),t.m=null)}function yC(t){return t.a?t.a.readyState:0}function vC(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return AT(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):IA(t,e,n))}function bC(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function _C(t){this.pa=0,this.g=[],this.c=new BM,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=bC("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=bC("baseRetryDelayMs",5e3,t),this.Ra=bC("retryDelaySeedMs",1e4,t),this.Ma=bC("forwardChannelMaxRetries",2,t),this.ma=bC("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new ZA(t&&t.concurrentRequestLimit),this.ka=new rC,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function wC(t){if(SC(t),3==t.v){var e=t.R++,n=MA(t.B);IA(n,"SID",t.J),IA(n,"RID",e),IA(n,"TYPE","terminate"),AC(t,n),(e=new sA(t,t.c,e,void 0)).H=2,e.i=LA(MA(n)),n=!1,rT.navigator&&rT.navigator.sendBeacon&&(n=rT.navigator.sendBeacon(e.i.toString(),"")),!n&&rT.Image&&((new Image).src=e.i,n=!0),n||(e.a=UC(e.g,null),e.a.ba(e.i)),e.u=fT(),pA(e)}jC(t)}function xC(t){t.a&&(IC(t),t.a.cancel(),t.a=null)}function SC(t){xC(t),t.j&&(rT.clearTimeout(t.j),t.j=null),PC(t),t.b.cancel(),t.h&&("number"==typeof t.h&&rT.clearTimeout(t.h),t.h=null)}function EC(t,e){t.g.push(new XA(t.Oa++,e)),3==t.v&&TC(t)}function TC(t){YA(t.b)||t.h||(t.h=!0,AM(t.Ba,t),t.u=0)}function MC(t,e){var n;n=e?e.f:t.R++;var r=MA(t.B);IA(r,"SID",t.J),IA(r,"RID",n),IA(r,"AID",t.P),AC(t,r),t.i&&t.l&&vC(r,t.i,t.l),n=new sA(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=CC(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),QA(t.b,n),lA(n,r,e)}function AC(t,e){t.f&&_A({},(function(t,n){IA(e,n,t)}))}function CC(t,e,n){n=Math.min(t.g.length,n);var r=t.f?hT(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,c=0;c<n;c++){var u=i[c].b,l=i[c].a;if(0>(u-=o))o=Math.max(0,i[c].b-100),a=!1;else try{iC(l,s,"req"+u+"_")}catch(h){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function OC(t){t.a||t.j||(t.T=1,AM(t.Aa,t),t.o=0)}function RC(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=YM(hT(t.Aa,t),DC(t,t.o)),t.o++,0))}function IC(t){null!=t.s&&(rT.clearTimeout(t.s),t.s=null)}function LC(t){t.a=new sA(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=MA(t.la);IA(e,"RID","rpc"),IA(e,"SID",t.J),IA(e,"CI",t.H?"0":"1"),IA(e,"AID",t.P),AC(t,e),IA(e,"TYPE","xmlhttp"),t.i&&t.l&&vC(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=LA(MA(e)),n.j=null,n.I=!0,hA(n,t)}function PC(t){null!=t.m&&(rT.clearTimeout(t.m),t.m=null)}function NC(t,e){var n=null;if(t.a==e){PC(t),IC(t),t.a=null;var r=2}else{if(!JA(t.b,e))return;n=e.s,tC(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=fT()-e.u;var i=t.u;vM(r=GM(),new KM(r,n,e,i)),TC(t)}else OC(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!($A(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=YM(hT(t.Ba,t,e),DC(t,t.u)),t.u++,0)))}(t,e)||2==r&&RC(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:kC(t,5);break;case 4:kC(t,10);break;case 3:kC(t,6);break;default:kC(t,2)}}function DC(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function kC(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=hT(t.Ya,t);n||(n=new TA("//www.google.com/images/cleardot.gif"),rT.location&&"http"==rT.location.protocol||AA(n,"https"),LA(n)),function(t,e){var n=new BM;if(rT.Image){var r=new Image;r.onload=dT(oC,n,r,"TestLoadImage: loaded",!0,e),r.onerror=dT(oC,n,r,"TestLoadImage: error",!1,e),r.onabort=dT(oC,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=dT(oC,n,r,"TestLoadImage: timeout",!1,e),rT.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else ZM(2);t.v=0,t.f&&t.f.ra(e),jC(t),SC(t)}function jC(t){t.v=0,t.I=-1,t.f&&(0==eC(t.b).length&&0==t.g.length||(t.b.c.length=0,bT(t.g),t.g.length=0),t.f.qa())}function FC(t,e,n){var r=function(t){return t instanceof TA?MA(t):new TA(t,void 0)}(n);if(""!=r.c)e&&CA(r,e+"."+r.c),OA(r,r.h);else{var i=rT.location;r=function(t,e,n,r){var i=new TA(null,void 0);return t&&AA(i,t),e&&CA(i,e),n&&OA(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&AT(t.V,(function(t,e){IA(r,e,t)})),n=t.na,(e=t.A)&&n&&IA(r,e,n),IA(r,"VER",t.ha),AC(t,r),r}function UC(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new aC(t.Na)).F=t.C,e}function BC(){}function zC(){if(DT&&!(10<=Number(qT)))throw Error("Environmental error: no available transport.")}function HC(t,e){yM.call(this),this.a=new _C(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!_T(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!_T(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new WC(this)}function VC(t){rA.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function GC(){iA.call(this),this.status=1}function WC(t){this.a=t}(tT=aC.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:eA),this.a.onreadystatechange=hT(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void dC(this,o)}t=n||"";var i=new wA(this.headers);r&&_A(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=hC,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=rT.FormData&&t instanceof rT.FormData,!(0<=gT(lC,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{gC(this),0<this.o&&((this.D=function(t){return DT&&WT(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=hT(this.xa,this)):this.m=PM(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){dC(this,o)}},tT.xa=function(){void 0!==nT&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,vM(this,"timeout"),this.abort(8))},tT.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,vM(this,"complete"),vM(this,"abort"),mC(this))},tT.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),mC(this,!0)),aC.X.G.call(this)},tT.za=function(){this.j||(this.A||this.l||this.g?pC(this):this.Ua())},tT.Ua=function(){pC(this)},tT.W=function(){try{return 2<yC(this)?this.a.status:-1}catch(PT){return-1}},tT.$=function(){try{return this.a?this.a.responseText:""}catch(PT){return""}},tT.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),sC(e)}},tT.ua=function(){return this.h},tT.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(tT=_C.prototype).ha=8,tT.v=1,tT.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new sA(this,this.c,t,void 0),r=this.l;if(this.O&&(r?RT(r=CT(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=CC(this,n,e),IA(i=MA(this.B),"RID",t),IA(i,"CVER",22),this.A&&IA(i,"X-HTTP-Session-Id",this.A),AC(this,i),this.i&&r&&vC(i,this.i,r),QA(this.b,n),this.Ia&&IA(i,"TYPE","init"),this.da?(IA(i,"$req",e),IA(i,"SID","null"),n.U=!0,lA(n,i,null)):lA(n,i,e),this.v=2}}else 3==this.v&&(t?MC(this,t):0==this.g.length||YA(this.b)||MC(this))},tT.Aa=function(){if(this.j=null,LC(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=YM(hT(this.Ta,this),t)}},tT.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,ZM(10),xC(this),LC(this))},tT.Sa=function(){null!=this.m&&(this.m=null,xC(this),RC(this),ZM(19))},tT.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),ZM(2)):(this.c.info("Failed to ping google.com"),ZM(1))},(tT=BC.prototype).ta=function(){},tT.sa=function(){},tT.ra=function(){},tT.qa=function(){},tT.Ja=function(){},zC.prototype.a=function(t,e){return new HC(t,e)},pT(HC,yM),HC.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;ZM(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=FC(t,null,t.fa),TC(t)},HC.prototype.close=function(){wC(this.a)},HC.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,EC(this.a,e)}else this.l?((e={}).__data__=_M(t),EC(this.a,e)):EC(this.a,t)},HC.prototype.G=function(){this.a.f=null,delete this.f,wC(this.a),delete this.a,HC.X.G.call(this)},pT(VC,rA),pT(GC,iA),pT(WC,BC),WC.prototype.ta=function(){vM(this.a,"a")},WC.prototype.sa=function(t){vM(this.a,new VC(t))},WC.prototype.ra=function(t){vM(this.a,new GC(t))},WC.prototype.qa=function(){vM(this.a,"b")},zC.prototype.createWebChannel=zC.prototype.a,HC.prototype.send=HC.prototype.h,HC.prototype.open=HC.prototype.g,HC.prototype.close=HC.prototype.close,$M.NO_ERROR=0,$M.TIMEOUT=8,$M.HTTP_ERROR=6,JM.COMPLETE="complete",tA.EventType=nA,nA.OPEN="a",nA.CLOSE="b",nA.ERROR="c",nA.MESSAGE="d",yM.prototype.listen=yM.prototype.va,aC.prototype.listenOnce=aC.prototype.wa,aC.prototype.getLastError=aC.prototype.Qa,aC.prototype.getLastErrorCode=aC.prototype.ua,aC.prototype.getStatus=aC.prototype.W,aC.prototype.getResponseJson=aC.prototype.Pa,aC.prototype.getResponseText=aC.prototype.$,aC.prototype.send=aC.prototype.ba;var qC=$M,XC=JM,ZC=HM,KC=tA,YC=aC,$C=n("mrSG"),JC=new YE.b("@firebase/firestore");function QC(){return JC.logLevel}function tO(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(JC.logLevel<=YE.a.DEBUG){var r=e.map(rO);JC.debug.apply(JC,Object($C.g)(["Firestore (8.2.5): "+t],r))}}function eO(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(JC.logLevel<=YE.a.ERROR){var r=e.map(rO);JC.error.apply(JC,Object($C.g)(["Firestore (8.2.5): "+t],r))}}function nO(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(JC.logLevel<=YE.a.WARN){var r=e.map(rO);JC.warn.apply(JC,Object($C.g)(["Firestore (8.2.5): "+t],r))}}function rO(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(cU){return t}}function iO(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.2.5) INTERNAL ASSERTION FAILED: "+t;throw eO(e),new Error(e)}function oO(t,e){t||iO()}function sO(t,e){return t}function aO(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var cO=function(){function t(){}return t.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=aO(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function uO(t,e){return t<e?-1:t>e?1:0}function lO(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function hO(t){return t+"\0"}var dO=function(){function t(t){this.i=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.i)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.i)},t.prototype.o=function(){return 2*this.i.length},t.prototype.u=function(t){return uO(this.i,t.i)},t.prototype.isEqual=function(t){return this.i===t.i},t}();dO.h=new dO("");var fO={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},pO=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object($C.c)(e,t),e}(Error),mO=function(){function t(t){this.l=t}return t.fromBase64String=function(e){try{return new t(dO.fromBase64String(e))}catch(e){throw new pO(fO.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(dO.fromUint8Array(e))},t.prototype.toBase64=function(){return this.l.toBase64()},t.prototype.toUint8Array=function(){return this.l.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.l.isEqual(t.l)},t}(),gO=function(t){this._=t};function yO(){if("undefined"==typeof Uint8Array)throw new pO(fO.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function vO(){if("undefined"==typeof atob)throw new pO(fO.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var bO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object($C.c)(e,t),e.fromBase64String=function(t){return vO(),new e(mO.fromBase64String(t))},e.fromUint8Array=function(t){return yO(),new e(mO.fromUint8Array(t))},e.prototype.toBase64=function(){return vO(),this._.toBase64()},e.prototype.toUint8Array=function(){return yO(),this._.toUint8Array()},e.prototype.isEqual=function(t){return this._.isEqual(t._)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(gO),_O=function(t,e,n,r,i,o){this.T=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.I=o},wO=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"m",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),xO=function(){function t(t){this.uid=t}return t.prototype.A=function(){return null!=this.uid},t.prototype.R=function(){return this.A()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();xO.UNAUTHENTICATED=new xO(null),xO.P=new xO("google-credentials-uid"),xO.g=new xO("first-party-uid");var SO=function(t,e){this.user=e,this.type="OAuth",this.V={},this.V.Authorization="Bearer "+t},EO=function(){function t(){this.p=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.v=function(){},t.prototype.S=function(t){this.p=t,t(xO.UNAUTHENTICATED)},t.prototype.D=function(){this.p=null},t}(),TO=function(){function t(t){var e=this;this.C=null,this.currentUser=xO.UNAUTHENTICATED,this.N=!1,this.F=0,this.p=null,this.forceRefresh=!1,this.C=function(){e.F++,e.currentUser=e.O(),e.N=!0,e.p&&e.p(e.currentUser)},this.F=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.C):(this.C(null),t.get().then((function(t){e.auth=t,e.C&&e.auth.addAuthTokenListener(e.C)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.F,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.F!==e?(tO("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(oO("string"==typeof n.accessToken),new SO(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.v=function(){this.forceRefresh=!0},t.prototype.S=function(t){this.p=t,this.N&&t(this.currentUser)},t.prototype.D=function(){this.auth&&this.auth.removeAuthTokenListener(this.C),this.C=null,this.p=null},t.prototype.O=function(){var t=this.auth&&this.auth.getUid();return oO(null===t||"string"==typeof t),new xO(t)},t}(),MO=function(){function t(t,e){this.k=t,this.M=e,this.type="FirstParty",this.user=xO.g}return Object.defineProperty(t.prototype,"V",{get:function(){var t={"X-Goog-AuthUser":this.M},e=this.k.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),AO=function(){function t(t,e){this.k=t,this.M=e}return t.prototype.getToken=function(){return Promise.resolve(new MO(this.k,this.M))},t.prototype.S=function(t){t(xO.g)},t.prototype.D=function(){},t.prototype.v=function(){},t}(),CO=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.L=function(t){return n.$(t)},this.B=function(t){return e.q(t)})}return t.prototype.$=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.B&&this.B(t),t},t}();CO.U=-1;var OO=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new pO(fO.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new pO(fO.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new pO(fO.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new pO(fO.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.K=function(t){return this.seconds===t.seconds?uO(this.nanoseconds,t.nanoseconds):uO(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),RO=function(){function t(t){this.timestamp=t}return t.W=function(e){return new t(e)},t.min=function(){return new t(new OO(0,0))},t.prototype.u=function(t){return this.timestamp.K(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.j=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.G=function(){return this.timestamp},t}(),IO=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&iO(),void 0===n?n=t.length-e:n>t.length-e&&iO(),this.segments=t,this.offset=e,this.H=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.H},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.J(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.Y(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.X=function(t){return this.Y(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.Z=function(){return this.Y(this.segments,this.offset,this.length-1)},t.prototype.tt=function(){return this.segments[this.offset]},t.prototype.et=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.nt=function(){return 0===this.length},t.prototype.st=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.it=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.rt=function(){return this.segments.slice(this.offset,this.limit())},t.J=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),LO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object($C.c)(e,t),e.prototype.Y=function(t,n,r){return new e(t,n,r)},e.prototype.ot=function(){return this.rt().join("/")},e.prototype.toString=function(){return this.ot()},e.ct=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new pO(fO.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.at=function(){return new e([])},e}(IO),PO=/^[_a-zA-Z][_a-zA-Z0-9]*$/,NO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object($C.c)(e,t),e.prototype.Y=function(t,n,r){return new e(t,n,r)},e.ut=function(t){return PO.test(t)},e.prototype.ot=function(){return this.rt().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.ut(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.ot()},e.prototype.ht=function(){return 1===this.length&&"__name__"===this.get(0)},e.lt=function(){return new e(["__name__"])},e._t=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new pO(fO.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new pO(fO.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var c=t[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new pO(fO.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=c,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new pO(fO.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.at=function(){return new e([])},e}(IO),DO=function(){function t(t){this.path=t}return t.ft=function(e){return new t(LO.ct(e))},t.dt=function(e){return new t(LO.ct(e).X(5))},t.prototype.wt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===LO.J(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.J=function(t,e){return LO.J(t.path,e.path)},t.Et=function(t){return t.length%2==0},t.Tt=function(e){return new t(new LO(e.slice()))},t}();function kO(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function jO(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function FO(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var UO=function(){function t(t){this.fields=t,t.sort(NO.J)}return t.prototype.It=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].st(t))return!0;return!1},t.prototype.isEqual=function(t){return lO(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),BO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zO(t){if(oO(!!t),"string"==typeof t){var e=0,n=BO.exec(t);if(oO(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:HO(t.seconds),nanos:HO(t.nanos)}}function HO(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function VO(t){return"string"==typeof t?dO.fromBase64String(t):dO.fromUint8Array(t)}function GO(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function WO(t){var e=zO(t.mapValue.fields.__local_write_time__.timestampValue);return new OO(e.seconds,e.nanos)}function qO(t){return null==t}function XO(t){return 0===t&&1/t==-1/0}function ZO(t){return"number"==typeof t&&Number.isInteger(t)&&!XO(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function KO(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?GO(t)?4:10:iO()}function YO(t,e){var n=KO(t);if(n!==KO(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return WO(t).isEqual(WO(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=zO(t.timestampValue),r=zO(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return VO(t.bytesValue).isEqual(VO(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return HO(t.geoPointValue.latitude)===HO(e.geoPointValue.latitude)&&HO(t.geoPointValue.longitude)===HO(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return HO(t.integerValue)===HO(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=HO(t.doubleValue),r=HO(e.doubleValue);return n===r?XO(n)===XO(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return lO(t.arrayValue.values||[],e.arrayValue.values||[],YO);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(kO(n)!==kO(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!YO(n[i],r[i])))return!1;return!0}(t,e);default:return iO()}}function $O(t,e){return void 0!==(t.values||[]).find((function(t){return YO(t,e)}))}function JO(t,e){var n=KO(t),r=KO(e);if(n!==r)return uO(n,r);switch(n){case 0:return 0;case 1:return uO(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=HO(t.integerValue||t.doubleValue),r=HO(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return QO(t.timestampValue,e.timestampValue);case 4:return QO(WO(t),WO(e));case 5:return uO(t.stringValue,e.stringValue);case 6:return function(t,e){var n=VO(t),r=VO(e);return n.u(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=uO(n[i],r[i]);if(0!==o)return o}return uO(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=uO(HO(t.latitude),HO(e.latitude));return 0!==n?n:uO(HO(t.longitude),HO(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=JO(n[i],r[i]);if(o)return o}return uO(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=uO(r[s],o[s]);if(0!==a)return a;var c=JO(n[r[s]],i[o[s]]);if(0!==c)return c}return uO(r.length,o.length)}(t.mapValue,e.mapValue);default:throw iO()}}function QO(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return uO(t,e);var n=zO(t),r=zO(e),i=uO(n.seconds,r.seconds);return 0!==i?i:uO(n.nanos,r.nanos)}function tR(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=zO(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?VO(e.bytesValue).toBase64():"referenceValue"in e?DO.dt(e.referenceValue).toString():"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++)r?r=!1:n+=",",n+=t(o[i]);return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var s=o[i];r?r=!1:n+=",",n+=s+":"+t(e.fields[s])}return n+"}"}(e.mapValue):iO();var n}(t)}function eR(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.ot()}}function nR(t){return!!t&&"integerValue"in t}function rR(t){return!!t&&"arrayValue"in t}function iR(t){return!!t&&"nullValue"in t}function oR(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function sR(t){return!!t&&"mapValue"in t}var aR=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.nt())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!sR(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.et()])||null},t.prototype.isEqual=function(t){return YO(this.proto,t.proto)},t}(),cR=function(){function t(t){void 0===t&&(t=aR.empty()),this.At=t,this.Rt=new Map}return t.prototype.set=function(t,e){return this.Pt(t,e),this},t.prototype.delete=function(t){return this.Pt(t,null),this},t.prototype.Pt=function(t,e){for(var n=this.Rt,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===KO(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.et(),e)},t.prototype.yt=function(){var t=this.gt(NO.at(),this.Rt);return null!=t?new aR(t):this.At},t.prototype.gt=function(t,e){var n=this,r=!1,i=this.At.field(t),o=sR(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.gt(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function uR(t){var e=[];return jO(t.fields||{},(function(t,n){var r=new NO([t]);if(sR(n)){var i=uR(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)})),new UO(e)}var lR=function(t,e){this.key=t,this.version=e},hR=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).Vt=r,o.bt=!!i.bt,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object($C.c)(e,t),e.prototype.field=function(t){return this.Vt.field(t)},e.prototype.data=function(){return this.Vt},e.prototype.vt=function(){return this.Vt.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.bt===t.bt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.Vt.isEqual(t.Vt)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Vt.toString()+", {hasLocalMutations: "+this.bt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.bt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(lR),dR=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object($C.c)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(lR),fR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object($C.c)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(lR),pR=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.St=null};function mR(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new pR(t,e,n,r,i,o,s)}function gR(t){var e=sO(t);if(null===e.St){var n=e.path.ot();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.ot()+t.op.toString()+tR(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.ot()+t.dir}(t)})).join(","),qO(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=OR(e.startAt)),e.endAt&&(n+="|ub:",n+=OR(e.endAt)),e.St=n}return e.St}function yR(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!IR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!YO(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!PR(t.startAt,e.startAt)&&PR(t.endAt,e.endAt)}function vR(t){return DO.Et(t.path)&&null===t.collectionGroup&&0===t.filters.length}var bR=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object($C.c)(e,t),e.create=function(t,n,r){return t.ht()?"in"===n||"not-in"===n?this.Dt(t,n,r):new _R(t,n,r):"array-contains"===n?new ER(t,r):"in"===n?new TR(t,r):"not-in"===n?new MR(t,r):"array-contains-any"===n?new AR(t,r):new e(t,n,r)},e.Dt=function(t,e,n){return"in"===e?new wR(t,n):new xR(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Ct(JO(e,this.value)):null!==e&&KO(this.value)===KO(e)&&this.Ct(JO(e,this.value))},e.prototype.Ct=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return iO()}},e.prototype.xt=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),_R=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=DO.dt(r.referenceValue),i}return Object($C.c)(e,t),e.prototype.matches=function(t){var e=DO.J(t.key,this.key);return this.Ct(e)},e}(bR),wR=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=SR(0,n),r}return Object($C.c)(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(bR),xR=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=SR(0,n),r}return Object($C.c)(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(bR);function SR(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return DO.dt(t.referenceValue)}))}var ER=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object($C.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return rR(e)&&$O(e.arrayValue,this.value)},e}(bR),TR=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object($C.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&$O(this.value.arrayValue,e)},e}(bR),MR=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object($C.c)(e,t),e.prototype.matches=function(t){if($O(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!$O(this.value.arrayValue,e)},e}(bR),AR=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object($C.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!rR(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return $O(e.value.arrayValue,t)}))},e}(bR),CR=function(t,e){this.position=t,this.before=e};function OR(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return tR(t)})).join(",")}var RR=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function IR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function LR(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.ht()?DO.J(DO.dt(s.referenceValue),n.key):JO(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function PR(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!YO(t.position[n],e.position[n]))return!1;return!0}var NR=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.Nt=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.Ft=null,this.Ot=null};function DR(t,e,n,r,i,o,s,a){return new NR(t,e,n,r,i,o,s,a)}function kR(t){return new NR(t)}function jR(t){return!qO(t.limit)&&"F"===t.limitType}function FR(t){return!qO(t.limit)&&"L"===t.limitType}function UR(t){return t.Nt.length>0?t.Nt[0].field:null}function BR(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.xt())return r.field}return null}function zR(t){return null!==t.collectionGroup}function HR(t){var e=sO(t);if(null===e.Ft){e.Ft=[];var n=BR(e),r=UR(e);if(null!==n&&null===r)n.ht()||e.Ft.push(new RR(n)),e.Ft.push(new RR(NO.lt(),"asc"));else{for(var i=!1,o=0,s=e.Nt;o<s.length;o++){var a=s[o];e.Ft.push(a),a.field.ht()&&(i=!0)}if(!i){var c=e.Nt.length>0?e.Nt[e.Nt.length-1].dir:"asc";e.Ft.push(new RR(NO.lt(),c))}}}return e.Ft}function VR(t){var e=sO(t);if(!e.Ot)if("F"===e.limitType)e.Ot=mR(e.path,e.collectionGroup,HR(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=HR(e);r<i.length;r++){var o=i[r];n.push(new RR(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new CR(e.endAt.position,!e.endAt.before):null,a=e.startAt?new CR(e.startAt.position,!e.startAt.before):null;e.Ot=mR(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.Ot}function GR(t,e,n){return new NR(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function WR(t,e){return yR(VR(t),VR(e))&&t.limitType===e.limitType}function qR(t){return gR(VR(t))+"|lt:"+t.limitType}function XR(t){return"Query(target="+function(t){var e=t.path.ot();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.ot()+" "+e.op+" "+tR(e.value);var e})).join(", ")+"]"),qO(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.ot()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+OR(t.startAt)),t.endAt&&(e+=", endAt: "+OR(t.endAt)),"Target("+e+")"}(VR(t))+"; limitType="+t.limitType+")"}function ZR(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.wt(t.collectionGroup)&&t.path.st(n):DO.Et(t.path)?t.path.isEqual(n):t.path.it(n)}(t,e)&&function(t,e){for(var n=0,r=t.Nt;n<r.length;n++){var i=r[n];if(!i.field.ht()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!LR(t.startAt,HR(t),e)||t.endAt&&LR(t.endAt,HR(t),e))}(t,e)}function KR(t){return function(e,n){for(var r=!1,i=0,o=HR(t);i<o.length;i++){var s=o[i],a=YR(s,e,n);if(0!==a)return a;r=r||s.field.ht()}return 0}}function YR(t,e,n){var r=t.field.ht()?DO.J(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?JO(r,i):iO()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return iO()}}var $R=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=RO.min()),void 0===o&&(o=RO.min()),void 0===s&&(s=dO.h),this.target=t,this.targetId=e,this.kt=n,this.sequenceNumber=r,this.Mt=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.Lt=function(e){return new t(this.target,this.targetId,this.kt,e,this.Mt,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.$t=function(e,n){return new t(this.target,this.targetId,this.kt,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Bt=function(e){return new t(this.target,this.targetId,this.kt,this.sequenceNumber,this.Mt,e,this.resumeToken)},t}();function JR(t,e){if(t.qt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:XO(e)?"-0":e}}function QR(t){return{integerValue:""+t}}function tI(t,e){return ZO(e)?QR(e):JR(t,e)}var eI=function(){this.Ut=void 0};function nI(t,e,n){return t instanceof oI?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof sI?aI(t,e):t instanceof cI?uI(t,e):function(t,e){var n=iI(t,e),r=hI(n)+hI(t.Qt);return nR(n)&&nR(t.Qt)?QR(r):JR(t.Kt,r)}(t,e)}function rI(t,e,n){return t instanceof sI?aI(t,e):t instanceof cI?uI(t,e):n}function iI(t,e){return t instanceof lI?nR(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var oI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object($C.c)(e,t),e}(eI),sI=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object($C.c)(e,t),e}(eI);function aI(t,e){for(var n=dI(e),r=function(t){n.some((function(e){return YO(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var cI=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object($C.c)(e,t),e}(eI);function uI(t,e){for(var n=dI(e),r=function(t){n=n.filter((function(e){return!YO(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var lI=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Kt=e,r.Qt=n,r}return Object($C.c)(e,t),e}(eI);function hI(t){return HO(t.integerValue||t.doubleValue)}function dI(t){return rR(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var fI=function(t,e){this.field=t,this.transform=e},pI=function(t,e){this.version=t,this.transformResults=e},mI=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Wt=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"jt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function gI(t,e){return void 0!==t.updateTime?e instanceof hR&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof hR}var yI=function(){};function vI(t,e,n){return t instanceof SI?function(t,e,n){var r=t.value;if(n.transformResults){var i=MI(t.fieldTransforms,e,n.transformResults);r=CI(t.fieldTransforms,r,i)}return new hR(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof EI?function(t,e,n){if(!gI(t.Gt,e))return new fR(t.key,n.version);var r=TI(t,e,n.transformResults?MI(t.fieldTransforms,e,n.transformResults):[]);return new hR(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new dR(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function bI(t,e,n,r){return t instanceof SI?function(t,e,n,r){if(!gI(t.Gt,e))return e;var i=t.value,o=AI(t.fieldTransforms,n,e);i=CI(t.fieldTransforms,i,o);var s=xI(e);return new hR(t.key,s,i,{bt:!0})}(t,e,r):t instanceof EI?function(t,e,n,r){if(!gI(t.Gt,e))return e;var i=xI(e),o=TI(t,e,AI(t.fieldTransforms,n,e));return new hR(t.key,i,o,{bt:!0})}(t,e,r):function(t,e){return gI(t.Gt,e)?new dR(t.key,RO.min()):e}(t,e)}function _I(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof hR?e.field(o.field):void 0,a=iI(o.transform,s||null);null!=a&&(n=null==n?(new cR).set(o.field,a):n.set(o.field,a))}return n?n.yt():null}(t.fieldTransforms,e)}function wI(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Gt.isEqual(e.Gt)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&lO(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof sI&&e instanceof sI||t instanceof cI&&e instanceof cI?lO(t.elements,e.elements,YO):t instanceof lI&&e instanceof lI?YO(t.Qt,e.Qt):t instanceof oI&&e instanceof oI}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.zt.isEqual(e.zt))}function xI(t){return t instanceof hR?t.version:RO.min()}var SI=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.Gt=r,o.fieldTransforms=i,o.type=0,o}return Object($C.c)(e,t),e}(yI),EI=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.zt=r,s.Gt=i,s.fieldTransforms=o,s.type=1,s}return Object($C.c)(e,t),e}(yI);function TI(t,e,n){var r;return r=function(t,e){var n=new cR(e);return t.zt.fields.forEach((function(e){if(!e.nt()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.yt()}(t,r=e instanceof hR?e.data():aR.empty()),CI(t.fieldTransforms,r,n)}function MI(t,e,n){var r=[];oO(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof hR&&(a=e.field(o.field)),r.push(rI(s,a,n[i]))}return r}function AI(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var a=s[o],c=a.transform,u=null;n instanceof hR&&(u=n.field(a.field)),i.push(nI(c,u,e))}return i}function CI(t,e,n){for(var r=new cR(e),i=0;i<t.length;i++)r.set(t[i].field,n[i]);return r.yt()}var OI,RI,II=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Gt=n,r.type=2,r.fieldTransforms=[],r}return Object($C.c)(e,t),e}(yI),LI=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Gt=n,r.type=3,r.fieldTransforms=[],r}return Object($C.c)(e,t),e}(yI),PI=function(t){this.count=t};function NI(t){switch(t){case fO.OK:return iO();case fO.CANCELLED:case fO.UNKNOWN:case fO.DEADLINE_EXCEEDED:case fO.RESOURCE_EXHAUSTED:case fO.INTERNAL:case fO.UNAVAILABLE:case fO.UNAUTHENTICATED:return!1;case fO.INVALID_ARGUMENT:case fO.NOT_FOUND:case fO.ALREADY_EXISTS:case fO.PERMISSION_DENIED:case fO.FAILED_PRECONDITION:case fO.ABORTED:case fO.OUT_OF_RANGE:case fO.UNIMPLEMENTED:case fO.DATA_LOSS:return!0;default:return iO()}}function DI(t){if(void 0===t)return eO("GRPC error has no .code"),fO.UNKNOWN;switch(t){case OI.OK:return fO.OK;case OI.CANCELLED:return fO.CANCELLED;case OI.UNKNOWN:return fO.UNKNOWN;case OI.DEADLINE_EXCEEDED:return fO.DEADLINE_EXCEEDED;case OI.RESOURCE_EXHAUSTED:return fO.RESOURCE_EXHAUSTED;case OI.INTERNAL:return fO.INTERNAL;case OI.UNAVAILABLE:return fO.UNAVAILABLE;case OI.UNAUTHENTICATED:return fO.UNAUTHENTICATED;case OI.INVALID_ARGUMENT:return fO.INVALID_ARGUMENT;case OI.NOT_FOUND:return fO.NOT_FOUND;case OI.ALREADY_EXISTS:return fO.ALREADY_EXISTS;case OI.PERMISSION_DENIED:return fO.PERMISSION_DENIED;case OI.FAILED_PRECONDITION:return fO.FAILED_PRECONDITION;case OI.ABORTED:return fO.ABORTED;case OI.OUT_OF_RANGE:return fO.OUT_OF_RANGE;case OI.UNIMPLEMENTED:return fO.UNIMPLEMENTED;case OI.DATA_LOSS:return fO.DATA_LOSS;default:return iO()}}(RI=OI||(OI={}))[RI.OK=0]="OK",RI[RI.CANCELLED=1]="CANCELLED",RI[RI.UNKNOWN=2]="UNKNOWN",RI[RI.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",RI[RI.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",RI[RI.NOT_FOUND=5]="NOT_FOUND",RI[RI.ALREADY_EXISTS=6]="ALREADY_EXISTS",RI[RI.PERMISSION_DENIED=7]="PERMISSION_DENIED",RI[RI.UNAUTHENTICATED=16]="UNAUTHENTICATED",RI[RI.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",RI[RI.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",RI[RI.ABORTED=10]="ABORTED",RI[RI.OUT_OF_RANGE=11]="OUT_OF_RANGE",RI[RI.UNIMPLEMENTED=12]="UNIMPLEMENTED",RI[RI.INTERNAL=13]="INTERNAL",RI[RI.UNAVAILABLE=14]="UNAVAILABLE",RI[RI.DATA_LOSS=15]="DATA_LOSS";var kI=function(){function t(t,e){this.J=t,this.root=e||FI.EMPTY}return t.prototype.Ht=function(e,n){return new t(this.J,this.root.Ht(e,n,this.J).copy(null,null,FI.Jt,null,null))},t.prototype.remove=function(e){return new t(this.J,this.root.remove(e,this.J).copy(null,null,FI.Jt,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.nt();){var n=this.J(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.nt();){var r=this.J(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.nt=function(){return this.root.nt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.Yt=function(){return this.root.Yt()},t.prototype.Xt=function(){return this.root.Xt()},t.prototype.Zt=function(t){return this.root.Zt(t)},t.prototype.forEach=function(t){this.Zt((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.Zt((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.te=function(t){return this.root.te(t)},t.prototype.ee=function(){return new jI(this.root,null,this.J,!1)},t.prototype.ne=function(t){return new jI(this.root,t,this.J,!1)},t.prototype.se=function(){return new jI(this.root,null,this.J,!0)},t.prototype.ie=function(t){return new jI(this.root,t,this.J,!0)},t}(),jI=function(){function t(t,e,n,r){this.re=r,this.oe=[];for(var i=1;!t.nt();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.re?t.left:t.right;else{if(0===i){this.oe.push(t);break}this.oe.push(t),t=this.re?t.right:t.left}}return t.prototype.ce=function(){var t=this.oe.pop(),e={key:t.key,value:t.value};if(this.re)for(t=t.left;!t.nt();)this.oe.push(t),t=t.right;else for(t=t.right;!t.nt();)this.oe.push(t),t=t.left;return e},t.prototype.ae=function(){return this.oe.length>0},t.prototype.ue=function(){if(0===this.oe.length)return null;var t=this.oe[this.oe.length-1];return{key:t.key,value:t.value}},t}(),FI=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.nt=function(){return!1},t.prototype.Zt=function(t){return this.left.Zt(t)||t(this.key,this.value)||this.right.Zt(t)},t.prototype.te=function(t){return this.right.te(t)||t(this.key,this.value)||this.left.te(t)},t.prototype.min=function(){return this.left.nt()?this:this.left.min()},t.prototype.Yt=function(){return this.min().key},t.prototype.Xt=function(){return this.right.nt()?this.key:this.right.Xt()},t.prototype.Ht=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.Ht(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.Ht(t,e,n))).he()},t.prototype.le=function(){if(this.left.nt())return t.EMPTY;var e=this;return e.left._e()||e.left.left._e()||(e=e.fe()),(e=e.copy(null,null,null,e.left.le(),null)).he()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.nt()||i.left._e()||i.left.left._e()||(i=i.fe()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left._e()&&(i=i.de()),i.right.nt()||i.right._e()||i.right.left._e()||(i=i.we()),0===n(e,i.key)){if(i.right.nt())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.le())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.he()},t.prototype._e=function(){return this.color},t.prototype.he=function(){var t=this;return t.right._e()&&!t.left._e()&&(t=t.Ee()),t.left._e()&&t.left.left._e()&&(t=t.de()),t.left._e()&&t.right._e()&&(t=t.Te()),t},t.prototype.fe=function(){var t=this.Te();return t.right.left._e()&&(t=(t=(t=t.copy(null,null,null,null,t.right.de())).Ee()).Te()),t},t.prototype.we=function(){var t=this.Te();return t.left.left._e()&&(t=(t=t.de()).Te()),t},t.prototype.Ee=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.de=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Te=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ie=function(){var t=this.me();return Math.pow(2,t)<=this.size+1},t.prototype.me=function(){if(this._e()&&this.left._e())throw iO();if(this.right._e())throw iO();var t=this.left.me();if(t!==this.right.me())throw iO();return t+(this._e()?0:1)},t}();FI.EMPTY=null,FI.RED=!0,FI.Jt=!1,FI.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw iO()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw iO()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw iO()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw iO()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw iO()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.Ht=function(t,e,n){return new FI(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.nt=function(){return!0},t.prototype.Zt=function(t){return!1},t.prototype.te=function(t){return!1},t.prototype.Yt=function(){return null},t.prototype.Xt=function(){return null},t.prototype._e=function(){return!1},t.prototype.Ie=function(){return!0},t.prototype.me=function(){return 0},t}());var UI=function(){function t(t){this.J=t,this.data=new kI(this.J)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Yt()},t.prototype.last=function(){return this.data.Xt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Zt((function(e,n){return t(e),!1}))},t.prototype.Ae=function(t,e){for(var n=this.data.ne(t[0]);n.ae();){var r=n.ce();if(this.J(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Re=function(t,e){var n;for(n=void 0!==e?this.data.ne(e):this.data.ee();n.ae();)if(!t(n.ce().key))return},t.prototype.Pe=function(t){var e=this.data.ne(t);return e.ae()?e.ce().key:null},t.prototype.ee=function(){return new BI(this.data.ee())},t.prototype.ne=function(t){return new BI(this.data.ne(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).Ht(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.nt=function(){return this.data.nt()},t.prototype.ye=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.ee(),r=e.data.ee();n.ae();){var i=n.ce().key,o=r.ce().key;if(0!==this.J(i,o))return!1}return!0},t.prototype.rt=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.J);return n.data=e,n},t}(),BI=function(){function t(t){this.ge=t}return t.prototype.ce=function(){return this.ge.ce().key},t.prototype.ae=function(){return this.ge.ae()},t}(),zI=new kI(DO.J);function HI(){return zI}function VI(){return HI()}var GI=new kI(DO.J);function WI(){return GI}var qI=new kI(DO.J);function XI(){return qI}var ZI=new UI(DO.J);function KI(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=ZI,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var YI=new UI(uO);function $I(){return YI}var JI=function(){function t(t){this.J=t?function(e,n){return t(e,n)||DO.J(e.key,n.key)}:function(t,e){return DO.J(t.key,e.key)},this.Ve=WI(),this.pe=new kI(this.J)}return t.be=function(e){return new t(e.J)},t.prototype.has=function(t){return null!=this.Ve.get(t)},t.prototype.get=function(t){return this.Ve.get(t)},t.prototype.first=function(){return this.pe.Yt()},t.prototype.last=function(){return this.pe.Xt()},t.prototype.nt=function(){return this.pe.nt()},t.prototype.indexOf=function(t){var e=this.Ve.get(t);return e?this.pe.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.pe.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.pe.Zt((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Ve.Ht(t.key,t),e.pe.Ht(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Ve.remove(t),this.pe.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.pe.ee(),r=e.pe.ee();n.ae();){var i=n.ce().key,o=r.ce().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.J=this.J,r.Ve=e,r.pe=n,r},t}(),QI=function(){function t(){this.ve=new kI(DO.J)}return t.prototype.track=function(t){var e=t.doc.key,n=this.ve.get(e);n?0!==t.type&&3===n.type?this.ve=this.ve.Ht(e,t):3===t.type&&1!==n.type?this.ve=this.ve.Ht(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.ve=this.ve.Ht(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.ve=this.ve.Ht(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.ve=this.ve.remove(e):1===t.type&&2===n.type?this.ve=this.ve.Ht(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.ve=this.ve.Ht(e,{type:2,doc:t.doc}):iO():this.ve=this.ve.Ht(e,t)},t.prototype.Se=function(){var t=[];return this.ve.Zt((function(e,n){t.push(n)})),t},t}(),tL=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.De=n,this.docChanges=r,this.Ce=i,this.fromCache=o,this.xe=s,this.Ne=a}return t.Fe=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,JI.be(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Ce.nt()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.xe===t.xe&&this.Ce.isEqual(t.Ce)&&WR(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.De.isEqual(t.De)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),eL=function(){function t(t,e,n,r,i){this.Mt=t,this.Oe=e,this.ke=n,this.Me=r,this.Le=i}return t.$e=function(e,n){var r=new Map;return r.set(e,nL.Be(e,n)),new t(RO.min(),r,$I(),HI(),KI())},t}(),nL=function(){function t(t,e,n,r,i){this.resumeToken=t,this.qe=e,this.Ue=n,this.Qe=r,this.Ke=i}return t.Be=function(e,n){return new t(dO.h,n,KI(),KI(),KI())},t}(),rL=function(t,e,n,r){this.We=t,this.removedTargetIds=e,this.key=n,this.je=r},iL=function(t,e){this.targetId=t,this.Ge=e},oL=function(t,e,n,r){void 0===n&&(n=dO.h),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},sL=function(){function t(){this.ze=0,this.He=uL(),this.Je=dO.h,this.Ye=!1,this.Xe=!0}return Object.defineProperty(t.prototype,"qe",{get:function(){return this.Ye},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.Je},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ze",{get:function(){return 0!==this.ze},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tn",{get:function(){return this.Xe},enumerable:!1,configurable:!0}),t.prototype.en=function(t){t.o()>0&&(this.Xe=!0,this.Je=t)},t.prototype.nn=function(){var t=KI(),e=KI(),n=KI();return this.He.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:iO()}})),new nL(this.Je,this.Ye,t,e,n)},t.prototype.sn=function(){this.Xe=!1,this.He=uL()},t.prototype.rn=function(t,e){this.Xe=!0,this.He=this.He.Ht(t,e)},t.prototype.on=function(t){this.Xe=!0,this.He=this.He.remove(t)},t.prototype.cn=function(){this.ze+=1},t.prototype.an=function(){this.ze-=1},t.prototype.un=function(){this.Xe=!0,this.Ye=!0},t}(),aL=function(){function t(t){this.hn=t,this.ln=new Map,this._n=HI(),this.fn=cL(),this.dn=new UI(uO)}return t.prototype.wn=function(t){for(var e=0,n=t.We;e<n.length;e++){var r=n[e];t.je instanceof hR?this.En(r,t.je):t.je instanceof dR&&this.Tn(r,t.key,t.je)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.Tn(r=o[i],t.key,t.je)},t.prototype.In=function(t){var e=this;this.mn(t,(function(n){var r=e.An(n);switch(t.state){case 0:e.Rn(n)&&r.en(t.resumeToken);break;case 1:r.an(),r.Ze||r.sn(),r.en(t.resumeToken);break;case 2:r.an(),r.Ze||e.removeTarget(n);break;case 3:e.Rn(n)&&(r.un(),r.en(t.resumeToken));break;case 4:e.Rn(n)&&(e.Pn(n),r.en(t.resumeToken));break;default:iO()}}))},t.prototype.mn=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.ln.forEach((function(t,r){n.Rn(r)&&e(r)}))},t.prototype.yn=function(t){var e=t.targetId,n=t.Ge.count,r=this.gn(e);if(r){var i=r.target;if(vR(i))if(0===n){var o=new DO(i.path);this.Tn(e,o,new dR(o,RO.min()))}else oO(1===n);else this.Vn(e)!==n&&(this.Pn(e),this.dn=this.dn.add(e))}},t.prototype.pn=function(t){var e=this,n=new Map;this.ln.forEach((function(r,i){var o=e.gn(i);if(o){if(r.qe&&vR(o.target)){var s=new DO(o.target.path);null!==e._n.get(s)||e.bn(i,s)||e.Tn(i,s,new dR(s,t))}r.tn&&(n.set(i,r.nn()),r.sn())}}));var r=KI();this.fn.forEach((function(t,n){var i=!0;n.Re((function(t){var n=e.gn(t);return!n||2===n.kt||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new eL(t,n,this.dn,this._n,r);return this._n=HI(),this.fn=cL(),this.dn=new UI(uO),i},t.prototype.En=function(t,e){if(this.Rn(t)){var n=this.bn(t,e.key)?2:0;this.An(t).rn(e.key,n),this._n=this._n.Ht(e.key,e),this.fn=this.fn.Ht(e.key,this.vn(e.key).add(t))}},t.prototype.Tn=function(t,e,n){if(this.Rn(t)){var r=this.An(t);this.bn(t,e)?r.rn(e,1):r.on(e),this.fn=this.fn.Ht(e,this.vn(e).delete(t)),n&&(this._n=this._n.Ht(e,n))}},t.prototype.removeTarget=function(t){this.ln.delete(t)},t.prototype.Vn=function(t){var e=this.An(t).nn();return this.hn.Sn(t).size+e.Ue.size-e.Ke.size},t.prototype.cn=function(t){this.An(t).cn()},t.prototype.An=function(t){var e=this.ln.get(t);return e||(e=new sL,this.ln.set(t,e)),e},t.prototype.vn=function(t){var e=this.fn.get(t);return e||(e=new UI(uO),this.fn=this.fn.Ht(t,e)),e},t.prototype.Rn=function(t){var e=null!==this.gn(t);return e||tO("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.gn=function(t){var e=this.ln.get(t);return e&&e.Ze?null:this.hn.Dn(t)},t.prototype.Pn=function(t){var e=this;this.ln.set(t,new sL),this.hn.Sn(t).forEach((function(n){e.Tn(t,n,null)}))},t.prototype.bn=function(t,e){return this.hn.Sn(t).has(e)},t}();function cL(){return new kI(DO.J)}function uL(){return new kI(DO.J)}var lL={asc:"ASCENDING",desc:"DESCENDING"},hL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dL=function(t,e){this.T=t,this.qt=e};function fL(t,e){return t.qt?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function pL(t,e){return t.qt?e.toBase64():e.toUint8Array()}function mL(t,e){return fL(t,e.G())}function gL(t){return oO(!!t),RO.W(function(t){var e=zO(t);return new OO(e.seconds,e.nanos)}(t))}function yL(t,e){return function(t){return new LO(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).ot()}function vL(t){var e=LO.ct(t);return oO(zL(e)),e}function bL(t,e){return yL(t.T,e.path)}function _L(t,e){var n=vL(e);if(n.get(1)!==t.T.projectId)throw new pO(fO.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.T.projectId);if(n.get(3)!==t.T.database)throw new pO(fO.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.T.database);return new DO(EL(n))}function wL(t,e){return yL(t.T,e)}function xL(t){var e=vL(t);return 4===e.length?LO.at():EL(e)}function SL(t){return new LO(["projects",t.T.projectId,"databases",t.T.database]).ot()}function EL(t){return oO(t.length>4&&"documents"===t.get(4)),t.X(5)}function TL(t,e,n){return{name:bL(t,e),fields:n.proto.mapValue.fields}}function ML(t,e,n){var r=_L(t,e.name),i=gL(e.updateTime),o=new aR({mapValue:{fields:e.fields}});return new hR(r,i,o,{hasCommittedMutations:!!n})}function AL(t,e){var n;if(e instanceof SI)n={update:TL(t,e.key,e.value)};else if(e instanceof II)n={delete:bL(t,e.key)};else if(e instanceof EI)n={update:TL(t,e.key,e.data),updateMask:BL(e.zt)};else{if(!(e instanceof LI))return iO();n={verify:bL(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof oI)return{fieldPath:e.field.ot(),setToServerValue:"REQUEST_TIME"};if(n instanceof sI)return{fieldPath:e.field.ot(),appendMissingElements:{values:n.elements}};if(n instanceof cI)return{fieldPath:e.field.ot(),removeAllFromArray:{values:n.elements}};if(n instanceof lI)return{fieldPath:e.field.ot(),increment:n.Qt};throw iO()}(0,t)}))),e.Gt.jt||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:mL(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:iO()}(t,e.Gt)),n}function CL(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?mI.updateTime(gL(t.updateTime)):void 0!==t.exists?mI.exists(t.exists):mI.Wt()}(e.currentDocument):mI.Wt(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;"setToServerValue"in e?(oO("REQUEST_TIME"===e.setToServerValue),n=new oI):"appendMissingElements"in e?n=new sI(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new cI(e.removeAllFromArray.values||[]):"increment"in e?n=new lI(t,e.increment):iO();var r=NO._t(e.fieldPath);return new fI(r,n)}(t,e)})):[];if(e.update){var i=_L(t,e.update.name),o=new aR({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new UO((t.fieldPaths||[]).map((function(t){return NO._t(t)})))}(e.updateMask);return new EI(i,o,s,n,r)}return new SI(i,o,n,r)}if(e.delete){var a=_L(t,e.delete);return new II(a,n)}if(e.verify){var c=_L(t,e.verify);return new LI(c,n)}return iO()}function OL(t,e){return{documents:[wL(t,e.path)]}}function RL(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=wL(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=wL(t,r.Z()),n.structuredQuery.from=[{collectionId:r.et()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(oR(t.value))return{unaryFilter:{field:kL(t.field),op:"IS_NAN"}};if(iR(t.value))return{unaryFilter:{field:kL(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(oR(t.value))return{unaryFilter:{field:kL(t.field),op:"IS_NOT_NAN"}};if(iR(t.value))return{unaryFilter:{field:kL(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kL(t.field),op:DL(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:kL(t.field),direction:NL(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.qt||qO(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=LL(e.startAt)),e.endAt&&(n.structuredQuery.endAt=LL(e.endAt)),n}function IL(t){var e=xL(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){oO(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=function t(e){return e?void 0!==e.unaryFilter?[UL(e)]:void 0!==e.fieldFilter?[FL(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):iO():[]}(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return function(t){return new RR(jL(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var c=null;n.limit&&(c=function(t){var e;return qO(e="object"==typeof t?t.value:t)?null:e}(n.limit));var u=null;n.startAt&&(u=PL(n.startAt));var l=null;return n.endAt&&(l=PL(n.endAt)),DR(e,i,a,s,c,"F",u,l)}function LL(t){return{before:t.before,values:t.position}}function PL(t){return new CR(t.values||[],!!t.before)}function NL(t){return lL[t]}function DL(t){return hL[t]}function kL(t){return{fieldPath:t.ot()}}function jL(t){return NO._t(t.fieldPath)}function FL(t){return bR.create(jL(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return iO()}}(t.fieldFilter.op),t.fieldFilter.value)}function UL(t){switch(t.unaryFilter.op){case"IS_NAN":var e=jL(t.unaryFilter.field);return bR.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=jL(t.unaryFilter.field);return bR.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=jL(t.unaryFilter.field);return bR.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=jL(t.unaryFilter.field);return bR.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return iO()}}function BL(t){var e=[];return t.fields.forEach((function(t){return e.push(t.ot())})),{fieldPaths:e}}function zL(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var HL=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},VL=function(){function t(t){var e=this;this.Cn=null,this.xn=null,this.result=void 0,this.error=void 0,this.Nn=!1,this.Fn=!1,t((function(t){e.Nn=!0,e.result=t,e.Cn&&e.Cn(t)}),(function(t){e.Nn=!0,e.error=t,e.xn&&e.xn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Fn&&iO(),this.Fn=!0,this.Nn?this.error?this.On(n,this.error):this.kn(e,this.result):new t((function(t,i){r.Cn=function(n){r.kn(e,n).next(t,i)},r.xn=function(e){r.On(n,e).next(t,i)}}))},t.prototype.Mn=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.Ln=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.kn=function(e,n){return e?this.Ln((function(){return e(n)})):t.resolve(n)},t.prototype.On=function(e,n){return e?this.Ln((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.$n=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.Bn=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.$n(r)},t}(),GL=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.qn=new HL,this.transaction.oncomplete=function(){n.qn.resolve()},this.transaction.onabort=function(){e.error?n.qn.reject(new XL(t,e.error)):n.qn.resolve()},this.transaction.onerror=function(e){var r=JL(e.target.error);n.qn.reject(new XL(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new XL(n,e)}},Object.defineProperty(t.prototype,"Un",{get:function(){return this.qn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.qn.reject(t),this.aborted||(tO("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new KL(e)},t}(),WL=function(){function t(e,n,r){this.name=e,this.version=n,this.Qn=r,12.2===t.Kn(Object($E.h)())&&eO("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return tO("SimpleDb","Removing database:",t),YL(window.indexedDB.deleteDatabase(t)).Mn()},t.Wn=function(){if("undefined"==typeof indexedDB)return!1;if(t.jn())return!0;var e=Object($E.h)(),n=t.Kn(e),r=0<n&&n<10,i=t.Gn(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.jn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.zn)},t.Hn=function(t,e){return t.store(e)},t.Kn=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Gn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Jn=function(t){return Object($C.b)(this,void 0,void 0,(function(){var e,n=this;return Object($C.d)(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(tO("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new XL(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new pO(fO.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new XL(t,n))},i.onupgradeneeded=function(t){tO("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.Qn.Yn(t.target.result,i.transaction,t.oldVersion,n.version).next((function(){tO("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Xn&&(this.db.onversionchange=function(t){return n.Xn(t)}),this.db)]}}))}))},t.prototype.Zn=function(t){this.Xn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object($C.b)(this,void 0,void 0,(function(){var i,o,s,a,c;return Object($C.d)(this,(function(u){switch(u.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,c,u,l;return Object($C.d)(this,(function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.Jn(t)];case 2:return a.db=h.sent(),e=GL.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),VL.reject(t)})).Mn(),c={},s.catch((function(){})),[4,e.Un];case 3:return[2,(c.value=(h.sent(),s),c)];case 4:return tO("SimpleDb","Transaction failed with error:",(u=h.sent()).message,"Retrying:",l="FirebaseError"!==u.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(u)}];case 5:return[2]}}))},a=this,u.label=1;case 1:return[5,s()];case 2:if("object"==typeof(c=u.sent()))return[2,c.value];u.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),qL=function(){function t(t){this.ts=t,this.es=!1,this.ns=null}return Object.defineProperty(t.prototype,"Nn",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ss",{get:function(){return this.ns},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.ts=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.es=!0},t.prototype.rs=function(t){this.ns=t},t.prototype.delete=function(){return YL(this.ts.delete())},t}(),XL=function(t){function e(e,n){var r=this;return(r=t.call(this,fO.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object($C.c)(e,t),e}(pO);function ZL(t){return"IndexedDbTransactionError"===t.name}var KL=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(tO("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(tO("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),YL(n)},t.prototype.add=function(t){return tO("SimpleDb","ADD",this.store.name,t,t),YL(this.store.add(t))},t.prototype.get=function(t){var e=this;return YL(this.store.get(t)).next((function(n){return void 0===n&&(n=null),tO("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return tO("SimpleDb","DELETE",this.store.name,t),YL(this.store.delete(t))},t.prototype.count=function(){return tO("SimpleDb","COUNT",this.store.name),YL(this.store.count())},t.prototype.os=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.cs(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.us=function(t,e){tO("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.hs=!1;var r=this.cursor(n);return this.cs(r,(function(t,e,n){return n.delete()}))},t.prototype.ls=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.cs(r,e)},t.prototype._s=function(t){var e=this.cursor({});return new VL((function(n,r){e.onerror=function(t){var e=JL(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.cs=function(t,e){var n=[];return new VL((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new qL(i),s=e(i.primaryKey,i.value,o);if(s instanceof VL){var a=s.catch((function(t){return o.done(),VL.reject(t)}));n.push(a)}o.Nn?r():null===o.ss?i.continue():i.continue(o.ss)}else r()}})).next((function(){return VL.$n(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.hs?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function YL(t){return new VL((function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=JL(t.target.error);n(e)}}))}var $L=!1;function JL(t){var e=WL.Kn(Object($E.h)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new pO("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return $L||($L=!0,setTimeout((function(){throw r}),0)),r}}return t}var QL=function(){function t(t,e,n,r,i){this.fs=t,this.ds=e,this.ws=n,this.op=r,this.Es=i,this.Ts=new HL,this.then=this.Ts.promise.then.bind(this.Ts.promise),this.Ts.promise.catch((function(t){}))}return t.Is=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.As=setTimeout((function(){return e.Rs()}),t)},t.prototype.Ps=function(){return this.Rs()},t.prototype.cancel=function(t){null!==this.As&&(this.clearTimeout(),this.Ts.reject(new pO(fO.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.Rs=function(){var t=this;this.fs.ys((function(){return null!==t.As?(t.clearTimeout(),t.op().then((function(e){return t.Ts.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.As&&(this.Es(this),clearTimeout(this.As),this.As=null)},t}();function tP(t,e){if(eO("AsyncQueue",e+": "+t),ZL(t))return new pO(fO.UNAVAILABLE,e+": "+t);throw t}var eP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",nP=function(){function t(){this.gs=[]}return t.prototype.Vs=function(t){this.gs.push(t)},t.prototype.ps=function(){this.gs.forEach((function(t){return t()}))},t}();function rP(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=oP(e)),e=iP(t.get(n),e);return oP(e)}function iP(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function oP(t){return t+"\x01\x01"}function sP(t){var e=t.length;if(oO(e>=2),2===e)return oO("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),LO.at();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&iO(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),c=void 0;0===i.length?c=a:(c=i+=a,i=""),r.push(c);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:iO()}o=s+2}return new LO(r)}var aP=function(t,e){this.seconds=t,this.nanoseconds=e},cP=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};cP.store="owner",cP.key="owner";var uP=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};uP.store="mutationQueues",uP.keyPath="userId";var lP=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};lP.store="mutations",lP.keyPath="batchId",lP.userMutationsIndex="userMutationsIndex",lP.userMutationsKeyPath=["userId","batchId"];var hP=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,rP(e)]},t.key=function(t,e,n){return[t,rP(e),n]},t}();hP.store="documentMutations",hP.PLACEHOLDER=new hP;var dP=function(t,e){this.path=t,this.readTime=e},fP=function(t,e){this.path=t,this.version=e},pP=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};pP.store="remoteDocuments",pP.readTimeIndex="readTimeIndex",pP.readTimeIndexPath="readTime",pP.collectionReadTimeIndex="collectionReadTimeIndex",pP.collectionReadTimeIndexPath=["parentPath","readTime"];var mP=function(t){this.byteSize=t};mP.store="remoteDocumentGlobal",mP.key="remoteDocumentGlobalKey";var gP=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};gP.store="targets",gP.keyPath="targetId",gP.queryTargetsIndexName="queryTargetsIndex",gP.queryTargetsKeyPath=["canonicalId","targetId"];var yP=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};yP.store="targetDocuments",yP.keyPath=["targetId","path"],yP.documentTargetsIndex="documentTargetsIndex",yP.documentTargetsKeyPath=["path","targetId"];var vP=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};vP.key="targetGlobalKey",vP.store="targetGlobal";var bP=function(t,e){this.collectionId=t,this.parent=e};bP.store="collectionParents",bP.keyPath=["collectionId","parent"];var _P=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};_P.store="clientMetadata",_P.keyPath="clientId";var wP=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};wP.store="bundles",wP.keyPath="bundleId";var xP=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};xP.store="namedQueries",xP.keyPath="name";var SP=Object($C.g)(Object($C.g)(Object($C.g)(Object($C.g)([uP.store,lP.store,hP.store,pP.store,gP.store,cP.store,vP.store,yP.store],[_P.store]),[mP.store]),[bP.store]),[wP.store,xP.store]),EP=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).bs=e,r.vs=n,r}return Object($C.c)(e,t),e}(nP);function TP(t,e){var n=sO(t);return WL.Hn(n.bs,e)}var MP=function(){function t(t,e,n,r){this.batchId=t,this.Ss=e,this.baseMutations=n,this.mutations=r}return t.prototype.Ds=function(t,e,n){for(var r=n.Cs,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=vI(o,e,r[i]))}return e},t.prototype.xs=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=bI(s,e,0,this.Ss));for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(t)&&(e=bI(s,e,0,this.Ss))}return e},t.prototype.Ns=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.xs(r.key,t.get(r.key));i&&(n=n.Ht(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),KI())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&lO(this.mutations,t.mutations,(function(t,e){return wI(t,e)}))&&lO(this.baseMutations,t.baseMutations,(function(t,e){return wI(t,e)}))},t}(),AP=function(){function t(t,e,n,r){this.batch=t,this.Fs=e,this.Cs=n,this.Os=r}return t.from=function(e,n,r){oO(e.mutations.length===r.length);for(var i=XI(),o=e.mutations,s=0;s<o.length;s++)i=i.Ht(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),CP=function(t){this.ks=t};function OP(t,e){if(e.document)return ML(t.ks,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=DO.Tt(e.noDocument.path),r=NP(e.noDocument.readTime);return new dR(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=DO.Tt(e.unknownDocument.path);return r=NP(e.unknownDocument.version),new fR(i,r)}return iO()}function RP(t,e,n){var r=IP(n),i=e.key.path.Z().rt();if(e instanceof hR){var o=function(t,e){return{name:bL(t,e.key),fields:e.vt().mapValue.fields,updateTime:fL(t,e.version.G())}}(t.ks,e),s=e.hasCommittedMutations;return new pP(null,null,o,s,r,i)}if(e instanceof dR){var a=e.key.path.rt(),c=PP(e.version);return s=e.hasCommittedMutations,new pP(null,new dP(a,c),null,s,r,i)}if(e instanceof fR){var u=e.key.path.rt(),l=PP(e.version);return new pP(new fP(u,l),null,null,!0,r,i)}return iO()}function IP(t){var e=t.G();return[e.seconds,e.nanoseconds]}function LP(t){var e=new OO(t[0],t[1]);return RO.W(e)}function PP(t){var e=t.G();return new aP(e.seconds,e.nanoseconds)}function NP(t){var e=new OO(t.seconds,t.nanoseconds);return RO.W(e)}function DP(t,e){for(var n=(e.baseMutations||[]).map((function(e){return CL(t.ks,e)})),r=e.mutations.length-1;r>=0;--r){var i=e.mutations[r];void 0!==(null==i?void 0:i.transform)&&(e.mutations[r-1].updateTransforms=i.transform.fieldTransforms,e.mutations.splice(r,1),--r)}var o=e.mutations.map((function(e){return CL(t.ks,e)})),s=OO.fromMillis(e.localWriteTimeMs);return new MP(e.batchId,s,n,o)}function kP(t){var e,n,r=NP(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?NP(t.lastLimboFreeSnapshotVersion):RO.min();return void 0!==t.query.documents?(oO(1===(n=t.query).documents.length),e=VR(kR(xL(n.documents[0])))):e=function(t){return VR(IL(t))}(t.query),new $R(e,t.targetId,0,t.lastListenSequenceNumber,r,i,dO.fromBase64String(t.resumeToken))}function jP(t,e){var n,r=PP(e.Mt),i=PP(e.lastLimboFreeSnapshotVersion);n=vR(e.target)?OL(t.ks,e.target):RL(t.ks,e.target);var o=e.resumeToken.toBase64();return new gP(e.targetId,gR(e.target),r,o,e.sequenceNumber,i,n)}function FP(t){var e=IL({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?GR(e,e.limit,"L"):e}var UP=function(){function t(){}return t.prototype.Ms=function(t,e){return BP(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:NP(e.createTime),version:e.version};var e}))},t.prototype.Ls=function(t,e){return BP(t).put({bundleId:(n=e).id,createTime:PP(gL(n.createTime)),version:n.version});var n},t.prototype.$s=function(t,e){return zP(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:FP(e.bundledQuery),readTime:NP(e.readTime)};var e}))},t.prototype.Bs=function(t,e){return zP(t).put(function(t){return{name:t.name,readTime:PP(gL(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function BP(t){return TP(t,wP.store)}function zP(t){return TP(t,xP.store)}var HP=function(){function t(){this.qs=new VP}return t.prototype.Us=function(t,e){return this.qs.add(e),VL.resolve()},t.prototype.Qs=function(t,e){return VL.resolve(this.qs.getEntries(e))},t}(),VP=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.et(),n=t.Z(),r=this.index[e]||new UI(LO.J),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.et(),n=t.Z(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new UI(LO.J)).rt()},t}(),GP=function(){function t(){this.Ks=new VP}return t.prototype.Us=function(t,e){var n=this;if(!this.Ks.has(e)){var r=e.et(),i=e.Z();t.Vs((function(){n.Ks.add(e)}));var o={collectionId:r,parent:rP(i)};return WP(t).put(o)}return VL.resolve()},t.prototype.Qs=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[hO(e),""],!1,!0);return WP(t).os(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(sP(o.parent))}return n}))},t}();function WP(t){return TP(t,bP.store)}var qP={Ws:!1,js:0,Gs:0,zs:0},XP=function(){function t(t,e,n){this.Hs=t,this.Js=e,this.Ys=n}return t.Xs=function(e){return new t(e,t.Zs,t.ti)},t}();function ZP(t){return Object($C.b)(this,void 0,void 0,(function(){return Object($C.d)(this,(function(e){if(t.code!==fO.FAILED_PRECONDITION||t.message!==eP)throw t;return tO("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}XP.Zs=10,XP.ti=1e3,XP.ei=new XP(41943040,XP.Zs,XP.ti),XP.ni=new XP(-1,0,0);var KP=function(){function t(t,e){this.si=t,this.ii=e,this.ri={}}return t.prototype.get=function(t){var e=this.si(t),n=this.ri[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.ii(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.si(t),r=this.ri[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.ii(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.ri[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.si(t),n=this.ri[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.ii(n[r][0],t))return 1===n.length?delete this.ri[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){jO(this.ri,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}}))},t.prototype.nt=function(){return FO(this.ri)},t}(),YP=function(){function t(){this.oi=new KP((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.ci=!1}return t.prototype.ai=function(t){var e=this.oi.get(t);return e?e.readTime:RO.min()},t.prototype.ui=function(t,e){this.hi(),this.oi.set(t.key,{li:t,readTime:e})},t.prototype._i=function(t,e){void 0===e&&(e=null),this.hi(),this.oi.set(t,{li:null,readTime:e})},t.prototype.fi=function(t,e){this.hi();var n=this.oi.get(e);return void 0!==n?VL.resolve(n.li):this.di(t,e)},t.prototype.getEntries=function(t,e){return this.wi(t,e)},t.prototype.apply=function(t){return this.hi(),this.ci=!0,this.Ei(t)},t.prototype.hi=function(){},t}();function $P(t,e,n){var r=t.store(lP.store),i=t.store(hP.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,c=r.ls({range:s},(function(t,e,n){return a++,n.delete()}));o.push(c.next((function(){oO(1===a)})));for(var u=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],f=hP.key(e,d.key.path,n.batchId);o.push(i.delete(f)),u.push(d.key)}return VL.$n(o).next((function(){return u}))}function JP(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw iO();e=t.noDocument}return JSON.stringify(e).length}var QP=function(){function t(t,e,n,r){this.userId=t,this.Kt=e,this.Ti=n,this.Ii=r,this.mi={}}return t.Ai=function(e,n,r,i){return oO(""!==e.uid),new t(e.A()?e.uid:"",n,r,i)},t.prototype.Ri=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return eN(t).ls({index:lP.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Pi=function(t,e,n,r){var i=this,o=nN(t),s=eN(t);return s.add({}).next((function(a){oO("number"==typeof a);for(var c=new MP(a,e,n,r),u=function(t,e,n){var r=n.baseMutations.map((function(e){return AL(t.ks,e)})),i=n.mutations.map((function(e){return AL(t.ks,e)}));return new lP(e,n.batchId,n.Ss.toMillis(),r,i)}(i.Kt,i.userId,c),l=[],h=new UI((function(t,e){return uO(t.ot(),e.ot())})),d=0,f=r;d<f.length;d++){var p=f[d],m=hP.key(i.userId,p.key.path,a);h=h.add(p.key.path.Z()),l.push(s.put(u)),l.push(o.put(m,hP.PLACEHOLDER))}return h.forEach((function(e){l.push(i.Ti.Us(t,e))})),t.Vs((function(){i.mi[a]=c.keys()})),VL.$n(l).next((function(){return c}))}))},t.prototype.yi=function(t,e){var n=this;return eN(t).get(e).next((function(t){return t?(oO(t.userId===n.userId),DP(n.Kt,t)):null}))},t.prototype.gi=function(t,e){var n=this;return this.mi[e]?VL.resolve(this.mi[e]):this.yi(t,e).next((function(t){if(t){var r=t.keys();return n.mi[e]=r,r}return null}))},t.prototype.Vi=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return eN(t).ls({index:lP.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(oO(e.batchId>=r),o=DP(n.Kt,e)),i.done()})).next((function(){return o}))},t.prototype.pi=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return eN(t).ls({index:lP.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.bi=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return eN(t).os(lP.userMutationsIndex,n).next((function(t){return t.map((function(t){return DP(e.Kt,t)}))}))},t.prototype.vi=function(t,e){var n=this,r=hP.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return nN(t).ls({range:i},(function(r,i,s){var a=r[0],c=r[2],u=sP(r[1]);if(a===n.userId&&e.path.isEqual(u))return eN(t).get(c).next((function(t){if(!t)throw iO();oO(t.userId===n.userId),o.push(DP(n.Kt,t))}));s.done()})).next((function(){return o}))},t.prototype.Si=function(t,e){var n=this,r=new UI(uO),i=[];return e.forEach((function(e){var o=hP.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=nN(t).ls({range:s},(function(t,i,o){var s=t[0],a=t[2],c=sP(t[1]);s===n.userId&&e.path.isEqual(c)?r=r.add(a):o.done()}));i.push(a)})),VL.$n(i).next((function(){return n.Di(t,r)}))},t.prototype.Ci=function(t,e){var n=this,r=e.path,i=r.length+1,o=hP.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new UI(uO);return nN(t).ls({range:s},(function(t,e,o){var s=t[0],c=t[2],u=sP(t[1]);s===n.userId&&r.st(u)?u.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.Di(t,a)}))},t.prototype.Di=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(eN(t).get(e).next((function(t){if(null===t)throw iO();oO(t.userId===n.userId),r.push(DP(n.Kt,t))})))})),VL.$n(i).next((function(){return r}))},t.prototype.xi=function(t,e){var n=this;return $P(t.bs,this.userId,e).next((function(r){return t.Vs((function(){n.Ni(e.batchId)})),VL.forEach(r,(function(e){return n.Ii.Fi(t,e)}))}))},t.prototype.Ni=function(t){delete this.mi[t]},t.prototype.Oi=function(t){var e=this;return this.Ri(t).next((function(n){if(!n)return VL.resolve();var r=IDBKeyRange.lowerBound(hP.prefixForUser(e.userId)),i=[];return nN(t).ls({range:r},(function(t,n,r){if(t[0]===e.userId){var o=sP(t[1]);i.push(o)}else r.done()})).next((function(){oO(0===i.length)}))}))},t.prototype.ki=function(t,e){return tN(t,this.userId,e)},t.prototype.Mi=function(t){var e=this;return rN(t).get(this.userId).next((function(t){return t||new uP(e.userId,-1,"")}))},t}();function tN(t,e,n){var r=hP.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return nN(t).ls({range:o,hs:!0},(function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()})).next((function(){return s}))}function eN(t){return TP(t,lP.store)}function nN(t){return TP(t,hP.store)}function rN(t){return TP(t,uP.store)}var iN=function(){function t(t){this.Li=t}return t.prototype.next=function(){return this.Li+=2,this.Li},t.$i=function(){return new t(0)},t.Bi=function(){return new t(-1)},t}(),oN=function(){function t(t,e){this.Ii=t,this.Kt=e}return t.prototype.qi=function(t){var e=this;return this.Ui(t).next((function(n){var r=new iN(n.highestTargetId);return n.highestTargetId=r.next(),e.Qi(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Ki=function(t){return this.Ui(t).next((function(t){return RO.W(new OO(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.Wi=function(t){return this.Ui(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.ji=function(t,e,n){var r=this;return this.Ui(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.G()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Qi(t,i)}))},t.prototype.Gi=function(t,e){var n=this;return this.zi(t,e).next((function(){return n.Ui(t).next((function(r){return r.targetCount+=1,n.Hi(e,r),n.Qi(t,r)}))}))},t.prototype.Ji=function(t,e){return this.zi(t,e)},t.prototype.Yi=function(t,e){var n=this;return this.Xi(t,e.targetId).next((function(){return sN(t).delete(e.targetId)})).next((function(){return n.Ui(t)})).next((function(e){return oO(e.targetCount>0),e.targetCount-=1,n.Qi(t,e)}))},t.prototype.Zi=function(t,e,n){var r=this,i=0,o=[];return sN(t).ls((function(s,a){var c=kP(a);c.sequenceNumber<=e&&null===n.get(c.targetId)&&(i++,o.push(r.Yi(t,c)))})).next((function(){return VL.$n(o)})).next((function(){return i}))},t.prototype.mn=function(t,e){return sN(t).ls((function(t,n){var r=kP(n);e(r)}))},t.prototype.Ui=function(t){return aN(t).get(vP.key).next((function(t){return oO(null!==t),t}))},t.prototype.Qi=function(t,e){return aN(t).put(vP.key,e)},t.prototype.zi=function(t,e){return sN(t).put(jP(this.Kt,e))},t.prototype.Hi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.tr=function(t){return this.Ui(t).next((function(t){return t.targetCount}))},t.prototype.er=function(t,e){var n=gR(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return sN(t).ls({range:r,index:gP.queryTargetsIndexName},(function(t,n,r){var o=kP(n);yR(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.nr=function(t,e,n){var r=this,i=[],o=cN(t);return e.forEach((function(e){var s=rP(e.path);i.push(o.put(new yP(n,s))),i.push(r.Ii.sr(t,n,e))})),VL.$n(i)},t.prototype.ir=function(t,e,n){var r=this,i=cN(t);return VL.forEach(e,(function(e){var o=rP(e.path);return VL.$n([i.delete([n,o]),r.Ii.rr(t,n,e)])}))},t.prototype.Xi=function(t,e){var n=cN(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.cr=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=cN(t),i=KI();return r.ls({range:n,hs:!0},(function(t,e,n){var r=sP(t[1]),o=new DO(r);i=i.add(o)})).next((function(){return i}))},t.prototype.ki=function(t,e){var n=rP(e.path),r=IDBKeyRange.bound([n],[hO(n)],!1,!0),i=0;return cN(t).ls({index:yP.documentTargetsIndex,hs:!0,range:r},(function(t,e,n){0!==t[0]&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Dn=function(t,e){return sN(t).get(e).next((function(t){return t?kP(t):null}))},t}();function sN(t){return TP(t,gP.store)}function aN(t){return TP(t,vP.store)}function cN(t){return TP(t,yP.store)}function uN(t,e){var n=t[1],r=e[1],i=uO(t[0],e[0]);return 0===i?uO(n,r):i}var lN=function(){function t(t){this.ar=t,this.buffer=new UI(uN),this.ur=0}return t.prototype.hr=function(){return++this.ur},t.prototype.lr=function(t){var e=[t,this.hr()];if(this.buffer.size<this.ar)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();uN(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),hN=function(){function t(t,e){this._r=t,this.fs=e,this.dr=!1,this.wr=null}return t.prototype.start=function(t){-1!==this._r.params.Hs&&this.Er(t)},t.prototype.stop=function(){this.wr&&(this.wr.cancel(),this.wr=null)},Object.defineProperty(t.prototype,"Tr",{get:function(){return null!==this.wr},enumerable:!1,configurable:!0}),t.prototype.Er=function(t){var e=this,n=this.dr?3e5:6e4;tO("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.wr=this.fs.Ir("lru_garbage_collection",n,(function(){return Object($C.b)(e,void 0,void 0,(function(){var e;return Object($C.d)(this,(function(n){switch(n.label){case 0:this.wr=null,this.dr=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.mr(this._r)];case 2:return n.sent(),[3,7];case 3:return ZL(e=n.sent())?(tO("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,ZP(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.Er(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),dN=function(){function t(t,e){this.Ar=t,this.params=e}return t.prototype.Rr=function(t,e){return this.Ar.Pr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.yr=function(t,e){var n=this;if(0===e)return VL.resolve(CO.U);var r=new lN(e);return this.Ar.mn(t,(function(t){return r.lr(t.sequenceNumber)})).next((function(){return n.Ar.gr(t,(function(t){return r.lr(t)}))})).next((function(){return r.maxValue}))},t.prototype.Zi=function(t,e,n){return this.Ar.Zi(t,e,n)},t.prototype.Vr=function(t,e){return this.Ar.Vr(t,e)},t.prototype.pr=function(t,e){var n=this;return-1===this.params.Hs?(tO("LruGarbageCollector","Garbage collection skipped; disabled"),VL.resolve(qP)):this.br(t).next((function(r){return r<n.params.Hs?(tO("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.Hs),qP):n.vr(t,e)}))},t.prototype.br=function(t){return this.Ar.br(t)},t.prototype.vr=function(t,e){var n,r,i,o,s,a,c,u=this,l=Date.now();return this.Rr(t,this.params.Js).next((function(e){return e>u.params.Ys?(tO("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+u.params.Ys+" from "+e),r=u.params.Ys):r=e,o=Date.now(),u.yr(t,r)})).next((function(r){return n=r,s=Date.now(),u.Zi(t,n,e)})).next((function(e){return i=e,a=Date.now(),u.Vr(t,n)})).next((function(t){return c=Date.now(),QC()<=YE.a.DEBUG&&tO("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(c-a)+"ms\nTotal Duration: "+(c-l)+"ms"),VL.resolve({Ws:!0,js:r,Gs:i,zs:t})}))},t}(),fN=function(){function t(t,e){this.db=t,this._r=function(t,e){return new dN(t,e)}(this,e)}return t.prototype.Pr=function(t){var e=this.Sr(t);return this.db.Dr().tr(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Sr=function(t){var e=0;return this.gr(t,(function(t){e++})).next((function(){return e}))},t.prototype.mn=function(t,e){return this.db.Dr().mn(t,e)},t.prototype.gr=function(t,e){return this.Cr(t,(function(t,n){return e(n)}))},t.prototype.sr=function(t,e,n){return pN(t,n)},t.prototype.rr=function(t,e,n){return pN(t,n)},t.prototype.Zi=function(t,e,n){return this.db.Dr().Zi(t,e,n)},t.prototype.Fi=function(t,e){return pN(t,e)},t.prototype.Nr=function(t,e){return function(t,e){var n=!1;return rN(t)._s((function(r){return tN(t,r,e).next((function(t){return t&&(n=!0),VL.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.Vr=function(t,e){var n=this,r=this.db.Or().Fr(),i=[],o=0;return this.Cr(t,(function(s,a){if(a<=e){var c=n.Nr(t,s).next((function(e){if(!e)return o++,r.fi(t,s).next((function(){return r._i(s),cN(t).delete([0,rP(s.path)])}))}));i.push(c)}})).next((function(){return VL.$n(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.Lt(t.vs);return this.db.Dr().Ji(t,n)},t.prototype.kr=function(t,e){return pN(t,e)},t.prototype.Cr=function(t,e){var n,r=cN(t),i=CO.U;return r.ls({index:yP.documentTargetsIndex},(function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==CO.U&&e(new DO(sP(n)),i),i=s,n=o):i=CO.U})).next((function(){i!==CO.U&&e(new DO(sP(n)),i)}))},t.prototype.br=function(t){return this.db.Or().Mr(t)},t}();function pN(t,e){return cN(t).put(function(t,e){return new yP(0,rP(t.path),e)}(e,t.vs))}var mN=function(){function t(t,e){this.Kt=t,this.Ti=e}return t.prototype.ui=function(t,e,n){return vN(t).put(bN(e),n)},t.prototype._i=function(t,e){var n=vN(t),r=bN(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.Lr(t,r)}))},t.prototype.fi=function(t,e){var n=this;return vN(t).get(bN(e)).next((function(t){return n.$r(t)}))},t.prototype.Br=function(t,e){var n=this;return vN(t).get(bN(e)).next((function(t){var e=n.$r(t);return e?{li:e,size:JP(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=VI();return this.qr(t,e,(function(t,e){var i=n.$r(e);r=r.Ht(t,i)})).next((function(){return r}))},t.prototype.Ur=function(t,e){var n=this,r=VI(),i=new kI(DO.J);return this.qr(t,e,(function(t,e){var o=n.$r(e);o?(r=r.Ht(t,o),i=i.Ht(t,JP(e))):(r=r.Ht(t,null),i=i.Ht(t,0))})).next((function(){return{Qr:r,Kr:i}}))},t.prototype.qr=function(t,e,n){if(e.nt())return VL.resolve();var r=IDBKeyRange.bound(e.first().path.rt(),e.last().path.rt()),i=e.ee(),o=i.ce();return vN(t).ls({range:r},(function(t,e,r){for(var s=DO.Tt(t);o&&DO.J(o,s)<0;)n(o,null),o=i.ce();o&&o.isEqual(s)&&(n(o,e),o=i.ae()?i.ce():null),o?r.rs(o.path.rt()):r.done()})).next((function(){for(;o;)n(o,null),o=i.ae()?i.ce():null}))},t.prototype.Wr=function(t,e,n){var r=this,i=WI(),o=e.path.length+1,s={};if(n.isEqual(RO.min())){var a=e.path.rt();s.range=IDBKeyRange.lowerBound(a)}else{var c=e.path.rt(),u=IP(n);s.range=IDBKeyRange.lowerBound([c,u],!0),s.index=pP.collectionReadTimeIndex}return vN(t).ls(s,(function(t,n,s){if(t.length===o){var a=OP(r.Kt,n);e.path.st(a.key.path)?a instanceof hR&&ZR(e,a)&&(i=i.Ht(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.Fr=function(t){return new gN(this,!!t&&t.jr)},t.prototype.Mr=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return yN(t).get(mP.key).next((function(t){return oO(!!t),t}))},t.prototype.Lr=function(t,e){return yN(t).put(mP.key,e)},t.prototype.$r=function(t){if(t){var e=OP(this.Kt,t);return e instanceof dR&&e.version.isEqual(RO.min())?null:e}return null},t}(),gN=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Gr=e,r.jr=n,r.zr=new KP((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Object($C.c)(e,t),e.prototype.Ei=function(t){var e=this,n=[],r=0,i=new UI((function(t,e){return uO(t.ot(),e.ot())}));return this.oi.forEach((function(o,s){var a=e.zr.get(o);if(s.li){var c=RP(e.Gr.Kt,s.li,e.ai(o));i=i.add(o.path.Z());var u=JP(c);r+=u-a,n.push(e.Gr.ui(t,o,c))}else if(r-=a,e.jr){var l=RP(e.Gr.Kt,new dR(o,RO.min()),e.ai(o));n.push(e.Gr.ui(t,o,l))}else n.push(e.Gr._i(t,o))})),i.forEach((function(r){n.push(e.Gr.Ti.Us(t,r))})),n.push(this.Gr.updateMetadata(t,r)),VL.$n(n)},e.prototype.di=function(t,e){var n=this;return this.Gr.Br(t,e).next((function(t){return null===t?(n.zr.set(e,0),null):(n.zr.set(e,t.size),t.li)}))},e.prototype.wi=function(t,e){var n=this;return this.Gr.Ur(t,e).next((function(t){var e=t.Qr;return t.Kr.forEach((function(t,e){n.zr.set(t,e)})),e}))},e}(YP);function yN(t){return TP(t,mP.store)}function vN(t){return TP(t,pP.store)}function bN(t){return t.path.rt()}var _N=function(){function t(t){this.Kt=t}return t.prototype.Yn=function(t,e,n,r){var i=this;oO(n<r&&n>=0&&r<=11);var o=new GL("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(cP.store)}(t),function(t){t.createObjectStore(uP.store,{keyPath:uP.keyPath}),t.createObjectStore(lP.store,{keyPath:lP.keyPath,autoIncrement:!0}).createIndex(lP.userMutationsIndex,lP.userMutationsKeyPath,{unique:!0}),t.createObjectStore(hP.store)}(t),wN(t),function(t){t.createObjectStore(pP.store)}(t));var s=VL.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(yP.store),t.deleteObjectStore(gP.store),t.deleteObjectStore(vP.store)}(t),wN(t)),s=s.next((function(){return function(t){var e=t.store(vP.store),n=new vP(0,0,RO.min().G(),0);return e.put(vP.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(lP.store).os().next((function(n){t.deleteObjectStore(lP.store),t.createObjectStore(lP.store,{keyPath:lP.keyPath,autoIncrement:!0}).createIndex(lP.userMutationsIndex,lP.userMutationsKeyPath,{unique:!0});var r=e.store(lP.store),i=n.map((function(t){return r.put(t)}));return VL.$n(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(_P.store,{keyPath:_P.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.Hr(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(mP.store)}(t),i.Jr(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.Yr(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Xr(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(pP.store);e.createIndex(pP.readTimeIndex,pP.readTimeIndexPath,{unique:!1}),e.createIndex(pP.collectionReadTimeIndex,pP.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Zr(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(wP.store,{keyPath:wP.keyPath})}(t),function(t){t.createObjectStore(xP.store,{keyPath:xP.keyPath})}(t)}))),s},t.prototype.Jr=function(t){var e=0;return t.store(pP.store).ls((function(t,n){e+=JP(n)})).next((function(){var n=new mP(e);return t.store(mP.store).put(mP.key,n)}))},t.prototype.Hr=function(t){var e=this,n=t.store(uP.store),r=t.store(lP.store);return n.os().next((function(n){return VL.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.os(lP.userMutationsIndex,i).next((function(r){return VL.forEach(r,(function(r){oO(r.userId===n.userId);var i=DP(e.Kt,r);return $P(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.Yr=function(t){var e=t.store(yP.store),n=t.store(pP.store);return t.store(vP.store).get(vP.key).next((function(t){var r=[];return n.ls((function(n,i){var o=new LO(n),s=function(t){return[0,rP(t)]}(o);r.push(e.get(s).next((function(n){return n?VL.resolve():function(n){return e.put(new yP(0,rP(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return VL.$n(r)}))}))},t.prototype.Xr=function(t,e){t.createObjectStore(bP.store,{keyPath:bP.keyPath});var n=e.store(bP.store),r=new VP,i=function(t){if(r.add(t)){var e=t.et(),i=t.Z();return n.put({collectionId:e,parent:rP(i)})}};return e.store(pP.store).ls({hs:!0},(function(t,e){var n=new LO(t);return i(n.Z())})).next((function(){return e.store(hP.store).ls({hs:!0},(function(t,e){var n=sP(t[1]);return i(n.Z())}))}))},t.prototype.Zr=function(t){var e=this,n=t.store(gP.store);return n.ls((function(t,r){var i=kP(r),o=jP(e.Kt,i);return n.put(o)}))},t}();function wN(t){t.createObjectStore(yP.store,{keyPath:yP.keyPath}).createIndex(yP.documentTargetsIndex,yP.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(gP.store,{keyPath:gP.keyPath}).createIndex(gP.queryTargetsIndexName,gP.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(vP.store)}var xN="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",SN=function(){function t(e,n,r,i,o,s,a,c,u,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.eo=o,this.window=s,this.document=a,this.no=u,this.so=l,this.io=null,this.ro=!1,this.isPrimary=!1,this.networkEnabled=!0,this.oo=null,this.inForeground=!1,this.co=null,this.ao=null,this.uo=Number.NEGATIVE_INFINITY,this.ho=function(t){return Promise.resolve()},!t.Wn())throw new pO(fO.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Ii=new fN(this,i),this.lo=n+"main",this.Kt=new CP(c),this._o=new WL(this.lo,11,new _N(this.Kt)),this.fo=new oN(this.Ii,this.Kt),this.Ti=new GP,this.wo=function(t,e){return new mN(t,e)}(this.Kt,this.Ti),this.Eo=new UP,this.window&&this.window.localStorage?this.To=this.window.localStorage:(this.To=null,!1===l&&eO("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.Io().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new pO(fO.FAILED_PRECONDITION,xN);return t.mo(),t.Ao(),t.Ro(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.fo.Wi(e)}))})).then((function(e){t.io=new CO(e,t.no)})).then((function(){t.ro=!0})).catch((function(e){return t._o&&t._o.close(),Promise.reject(e)}))},t.prototype.Po=function(t){var e=this;return this.ho=function(n){return Object($C.b)(e,void 0,void 0,(function(){return Object($C.d)(this,(function(e){return this.Tr?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.yo=function(t){var e=this;this._o.Zn((function(n){return Object($C.b)(e,void 0,void 0,(function(){return Object($C.d)(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.Vo=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.eo.ys((function(){return Object($C.b)(e,void 0,void 0,(function(){return Object($C.d)(this,(function(t){switch(t.label){case 0:return this.Tr?[4,this.Io()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.Io=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return TN(e).put(new _P(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.po(e).next((function(e){e||(t.isPrimary=!1,t.eo.bo((function(){return t.ho(!1)})))}))})).next((function(){return t.vo(e)})).next((function(n){return t.isPrimary&&!n?t.So(e).next((function(){return!1})):!!n&&t.Do(e).next((function(){return!0}))}))})).catch((function(e){if(ZL(e))return tO("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return tO("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.eo.bo((function(){return t.ho(e)})),t.isPrimary=e}))},t.prototype.po=function(t){var e=this;return EN(t).get(cP.key).next((function(t){return VL.resolve(e.Co(t))}))},t.prototype.xo=function(t){return TN(t).delete(this.clientId)},t.prototype.No=function(){return Object($C.b)(this,void 0,void 0,(function(){var t,e,n,r=this;return Object($C.d)(this,(function(i){switch(i.label){case 0:return!this.isPrimary||this.Fo(this.uo,18e5)?[3,2]:(this.uo=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=TP(t,_P.store);return e.os().next((function(t){var n=r.Oo(t,18e5),i=t.filter((function(t){return-1===n.indexOf(t)}));return VL.forEach(i,(function(t){return e.delete(t.clientId)})).next((function(){return i}))}))})).catch((function(){return[]}))]);case 1:if(t=i.sent(),this.To)for(e=0,n=t;e<n.length;e++)this.To.removeItem(this.ko(n[e].clientId));i.label=2;case 2:return[2]}}))}))},t.prototype.Ro=function(){var t=this;this.ao=this.eo.Ir("client_metadata_refresh",4e3,(function(){return t.Io().then((function(){return t.No()})).then((function(){return t.Ro()}))}))},t.prototype.Co=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.vo=function(t){var e=this;return this.so?VL.resolve(!0):EN(t).get(cP.key).next((function(n){if(null!==n&&e.Fo(n.leaseTimestampMs,5e3)&&!e.Mo(n.ownerId)){if(e.Co(n)&&e.networkEnabled)return!0;if(!e.Co(n)){if(!n.allowTabSynchronization)throw new pO(fO.FAILED_PRECONDITION,xN);return!1}}return!(!e.networkEnabled||!e.inForeground)||TN(t).os().next((function(t){return void 0===e.Oo(t,5e3).find((function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))}))}))})).next((function(t){return e.isPrimary!==t&&tO("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.Lo=function(){return Object($C.b)(this,void 0,void 0,(function(){var t=this;return Object($C.d)(this,(function(e){switch(e.label){case 0:return this.ro=!1,this.$o(),this.ao&&(this.ao.cancel(),this.ao=null),this.Bo(),this.qo(),[4,this._o.runTransaction("shutdown","readwrite",[cP.store,_P.store],(function(e){var n=new EP(e,CO.U);return t.So(n).next((function(){return t.xo(n)}))}))];case 1:return e.sent(),this._o.close(),this.Uo(),[2]}}))}))},t.prototype.Oo=function(t,e){var n=this;return t.filter((function(t){return n.Fo(t.updateTimeMs,e)&&!n.Mo(t.clientId)}))},t.prototype.Qo=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return TN(e).os().next((function(e){return t.Oo(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"Tr",{get:function(){return this.ro},enumerable:!1,configurable:!0}),t.prototype.Ko=function(t){return QP.Ai(t,this.Kt,this.Ti,this.Ii)},t.prototype.Dr=function(){return this.fo},t.prototype.Or=function(){return this.wo},t.prototype.Wo=function(){return this.Ti},t.prototype.jo=function(){return this.Eo},t.prototype.runTransaction=function(t,e,n){var r,i=this;return tO("IndexedDbPersistence","Starting transaction:",t),this._o.runTransaction(t,"readonly"===e?"readonly":"readwrite",SP,(function(o){return r=new EP(o,i.io?i.io.next():CO.U),"readwrite-primary"===e?i.po(r).next((function(t){return!!t||i.vo(r)})).next((function(e){if(!e)throw eO("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.eo.bo((function(){return i.ho(!1)})),new pO(fO.FAILED_PRECONDITION,eP);return n(r)})).next((function(t){return i.Do(r).next((function(){return t}))})):i.Go(r).next((function(){return n(r)}))})).then((function(t){return r.ps(),t}))},t.prototype.Go=function(t){var e=this;return EN(t).get(cP.key).next((function(t){if(null!==t&&e.Fo(t.leaseTimestampMs,5e3)&&!e.Mo(t.ownerId)&&!e.Co(t)&&!(e.so||e.allowTabSynchronization&&t.allowTabSynchronization))throw new pO(fO.FAILED_PRECONDITION,xN)}))},t.prototype.Do=function(t){var e=new cP(this.clientId,this.allowTabSynchronization,Date.now());return EN(t).put(cP.key,e)},t.Wn=function(){return WL.Wn()},t.prototype.So=function(t){var e=this,n=EN(t);return n.get(cP.key).next((function(t){return e.Co(t)?(tO("IndexedDbPersistence","Releasing primary lease."),n.delete(cP.key)):VL.resolve()}))},t.prototype.Fo=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(eO("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.mo=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.co=function(){t.eo.ys((function(){return t.inForeground="visible"===t.document.visibilityState,t.Io()}))},this.document.addEventListener("visibilitychange",this.co),this.inForeground="visible"===this.document.visibilityState)},t.prototype.Bo=function(){this.co&&(this.document.removeEventListener("visibilitychange",this.co),this.co=null)},t.prototype.Ao=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.oo=function(){e.$o(),e.eo.ys((function(){return e.Lo()}))},this.window.addEventListener("unload",this.oo))},t.prototype.qo=function(){this.oo&&(this.window.removeEventListener("unload",this.oo),this.oo=null)},t.prototype.Mo=function(t){var e;try{var n=null!==(null===(e=this.To)||void 0===e?void 0:e.getItem(this.ko(t)));return tO("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return eO("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.$o=function(){if(this.To)try{this.To.setItem(this.ko(this.clientId),String(Date.now()))}catch(t){eO("Failed to set zombie client id.",t)}},t.prototype.Uo=function(){if(this.To)try{this.To.removeItem(this.ko(this.clientId))}catch(t){}},t.prototype.ko=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function EN(t){return TP(t,cP.store)}function TN(t){return TP(t,_P.store)}function MN(t,e){var n=t.projectId;return t.m||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var AN=function(t,e){this.progress=t,this.zo=e},CN=function(){function t(t,e,n){this.wo=t,this.Ho=e,this.Ti=n}return t.prototype.Jo=function(t,e){var n=this;return this.Ho.vi(t,e).next((function(r){return n.Yo(t,e,r)}))},t.prototype.Yo=function(t,e,n){return this.wo.fi(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].xs(e,t);return t}))},t.prototype.Xo=function(t,e,n){var r=VI();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].xs(t,e);r=r.Ht(t,e)})),r},t.prototype.Zo=function(t,e){var n=this;return this.wo.getEntries(t,e).next((function(e){return n.tc(t,e)}))},t.prototype.tc=function(t,e){var n=this;return this.Ho.Si(t,e).next((function(r){var i=n.Xo(t,e,r),o=HI();return i.forEach((function(t,e){e||(e=new dR(t,RO.min())),o=o.Ht(t,e)})),o}))},t.prototype.Wr=function(t,e,n){return function(t){return DO.Et(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.ec(t,e.path):zR(e)?this.nc(t,e,n):this.sc(t,e,n)},t.prototype.ec=function(t,e){return this.Jo(t,new DO(e)).next((function(t){var e=WI();return t instanceof hR&&(e=e.Ht(t.key,t)),e}))},t.prototype.nc=function(t,e,n){var r=this,i=e.collectionGroup,o=WI();return this.Ti.Qs(t,i).next((function(s){return VL.forEach(s,(function(s){var a=function(t,e){return new NR(e,null,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.sc(t,a,n).next((function(t){t.forEach((function(t,e){o=o.Ht(t,e)}))}))})).next((function(){return o}))}))},t.prototype.sc=function(t,e,n){var r,i,o=this;return this.wo.Wr(t,e,n).next((function(n){return r=n,o.Ho.Ci(t,e)})).next((function(e){return o.ic(t,i=e,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var c=a[s],u=c.key,l=bI(c,r.get(u),0,o.Ss);r=l instanceof hR?r.Ht(u,l):r.remove(u)}}))})).next((function(){return r.forEach((function(t,n){ZR(e,n)||(r=r.remove(t))})),r}))},t.prototype.ic=function(t,e,n){for(var r=KI(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var c=a[s];c instanceof EI&&null===n.get(c.key)&&(r=r.add(c.key))}var u=n;return this.wo.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof hR&&(u=u.Ht(t,e))})),u}))},t}(),ON=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.rc=n,this.oc=r}return t.cc=function(e,n){for(var r=KI(),i=KI(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),RN=function(){function t(){}return t.prototype.ac=function(t){this.uc=t},t.prototype.Wr=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.Nt.length||1===t.Nt.length&&t.Nt[0].field.ht())}(e)||n.isEqual(RO.min())?this.hc(t,e):this.uc.Zo(t,r).next((function(o){var s=i.lc(e,o);return(jR(e)||FR(e))&&i._c(e.limitType,s,r,n)?i.hc(t,e):(QC()<=YE.a.DEBUG&&tO("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),XR(e)),i.uc.Wr(t,e,n).next((function(t){return s.forEach((function(e){t=t.Ht(e.key,e)})),t})))}))},t.prototype.lc=function(t,e){var n=new UI(KR(t));return e.forEach((function(e,r){r instanceof hR&&ZR(t,r)&&(n=n.add(r))})),n},t.prototype._c=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.u(r)>0)},t.prototype.hc=function(t,e){return QC()<=YE.a.DEBUG&&tO("QueryEngine","Using full collection scan to execute query:",XR(e)),this.uc.Wr(t,e,RO.min())},t}(),IN=function(){function t(t,e,n,r){this.persistence=t,this.fc=e,this.Kt=r,this.dc=new kI(uO),this.wc=new KP((function(t){return gR(t)}),yR),this.Ec=RO.min(),this.Ho=t.Ko(n),this.Tc=t.Or(),this.fo=t.Dr(),this.Ic=new CN(this.Tc,this.Ho,this.persistence.Wo()),this.Eo=t.jo(),this.fc.ac(this.Ic)}return t.prototype.mr=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.pr(n,e.dc)}))},t}();function LN(t,e,n,r){return new IN(t,e,n,r)}function PN(t,e){return Object($C.b)(this,void 0,void 0,(function(){var n,r,i,o;return Object($C.d)(this,(function(s){switch(s.label){case 0:return n=sO(t),r=n.Ho,i=n.Ic,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n.Ho.bi(t).next((function(s){return o=s,r=n.persistence.Ko(e),i=new CN(n.Tc,r,n.persistence.Wo()),r.bi(t)})).next((function(e){for(var n=[],r=[],s=KI(),a=0,c=o;a<c.length;a++){var u=c[a];n.push(u.batchId);for(var l=0,h=u.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var d=0,f=e;d<f.length;d++){var p=f[d];r.push(p.batchId);for(var m=0,g=p.mutations;m<g.length;m++)s=s.add(g[m].key)}return i.Zo(t,s).next((function(t){return{mc:t,Ac:n,Rc:r}}))}))}))];case 1:return o=s.sent(),[2,(n.Ho=r,n.Ic=i,n.fc.ac(n.Ic),o)]}}))}))}function NN(t,e){var n=sO(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Tc.Fr({jr:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=VL.resolve();return o.forEach((function(t){s=s.next((function(){return r.fi(e,t)})).next((function(e){var o=e,s=n.Os.get(t);oO(null!==s),(!o||o.version.u(s)<0)&&(o=i.Ds(t,o,n))&&r.ui(o,n.Fs)}))})),s.next((function(){return t.Ho.xi(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.Ho.Oi(t)})).next((function(){return n.Ic.Zo(t,r)}))}))}function DN(t){var e=sO(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.fo.Ki(t)}))}function kN(t,e){var n=sO(t),r=e.Mt,i=n.dc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Tc.Fr({jr:!0});i=n.dc;var s=[];e.Oe.forEach((function(e,o){var a=i.get(o);if(a){s.push(n.fo.ir(t,e.Ke,o).next((function(){return n.fo.nr(t,e.Ue,o)})));var c=e.resumeToken;if(c.o()>0){var u=a.$t(c,r).Lt(t.vs);i=i.Ht(o,u),function(t,e,n){return oO(e.resumeToken.o()>0),0===t.resumeToken.o()||e.Mt.j()-t.Mt.j()>=3e8||n.Ue.size+n.Qe.size+n.Ke.size>0}(a,u,e)&&s.push(n.fo.Ji(t,u))}}}));var a=HI();if(e.Me.forEach((function(r,i){e.Le.has(r)&&s.push(n.persistence.Ii.kr(t,r))})),s.push(jN(t,o,e.Me,r,void 0).next((function(t){a=t}))),!r.isEqual(RO.min())){var c=n.fo.Ki(t).next((function(e){return n.fo.ji(t,t.vs,r)}));s.push(c)}return VL.$n(s).next((function(){return o.apply(t)})).next((function(){return n.Ic.tc(t,a)}))})).then((function(t){return n.dc=i,t}))}function jN(t,e,n,r,i){var o=KI();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=HI();return n.forEach((function(n,s){var a=t.get(n),c=(null==i?void 0:i.get(n))||r;s instanceof dR&&s.version.isEqual(RO.min())?(e._i(n,c),o=o.Ht(n,s)):null==a||s.version.u(a.version)>0||0===s.version.u(a.version)&&a.hasPendingWrites?(e.ui(s,c),o=o.Ht(n,s)):tO("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}function FN(t,e){var n=sO(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.Ho.Vi(t,e)}))}function UN(t,e){var n=sO(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.fo.er(t,e).next((function(i){return i?VL.resolve(r=i):n.fo.qi(t).next((function(i){return r=new $R(e,i,0,t.vs),n.fo.Gi(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.dc.get(t.targetId);return(null===r||t.Mt.u(r.Mt)>0)&&(n.dc=n.dc.Ht(t.targetId,t),n.wc.set(e,t.targetId)),t}))}function BN(t,e,n){return Object($C.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object($C.d)(this,(function(a){switch(a.label){case 0:r=sO(t),i=r.dc.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.Ii.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!ZL(s=a.sent()))throw s;return tO("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.dc=r.dc.remove(e),r.wc.delete(i.target),[2]}}))}))}function zN(t,e,n){var r=sO(t),i=RO.min(),o=KI();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=sO(t),i=r.wc.get(n);return void 0!==i?VL.resolve(r.dc.get(i)):r.fo.er(e,n)}(r,t,VR(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.fo.cr(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.fc.Wr(t,e,n?i:RO.min(),n?o:KI())})).next((function(t){return{documents:t,Pc:o}}))}))}function HN(t,e){var n=sO(t),r=sO(n.fo),i=n.dc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Dn(t,e).next((function(t){return t?t.target:null}))}))}function VN(t){var e=sO(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=sO(t),i=HI(),o=IP(n),s=vN(e),a=IDBKeyRange.lowerBound(o,!0);return s.ls({index:pP.readTimeIndex,range:a},(function(t,e){var n=OP(r.Kt,e);i=i.Ht(n.key,n),o=e.readTime})).next((function(){return{zo:i,readTime:LP(o)}}))}(e.Tc,t,e.Ec)})).then((function(t){var n=t.zo;return e.Ec=t.readTime,n}))}function GN(t){return Object($C.b)(this,void 0,void 0,(function(){var e;return Object($C.d)(this,(function(n){return[2,(e=sO(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=vN(t),n=RO.min();return e.ls({index:pP.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=LP(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.Ec=t}))]}))}))}function WN(t,e,n,r){return Object($C.b)(this,void 0,void 0,(function(){var i,o,s,a,c,u,l,h,d,f;return Object($C.d)(this,(function(p){switch(p.label){case 0:for(i=sO(t),o=KI(),s=HI(),a=XI(),c=0,u=n;c<u.length;c++)h=e.yc((l=u[c]).metadata.name),l.document&&(o=o.add(h)),s=s.Ht(h,e.gc(l)),a=a.Ht(h,e.Vc(l.metadata.readTime));return d=i.Tc.Fr({jr:!0}),[4,UN(i,function(t){return VR(kR(LO.ct("__bundle__/docs/"+t)))}(r))];case 1:return f=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return jN(t,d,s,RO.min(),a).next((function(e){return d.apply(t),e})).next((function(e){return i.fo.Xi(t,f.targetId).next((function(){return i.fo.nr(t,o,f.targetId)})).next((function(){return i.Ic.tc(t,e)}))}))}))]}}))}))}function qN(t,e,n){return void 0===n&&(n=KI()),Object($C.b)(this,void 0,void 0,(function(){var r,i;return Object($C.d)(this,(function(o){switch(o.label){case 0:return[4,UN(t,VR(FP(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=sO(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=gL(e.readTime);if(r.Mt.u(o)>=0)return i.Eo.Bs(t,e);var s=r.$t(dO.h,o);return i.dc=i.dc.Ht(s.targetId,s),i.fo.Ji(t,s).next((function(){return i.fo.Xi(t,r.targetId)})).next((function(){return i.fo.nr(t,n,r.targetId)})).next((function(){return i.Eo.Bs(t,e)}))}))]}}))}))}var XN=function(){function t(t){this.Kt=t,this.bc=new Map,this.vc=new Map}return t.prototype.Ms=function(t,e){return VL.resolve(this.bc.get(e))},t.prototype.Ls=function(t,e){var n;return this.bc.set(e.id,{id:(n=e).id,version:n.version,createTime:gL(n.createTime)}),VL.resolve()},t.prototype.$s=function(t,e){return VL.resolve(this.vc.get(e))},t.prototype.Bs=function(t,e){return this.vc.set(e.name,function(t){return{name:t.name,query:FP(t.bundledQuery),readTime:gL(t.readTime)}}(e)),VL.resolve()},t}(),ZN=function(){function t(){this.Sc=new UI(KN.Dc),this.Cc=new UI(KN.xc)}return t.prototype.nt=function(){return this.Sc.nt()},t.prototype.sr=function(t,e){var n=new KN(t,e);this.Sc=this.Sc.add(n),this.Cc=this.Cc.add(n)},t.prototype.Nc=function(t,e){var n=this;t.forEach((function(t){return n.sr(t,e)}))},t.prototype.rr=function(t,e){this.Fc(new KN(t,e))},t.prototype.Oc=function(t,e){var n=this;t.forEach((function(t){return n.rr(t,e)}))},t.prototype.kc=function(t){var e=this,n=new DO(new LO([])),r=new KN(n,t),i=new KN(n,t+1),o=[];return this.Cc.Ae([r,i],(function(t){e.Fc(t),o.push(t.key)})),o},t.prototype.Mc=function(){var t=this;this.Sc.forEach((function(e){return t.Fc(e)}))},t.prototype.Fc=function(t){this.Sc=this.Sc.delete(t),this.Cc=this.Cc.delete(t)},t.prototype.Lc=function(t){var e=new DO(new LO([])),n=new KN(e,t),r=new KN(e,t+1),i=KI();return this.Cc.Ae([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.ki=function(t){var e=new KN(t,0),n=this.Sc.Pe(e);return null!==n&&t.isEqual(n.key)},t}(),KN=function(){function t(t,e){this.key=t,this.$c=e}return t.Dc=function(t,e){return DO.J(t.key,e.key)||uO(t.$c,e.$c)},t.xc=function(t,e){return uO(t.$c,e.$c)||DO.J(t.key,e.key)},t}(),YN=function(){function t(t,e){this.Ti=t,this.Ii=e,this.Ho=[],this.Bc=1,this.qc=new UI(KN.Dc)}return t.prototype.Ri=function(t){return VL.resolve(0===this.Ho.length)},t.prototype.Pi=function(t,e,n,r){var i=this.Bc;this.Bc++;var o=new MP(i,e,n,r);this.Ho.push(o);for(var s=0,a=r;s<a.length;s++){var c=a[s];this.qc=this.qc.add(new KN(c.key,i)),this.Ti.Us(t,c.key.path.Z())}return VL.resolve(o)},t.prototype.yi=function(t,e){return VL.resolve(this.Uc(e))},t.prototype.Vi=function(t,e){var n=this.Qc(e+1),r=n<0?0:n;return VL.resolve(this.Ho.length>r?this.Ho[r]:null)},t.prototype.pi=function(){return VL.resolve(0===this.Ho.length?-1:this.Bc-1)},t.prototype.bi=function(t){return VL.resolve(this.Ho.slice())},t.prototype.vi=function(t,e){var n=this,r=new KN(e,0),i=new KN(e,Number.POSITIVE_INFINITY),o=[];return this.qc.Ae([r,i],(function(t){var e=n.Uc(t.$c);o.push(e)})),VL.resolve(o)},t.prototype.Si=function(t,e){var n=this,r=new UI(uO);return e.forEach((function(t){var e=new KN(t,0),i=new KN(t,Number.POSITIVE_INFINITY);n.qc.Ae([e,i],(function(t){r=r.add(t.$c)}))})),VL.resolve(this.Kc(r))},t.prototype.Ci=function(t,e){var n=e.path,r=n.length+1,i=n;DO.Et(i)||(i=i.child(""));var o=new KN(new DO(i),0),s=new UI(uO);return this.qc.Re((function(t){var e=t.key.path;return!!n.st(e)&&(e.length===r&&(s=s.add(t.$c)),!0)}),o),VL.resolve(this.Kc(s))},t.prototype.Kc=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.Uc(t);null!==r&&n.push(r)})),n},t.prototype.xi=function(t,e){var n=this;oO(0===this.Wc(e.batchId,"removed")),this.Ho.shift();var r=this.qc;return VL.forEach(e.mutations,(function(i){var o=new KN(i.key,e.batchId);return r=r.delete(o),n.Ii.Fi(t,i.key)})).next((function(){n.qc=r}))},t.prototype.Ni=function(t){},t.prototype.ki=function(t,e){var n=new KN(e,0),r=this.qc.Pe(n);return VL.resolve(e.isEqual(r&&r.key))},t.prototype.Oi=function(t){return VL.resolve()},t.prototype.Wc=function(t,e){return this.Qc(t)},t.prototype.Qc=function(t){return 0===this.Ho.length?0:t-this.Ho[0].batchId},t.prototype.Uc=function(t){var e=this.Qc(t);return e<0||e>=this.Ho.length?null:this.Ho[e]},t}(),$N=function(){function t(t,e){this.Ti=t,this.jc=e,this.docs=new kI(DO.J),this.size=0}return t.prototype.ui=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.jc(e);return this.docs=this.docs.Ht(r,{li:e,size:s,readTime:n}),this.size+=s-o,this.Ti.Us(t,r.path.Z())},t.prototype._i=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.fi=function(t,e){var n=this.docs.get(e);return VL.resolve(n?n.li:null)},t.prototype.getEntries=function(t,e){var n=this,r=VI();return e.forEach((function(t){var e=n.docs.get(t);r=r.Ht(t,e?e.li:null)})),VL.resolve(r)},t.prototype.Wr=function(t,e,n){for(var r=WI(),i=new DO(e.path.child("")),o=this.docs.ne(i);o.ae();){var s=o.ce(),a=s.value,c=a.li,u=a.readTime;if(!e.path.st(s.key.path))break;u.u(n)<=0||c instanceof hR&&ZR(e,c)&&(r=r.Ht(c.key,c))}return VL.resolve(r)},t.prototype.Gc=function(t,e){return VL.forEach(this.docs,(function(t){return e(t)}))},t.prototype.Fr=function(t){return new JN(this)},t.prototype.Mr=function(t){return VL.resolve(this.size)},t}(),JN=function(t){function e(e){var n=this;return(n=t.call(this)||this).Gr=e,n}return Object($C.c)(e,t),e.prototype.Ei=function(t){var e=this,n=[];return this.oi.forEach((function(r,i){i&&i.li?n.push(e.Gr.ui(t,i.li,e.ai(r))):e.Gr._i(r)})),VL.$n(n)},e.prototype.di=function(t,e){return this.Gr.fi(t,e)},e.prototype.wi=function(t,e){return this.Gr.getEntries(t,e)},e}(YP),QN=function(){function t(t){this.persistence=t,this.zc=new KP((function(t){return gR(t)}),yR),this.lastRemoteSnapshotVersion=RO.min(),this.highestTargetId=0,this.Hc=0,this.Jc=new ZN,this.targetCount=0,this.Yc=iN.$i()}return t.prototype.mn=function(t,e){return this.zc.forEach((function(t,n){return e(n)})),VL.resolve()},t.prototype.Ki=function(t){return VL.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Wi=function(t){return VL.resolve(this.Hc)},t.prototype.qi=function(t){return this.highestTargetId=this.Yc.next(),VL.resolve(this.highestTargetId)},t.prototype.ji=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Hc&&(this.Hc=e),VL.resolve()},t.prototype.zi=function(t){this.zc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Yc=new iN(e),this.highestTargetId=e),t.sequenceNumber>this.Hc&&(this.Hc=t.sequenceNumber)},t.prototype.Gi=function(t,e){return this.zi(e),this.targetCount+=1,VL.resolve()},t.prototype.Ji=function(t,e){return this.zi(e),VL.resolve()},t.prototype.Yi=function(t,e){return this.zc.delete(e.target),this.Jc.kc(e.targetId),this.targetCount-=1,VL.resolve()},t.prototype.Zi=function(t,e,n){var r=this,i=0,o=[];return this.zc.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.zc.delete(s),o.push(r.Xi(t,a.targetId)),i++)})),VL.$n(o).next((function(){return i}))},t.prototype.tr=function(t){return VL.resolve(this.targetCount)},t.prototype.er=function(t,e){var n=this.zc.get(e)||null;return VL.resolve(n)},t.prototype.nr=function(t,e,n){return this.Jc.Nc(e,n),VL.resolve()},t.prototype.ir=function(t,e,n){this.Jc.Oc(e,n);var r=this.persistence.Ii,i=[];return r&&e.forEach((function(e){i.push(r.Fi(t,e))})),VL.$n(i)},t.prototype.Xi=function(t,e){return this.Jc.kc(e),VL.resolve()},t.prototype.cr=function(t,e){var n=this.Jc.Lc(e);return VL.resolve(n)},t.prototype.ki=function(t,e){return VL.resolve(this.Jc.ki(e))},t}(),tD=function(){function t(t,e){var n=this;this.Xc={},this.io=new CO(0),this.ro=!1,this.ro=!0,this.Ii=t(this),this.fo=new QN(this),this.Ti=new HP,this.wo=function(t,e){return new $N(t,(function(t){return n.Ii.Zc(t)}))}(this.Ti),this.Kt=new CP(e),this.Eo=new XN(this.Kt)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.Lo=function(){return this.ro=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Tr",{get:function(){return this.ro},enumerable:!1,configurable:!0}),t.prototype.yo=function(){},t.prototype.Vo=function(){},t.prototype.Wo=function(){return this.Ti},t.prototype.Ko=function(t){var e=this.Xc[t.R()];return e||(e=new YN(this.Ti,this.Ii),this.Xc[t.R()]=e),e},t.prototype.Dr=function(){return this.fo},t.prototype.Or=function(){return this.wo},t.prototype.jo=function(){return this.Eo},t.prototype.runTransaction=function(t,e,n){var r=this;tO("MemoryPersistence","Starting transaction:",t);var i=new eD(this.io.next());return this.Ii.ta(),n(i).next((function(t){return r.Ii.ea(i).next((function(){return t}))})).Mn().then((function(t){return i.ps(),t}))},t.prototype.na=function(t,e){return VL.Bn(Object.values(this.Xc).map((function(n){return function(){return n.ki(t,e)}})))},t}(),eD=function(t){function e(e){var n=this;return(n=t.call(this)||this).vs=e,n}return Object($C.c)(e,t),e}(nP),nD=function(){function t(t){this.persistence=t,this.sa=new ZN,this.ia=null}return t.ra=function(e){return new t(e)},Object.defineProperty(t.prototype,"oa",{get:function(){if(this.ia)return this.ia;throw iO()},enumerable:!1,configurable:!0}),t.prototype.sr=function(t,e,n){return this.sa.sr(n,e),this.oa.delete(n.toString()),VL.resolve()},t.prototype.rr=function(t,e,n){return this.sa.rr(n,e),this.oa.add(n.toString()),VL.resolve()},t.prototype.Fi=function(t,e){return this.oa.add(e.toString()),VL.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.sa.kc(e.targetId).forEach((function(t){return n.oa.add(t.toString())}));var r=this.persistence.Dr();return r.cr(t,e.targetId).next((function(t){t.forEach((function(t){return n.oa.add(t.toString())}))})).next((function(){return r.Yi(t,e)}))},t.prototype.ta=function(){this.ia=new Set},t.prototype.ea=function(t){var e=this,n=this.persistence.Or().Fr();return VL.forEach(this.oa,(function(r){var i=DO.ft(r);return e.ca(t,i).next((function(t){t||n._i(i)}))})).next((function(){return e.ia=null,n.apply(t)}))},t.prototype.kr=function(t,e){var n=this;return this.ca(t,e).next((function(t){t?n.oa.delete(e.toString()):n.oa.add(e.toString())}))},t.prototype.Zc=function(t){return 0},t.prototype.ca=function(t,e){var n=this;return VL.Bn([function(){return VL.resolve(n.sa.ki(e))},function(){return n.persistence.Dr().ki(t,e)},function(){return n.persistence.na(t,e)}])},t}();function rD(t,e){return"firestore_clients_"+t+"_"+e}function iD(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.A()&&(r+="_"+e.uid),r}function oD(t,e){return"firestore_targets_"+t+"_"+e}var sD=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.aa=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new pO(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(eO("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.ua=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),aD=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.aa=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new pO(r.error.code,r.error.message)),i?new t(e,r.state,o):(eO("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.ua=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),cD=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.aa=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=$I(),s=0;i&&s<r.activeTargetIds.length;++s)i=ZO(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(eO("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),uD=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.aa=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(eO("SharedClientState","Failed to parse online state: "+e),null)},t}(),lD=function(){function t(){this.activeTargetIds=$I()}return t.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.la=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.ua=function(){var t={activeTargetIds:this.activeTargetIds.rt(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),hD=function(){function t(t,e,n,r,i){this.window=t,this.eo=e,this.persistenceKey=n,this._a=r,this.fa=null,this.da=null,this.L=null,this.wa=this.Ea.bind(this),this.Ta=new kI(uO),this.Tr=!1,this.Ia=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ma=rD(this.persistenceKey,this._a),this.Aa=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Ta=this.Ta.Ht(this._a,new lD),this.Ra=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Pa=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.ya=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.ga=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Va=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.wa)}return t.Wn=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object($C.b)(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,c,u,l=this;return Object($C.d)(this,(function(h){switch(h.label){case 0:return[4,this.fa.Qo()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this._a&&(i=this.getItem(rD(this.persistenceKey,r)))&&(o=cD.aa(r,i))&&(this.Ta=this.Ta.Ht(o.clientId,o));for(this.pa(),(s=this.storage.getItem(this.ga))&&(a=this.ba(s))&&this.va(a),c=0,u=this.Ia;c<u.length;c++)this.Ea(u[c]);return this.Ia=[],this.window.addEventListener("unload",(function(){return l.Lo()})),this.Tr=!0,[2]}}))}))},t.prototype.q=function(t){this.setItem(this.Aa,JSON.stringify(t))},t.prototype.Sa=function(){return this.Da(this.Ta)},t.prototype.Ca=function(t){var e=!1;return this.Ta.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.xa=function(t){this.Na(t,"pending")},t.prototype.Fa=function(t,e,n){this.Na(t,e,n),this.Oa(t)},t.prototype.ka=function(t){var e="not-current";if(this.Ca(t)){var n=this.storage.getItem(oD(this.persistenceKey,t));if(n){var r=aD.aa(t,n);r&&(e=r.state)}}return this.Ma.ha(t),this.pa(),e},t.prototype.La=function(t){this.Ma.la(t),this.pa()},t.prototype.$a=function(t){return this.Ma.activeTargetIds.has(t)},t.prototype.Ba=function(t){this.removeItem(oD(this.persistenceKey,t))},t.prototype.qa=function(t,e,n){this.Ua(t,e,n)},t.prototype.Qa=function(t,e,n){var r=this;e.forEach((function(t){r.Oa(t)})),this.currentUser=t,n.forEach((function(t){r.xa(t)}))},t.prototype.Ka=function(t){this.Wa(t)},t.prototype.ja=function(){this.Ga()},t.prototype.Lo=function(){this.Tr&&(this.window.removeEventListener("storage",this.wa),this.removeItem(this.ma),this.Tr=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return tO("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){tO("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){tO("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Ea=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(tO("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ma)return void eO("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.eo.bo((function(){return Object($C.b)(e,void 0,void 0,(function(){var t,e,r,i,o,s;return Object($C.d)(this,(function(a){if(this.Tr){if(null!==n.key)if(this.Ra.test(n.key)){if(null==n.newValue)return t=this.za(n.key),[2,this.Ha(t,null)];if(e=this.Ja(n.key,n.newValue))return[2,this.Ha(e.clientId,e)]}else if(this.Pa.test(n.key)){if(null!==n.newValue&&(r=this.Ya(n.key,n.newValue)))return[2,this.Xa(r)]}else if(this.ya.test(n.key)){if(null!==n.newValue&&(i=this.Za(n.key,n.newValue)))return[2,this.tu(i)]}else if(n.key===this.ga){if(null!==n.newValue&&(o=this.ba(n.newValue)))return[2,this.va(o)]}else if(n.key===this.Aa)(s=function(t){var e=CO.U;if(null!=t)try{var n=JSON.parse(t);oO("number"==typeof n),e=n}catch(t){eO("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==CO.U&&this.L(s);else if(n.key===this.Va)return[2,this.fa.eu()]}else this.Ia.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Ma",{get:function(){return this.Ta.get(this._a)},enumerable:!1,configurable:!0}),t.prototype.pa=function(){this.setItem(this.ma,this.Ma.ua())},t.prototype.Na=function(t,e,n){var r=new sD(this.currentUser,t,e,n),i=iD(this.persistenceKey,this.currentUser,t);this.setItem(i,r.ua())},t.prototype.Oa=function(t){var e=iD(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Wa=function(t){this.storage.setItem(this.ga,JSON.stringify({clientId:this._a,onlineState:t}))},t.prototype.Ua=function(t,e,n){var r=oD(this.persistenceKey,t),i=new aD(t,e,n);this.setItem(r,i.ua())},t.prototype.Ga=function(){this.setItem(this.Va,"value-not-used")},t.prototype.za=function(t){var e=this.Ra.exec(t);return e?e[1]:null},t.prototype.Ja=function(t,e){var n=this.za(t);return cD.aa(n,e)},t.prototype.Ya=function(t,e){var n=this.Pa.exec(t),r=Number(n[1]);return sD.aa(new xO(void 0!==n[2]?n[2]:null),r,e)},t.prototype.Za=function(t,e){var n=this.ya.exec(t),r=Number(n[1]);return aD.aa(r,e)},t.prototype.ba=function(t){return uD.aa(t)},t.prototype.Xa=function(t){return Object($C.b)(this,void 0,void 0,(function(){return Object($C.d)(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.fa.nu(t.batchId,t.state,t.error)]:(tO("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.tu=function(t){return this.fa.su(t.targetId,t.state,t.error)},t.prototype.Ha=function(t,e){var n=this,r=e?this.Ta.Ht(t,e):this.Ta.remove(t),i=this.Da(this.Ta),o=this.Da(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.fa.iu(s,a).then((function(){n.Ta=r}))},t.prototype.va=function(t){this.Ta.get(t.clientId)&&this.da(t.onlineState)},t.prototype.Da=function(t){var e=$I();return t.forEach((function(t,n){e=e.ye(n.activeTargetIds)})),e},t}(),dD=function(){function t(){this.ru=new lD,this.ou={},this.da=null,this.L=null}return t.prototype.xa=function(t){},t.prototype.Fa=function(t,e,n){},t.prototype.ka=function(t){return this.ru.ha(t),this.ou[t]||"not-current"},t.prototype.qa=function(t,e,n){this.ou[t]=e},t.prototype.La=function(t){this.ru.la(t)},t.prototype.$a=function(t){return this.ru.activeTargetIds.has(t)},t.prototype.Ba=function(t){delete this.ou[t]},t.prototype.Sa=function(){return this.ru.activeTargetIds},t.prototype.Ca=function(t){return this.ru.activeTargetIds.has(t)},t.prototype.start=function(){return this.ru=new lD,Promise.resolve()},t.prototype.Qa=function(t,e,n){},t.prototype.Ka=function(t){},t.prototype.Lo=function(){},t.prototype.q=function(t){},t.prototype.ja=function(){},t}(),fD=function(){function t(){}return t.prototype.cu=function(t){},t.prototype.Lo=function(){},t}(),pD=function(){function t(){var t=this;this.au=function(){return t.uu()},this.hu=function(){return t.lu()},this._u=[],this.fu()}return t.prototype.cu=function(t){this._u.push(t)},t.prototype.Lo=function(){window.removeEventListener("online",this.au),window.removeEventListener("offline",this.hu)},t.prototype.fu=function(){window.addEventListener("online",this.au),window.addEventListener("offline",this.hu)},t.prototype.uu=function(){tO("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this._u;t<e.length;t++)(0,e[t])(0)},t.prototype.lu=function(){tO("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this._u;t<e.length;t++)(0,e[t])(1)},t.Wn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),mD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},gD=function(){function t(t){this.du=t.du,this.wu=t.wu}return t.prototype.Eu=function(t){this.Tu=t},t.prototype.Iu=function(t){this.mu=t},t.prototype.onMessage=function(t){this.Au=t},t.prototype.close=function(){this.wu()},t.prototype.send=function(t){this.du(t)},t.prototype.Ru=function(){this.Tu()},t.prototype.Pu=function(t){this.mu(t)},t.prototype.yu=function(t){this.Au(t)},t}(),yD=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.I=e.I,n}return Object($C.c)(e,t),e.prototype.Du=function(t,e,n,r){return new Promise((function(i,o){var s=new YC;s.listenOnce(XC.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case qC.NO_ERROR:var e=s.getResponseJson();tO("Connection","XHR received:",JSON.stringify(e)),i(e);break;case qC.TIMEOUT:tO("Connection",'RPC "'+t+'" timed out'),o(new pO(fO.DEADLINE_EXCEEDED,"Request time out"));break;case qC.HTTP_ERROR:var n=s.getStatus();if(tO("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(fO).indexOf(e)>=0?e:fO.UNKNOWN}(r.status);o(new pO(a,r.message))}else o(new pO(fO.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new pO(fO.UNAVAILABLE,"Connection failed."));break;default:iO()}}finally{tO("Connection",'RPC "'+t+'" completed.')}}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.xu=function(t,e){var n=[this.Vu,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new zC,i=GM(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.T.projectId+"/databases/"+this.T.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.I};this.Su(o.initMessageHeaders,e),Object($E.m)()||Object($E.o)()||Object($E.k)()||Object($E.l)()||Object($E.p)()||Object($E.j)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");tO("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),c=!1,u=!1,l=new gD({du:function(t){u?tO("Connection","Not sending because WebChannel is closed:",t):(c||(tO("Connection","Opening WebChannel transport."),a.open(),c=!0),tO("Connection","WebChannel sending:",t),a.send(t))},wu:function(){return a.close()}}),h=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return h(a,KC.EventType.OPEN,(function(){u||tO("Connection","WebChannel transport opened.")})),h(a,KC.EventType.CLOSE,(function(){u||(u=!0,tO("Connection","WebChannel transport closed"),l.Pu())})),h(a,KC.EventType.ERROR,(function(t){u||(u=!0,nO("Connection","WebChannel transport errored:",t),l.Pu(new pO(fO.UNAVAILABLE,"The operation could not be completed")))})),h(a,KC.EventType.MESSAGE,(function(t){var e;if(!u){var n=t.data[0];oO(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){tO("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=OI[t];if(void 0!==e)return DI(e)}(i),s=r.message;void 0===o&&(o=fO.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),u=!0,l.Pu(new pO(o,s)),a.close()}else tO("Connection","WebChannel received:",n),l.yu(n)}})),h(i,ZC.STAT_EVENT,(function(t){10===t.stat?tO("Connection","Detected buffering proxy"):11===t.stat&&tO("Connection","Detected no buffering proxy")})),setTimeout((function(){l.Ru()}),0),l},e}(function(){function t(t){this.gu=t,this.T=t.T,this.Vu=(t.ssl?"https":"http")+"://"+t.host,this.pu="projects/"+this.T.projectId+"/databases/"+this.T.database+"/documents"}return t.prototype.bu=function(t,e,n,r){var i=this.vu(t,e);tO("RestConnection","Sending: ",i,n);var o={};return this.Su(o,r),this.Du(t,i,o,n).then((function(t){return tO("RestConnection","Received: ",t),t}),(function(e){throw nO("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Cu=function(t,e,n,r){return this.bu(t,e,n,r)},t.prototype.Su=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.5",t["Content-Type"]="text/plain",e)for(var n in e.V)e.V.hasOwnProperty(n)&&(t[n]=e.V[n])},t.prototype.vu=function(t,e){return this.Vu+"/v1/"+e+":"+mD[t]},t}());function vD(){return"undefined"!=typeof window?window:null}function bD(){return"undefined"!=typeof document?document:null}function _D(t){return new dL(t,!0)}var wD=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.eo=t,this.ds=e,this.Nu=n,this.Fu=r,this.Ou=i,this.ku=0,this.Mu=null,this.Lu=Date.now(),this.reset()}return t.prototype.reset=function(){this.ku=0},t.prototype.$u=function(){this.ku=this.Ou},t.prototype.Bu=function(t){var e=this;this.cancel();var n=Math.floor(this.ku+this.qu()),r=Math.max(0,Date.now()-this.Lu),i=Math.max(0,n-r);i>0&&tO("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.ku+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Mu=this.eo.Ir(this.ds,i,(function(){return e.Lu=Date.now(),t()})),this.ku*=this.Fu,this.ku<this.Nu&&(this.ku=this.Nu),this.ku>this.Ou&&(this.ku=this.Ou)},t.prototype.Uu=function(){null!==this.Mu&&(this.Mu.Ps(),this.Mu=null)},t.prototype.cancel=function(){null!==this.Mu&&(this.Mu.cancel(),this.Mu=null)},t.prototype.qu=function(){return(Math.random()-.5)*this.ku},t}(),xD=function(){function t(t,e,n,r,i,o){this.eo=t,this.Qu=n,this.Ku=r,this.Wu=i,this.listener=o,this.state=0,this.ju=0,this.Gu=null,this.stream=null,this.zu=new wD(t,e)}return t.prototype.Hu=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Ju=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Yu()},t.prototype.stop=function(){return Object($C.b)(this,void 0,void 0,(function(){return Object($C.d)(this,(function(t){switch(t.label){case 0:return this.Hu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.Xu=function(){this.state=0,this.zu.reset()},t.prototype.Zu=function(){var t=this;this.Ju()&&null===this.Gu&&(this.Gu=this.eo.Ir(this.Qu,6e4,(function(){return t.th()})))},t.prototype.eh=function(t){this.nh(),this.stream.send(t)},t.prototype.th=function(){return Object($C.b)(this,void 0,void 0,(function(){return Object($C.d)(this,(function(t){return this.Ju()?[2,this.close(0)]:[2]}))}))},t.prototype.nh=function(){this.Gu&&(this.Gu.cancel(),this.Gu=null)},t.prototype.close=function(t,e){return Object($C.b)(this,void 0,void 0,(function(){return Object($C.d)(this,(function(n){switch(n.label){case 0:return this.nh(),this.zu.cancel(),this.ju++,3!==t?this.zu.reset():e&&e.code===fO.RESOURCE_EXHAUSTED?(eO(e.toString()),eO("Using maximum backoff delay to prevent overloading the backend."),this.zu.$u()):e&&e.code===fO.UNAUTHENTICATED&&this.Wu.v(),null!==this.stream&&(this.sh(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Iu(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.sh=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.ih(this.ju),n=this.ju;this.Wu.getToken().then((function(e){t.ju===n&&t.rh(e)}),(function(n){e((function(){var e=new pO(fO.UNKNOWN,"Fetching auth token failed: "+n.message);return t.oh(e)}))}))},t.prototype.rh=function(t){var e=this,n=this.ih(this.ju);this.stream=this.ah(t),this.stream.Eu((function(){n((function(){return e.state=2,e.listener.Eu()}))})),this.stream.Iu((function(t){n((function(){return e.oh(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.Yu=function(){var t=this;this.state=4,this.zu.Bu((function(){return Object($C.b)(t,void 0,void 0,(function(){return Object($C.d)(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.oh=function(t){return tO("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.ih=function(t){var e=this;return function(n){e.eo.ys((function(){return e.ju===t?n():(tO("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),SD=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).Kt=i,s}return Object($C.c)(e,t),e.prototype.ah=function(t){return this.Ku.xu("Listen",t)},e.prototype.onMessage=function(t){this.zu.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:iO()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.qt?(oO(void 0===e||"string"==typeof e),dO.fromBase64String(e||"")):(oO(void 0===e||e instanceof Uint8Array),dO.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?fO.UNKNOWN:DI(t.code);return new pO(e,t.message||"")}(a);n=new oL(r,i,o,s||null)}else if("documentChange"in e){i=_L(t,(r=e.documentChange).document.name),o=gL(r.document.updateTime);var a=new aR({mapValue:{fields:r.document.fields}}),c=(s=new hR(i,o,a,{}),r.targetIds||[]);n=new rL(c,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=_L(t,(r=e.documentDelete).document),o=r.readTime?gL(r.readTime):RO.min(),a=new dR(i,o),n=new rL([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=_L(t,(r=e.documentRemove).document),n=new rL([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return iO();var u=e.filter;i=new PI(r=u.count||0),n=new iL(o=u.targetId,i)}return n}(this.Kt,t),n=function(t){if(!("targetChange"in t))return RO.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?RO.min():e.readTime?gL(e.readTime):RO.min()}(t);return this.listener.uh(e,n)},e.prototype.hh=function(t){var e={};e.database=SL(this.Kt),e.addTarget=function(t,e){var n,r=e.target;return(n=vR(r)?{documents:OL(t,r)}:{query:RL(t,r)}).targetId=e.targetId,e.resumeToken.o()>0?n.resumeToken=pL(t,e.resumeToken):e.Mt.u(RO.min())>0&&(n.readTime=fL(t,e.Mt.G())),n}(this.Kt,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return iO()}}(0,e.kt);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.eh(e)},e.prototype.lh=function(t){var e={};e.database=SL(this.Kt),e.removeTarget=t,this.eh(e)},e}(xD),ED=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).Kt=i,s._h=!1,s}return Object($C.c)(e,t),Object.defineProperty(e.prototype,"fh",{get:function(){return this._h},enumerable:!1,configurable:!0}),e.prototype.start=function(){this._h=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.sh=function(){this._h&&this.dh([])},e.prototype.ah=function(t){return this.Ku.xu("Write",t)},e.prototype.onMessage=function(t){if(oO(!!t.streamToken),this.lastStreamToken=t.streamToken,this._h){this.zu.reset();var e=function(t,e){return t&&t.length>0?(oO(void 0!==e),t.map((function(t){return function(t,e){var n=gL(t.updateTime?t.updateTime:e);n.isEqual(RO.min())&&(n=gL(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new pI(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=gL(t.commitTime);return this.listener.wh(n,e)}return oO(!t.writeResults||0===t.writeResults.length),this._h=!0,this.listener.Eh()},e.prototype.Th=function(){var t={};t.database=SL(this.Kt),this.eh(t)},e.prototype.dh=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return AL(e.Kt,t)}))};this.eh(n)},e}(xD),TD=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Ku=n,i.Kt=r,i.Ih=!1,i}return Object($C.c)(e,t),e.prototype.mh=function(){if(this.Ih)throw new pO(fO.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.bu=function(t,e,n){var r=this;return this.mh(),this.credentials.getToken().then((function(i){return r.Ku.bu(t,e,n,i)})).catch((function(t){throw t.code===fO.UNAUTHENTICATED&&r.credentials.v(),t}))},e.prototype.Cu=function(t,e,n){var r=this;return this.mh(),this.credentials.getToken().then((function(i){return r.Ku.Cu(t,e,n,i)})).catch((function(t){throw t.code===fO.UNAUTHENTICATED&&r.credentials.v(),t}))},e.prototype.terminate=function(){this.Ih=!1},e}((function(){})),MD=function(){function t(t,e){this.fs=t,this.da=e,this.state="Unknown",this.Ah=0,this.Rh=null,this.Ph=!0}return t.prototype.yh=function(){var t=this;0===this.Ah&&(this.gh("Unknown"),this.Rh=this.fs.Ir("online_state_timeout",1e4,(function(){return t.Rh=null,t.Vh("Backend didn't respond within 10 seconds."),t.gh("Offline"),Promise.resolve()})))},t.prototype.ph=function(t){"Online"===this.state?this.gh("Unknown"):(this.Ah++,this.Ah>=1&&(this.bh(),this.Vh("Connection failed 1 times. Most recent error: "+t.toString()),this.gh("Offline")))},t.prototype.set=function(t){this.bh(),this.Ah=0,"Online"===t&&(this.Ph=!1),this.gh(t)},t.prototype.gh=function(t){t!==this.state&&(this.state=t,this.da(t))},t.prototype.Vh=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Ph?(eO(e),this.Ph=!1):tO("OnlineStateTracker",e)},t.prototype.bh=function(){null!==this.Rh&&(this.Rh.cancel(),this.Rh=null)},t}(),AD=function(t,e,n,r,i){var o=this;this.Sh=t,this.Dh=e,this.fs=n,this.Ch={},this.xh=[],this.Nh=new Map,this.Fh=new Set,this.Oh=[],this.kh=i,this.kh.cu((function(t){n.ys((function(){return Object($C.b)(o,void 0,void 0,(function(){return Object($C.d)(this,(function(t){switch(t.label){case 0:return kD(this)?(tO("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object($C.b)(this,void 0,void 0,(function(){var e;return Object($C.d)(this,(function(n){switch(n.label){case 0:return(e=sO(t)).Fh.add(4),[4,OD(e)];case 1:return n.sent(),e.Mh.set("Unknown"),e.Fh.delete(4),[4,CD(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Mh=new MD(n,r)};function CD(t){return Object($C.b)(this,void 0,void 0,(function(){var e,n;return Object($C.d)(this,(function(r){switch(r.label){case 0:if(!kD(t))return[3,4];e=0,n=t.Oh,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function OD(t){return Object($C.b)(this,void 0,void 0,(function(){var e,n;return Object($C.d)(this,(function(r){switch(r.label){case 0:e=0,n=t.Oh,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function RD(t,e){var n=sO(t);n.Nh.has(e.targetId)||(n.Nh.set(e.targetId,e),DD(n)?ND(n):$D(n).Ju()&&LD(n,e))}function ID(t,e){var n=sO(t),r=$D(n);n.Nh.delete(e),r.Ju()&&PD(n,e),0===n.Nh.size&&(r.Ju()?r.Zu():kD(n)&&n.Mh.set("Unknown"))}function LD(t,e){t.Lh.cn(e.targetId),$D(t).hh(e)}function PD(t,e){t.Lh.cn(e),$D(t).lh(e)}function ND(t){t.Lh=new aL({Sn:function(e){return t.Ch.Sn(e)},Dn:function(e){return t.Nh.get(e)||null}}),$D(t).start(),t.Mh.yh()}function DD(t){return kD(t)&&!$D(t).Hu()&&t.Nh.size>0}function kD(t){return 0===sO(t).Fh.size}function jD(t){t.Lh=void 0}function FD(t){return Object($C.b)(this,void 0,void 0,(function(){return Object($C.d)(this,(function(e){return t.Nh.forEach((function(e,n){LD(t,e)})),[2]}))}))}function UD(t,e){return Object($C.b)(this,void 0,void 0,(function(){return Object($C.d)(this,(function(n){return jD(t),DD(t)?(t.Mh.ph(e),ND(t)):t.Mh.set("Unknown"),[2]}))}))}function BD(t,e,n){return Object($C.b)(this,void 0,void 0,(function(){var r,i,o;return Object($C.d)(this,(function(s){switch(s.label){case 0:if(t.Mh.set("Online"),!(e instanceof oL&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object($C.b)(this,void 0,void 0,(function(){var n,r,i,o;return Object($C.d)(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Nh.has(o=i[r])?[4,t.Ch.$h(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Nh.delete(o),t.Lh.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),tO("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,zD(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof rL?t.Lh.wn(e):e instanceof iL?t.Lh.yn(e):t.Lh.In(e),n.isEqual(RO.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,DN(t.Sh)];case 8:return i=s.sent(),n.u(i)>=0?[4,function(t,e){var n=t.Lh.pn(e);return n.Oe.forEach((function(n,r){if(n.resumeToken.o()>0){var i=t.Nh.get(r);i&&t.Nh.set(r,i.$t(n.resumeToken,e))}})),n.ke.forEach((function(e){var n=t.Nh.get(e);if(n){t.Nh.set(e,n.$t(dO.h,n.Mt)),PD(t,e);var r=new $R(n.target,e,1,n.sequenceNumber);LD(t,r)}})),t.Ch.Bh(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return tO("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,zD(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function zD(t,e,n){return Object($C.b)(this,void 0,void 0,(function(){var r=this;return Object($C.d)(this,(function(i){switch(i.label){case 0:if(!ZL(e))throw e;return t.Fh.add(1),[4,OD(t)];case 1:return i.sent(),t.Mh.set("Offline"),n||(n=function(){return DN(t.Sh)}),t.fs.bo((function(){return Object($C.b)(r,void 0,void 0,(function(){return Object($C.d)(this,(function(e){switch(e.label){case 0:return tO("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Fh.delete(1),[4,CD(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function HD(t,e){return e().catch((function(n){return zD(t,n,e)}))}function VD(t){return Object($C.b)(this,void 0,void 0,(function(){var e,n,r,i,o;return Object($C.d)(this,(function(s){switch(s.label){case 0:e=sO(t),n=JD(e),r=e.xh.length>0?e.xh[e.xh.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return kD(t)&&t.xh.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,FN(e.Sh,r)];case 3:return null===(i=s.sent())?(0===e.xh.length&&n.Zu(),[3,7]):(r=i.batchId,function(t,e){t.xh.push(e);var n=JD(t);n.Ju()&&n.fh&&n.dh(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,zD(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return GD(e)&&WD(e),[2]}}))}))}function GD(t){return kD(t)&&!JD(t).Hu()&&t.xh.length>0}function WD(t){JD(t).start()}function qD(t){return Object($C.b)(this,void 0,void 0,(function(){return Object($C.d)(this,(function(e){return JD(t).Th(),[2]}))}))}function XD(t){return Object($C.b)(this,void 0,void 0,(function(){var e,n,r;return Object($C.d)(this,(function(i){for(e=JD(t),n=0,r=t.xh;n<r.length;n++)e.dh(r[n].mutations);return[2]}))}))}function ZD(t,e,n){return Object($C.b)(this,void 0,void 0,(function(){var r,i;return Object($C.d)(this,(function(o){switch(o.label){case 0:return r=t.xh.shift(),i=AP.from(r,e,n),[4,HD(t,(function(){return t.Ch.qh(i)}))];case 1:return o.sent(),[4,VD(t)];case 2:return o.sent(),[2]}}))}))}function KD(t,e){return Object($C.b)(this,void 0,void 0,(function(){return Object($C.d)(this,(function(n){switch(n.label){case 0:return e&&JD(t).fh?[4,function(t,e){return Object($C.b)(this,void 0,void 0,(function(){var n,r;return Object($C.d)(this,(function(i){switch(i.label){case 0:return NI(r=e.code)&&r!==fO.ABORTED?(n=t.xh.shift(),JD(t).Xu(),[4,HD(t,(function(){return t.Ch.Uh(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,VD(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return GD(t)&&WD(t),[2]}}))}))}function YD(t,e){return Object($C.b)(this,void 0,void 0,(function(){var n;return Object($C.d)(this,(function(r){switch(r.label){case 0:return n=sO(t),e?(n.Fh.delete(2),[4,CD(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Fh.add(2),[4,OD(n)]);case 3:r.sent(),n.Mh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function $D(t){var e=this;return t.Qh||(t.Qh=function(t,e,n){var r=sO(t);return r.mh(),new SD(e,r.Ku,r.credentials,r.Kt,n)}(t.Dh,t.fs,{Eu:FD.bind(null,t),Iu:UD.bind(null,t),uh:BD.bind(null,t)}),t.Oh.push((function(n){return Object($C.b)(e,void 0,void 0,(function(){return Object($C.d)(this,(function(e){switch(e.label){case 0:return n?(t.Qh.Xu(),DD(t)?ND(t):t.Mh.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Qh.stop()];case 2:e.sent(),jD(t),e.label=3;case 3:return[2]}}))}))}))),t.Qh}function JD(t){var e=this;return t.Kh||(t.Kh=function(t,e,n){var r=sO(t);return r.mh(),new ED(e,r.Ku,r.credentials,r.Kt,n)}(t.Dh,t.fs,{Eu:qD.bind(null,t),Iu:KD.bind(null,t),Eh:XD.bind(null,t),wh:ZD.bind(null,t)}),t.Oh.push((function(n){return Object($C.b)(e,void 0,void 0,(function(){return Object($C.d)(this,(function(e){switch(e.label){case 0:return n?(t.Kh.Xu(),[4,VD(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kh.stop()];case 3:e.sent(),t.xh.length>0&&(tO("RemoteStore","Stopping write stream with "+t.xh.length+" pending writes"),t.xh=[]),e.label=4;case 4:return[2]}}))}))}))),t.Kh}var QD=function(){this.Wh=void 0,this.listeners=[]},tk=function(){this.queries=new KP((function(t){return qR(t)}),WR),this.onlineState="Unknown",this.jh=new Set};function ek(t,e){return Object($C.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,c;return Object($C.d)(this,(function(u){switch(u.label){case 0:if(n=sO(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new QD),!i)return[3,4];u.label=1;case 1:return u.trys.push([1,3,,4]),s=o,[4,n.Gh(r)];case 2:return s.Wh=u.sent(),[3,4];case 3:return a=u.sent(),c=tP(a,"Initialization of query '"+XR(e.query)+"' failed"),[2,void e.onError(c)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zh(n.onlineState),o.Wh&&e.Hh(o.Wh)&&ok(n),[2]}}))}))}function nk(t,e){return Object($C.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object($C.d)(this,(function(a){return n=sO(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.Jh(r))]:[2]}))}))}function rk(t,e){for(var n=sO(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var c=0,u=a.listeners;c<u.length;c++)u[c].Hh(s)&&(r=!0);a.Wh=s}}r&&ok(n)}function ik(t,e,n){var r=sO(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function ok(t){t.jh.forEach((function(t){t.next()}))}var sk=function(){function t(t,e,n){this.query=t,this.Yh=e,this.Xh=!1,this.Zh=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hh=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new tL(t.query,t.docs,t.De,e,t.Ce,t.fromCache,t.xe,!0)}var o=!1;return this.Xh?this.tl(t)&&(this.Yh.next(t),o=!0):this.el(t,this.onlineState)&&(this.nl(t),o=!0),this.Zh=t,o},t.prototype.onError=function(t){this.Yh.error(t)},t.prototype.zh=function(t){this.onlineState=t;var e=!1;return this.Zh&&!this.Xh&&this.el(this.Zh,t)&&(this.nl(this.Zh),e=!0),e},t.prototype.el=function(t,e){return!t.fromCache||!(this.options.sl&&"Offline"!==e||t.docs.nt()&&"Offline"!==e)},t.prototype.tl=function(t){return t.docChanges.length>0||!!(t.xe||this.Zh&&this.Zh.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.nl=function(t){t=tL.Fe(t.query,t.docs,t.Ce,t.fromCache),this.Xh=!0,this.Yh.next(t)},t}(),ak=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.il=function(){return"metadata"in this.payload},t}(),ck=function(){function t(t){this.Kt=t}return t.prototype.yc=function(t){return _L(this.Kt,t)},t.prototype.gc=function(t){return t.metadata.exists?ML(this.Kt,t.document,!1):new dR(this.yc(t.metadata.name),this.Vc(t.metadata.readTime))},t.prototype.Vc=function(t){return gL(t)},t}();!function(){function t(t,e,n){this.rl=t,this.Sh=e,this.Kt=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.ol=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.cl=function(t){for(var e=new Map,n=new ck(this.Kt),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.yc(o.metadata.name),a=0,c=o.metadata.queries;a<c.length;a++){var u=c[a],l=(e.get(u)||KI()).add(s);e.set(u,l)}}return e},t.prototype.complete=function(){return Object($C.b)(this,void 0,void 0,(function(){var t,e,n,r,i;return Object($C.d)(this,(function(o){switch(o.label){case 0:return[4,WN(this.Sh,new ck(this.Kt),this.documents,this.rl.id)];case 1:t=o.sent(),e=this.cl(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,qN(this.Sh,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new AN(Object.assign({},this.progress),t))]}}))}))}}();var uk=function(t){this.key=t},lk=function(t){this.key=t},hk=function(){function t(t,e){this.query=t,this.al=e,this.ul=null,this.qe=!1,this.hl=KI(),this.Ce=KI(),this.ll=KR(t),this._l=new JI(this.ll)}return Object.defineProperty(t.prototype,"fl",{get:function(){return this.al},enumerable:!1,configurable:!0}),t.prototype.dl=function(t,e){var n=this,r=e?e.wl:new QI,i=e?e._l:this._l,o=e?e.Ce:this.Ce,s=i,a=!1,c=jR(this.query)&&i.size===this.query.limit?i.last():null,u=FR(this.query)&&i.size===this.query.limit?i.first():null;if(t.Zt((function(t,e){var l=i.get(t),h=e instanceof hR?e:null;h&&(h=ZR(n.query,h)?h:null);var d=!!l&&n.Ce.has(l.key),f=!!h&&(h.bt||n.Ce.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?d!==f&&(r.track({type:3,doc:h}),p=!0):n.El(l,h)||(r.track({type:2,doc:h}),p=!0,(c&&n.ll(h,c)>0||u&&n.ll(h,u)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(c||u)&&(a=!0)),p&&(h?(s=s.add(h),o=f?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),jR(this.query)||FR(this.query))for(;s.size>this.query.limit;){var l=jR(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{_l:s,wl:r,_c:a,Ce:o}},t.prototype.El=function(t,e){return t.bt&&e.hasCommittedMutations&&!e.bt},t.prototype.Ei=function(t,e,n){var r=this,i=this._l;this._l=t._l,this.Ce=t.Ce;var o=t.wl.Se();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return iO()}};return n(t)-n(e)}(t.type,e.type)||r.ll(t.doc,e.doc)})),this.Tl(n);var s=e?this.Il():[],a=0===this.hl.size&&this.qe?1:0,c=a!==this.ul;return this.ul=a,0!==o.length||c?{snapshot:new tL(this.query,t._l,i,o,t.Ce,0===a,c,!1),ml:s}:{ml:s}},t.prototype.zh=function(t){return this.qe&&"Offline"===t?(this.qe=!1,this.Ei({_l:this._l,wl:new QI,Ce:this.Ce,_c:!1},!1)):{ml:[]}},t.prototype.Al=function(t){return!this.al.has(t)&&!!this._l.has(t)&&!this._l.get(t).bt},t.prototype.Tl=function(t){var e=this;t&&(t.Ue.forEach((function(t){return e.al=e.al.add(t)})),t.Qe.forEach((function(t){})),t.Ke.forEach((function(t){return e.al=e.al.delete(t)})),this.qe=t.qe)},t.prototype.Il=function(){var t=this;if(!this.qe)return[];var e=this.hl;this.hl=KI(),this._l.forEach((function(e){t.Al(e.key)&&(t.hl=t.hl.add(e.key))}));var n=[];return e.forEach((function(e){t.hl.has(e)||n.push(new lk(e))})),this.hl.forEach((function(t){e.has(t)||n.push(new uk(t))})),n},t.prototype.Rl=function(t){this.al=t.Pc,this.hl=KI();var e=this.dl(t.documents);return this.Ei(e,!0)},t.prototype.Pl=function(){return tL.Fe(this.query,this._l,this.Ce,0===this.ul)},t}(),dk=function(t,e,n){this.query=t,this.targetId=e,this.view=n},fk=function(t){this.key=t,this.yl=!1},pk=function(){function t(t,e,n,r,i,o){this.Sh=t,this.gl=e,this.Vl=n,this.pl=r,this.currentUser=i,this.bl=o,this.vl={},this.Sl=new KP((function(t){return qR(t)}),WR),this.Dl=new Map,this.Cl=[],this.xl=new kI(DO.J),this.Nl=new Map,this.Fl=new ZN,this.Ol={},this.kl=new Map,this.Ml=iN.Bi(),this.onlineState="Unknown",this.Ll=void 0}return Object.defineProperty(t.prototype,"$l",{get:function(){return!0===this.Ll},enumerable:!1,configurable:!0}),t}();function mk(t,e){return Object($C.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object($C.d)(this,(function(a){switch(a.label){case 0:return n=Gk(t),(i=n.Sl.get(e))?(n.pl.ka(i.targetId),r=i.view.Pl(),[3,4]):[3,1];case 1:return[4,UN(n.Sh,VR(e))];case 2:return o=a.sent(),s=n.pl.ka(o.targetId),[4,gk(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.$l&&RD(n.gl,o),a.label=4;case 4:return[2,r]}}))}))}function gk(t,e,n,r){return Object($C.b)(this,void 0,void 0,(function(){var i,o,s,a,c,u;return Object($C.d)(this,(function(l){switch(l.label){case 0:return t.Bl=function(e,n,r){return function(t,e,n,r){return Object($C.b)(this,void 0,void 0,(function(){var i,o,s;return Object($C.d)(this,(function(a){switch(a.label){case 0:return(i=e.view.dl(n))._c?[4,zN(t.Sh,e.query,!1).then((function(t){return e.view.dl(t.documents,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.Oe.get(e.targetId),s=e.view.Ei(i,t.$l,o),[2,(Ok(t,e.targetId,s.ml),s.snapshot)]}}))}))}(t,e,n,r)},[4,zN(t.Sh,e,!0)];case 1:return i=l.sent(),o=new hk(e,i.Pc),s=o.dl(i.documents),a=nL.Be(n,r&&"Offline"!==t.onlineState),c=o.Ei(s,t.$l,a),Ok(t,n,c.ml),u=new dk(e,n,o),[2,(t.Sl.set(e,u),t.Dl.has(n)?t.Dl.get(n).push(e):t.Dl.set(n,[e]),c.snapshot)]}}))}))}function yk(t,e){return Object($C.b)(this,void 0,void 0,(function(){var n,r,i;return Object($C.d)(this,(function(o){switch(o.label){case 0:return n=sO(t),r=n.Sl.get(e),(i=n.Dl.get(r.targetId)).length>1?[2,(n.Dl.set(r.targetId,i.filter((function(t){return!WR(t,e)}))),void n.Sl.delete(e))]:n.$l?(n.pl.La(r.targetId),n.pl.Ca(r.targetId)?[3,2]:[4,BN(n.Sh,r.targetId,!1).then((function(){n.pl.Ba(r.targetId),ID(n.gl,r.targetId),Ak(n,r.targetId)})).catch(ZP)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Ak(n,r.targetId),[4,BN(n.Sh,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function vk(t,e,n){return Object($C.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object($C.d)(this,(function(a){switch(a.label){case 0:r=Wk(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=sO(t),i=OO.now(),o=e.reduce((function(t,e){return t.add(e.key)}),KI());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Ic.Zo(t,o).next((function(o){n=o;for(var s=[],a=0,c=e;a<c.length;a++){var u=c[a],l=_I(u,n.get(u.key));null!=l&&s.push(new EI(u.key,l,uR(l.proto.mapValue),mI.exists(!0)))}return r.Ho.Pi(t,i,s,e)}))})).then((function(t){var e=t.Ns(n);return{batchId:t.batchId,oi:e}}))}(r.Sh,e)];case 2:return i=a.sent(),r.pl.xa(i.batchId),function(t,e,n){var r=t.Ol[t.currentUser.R()];r||(r=new kI(uO)),r=r.Ht(e,n),t.Ol[t.currentUser.R()]=r}(r,i.batchId,n),[4,Lk(r,i.oi)];case 3:return a.sent(),[4,VD(r.gl)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=tP(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function bk(t,e){return Object($C.b)(this,void 0,void 0,(function(){var n,r;return Object($C.d)(this,(function(i){switch(i.label){case 0:n=sO(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,kN(n.Sh,e)];case 2:return r=i.sent(),e.Oe.forEach((function(t,e){var r=n.Nl.get(e);r&&(oO(t.Ue.size+t.Qe.size+t.Ke.size<=1),t.Ue.size>0?r.yl=!0:t.Qe.size>0?oO(r.yl):t.Ke.size>0&&(oO(r.yl),r.yl=!1))})),[4,Lk(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,ZP(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function _k(t,e,n){var r=sO(t);if(r.$l&&0===n||!r.$l&&1===n){var i=[];r.Sl.forEach((function(t,n){var r=n.view.zh(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=sO(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zh(e)&&(r=!0)})),r&&ok(n)}(r.Vl,e),i.length&&r.vl.uh(i),r.onlineState=e,r.$l&&r.pl.Ka(e)}}function wk(t,e,n){return Object($C.b)(this,void 0,void 0,(function(){var r,i,o,s,a,c;return Object($C.d)(this,(function(u){switch(u.label){case 0:return(r=sO(t)).pl.qa(e,"rejected",n),i=r.Nl.get(e),(o=i&&i.key)?(s=(s=new kI(DO.J)).Ht(o,new dR(o,RO.min())),a=KI().add(o),c=new eL(RO.min(),new Map,new UI(uO),s,a),[4,bk(r,c)]):[3,2];case 1:return u.sent(),r.xl=r.xl.remove(o),r.Nl.delete(e),Ik(r),[3,4];case 2:return[4,BN(r.Sh,e,!1).then((function(){return Ak(r,e,n)})).catch(ZP)];case 3:u.sent(),u.label=4;case 4:return[2]}}))}))}function xk(t,e){return Object($C.b)(this,void 0,void 0,(function(){var n,r,i;return Object($C.d)(this,(function(o){switch(o.label){case 0:n=sO(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,NN(n.Sh,e)];case 2:return i=o.sent(),Mk(n,r,null),Tk(n,r),n.pl.Fa(r,"acknowledged"),[4,Lk(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,ZP(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Sk(t,e,n){return Object($C.b)(this,void 0,void 0,(function(){var r,i;return Object($C.d)(this,(function(o){switch(o.label){case 0:r=sO(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=sO(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.Ho.yi(t,e).next((function(e){return oO(null!==e),r=e.keys(),n.Ho.xi(t,e)})).next((function(){return n.Ho.Oi(t)})).next((function(){return n.Ic.Zo(t,r)}))}))}(r.Sh,e)];case 2:return i=o.sent(),Mk(r,e,n),Tk(r,e),r.pl.Fa(e,"rejected",n),[4,Lk(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,ZP(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Ek(t,e){return Object($C.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object($C.d)(this,(function(a){switch(a.label){case 0:kD((n=sO(t)).gl)||tO("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=sO(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.Ho.pi(t)}))}(n.Sh)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.kl.get(r)||[]).push(e),n.kl.set(r,i),[3,4]);case 3:return o=a.sent(),s=tP(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function Tk(t,e){(t.kl.get(e)||[]).forEach((function(t){t.resolve()})),t.kl.delete(e)}function Mk(t,e,n){var r=sO(t),i=r.Ol[r.currentUser.R()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ol[r.currentUser.R()]=i}}function Ak(t,e,n){void 0===n&&(n=null),t.pl.La(e);for(var r=0,i=t.Dl.get(e);r<i.length;r++){var o=i[r];t.Sl.delete(o),n&&t.vl.ql(o,n)}t.Dl.delete(e),t.$l&&t.Fl.kc(e).forEach((function(e){t.Fl.ki(e)||Ck(t,e)}))}function Ck(t,e){var n=t.xl.get(e);null!==n&&(ID(t.gl,n),t.xl=t.xl.remove(e),t.Nl.delete(n),Ik(t))}function Ok(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof uk?(t.Fl.sr(o.key,e),Rk(t,o)):o instanceof lk?(tO("SyncEngine","Document no longer in limbo: "+o.key),t.Fl.rr(o.key,e),t.Fl.ki(o.key)||Ck(t,o.key)):iO()}}function Rk(t,e){var n=e.key;t.xl.get(n)||(tO("SyncEngine","New document in limbo: "+n),t.Cl.push(n),Ik(t))}function Ik(t){for(;t.Cl.length>0&&t.xl.size<t.bl;){var e=t.Cl.shift(),n=t.Ml.next();t.Nl.set(n,new fk(e)),t.xl=t.xl.Ht(e,n),RD(t.gl,new $R(VR(kR(e.path)),n,2,CO.U))}}function Lk(t,e,n){return Object($C.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object($C.d)(this,(function(a){switch(a.label){case 0:return r=sO(t),i=[],o=[],s=[],r.Sl.nt()?[3,3]:(r.Sl.forEach((function(t,a){s.push(r.Bl(a,e,n).then((function(t){if(t){r.$l&&r.pl.qa(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=ON.cc(a.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return a.sent(),r.vl.uh(i),[4,function(t,e){return Object($C.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,c,u;return Object($C.d)(this,(function(l){switch(l.label){case 0:n=sO(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return VL.forEach(e,(function(e){return VL.forEach(e.rc,(function(r){return n.persistence.Ii.sr(t,e.targetId,r)})).next((function(){return VL.forEach(e.oc,(function(r){return n.persistence.Ii.rr(t,e.targetId,r)}))}))}))}))];case 2:return l.sent(),[3,4];case 3:if(!ZL(r=l.sent()))throw r;return tO("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(c=n.dc.get(a),u=c.Bt(c.Mt),n.dc=n.dc.Ht(a,u));return[2]}}))}))}(r.Sh,o)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function Pk(t,e){return Object($C.b)(this,void 0,void 0,(function(){var n,r;return Object($C.d)(this,(function(i){switch(i.label){case 0:return(n=sO(t)).currentUser.isEqual(e)?[3,3]:(tO("SyncEngine","User change. New user:",e.R()),[4,PN(n.Sh,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.kl.forEach((function(t){t.forEach((function(t){t.reject(new pO(fO.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.kl.clear()}(n),n.pl.Qa(e,r.Ac,r.Rc),[4,Lk(n,r.mc)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function Nk(t,e){var n=sO(t),r=n.Nl.get(e);if(r&&r.yl)return KI().add(r.key);var i=KI(),o=n.Dl.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var c=n.Sl.get(a[s]);i=i.ye(c.view.fl)}return i}function Dk(t,e){return Object($C.b)(this,void 0,void 0,(function(){var n,r,i;return Object($C.d)(this,(function(o){switch(o.label){case 0:return[4,zN((n=sO(t)).Sh,e.query,!0)];case 1:return r=o.sent(),i=e.view.Rl(r),[2,(n.$l&&Ok(n,e.targetId,i.ml),i)]}}))}))}function kk(t){return Object($C.b)(this,void 0,void 0,(function(){var e;return Object($C.d)(this,(function(n){return[2,VN((e=sO(t)).Sh).then((function(t){return Lk(e,t)}))]}))}))}function jk(t,e,n,r){return Object($C.b)(this,void 0,void 0,(function(){var i,o;return Object($C.d)(this,(function(s){switch(s.label){case 0:return[4,function(t,e){var n=sO(t),r=sO(n.Ho);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.gi(t,e).next((function(e){return e?n.Ic.Zo(t,e):VL.resolve(null)}))}))}((i=sO(t)).Sh,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,VD(i.gl)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Mk(i,e,r||null),Tk(i,e),function(t,e){sO(sO(t).Ho).Ni(e)}(i.Sh,e)):iO(),s.label=4;case 4:return[4,Lk(i,o)];case 5:return s.sent(),[3,7];case 6:tO("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}}))}))}function Fk(t,e){return Object($C.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,c;return Object($C.d)(this,(function(u){switch(u.label){case 0:return Gk(n=sO(t)),Wk(n),!0!==e||!0===n.Ll?[3,3]:(r=n.pl.Sa(),[4,Uk(n,r.rt())]);case 1:return i=u.sent(),n.Ll=!0,[4,YD(n.gl,!0)];case 2:for(u.sent(),o=0,s=i;o<s.length;o++)RD(n.gl,s[o]);return[3,7];case 3:return!1!==e||!1===n.Ll?[3,7]:(a=[],c=Promise.resolve(),n.Dl.forEach((function(t,e){n.pl.$a(e)?a.push(e):c=c.then((function(){return Ak(n,e),BN(n.Sh,e,!0)})),ID(n.gl,e)})),[4,c]);case 4:return u.sent(),[4,Uk(n,a)];case 5:return u.sent(),function(t){var e=sO(t);e.Nl.forEach((function(t,n){ID(e.gl,n)})),e.Fl.Mc(),e.Nl=new Map,e.xl=new kI(DO.J)}(n),n.Ll=!1,[4,YD(n.gl,!1)];case 6:u.sent(),u.label=7;case 7:return[2]}}))}))}function Uk(t,e,n){return Object($C.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,c,u,l,h,d,f,p;return Object($C.d)(this,(function(m){switch(m.label){case 0:n=sO(t),r=[],i=[],o=0,s=e,m.label=1;case 1:return o<s.length?(c=void 0,(u=n.Dl.get(a=s[o]))&&0!==u.length?[4,UN(n.Sh,VR(u[0]))]:[3,7]):[3,13];case 2:c=m.sent(),l=0,h=u,m.label=3;case 3:return l<h.length?(d=n.Sl.get(h[l]),[4,Dk(n,d)]):[3,6];case 4:(f=m.sent()).snapshot&&i.push(f.snapshot),m.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,HN(n.Sh,a)];case 8:return p=m.sent(),[4,UN(n.Sh,p)];case 9:return c=m.sent(),[4,gk(n,Bk(p),a,!1)];case 10:m.sent(),m.label=11;case 11:r.push(c),m.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vl.uh(i),r)]}}))}))}function Bk(t){return DR(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function zk(t){var e=sO(t);return sO(sO(e.Sh).persistence).Qo()}function Hk(t,e,n,r){return Object($C.b)(this,void 0,void 0,(function(){var i,o,s;return Object($C.d)(this,(function(a){switch(a.label){case 0:return(i=sO(t)).Ll?(tO("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Dl.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,VN(i.Sh)];case 3:return o=a.sent(),s=eL.$e(e,"current"===n),[4,Lk(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,BN(i.Sh,e,!0)];case 6:return a.sent(),Ak(i,e,r),[3,8];case 7:iO(),a.label=8;case 8:return[2]}}))}))}function Vk(t,e,n){return Object($C.b)(this,void 0,void 0,(function(){var r,i,o,s,a,c,u,l,h;return Object($C.d)(this,(function(d){switch(d.label){case 0:if(!(r=Gk(t)).Ll)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?r.Dl.has(s=o[i])?(tO("SyncEngine","Adding an already active target "+s),[3,5]):[4,HN(r.Sh,s)]:[3,6];case 2:return a=d.sent(),[4,UN(r.Sh,a)];case 3:return c=d.sent(),[4,gk(r,Bk(a),c.targetId,!1)];case 4:d.sent(),RD(r.gl,c),d.label=5;case 5:return i++,[3,1];case 6:u=function(t){return Object($C.d)(this,(function(e){switch(e.label){case 0:return r.Dl.has(t)?[4,BN(r.Sh,t,!1).then((function(){ID(r.gl,t),Ak(r,t)})).catch(ZP)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,h=n,d.label=7;case 7:return l<h.length?[5,u(h[l])]:[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function Gk(t){var e=sO(t);return e.gl.Ch.Bh=bk.bind(null,e),e.gl.Ch.Sn=Nk.bind(null,e),e.gl.Ch.$h=wk.bind(null,e),e.vl.uh=rk.bind(null,e.Vl),e.vl.ql=ik.bind(null,e.Vl),e}function Wk(t){var e=sO(t);return e.gl.Ch.qh=xk.bind(null,e),e.gl.Ch.Uh=Sk.bind(null,e),e}var qk=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object($C.b)(this,void 0,void 0,(function(){return Object($C.d)(this,(function(e){switch(e.label){case 0:return this.Kt=_D(t.gu.T),this.pl=this.jl(t),this.persistence=this.Gl(t),[4,this.persistence.start()];case 1:return e.sent(),this.zl=this.Hl(t),this.Sh=this.Jl(t),[2]}}))}))},t.prototype.Hl=function(t){return null},t.prototype.Jl=function(t){return LN(this.persistence,new RN,t.Yl,this.Kt)},t.prototype.Gl=function(t){return new tD(nD.ra,this.Kt)},t.prototype.jl=function(t){return new dD},t.prototype.terminate=function(){return Object($C.b)(this,void 0,void 0,(function(){return Object($C.d)(this,(function(t){switch(t.label){case 0:return this.zl&&this.zl.stop(),[4,this.pl.Lo()];case 1:return t.sent(),[4,this.persistence.Lo()];case 2:return t.sent(),[2]}}))}))},t}(),Xk=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Xl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object($C.c)(e,t),e.prototype.initialize=function(e){return Object($C.b)(this,void 0,void 0,(function(){return Object($C.d)(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,GN(this.Sh)];case 2:return n.sent(),[4,this.Xl.initialize(this,e)];case 3:return n.sent(),[4,Wk(this.Xl.fa)];case 4:return n.sent(),[4,VD(this.Xl.gl)];case 5:return n.sent(),[2]}}))}))},e.prototype.Jl=function(t){return LN(this.persistence,new RN,t.Yl,this.Kt)},e.prototype.Hl=function(t){return new hN(this.persistence.Ii._r,t.fs)},e.prototype.Gl=function(t){var e=MN(t.gu.T,t.gu.persistenceKey),n=void 0!==this.cacheSizeBytes?XP.Xs(this.cacheSizeBytes):XP.ei;return new SN(this.synchronizeTabs,e,t.clientId,n,t.fs,vD(),bD(),this.Kt,this.pl,!!this.forceOwnership)},e.prototype.jl=function(t){return new dD},e}(qk),Zk=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Xl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object($C.c)(e,t),e.prototype.initialize=function(e){return Object($C.b)(this,void 0,void 0,(function(){var n,r=this;return Object($C.d)(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Xl.fa,this.pl instanceof hD?(this.pl.fa={nu:jk.bind(null,n),su:Hk.bind(null,n),iu:Vk.bind(null,n),Qo:zk.bind(null,n),eu:kk.bind(null,n)},[4,this.pl.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.Po((function(t){return Object($C.b)(r,void 0,void 0,(function(){return Object($C.d)(this,(function(e){switch(e.label){case 0:return[4,Fk(this.Xl.fa,t)];case 1:return e.sent(),this.zl&&(t&&!this.zl.Tr?this.zl.start(this.Sh):t||this.zl.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.jl=function(t){var e=vD();if(!hD.Wn(e))throw new pO(fO.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=MN(t.gu.T,t.gu.persistenceKey);return new hD(e,t.fs,n,t.clientId,t.Yl)},e}(Xk),Kk=function(){function t(){}return t.prototype.initialize=function(t,e){return Object($C.b)(this,void 0,void 0,(function(){var n=this;return Object($C.d)(this,(function(r){switch(r.label){case 0:return this.Sh?[3,2]:(this.Sh=t.Sh,this.pl=t.pl,this.Dh=this.Zl(e),this.gl=this.t_(e),this.Vl=this.e_(e),this.fa=this.n_(e,!t.synchronizeTabs),this.pl.da=function(t){return _k(n.fa,t,1)},this.gl.Ch.s_=Pk.bind(null,this.fa),[4,YD(this.gl,this.fa.$l)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.e_=function(t){return new tk},t.prototype.Zl=function(t){var e=_D(t.gu.T),n=new yD(t.gu);return function(t,e,n){return new TD(t,e,n)}(t.credentials,n,e)},t.prototype.t_=function(t){var e,n,r,i,o,s=this;return e=this.Sh,n=this.Dh,r=t.fs,i=function(t){return _k(s.fa,t,0)},o=pD.Wn()?new pD:new fD,new AD(e,n,r,i,o)},t.prototype.n_=function(t,e){return function(t,e,n,r,i,o,s){var a=new pk(t,e,n,r,i,o);return s&&(a.Ll=!0),a}(this.Sh,this.gl,this.Vl,this.pl,t.Yl,t.bl,e)},t.prototype.terminate=function(){return function(t){return Object($C.b)(this,void 0,void 0,(function(){var e;return Object($C.d)(this,(function(n){switch(n.label){case 0:return e=sO(t),tO("RemoteStore","RemoteStore shutting down."),e.Fh.add(5),[4,OD(e)];case 1:return n.sent(),e.kh.Lo(),e.Mh.set("Unknown"),[2]}}))}))}(this.gl)},t}(),Yk=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.i_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.i_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.r_=function(){this.muted=!0},t.prototype.i_=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),$k=(function(){function t(t,e){var n=this;this.o_=t,this.Kt=e,this.metadata=new HL,this.buffer=new Uint8Array,this.c_=new TextDecoder("utf-8"),this.a_().then((function(t){t&&t.il()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}t.prototype.close=function(){return this.o_.cancel()},t.prototype.getMetadata=function(){return Object($C.b)(this,void 0,void 0,(function(){return Object($C.d)(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Kl=function(){return Object($C.b)(this,void 0,void 0,(function(){return Object($C.d)(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.a_())]}}))}))},t.prototype.a_=function(){return Object($C.b)(this,void 0,void 0,(function(){var t,e,n,r;return Object($C.d)(this,(function(i){switch(i.label){case 0:return[4,this.u_()];case 1:return null===(t=i.sent())?[2,null]:(e=this.c_.decode(t),n=Number(e),isNaN(n)&&this.h_("length string ("+e+") is not valid number"),[4,this.l_(n)]);case 2:return r=i.sent(),[2,new ak(JSON.parse(r),t.length+n)]}}))}))},t.prototype.__=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.u_=function(){return Object($C.b)(this,void 0,void 0,(function(){var t,e;return Object($C.d)(this,(function(n){switch(n.label){case 0:return this.__()<0?[4,this.f_()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.__())<0&&this.h_("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.l_=function(t){return Object($C.b)(this,void 0,void 0,(function(){var e;return Object($C.d)(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.f_()]:[3,3];case 1:n.sent()&&this.h_("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.c_.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.h_=function(t){throw this.o_.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.f_=function(){return Object($C.b)(this,void 0,void 0,(function(){var t,e;return Object($C.d)(this,(function(n){switch(n.label){case 0:return[4,this.o_.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))}}(),function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new pO(fO.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.d_=new NO(t)}return t.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},t}()),Jk=function(t){this._methodName=t};function Qk(t,e,n){if(!n)throw new pO(fO.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function tj(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new pO(fO.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function ej(t,e,n,r){if(!0===e&&!0===r)throw new pO(fO.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function nj(t){if(!DO.Et(t))throw new pO(fO.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function rj(t){if(DO.Et(t))throw new pO(fO.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function ij(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":iO()}function oj(t,e){if("_delegate"in t&&(t=t._),!(t instanceof e)){if(e.name===t.constructor.name)throw new pO(fO.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=ij(t);throw new pO(fO.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function sj(t,e){if(e<=0)throw new pO(fO.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var aj=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new pO(fO.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new pO(fO.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,ej("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),cj=new Map,uj=function(){function t(t,e){this.w_="(lite)",this.E_=new aj({}),this.T_=!1,t instanceof wO?(this.I_=t,this.m_=new EO):(this.A_=t,this.I_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new pO(fO.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wO(t.options.projectId)}(t),this.m_=new TO(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.A_)throw new pO(fO.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"R_",{get:function(){return this.T_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"P_",{get:function(){return void 0!==this.y_},enumerable:!1,configurable:!0}),t.prototype.g_=function(t){if(this.T_)throw new pO(fO.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.E_=new aj(t),void 0!==t.credentials&&(this.m_=function(t){if(!t)return new EO;switch(t.type){case"gapi":var e=t.client;return oO(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new AO(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new pO(fO.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.V_=function(){return this.E_},t.prototype.p_=function(){return this.T_=!0,this.E_},t.prototype._delete=function(){return this.y_||(this.y_=this.b_()),this.y_},t.prototype.toJSON=function(){return{app:this.A_,T:this.I_,settings:this.E_}},t.prototype.b_=function(){return(t=cj.get(this))&&(tO("ComponentProvider","Removing Datastore"),cj.delete(this),t.terminate()),Promise.resolve();var t},t}(),lj=function(){function t(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.S_.path.ot()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new dj(this.firestore,this.v_,this.S_.path.Z())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.S_)},t}(),hj=function(){function t(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),dj=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,kR(r))||this).firestore=e,i.D_=r,i.type="collection",i}return Object($C.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.C_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.C_.path.ot()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.D_.Z();return t.nt()?null:new lj(this.firestore,null,new DO(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.D_)},e}(hj);function fj(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof gO&&(t=t._),Qk("collection","path",e),t instanceof uj)return rj(n=LO.ct.apply(LO,Object($C.g)([e],r))),new dj(t,null,n);if(!(t instanceof lj||t instanceof dj))throw new pO(fO.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return rj(n=LO.ct.apply(LO,Object($C.g)([t.path],r)).child(LO.ct(e))),new dj(t.firestore,null,n)}function pj(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof gO&&(t=t._),1===arguments.length&&(e=cO.t()),Qk("doc","path",e),t instanceof uj)return nj(n=LO.ct.apply(LO,Object($C.g)([e],r))),new lj(t,null,new DO(n));if(!(t instanceof lj||t instanceof dj))throw new pO(fO.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return nj(n=t.D_.child(LO.ct.apply(LO,Object($C.g)([e],r)))),new lj(t.firestore,t instanceof dj?t.v_:null,new DO(n))}function mj(t,e){return t instanceof gO&&(t=t._),e instanceof gO&&(e=e._),(t instanceof lj||t instanceof dj)&&(e instanceof lj||e instanceof dj)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function gj(t,e){return t instanceof gO&&(t=t._),e instanceof gO&&(e=e._),t instanceof hj&&e instanceof hj&&t.firestore===e.firestore&&WR(t.C_,e.C_)&&t.v_===e.v_}var yj=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new pO(fO.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new pO(fO.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},t.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},t.prototype.K=function(t){return uO(this.x_,t.x_)||uO(this.N_,t.N_)},t}(),vj=/^__.*__$/,bj=function(){function t(t,e,n){this.data=t,this.zt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return null!==this.zt?new EI(t,this.data,this.zt,e,this.fieldTransforms):new SI(t,this.data,e,this.fieldTransforms)},t}(),_j=function(){function t(t,e,n){this.data=t,this.zt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return new EI(t,this.data,this.zt,e,this.fieldTransforms)},t}();function wj(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw iO()}}var xj=function(){function t(t,e,n,r,i,o){this.settings=t,this.T=e,this.Kt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.O_(),this.fieldTransforms=i||[],this.zt=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),t.prototype.M_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.T,this.Kt,this.ignoreUndefinedProperties,this.fieldTransforms,this.zt)},t.prototype.L_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.q_(t),r},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.O_(),r},t.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},t.prototype.K_=function(t){return Hj(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},t.prototype.contains=function(t){return void 0!==this.zt.find((function(e){return t.st(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.st(e.field)}))},t.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},t.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(wj(this.k_)&&vj.test(t))throw this.K_('Document fields cannot begin and end with "__"')},t}(),Sj=function(){function t(t,e,n){this.T=t,this.ignoreUndefinedProperties=e,this.Kt=n||_D(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new xj({k_:t,methodName:e,j_:n,path:NO.at(),B_:!1,W_:r},this.T,this.Kt,this.ignoreUndefinedProperties)},t}();function Ej(t){var e=t.p_(),n=_D(t.I_);return new Sj(t.I_,!!e.ignoreUndefinedProperties,n)}function Tj(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);Fj("Data must be an object, but it was:",s,r);var a,c,u=kj(r,s);if(o.merge)a=new UO(s.zt),c=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,d=o.mergeFields;h<d.length;h++){var f=Uj(e,d[h],n);if(!s.contains(f))throw new pO(fO.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");Vj(l,f)||l.push(f)}a=new UO(l),c=s.fieldTransforms.filter((function(t){return a.It(t.field)}))}else a=null,c=s.fieldTransforms;return new bj(new aR(u),a,c)}var Mj=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object($C.c)(e,t),e.prototype.z_=function(t){if(2!==t.k_)throw t.K_(1===t.k_?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.zt.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Jk);function Aj(t,e,n){return new xj({k_:3,j_:e.settings.j_,methodName:t._methodName,B_:n},e.T,e.Kt,e.ignoreUndefinedProperties)}var Cj=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object($C.c)(e,t),e.prototype.z_=function(t){return new fI(t.path,new oI)},e.prototype.isEqual=function(t){return t instanceof e},e}(Jk),Oj=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Object($C.c)(e,t),e.prototype.z_=function(t){var e=Aj(this,t,!0),n=this.H_.map((function(t){return Dj(t,e)})),r=new sI(n);return new fI(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Jk),Rj=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Object($C.c)(e,t),e.prototype.z_=function(t){var e=Aj(this,t,!0),n=this.H_.map((function(t){return Dj(t,e)})),r=new cI(n);return new fI(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Jk),Ij=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).J_=n,r}return Object($C.c)(e,t),e.prototype.z_=function(t){var e=new lI(t.Kt,tI(t.Kt,this.J_));return new fI(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Jk);function Lj(t,e,n,r){var i=t.G_(1,e,n);Fj("Data must be an object, but it was:",i,r);var o=[],s=new cR;jO(r,(function(t,r){var a=zj(e,t,n);r instanceof gO&&(r=r._);var c=i.U_(a);if(r instanceof Mj)o.push(a);else{var u=Dj(r,c);null!=u&&(o.push(a),s.set(a,u))}}));var a=new UO(o);return new _j(s.yt(),a,i.fieldTransforms)}function Pj(t,e,n,r,i,o){var s=t.G_(1,e,n),a=[Uj(e,r,n)],c=[i];if(o.length%2!=0)throw new pO(fO.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var u=0;u<o.length;u+=2)a.push(Uj(e,o[u])),c.push(o[u+1]);for(var l=[],h=new cR,d=a.length-1;d>=0;--d)if(!Vj(l,a[d])){var f=a[d],p=c[d];p instanceof gO&&(p=p._);var m=s.U_(f);if(p instanceof Mj)l.push(f);else{var g=Dj(p,m);null!=g&&(l.push(f),h.set(f,g))}}var y=new UO(l);return new _j(h.yt(),y,s.fieldTransforms)}function Nj(t,e,n,r){return void 0===r&&(r=!1),Dj(n,t.G_(r?4:3,e))}function Dj(t,e){if(t instanceof gO&&(t=t._),jj(t))return Fj("Unsupported field value:",e,t),kj(t,e);if(t instanceof Jk)return function(t,e){if(!wj(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.zt.push(e.path),t instanceof Array){if(e.settings.B_&&4!==e.k_)throw e.K_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Dj(o[i],e.Q_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof gO&&(t=t._),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return tI(e.Kt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=OO.fromDate(t);return{timestampValue:fL(e.Kt,n)}}if(t instanceof OO)return n=new OO(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:fL(e.Kt,n)};if(t instanceof yj)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof mO)return{bytesValue:pL(e.Kt,t.l)};if(t instanceof lj){var r=t.firestore.I_;if(!r.isEqual(n=e.T))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:yL(t.firestore.I_||e.T,t.S_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.K_("Unsupported field value: "+ij(t))}(t,e)}function kj(t,e){var n={};return FO(t)?e.path&&e.path.length>0&&e.zt.push(e.path):jO(t,(function(t,r){var i=Dj(r,e.L_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function jj(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof OO||t instanceof yj||t instanceof mO||t instanceof lj||t instanceof Jk)}function Fj(t,e,n){if(!jj(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=ij(n);throw e.K_("an object"===r?t+" a custom object":t+" "+r)}}function Uj(t,e,n){if(e instanceof gO&&(e=e._),e instanceof $k)return e.d_;if("string"==typeof e)return zj(t,e);throw Hj("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Bj=new RegExp("[~\\*/\\[\\]]");function zj(t,e,n){if(e.search(Bj)>=0)throw Hj("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new($k.bind.apply($k,Object($C.g)([void 0],e.split("."))))).d_}catch(r){throw Hj("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Hj(t,e,n,r,i){var o=r&&!r.nt(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var c="";return(o||s)&&(c+=" (found",o&&(c+=" in field "+r),s&&(c+=" in document "+i),c+=")"),new pO(fO.INVALID_ARGUMENT,(a+=". ")+t+c)}function Vj(t,e){return t.some((function(t){return t.isEqual(e)}))}var Gj=function(){function t(t){this.Dh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return t.prototype.ef=function(t){return Object($C.b)(this,void 0,void 0,(function(){var e,n=this;return Object($C.d)(this,(function(r){switch(r.label){case 0:if(this.nf(),this.mutations.length>0)throw new pO(fO.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object($C.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Object($C.d)(this,(function(c){switch(c.label){case 0:return n=sO(t),r=SL(n.Kt)+"/documents",i={documents:e.map((function(t){return bL(n.Kt,t)}))},[4,n.Cu("BatchGetDocuments",r,i)];case 1:return o=c.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){oO(!!e.found);var n=_L(t,e.found.name),r=gL(e.found.updateTime),i=new aR({mapValue:{fields:e.found.fields}});return new hR(n,r,i,{})}(t,e):"missing"in e?function(t,e){oO(!!e.missing),oO(!!e.readTime);var n=_L(t,e.missing),r=gL(e.readTime);return new dR(n,r)}(t,e):iO()}(n.Kt,t);s.set(e.key.toString(),e)})),a=[],[2,(e.forEach((function(t){var e=s.get(t.toString());oO(!!e),a.push(e)})),a)]}}))}))}(this.Dh,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof dR||t instanceof hR?n.sf(t):iO()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.F_(t,this.Gt(t))),this.tf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.F_(t,this.rf(t)))}catch(t){this.Z_=t}this.tf.add(t.toString())},t.prototype.delete=function(t){this.write(new II(t,this.Gt(t))),this.tf.add(t.toString())},t.prototype.commit=function(){return Object($C.b)(this,void 0,void 0,(function(){var t,e=this;return Object($C.d)(this,(function(n){switch(n.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=DO.ft(n);e.mutations.push(new LI(r,e.Gt(r)))})),[4,function(t,e){return Object($C.b)(this,void 0,void 0,(function(){var n,r,i;return Object($C.d)(this,(function(o){switch(o.label){case 0:return n=sO(t),r=SL(n.Kt)+"/documents",i={writes:e.map((function(t){return AL(n.Kt,t)}))},[4,n.bu("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.Dh,this.mutations)];case 1:return n.sent(),this.X_=!0,[2]}}))}))},t.prototype.sf=function(t){var e;if(t instanceof hR)e=t.version;else{if(!(t instanceof dR))throw iO();e=RO.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new pO(fO.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},t.prototype.Gt=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?mI.updateTime(e):mI.Wt()},t.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&e){if(e.isEqual(RO.min()))throw new pO(fO.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return mI.updateTime(e)}return mI.exists(!0)},t.prototype.write=function(t){this.nf(),this.mutations.push(t)},t.prototype.nf=function(){},t}(),Wj=function(){function t(t,e,n,r){this.fs=t,this.Dh=e,this.updateFunction=n,this.Ts=r,this.cf=5,this.zu=new wD(this.fs,"transaction_retry")}return t.prototype.run=function(){this.af()},t.prototype.af=function(){var t=this;this.zu.Bu((function(){return Object($C.b)(t,void 0,void 0,(function(){var t,e,n=this;return Object($C.d)(this,(function(r){return t=new Gj(this.Dh),(e=this.uf(t))&&e.then((function(e){n.fs.ys((function(){return t.commit().then((function(){n.Ts.resolve(e)})).catch((function(t){n.hf(t)}))}))})).catch((function(t){n.hf(t)})),[2]}))}))}))},t.prototype.uf=function(t){try{var e=this.updateFunction(t);return!qO(e)&&e.catch&&e.then?e:(this.Ts.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Ts.reject(t),null}},t.prototype.hf=function(t){var e=this;this.cf>0&&this.lf(t)?(this.cf-=1,this.fs.ys((function(){return e.af(),Promise.resolve()}))):this.Ts.reject(t)},t.prototype.lf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!NI(e)}return!1},t}(),qj=function(){function t(t,e,n){var r=this;this.credentials=t,this.fs=e,this.gu=n,this.user=xO.UNAUTHENTICATED,this.clientId=cO.t(),this._f=function(){},this.N=new HL,this.credentials.S((function(t){tO("FirestoreClient","Received user=",t.uid),r.user=t,r._f(t),r.N.resolve()}))}return t.prototype.getConfiguration=function(){return Object($C.b)(this,void 0,void 0,(function(){return Object($C.d)(this,(function(t){switch(t.label){case 0:return[4,this.N.promise];case 1:return[2,(t.sent(),{fs:this.fs,gu:this.gu,clientId:this.clientId,credentials:this.credentials,Yl:this.user,bl:100})]}}))}))},t.prototype.ff=function(t){var e=this;this._f=t,this.N.promise.then((function(){return e._f(e.user)}))},t.prototype.df=function(){if(this.fs.wf)throw new pO(fO.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.fs.Ef();var e=new HL;return this.fs.Tf((function(){return Object($C.b)(t,void 0,void 0,(function(){var t,n;return Object($C.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.D(),e.resolve(),[3,6];case 5:return t=r.sent(),n=tP(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function Xj(t,e){return Object($C.b)(this,void 0,void 0,(function(){var n,r,i=this;return Object($C.d)(this,(function(o){switch(o.label){case 0:return t.fs.Af(),tO("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.Yl,t.ff((function(n){r.isEqual(n)||(r=n,t.fs.bo((function(){return Object($C.b)(i,void 0,void 0,(function(){return Object($C.d)(this,(function(t){switch(t.label){case 0:return[4,PN(e.Sh,n)];case 1:return t.sent(),[2]}}))}))})))})),e.persistence.yo((function(){return t.terminate()})),t.mf=e,[2]}}))}))}function Zj(t,e){return Object($C.b)(this,void 0,void 0,(function(){var n,r;return Object($C.d)(this,(function(i){switch(i.label){case 0:return t.fs.Af(),[4,Kj(t)];case 1:return n=i.sent(),tO("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.ff((function(n){return t.fs.bo((function(){return function(t,e){return Object($C.b)(this,void 0,void 0,(function(){var n,r;return Object($C.d)(this,(function(i){switch(i.label){case 0:return(n=sO(t)).fs.Af(),tO("RemoteStore","RemoteStore received new credentials"),r=kD(n),n.Fh.add(3),[4,OD(n)];case 1:return i.sent(),r&&n.Mh.set("Unknown"),[4,n.Ch.s_(e)];case 2:return i.sent(),n.Fh.delete(3),[4,CD(n)];case 3:return i.sent(),[2]}}))}))}(e.gl,n)}))})),t.If=e,[2]}}))}))}function Kj(t){return Object($C.b)(this,void 0,void 0,(function(){return Object($C.d)(this,(function(e){switch(e.label){case 0:return t.mf?[3,2]:(tO("FirestoreClient","Using default OfflineComponentProvider"),[4,Xj(t,new qk)]);case 1:e.sent(),e.label=2;case 2:return[2,t.mf]}}))}))}function Yj(t){return Object($C.b)(this,void 0,void 0,(function(){return Object($C.d)(this,(function(e){switch(e.label){case 0:return t.If?[3,2]:(tO("FirestoreClient","Using default OnlineComponentProvider"),[4,Zj(t,new Kk)]);case 1:e.sent(),e.label=2;case 2:return[2,t.If]}}))}))}function $j(t){return Kj(t).then((function(t){return t.persistence}))}function Jj(t){return Kj(t).then((function(t){return t.Sh}))}function Qj(t){return Yj(t).then((function(t){return t.gl}))}function tF(t){return Yj(t).then((function(t){return t.fa}))}function eF(t){return Object($C.b)(this,void 0,void 0,(function(){var e,n;return Object($C.d)(this,(function(r){switch(r.label){case 0:return[4,Yj(t)];case 1:return e=r.sent(),[2,((n=e.Vl).Gh=mk.bind(null,e.fa),n.Jh=yk.bind(null,e.fa),n)]}}))}))}function nF(t,e,n){var r=this;void 0===n&&(n={});var i=new HL;return t.fs.ys((function(){return Object($C.b)(r,void 0,void 0,(function(){var r;return Object($C.d)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Yk({next:function(o){e.ys((function(){return nk(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new pO(fO.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new pO(fO.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new sk(kR(n.path),o,{includeMetadataChanges:!0,sl:!0});return ek(t,s)},[4,eF(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.fs,e,n,i])]}}))}))})),i.promise}function rF(t,e,n){var r=this;void 0===n&&(n={});var i=new HL;return t.fs.ys((function(){return Object($C.b)(r,void 0,void 0,(function(){var r;return Object($C.d)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Yk({next:function(n){e.ys((function(){return nk(t,s)})),n.fromCache&&"server"===r.source?i.reject(new pO(fO.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new sk(n,o,{includeMetadataChanges:!0,sl:!0});return ek(t,s)},[4,eF(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.fs,e,n,i])]}}))}))})),i.promise}var iF=function(){function t(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.zu=new wD(this,"async_queue_retry"),this.vf=function(){var e=bD();e&&tO("AsyncQueue","Visibility state changed to "+e.visibilityState),t.zu.Uu()};var e=bD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),t.prototype.ys=function(t){this.enqueue(t)},t.prototype.Tf=function(t){this.Sf(),this.Df(t)},t.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=bD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf)}},t.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise((function(t){})):this.Df(t)},t.prototype.bo=function(t){var e=this;this.ys((function(){return e.Pf.push(t),e.Cf()}))},t.prototype.Cf=function(){return Object($C.b)(this,void 0,void 0,(function(){var t,e=this;return Object($C.d)(this,(function(n){switch(n.label){case 0:if(0===this.Pf.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return n.sent(),this.Pf.shift(),this.zu.reset(),[3,4];case 3:if(!ZL(t=n.sent()))throw t;return tO("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.zu.Bu((function(){return e.Cf()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Df=function(t){var e=this,n=this.Rf.then((function(){return e.pf=!0,t().catch((function(t){throw e.Vf=t,e.pf=!1,eO("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.pf=!1,t}))}));return this.Rf=n,n},t.prototype.Ir=function(t,e,n){var r=this;this.Sf(),this.bf.indexOf(t)>-1&&(e=0);var i=QL.Is(this,t,e,n,(function(t){return r.xf(t)}));return this.gf.push(i),i},t.prototype.Sf=function(){this.Vf&&iO()},t.prototype.Af=function(){},t.prototype.Nf=function(){return Object($C.b)(this,void 0,void 0,(function(){var t;return Object($C.d)(this,(function(e){switch(e.label){case 0:return[4,t=this.Rf];case 1:e.sent(),e.label=2;case 2:if(t!==this.Rf)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Ff=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].ds===t)return!0;return!1},t.prototype.Of=function(t){var e=this;return this.Nf().then((function(){e.gf.sort((function(t,e){return t.ws-e.ws}));for(var n=0,r=e.gf;n<r.length;n++){var i=r[n];if(i.Ps(),"all"!==t&&i.ds===t)break}return e.Nf()}))},t.prototype.kf=function(t){this.bf.push(t)},t.prototype.xf=function(t){var e=this.gf.indexOf(t);this.gf.splice(e,1)},t}(),oF=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Mf=new iF,r.w_="name"in e?e.name:"[DEFAULT]",r}return Object($C.c)(e,t),e.prototype.b_=function(){return this.Lf||aF(this),this.Lf.terminate()},e}(uj);function sF(t){return t.Lf||aF(t),t.Lf.df(),t.Lf}function aF(t){var e=t.p_(),n=function(t,e,n){return new _O(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.I_,t.w_,e);t.Lf=new qj(t.m_,t.Mf,n)}function cF(t,e,n){var r=this,i=new HL;return t.fs.enqueue((function(){return Object($C.b)(r,void 0,void 0,(function(){var r;return Object($C.d)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Xj(t,n)];case 1:return o.sent(),[4,Zj(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===fO.FAILED_PRECONDITION||t.code===fO.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function uF(t){if(t.R_||t.P_)throw new pO(fO.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var lF=function(){function t(){}return t.prototype.$f=function(t,e){switch(void 0===e&&(e="none"),KO(t)){case 0:return null;case 1:return t.booleanValue;case 2:return HO(t.integerValue||t.doubleValue);case 3:return this.Bf(t.timestampValue);case 4:return this.qf(t,e);case 5:return t.stringValue;case 6:return this.Uf(VO(t.bytesValue));case 7:return this.Qf(t.referenceValue);case 8:return this.Kf(t.geoPointValue);case 9:return this.Wf(t.arrayValue,e);case 10:return this.jf(t.mapValue,e);default:throw iO()}},t.prototype.jf=function(t,e){var n=this,r={};return jO(t.fields||{},(function(t,i){r[t]=n.$f(i,e)})),r},t.prototype.Kf=function(t){return new yj(HO(t.latitude),HO(t.longitude))},t.prototype.Wf=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.$f(t,e)}))},t.prototype.qf=function(t,e){switch(e){case"previous":var n=function t(e){var n=e.mapValue.fields.__previous_value__;return GO(n)?t(n):n}(t);return null==n?null:this.$f(n,e);case"estimate":return this.Bf(WO(t));default:return null}},t.prototype.Bf=function(t){var e=zO(t);return new OO(e.seconds,e.nanos)},t.prototype.Gf=function(t,e){var n=LO.ct(t);oO(zL(n));var r=new wO(n.get(1),n.get(3)),i=new DO(n.X(5));return r.isEqual(e)||eO("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),hF=function(){function t(t,e,n,r,i){this.zf=t,this.Hf=e,this.S_=n,this.Jf=r,this.v_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new lj(this.zf,this.v_,this.S_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.Jf},t.prototype.data=function(){if(this.Jf){if(this.v_){var t=new dF(this.zf,this.Hf,this.S_,this.Jf,null);return this.v_.fromFirestore(t)}return this.Hf.$f(this.Jf.vt())}},t.prototype.get=function(t){if(this.Jf){var e=this.Jf.data().field(fF("DocumentSnapshot.get",t));if(null!==e)return this.Hf.$f(e)}},t}(),dF=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object($C.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(hF);function fF(t,e){return"string"==typeof e?zj(t,e):e instanceof gO?e._.d_:e.d_}function pF(t){if(FR(t)&&0===t.Nt.length)throw new pO(fO.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var mF=function(){};function gF(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.Yf(t)}return t}var yF=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Xf=e,i.Zf=n,i.td=r,i.type="where",i}return Object($C.c)(e,t),e.prototype.Yf=function(t){var e=Ej(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.ht()){if("array-contains"===o||"array-contains-any"===o)throw new pO(fO.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){EF(s,o);for(var c=[],u=0,l=s;u<l.length;u++)c.push(SF(r,t,l[u]));a={arrayValue:{values:c}}}else a=SF(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||EF(s,o),a=Nj(n,"where",s,"in"===o||"not-in"===o);var h=bR.create(i,o,a);return function(t,e){if(e.xt()){var n=BR(t);if(null!==n&&!n.isEqual(e.field))throw new pO(fO.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=UR(t);null!==r&&TF(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new pO(fO.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t.C_,0,e,t.firestore.I_,this.Xf,this.Zf,this.td);return new hj(t.firestore,t.v_,function(t,e){var n=t.filters.concat([e]);return new NR(t.path,t.collectionGroup,t.Nt.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,n))},e}(mF),vF=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Xf=e,r.ed=n,r.type="orderBy",r}return Object($C.c)(e,t),e.prototype.Yf=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new pO(fO.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new pO(fO.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new RR(e,n);return function(t,e){if(null===UR(t)){var n=BR(t);null!==n&&TF(0,n,e.field)}}(t,r),r}(t.C_,this.Xf,this.ed);return new hj(t.firestore,t.v_,function(t,e){var n=t.Nt.concat([e]);return new NR(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,e))},e}(mF),bF=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.nd=n,i.sd=r,i}return Object($C.c)(e,t),e.prototype.Yf=function(t){return new hj(t.firestore,t.v_,GR(t.C_,this.nd,this.sd))},e}(mF),_F=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.rd=n,i.od=r,i}return Object($C.c)(e,t),e.prototype.Yf=function(t){var e=xF(t,this.type,this.rd,this.od);return new hj(t.firestore,t.v_,function(t,e){return new NR(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.C_,e))},e}(mF),wF=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.rd=n,i.od=r,i}return Object($C.c)(e,t),e.prototype.Yf=function(t){var e=xF(t,this.type,this.rd,this.od);return new hj(t.firestore,t.v_,function(t,e){return new NR(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.C_,e))},e}(mF);function xF(t,e,n,r){if(n[0]instanceof gO&&(n[0]=n[0]._),n[0]instanceof hF)return function(t,e,n,r,i){if(!r)throw new pO(fO.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=HR(t);s<a.length;s++){var c=a[s];if(c.field.ht())o.push(eR(e,r.key));else{var u=r.field(c.field);if(GO(u))throw new pO(fO.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+c.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===u){var l=c.field.ot();throw new pO(fO.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(u)}}return new CR(o,i)}(t.C_,t.firestore.I_,e,n[0].Jf,r);var i=Ej(t.firestore);return function(t,e,n,r,i,o){var s=t.Nt;if(i.length>s.length)throw new pO(fO.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],c=0;c<i.length;c++){var u=i[c];if(s[c].field.ht()){if("string"!=typeof u)throw new pO(fO.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof u);if(!zR(t)&&-1!==u.indexOf("/"))throw new pO(fO.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+u+"' contains a slash.");var l=t.path.child(LO.ct(u));if(!DO.Et(l))throw new pO(fO.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new DO(l);a.push(eR(e,h))}else{var d=Nj(n,r,u);a.push(d)}}return new CR(a,o)}(t.C_,t.firestore.I_,i,e,n,r)}function SF(t,e,n){if(n instanceof gO&&(n=n._),"string"==typeof n){if(""===n)throw new pO(fO.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!zR(e)&&-1!==n.indexOf("/"))throw new pO(fO.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(LO.ct(n));if(!DO.Et(r))throw new pO(fO.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return eR(t,new DO(r))}if(n instanceof lj)return eR(t,n.S_);throw new pO(fO.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+ij(n)+".")}function EF(t,e){if(!Array.isArray(t)||0===t.length)throw new pO(fO.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new pO(fO.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function TF(t,e,n){if(!n.isEqual(e))throw new pO(fO.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function MF(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}function AF(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var CF=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object($C.c)(e,t),e.prototype.Uf=function(t){return new mO(t)},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return new lj(this.firestore,null,e)},e}(lF),OF=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),RF=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this).zf=e,a.ad=e,a.metadata=o,a}return Object($C.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.Jf){if(this.v_){var e=new IF(this.zf,this.Hf,this.S_,this.Jf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Hf.$f(this.Jf.vt(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Jf){var n=this.Jf.data().field(fF("DocumentSnapshot.get",t));if(null!==n)return this.Hf.$f(n,e.serverTimestamps)}},e}(hF),IF=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object($C.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(RF),LF=function(){function t(t,e,n,r){this.zf=t,this.Hf=e,this.ud=r,this.metadata=new OF(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.ud.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this.ud.docs.forEach((function(r){t.call(e,new IF(n.zf,n.Hf,r.key,r,new OF(n.ud.Ce.has(r.key),n.ud.fromCache),n.query.v_))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this.ud.Ne)throw new pO(fO.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.hd&&this.ld===e||(this.hd=function(t,e){if(t.ud.De.nt()){var n=0;return t.ud.docChanges.map((function(e){return{type:"added",doc:new IF(t.zf,t.Hf,e.doc.key,e.doc,new OF(t.ud.Ce.has(e.doc.key),t.ud.fromCache),t.query.v_),oldIndex:-1,newIndex:n++}}))}var r=t.ud.De;return t.ud.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new IF(t.zf,t.Hf,e.doc.key,e.doc,new OF(t.ud.Ce.has(e.doc.key),t.ud.fromCache),t.query.v_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:PF(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this.ld=e),this.hd},t}();function PF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return iO()}}function NF(t,e){return t instanceof RF&&e instanceof RF?t.zf===e.zf&&t.S_.isEqual(e.S_)&&(null===t.Jf?null===e.Jf:t.Jf.isEqual(e.Jf))&&t.v_===e.v_:t instanceof LF&&e instanceof LF&&t.zf===e.zf&&gj(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t.ud.isEqual(e.ud)}var DF=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object($C.c)(e,t),e.prototype.Uf=function(t){return new mO(t)},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return new lj(this.firestore,null,e)},e}(lF);function kF(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=oj(t,lj);var o=oj(t.firestore,oF),s=Ej(o);return e instanceof gO&&(e=e._),FF(o,[("string"==typeof e||e instanceof $k?Pj(s,"updateDoc",t.S_,e,n,r):Lj(s,"updateDoc",t.S_,e)).F_(t.S_,mI.exists(!0))])}function jF(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof gO&&(t=t._);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||MF(i[a])||(s=i[a],a++);var c,u,l,h={includeMetadataChanges:s.includeMetadataChanges};if(MF(i[a])){var d=i[a];i[a]=null===(e=d.next)||void 0===e?void 0:e.bind(d),i[a+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),i[a+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof lj)u=oj(t.firestore,oF),l=kR(t.S_.path),c={next:function(e){i[a]&&i[a](UF(u,t,e))},error:i[a+1],complete:i[a+2]};else{var f=oj(t,hj);u=oj(f.firestore,oF),l=f.C_;var p=new DF(u);c={next:function(t){i[a]&&i[a](new LF(u,p,f,t))},error:i[a+1],complete:i[a+2]},pF(t.C_)}return function(t,e,n,r){var i=this,o=new Yk(r),s=new sk(e,o,n);return t.fs.ys((function(){return Object($C.b)(i,void 0,void 0,(function(){var e;return Object($C.d)(this,(function(n){switch(n.label){case 0:return e=ek,[4,eF(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.r_(),t.fs.ys((function(){return Object($C.b)(i,void 0,void 0,(function(){var e;return Object($C.d)(this,(function(n){switch(n.label){case 0:return e=nk,[4,eF(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(sF(u),l,h,c)}function FF(t,e){return function(t,e){var n=this,r=new HL;return t.fs.ys((function(){return Object($C.b)(n,void 0,void 0,(function(){var n;return Object($C.d)(this,(function(i){switch(i.label){case 0:return n=vk,[4,tF(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(sF(t),e)}function UF(t,e,n){var r=n.docs.get(e.S_),i=new DF(t);return new RF(t,i,e.S_,r,new OF(n.hasPendingWrites,n.fromCache),e.v_)}var BF=function(){function t(t,e){this.zf=t,this._d=e,this.fd=[],this.dd=!1,this.wd=Ej(t)}return t.prototype.set=function(t,e,n){this.Ed();var r=zF(t,this.zf),i=AF(r.v_,e,n),o=Tj(this.wd,"WriteBatch.set",r.S_,i,null!==r.v_,n);return this.fd.push(o.F_(r.S_,mI.Wt())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.Ed();var o,s=zF(t,this.zf);return e instanceof gO&&(e=e._),o="string"==typeof e||e instanceof $k?Pj(this.wd,"WriteBatch.update",s.S_,e,n,r):Lj(this.wd,"WriteBatch.update",s.S_,e),this.fd.push(o.F_(s.S_,mI.exists(!0))),this},t.prototype.delete=function(t){this.Ed();var e=zF(t,this.zf);return this.fd=this.fd.concat(new II(e.S_,mI.Wt())),this},t.prototype.commit=function(){return this.Ed(),this.dd=!0,this.fd.length>0?this._d(this.fd):Promise.resolve()},t.prototype.Ed=function(){if(this.dd)throw new pO(fO.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function zF(t,e){if(t instanceof gO&&(t=t._),t.firestore!==e)throw new pO(fO.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var HF=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).zf=e,r}return Object($C.c)(e,t),e.prototype.get=function(e){var n=this,r=zF(e,this.zf),i=new DF(this.zf);return t.prototype.get.call(this,e).then((function(t){return new RF(n.zf,i,r.S_,t.Jf,new OF(!1,!1),r.v_)}))},e}(function(){function t(t,e){this.zf=t,this.Td=e,this.wd=Ej(t)}return t.prototype.get=function(t){var e=this,n=zF(t,this.zf),r=new CF(this.zf);return this.Td.ef([n.S_]).then((function(t){if(!t||1!==t.length)return iO();var i=t[0];if(i instanceof dR)return new hF(e.zf,r,n.S_,null,n.v_);if(i instanceof hR)return new hF(e.zf,r,i.key,i,n.v_);throw iO()}))},t.prototype.set=function(t,e,n){var r=zF(t,this.zf),i=AF(r.v_,e,n),o=Tj(this.wd,"Transaction.set",r.S_,i,null!==r.v_,n);return this.Td.set(r.S_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=zF(t,this.zf);return e instanceof gO&&(e=e._),o="string"==typeof e||e instanceof $k?Pj(this.wd,"Transaction.update",s.S_,e,n,r):Lj(this.wd,"Transaction.update",s.S_,e),this.Td.update(s.S_,o),this},t.prototype.delete=function(t){var e=zF(t,this.zf);return this.Td.delete(e.S_),this},t}()),VF=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){uF(t=oj(t,oF));var n=sF(t),r=t.p_(),i=new Kk;return cF(n,i,new Xk(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){uF(t=oj(t,oF));var e=sF(t),n=t.p_(),r=new Kk;return cF(e,r,new Zk(r,n.cacheSizeBytes))}(t._)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.R_&&!t.P_)throw new pO(fO.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new HL;return t.Mf.Tf((function(){return Object($C.b)(e,void 0,void 0,(function(){var e;return Object($C.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object($C.b)(this,void 0,void 0,(function(){return Object($C.d)(this,(function(e){switch(e.label){case 0:return WL.Wn()?[4,WL.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}}))}))}(MN(t.I_,t.w_))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._)},t}(),GF=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Id=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof wO||(i.md=e),i}return Object($C.c)(e,t),Object.defineProperty(e.prototype,"I_",{get:function(){return this._.I_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._.V_()),t)).merge,this._.g_(t)},e.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=oj(t,uj)).V_();"firestore.googleapis.com"!==r.host&&r.host!==e&&nO("Host has been set in both settings() and useEmulator(), emulator host will be used"),t.g_(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this._,t,e)},e.prototype.enableNetwork=function(){return function(t){var e=this;return t.fs.enqueue((function(){return Object($C.b)(e,void 0,void 0,(function(){var e,n;return Object($C.d)(this,(function(r){switch(r.label){case 0:return[4,$j(t)];case 1:return e=r.sent(),[4,Qj(t)];case 2:return n=r.sent(),[2,(e.Vo(!0),function(t){var e=sO(t);return e.Fh.delete(0),CD(e)}(n))]}}))}))}))}(sF(oj(this._,oF)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t.fs.enqueue((function(){return Object($C.b)(e,void 0,void 0,(function(){var e,n;return Object($C.d)(this,(function(r){switch(r.label){case 0:return[4,$j(t)];case 1:return e=r.sent(),[4,Qj(t)];case 2:return n=r.sent(),[2,(e.Vo(!1),function(t){return Object($C.b)(this,void 0,void 0,(function(){var e;return Object($C.d)(this,(function(n){switch(n.label){case 0:return(e=sO(t)).Fh.add(0),[4,OD(e)];case 1:return n.sent(),e.Mh.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(sF(oj(this._,oF)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&ej("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Id.enableMultiTabIndexedDbPersistence(this):this.Id.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Id.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.md&&(this.md._removeServiceInstance("firestore"),this.md._removeServiceInstance("firestore-exp")),this._._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new HL;return t.fs.ys((function(){return Object($C.b)(e,void 0,void 0,(function(){var e;return Object($C.d)(this,(function(r){switch(r.label){case 0:return e=Ek,[4,tF(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(sF(oj(this._,oF)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Yk(e);return t.fs.ys((function(){return Object($C.b)(n,void 0,void 0,(function(){var e;return Object($C.d)(this,(function(n){switch(n.label){case 0:return e=function(t,e){sO(t).jh.add(e),e.next()},[4,eF(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.r_(),t.fs.ys((function(){return Object($C.b)(n,void 0,void 0,(function(){var e;return Object($C.d)(this,(function(n){switch(n.label){case 0:return e=function(t,e){sO(t).jh.delete(e)},[4,eF(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(sF(t=oj(t,oF)),MF(e)?e:{next:e})}(this._,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.md)throw new pO(fO.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.md},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new iU(this,fj(this._,t))}catch(t){throw YF(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new KF(this,pj(this._,t))}catch(t){throw YF(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new eU(this,function(t,e){if(t=oj(t,uj),Qk("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new pO(fO.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new hj(t,null,function(t){return new NR(LO.at(),t)}(e))}(this._,t))}catch(t){throw YF(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new HL;return t.fs.ys((function(){return Object($C.b)(n,void 0,void 0,(function(){var n;return Object($C.d)(this,(function(i){switch(i.label){case 0:return[4,function(t){return Yj(t).then((function(t){return t.Dh}))}(t)];case 1:return n=i.sent(),new Wj(t.fs,n,e,r).run(),[2]}}))}))})),r.promise}(sF(t),(function(n){return e(new HF(t,n))}))}(this._,(function(n){return t(new qF(e,n))}))},e.prototype.batch=function(){var t=this;return sF(this._),new XF(new BF(this._,(function(e){return FF(t._,e)})))},e.prototype.loadBundle=function(t){throw new pO(fO.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new pO(fO.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(gO),WF=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object($C.c)(e,t),e.prototype.Uf=function(t){return new bO(new mO(t))},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return KF.Ad(e,this.firestore,null)},e}(lF),qF=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r.Hf=new WF(e),r}return Object($C.c)(e,t),e.prototype.get=function(t){var e=this,n=oU(t);return this._.get(n).then((function(t){return new QF(e.zf,new RF(e.zf._,e.Hf,t.S_,t.Jf,t.metadata,n.v_))}))},e.prototype.set=function(t,e,n){var r=oU(t);return n?(tj("Transaction.set",n),this._.set(r,e,n)):this._.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=oU(t);return 2===arguments.length?this._.update(s,e):(r=this._).update.apply(r,Object($C.g)([s,e,n],i)),this},e.prototype.delete=function(t){var e=oU(t);return this._.delete(e),this},e}(gO),XF=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object($C.c)(e,t),e.prototype.set=function(t,e,n){var r=oU(t);return n?(tj("WriteBatch.set",n),this._.set(r,e,n)):this._.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=oU(t);return 2===arguments.length?this._.update(s,e):(r=this._).update.apply(r,Object($C.g)([s,e,n],i)),this},e.prototype.delete=function(t){var e=oU(t);return this._.delete(e),this},e.prototype.commit=function(){return this._.commit()},e}(gO),ZF=function(t){function e(e,n,r){var i=this;return(i=t.call(this,r)||this).zf=e,i.Hf=n,i}return Object($C.c)(e,t),e.prototype.fromFirestore=function(t,e){var n=new IF(this.zf._,this.Hf,t.S_,t.Jf,t.metadata,null);return this._.fromFirestore(new tU(this.zf,n),null!=e?e:{})},e.prototype.toFirestore=function(t,e){return e?this._.toFirestore(t,e):this._.toFirestore(t)},e.Rd=function(t,n){var r=e.Pd,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new WF(t),n),i.set(n,o)),o},e}(gO);ZF.Pd=new WeakMap;var KF=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Hf=new WF(e),r}return Object($C.c)(e,t),e.yd=function(t,n,r){if(t.length%2!=0)throw new pO(fO.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.ot()+" has "+t.length);return new e(n,new lj(n._,r,new DO(t)))},e.Ad=function(t,n,r){return new e(n,new lj(n._,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new iU(this.firestore,this._.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new iU(this.firestore,fj(this._,t))}catch(t){throw YF(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof gO&&(t=t._),t instanceof lj&&mj(this._,t)},e.prototype.set=function(t,e){e=tj("DocumentReference.set",e);try{return function(t,e,n){t=oj(t,lj);var r=oj(t.firestore,oF),i=AF(t.v_,e,n);return FF(r,[Tj(Ej(r),"setDoc",t.S_,i,null!==t.v_,n).F_(t.S_,mI.Wt())])}(this._,t,e)}catch(t){throw YF(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?kF(this._,t):kF.apply(void 0,Object($C.g)([this._,t,e],n))}catch(t){throw YF(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return FF(oj((t=this._).firestore,oF),[new II(t.S_,mI.Wt())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=$F(e),i=JF(e,(function(e){return new QF(t.firestore,new RF(t.firestore._,t.Hf,e.S_,e.Jf,e.metadata,t._.v_))}));return jF(this._,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=oj(t,lj);var e=oj(t.firestore,oF),n=sF(e),r=new DF(e);return function(t,e){var n=this,r=new HL;return t.fs.ys((function(){return Object($C.b)(n,void 0,void 0,(function(){var n;return Object($C.d)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Object($C.b)(this,void 0,void 0,(function(){var r,i;return Object($C.d)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=sO(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Ic.Jo(t,e)}))}(t,e)];case 1:return(i=o.sent())instanceof hR?n.resolve(i):i instanceof dR?n.resolve(null):n.reject(new pO(fO.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=tP(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,Jj(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.S_).then((function(n){return new RF(e,r,t.S_,n,new OF(n instanceof hR&&n.bt,!0),t.v_)}))}(this._):"server"===(null==t?void 0:t.source)?function(t){t=oj(t,lj);var e=oj(t.firestore,oF);return nF(sF(e),t.S_,{source:"server"}).then((function(n){return UF(e,t,n)}))}(this._):function(t){t=oj(t,lj);var e=oj(t.firestore,oF);return nF(sF(e),t.S_).then((function(n){return UF(e,t,n)}))}(this._)).then((function(t){return new QF(e.firestore,new RF(e.firestore._,e.Hf,t.S_,t.Jf,t.metadata,e._.v_))}))},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(ZF.Rd(this.firestore,t)))},e}(gO);function YF(t,e,n){return t.message=t.message.replace(e,n),t}function $F(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!MF(r))return r}return{}}function JF(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=MF(t[0])?t[0]:MF(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var QF=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return Object($C.c)(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new KF(this.zf,this._.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._.data(t)},e.prototype.get=function(t,e){return this._.get(t,e)},e.prototype.isEqual=function(t){return NF(this._,t._)},e}(gO),tU=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object($C.c)(e,t),e.prototype.data=function(t){return this._.data(t)},e}(QF),eU=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Hf=new WF(e),r}return Object($C.c)(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,gF(this._,function(t,e,n){var r=e,i=fF("where",t);return new yF(i,r,n)}(t,n,r)))}catch(t){throw YF(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,gF(this._,function(t,e){void 0===e&&(e="asc");var n=e,r=fF("orderBy",t);return new vF(r,n)}(t,n)))}catch(t){throw YF(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,gF(this._,function(t){return sj("limit",t),new bF("limit",t,"F")}(t)))}catch(t){throw YF(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,gF(this._,function(t){return sj("limitToLast",t),new bF("limitToLast",t,"L")}(t)))}catch(t){throw YF(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,gF(this._,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new _F("startAt",t,!0)}).apply(void 0,t)))}catch(t){throw YF(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,gF(this._,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new _F("startAfter",t,!1)}).apply(void 0,t)))}catch(t){throw YF(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,gF(this._,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new wF("endBefore",t,!0)}).apply(void 0,t)))}catch(t){throw YF(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,gF(this._,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new wF("endAt",t,!1)}).apply(void 0,t)))}catch(t){throw YF(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return gj(this._,t._)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=oj(t,hj);var e=oj(t.firestore,oF),n=sF(e),r=new DF(e);return function(t,e){var n=this,r=new HL;return t.fs.ys((function(){return Object($C.b)(n,void 0,void 0,(function(){var n;return Object($C.d)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Object($C.b)(this,void 0,void 0,(function(){var r,i,o,s,a;return Object($C.d)(this,(function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,zN(t,e,!0)];case 1:return a=c.sent(),r=new hk(e,a.Pc),i=r.dl(a.documents),o=r.Ei(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=c.sent(),a=tP(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}}))}))},[4,Jj(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.C_).then((function(n){return new LF(e,r,t,n)}))}(this._):"server"===(null==t?void 0:t.source)?function(t){t=oj(t,hj);var e=oj(t.firestore,oF),n=sF(e),r=new DF(e);return rF(n,t.C_,{source:"server"}).then((function(n){return new LF(e,r,t,n)}))}(this._):function(t){t=oj(t,hj);var e=oj(t.firestore,oF),n=sF(e),r=new DF(e);return pF(t.C_),rF(n,t.C_).then((function(n){return new LF(e,r,t,n)}))}(this._)).then((function(t){return new rU(e.firestore,new LF(e.firestore._,e.Hf,e._,t.ud))}))},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=$F(e),i=JF(e,(function(e){return new rU(t.firestore,new LF(t.firestore._,t.Hf,t._,e.ud))}));return jF(this._,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(ZF.Rd(this.firestore,t)))},e}(gO),nU=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return Object($C.c)(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new tU(this.zf,this._.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._.newIndex},enumerable:!1,configurable:!0}),e}(gO),rU=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return Object($C.c)(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new eU(this.zf,this._.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._.docs.map((function(e){return new tU(t.zf,e)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this._.docChanges(t).map((function(t){return new nU(e.zf,t)}))},e.prototype.forEach=function(t,e){var n=this;this._.forEach((function(r){t.call(e,new tU(n.zf,r))}))},e.prototype.isEqual=function(t){return NF(this._,t._)},e}(gO),iU=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._=n,r}return Object($C.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._.parent;return t?new KF(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new KF(this.firestore,void 0===t?pj(this._):pj(this._,t))}catch(t){throw YF(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=oj(t.firestore,oF),r=pj(t),i=AF(t.v_,e);return FF(n,[Tj(Ej(t.firestore),"addDoc",r.S_,i,null!==t.v_,{}).F_(r.S_,mI.exists(!1))]).then((function(){return r}))}(this._,t).then((function(t){return new KF(e.firestore,t)}))},e.prototype.isEqual=function(t){return mj(this._,t._)},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(ZF.Rd(this.firestore,t)))},e}(eU);function oU(t){return t instanceof gO&&(t=t._),oj(t,lj)}var sU=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new($k.bind.apply($k,Object($C.g)([void 0],e))))||this}return Object($C.c)(e,t),e.documentId=function(){return new e(NO.lt().ot())},e.prototype.isEqual=function(t){return t instanceof gO&&(t=t._),t instanceof $k&&this._.d_.isEqual(t.d_)},e}(gO),aU=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object($C.c)(e,t),e.serverTimestamp=function(){var t=new Cj("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new Mj("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Oj("arrayUnion",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Rj("arrayRemove",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new Ij("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this._.isEqual(t._)},e}(gO);!function(){function t(){this.gd={},this.Vd=new HL,this.pd={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this.gd={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this.Vd.promise.catch(t)},t.prototype.then=function(t,e){return this.Vd.promise.then(t,e)},t.prototype.Ul=function(t){this.Ql(t),this.gd.complete&&this.gd.complete(),this.Vd.resolve(t)},t.prototype.Wl=function(t){this.pd.taskState="Error",this.gd.next&&this.gd.next(this.pd),this.gd.error&&this.gd.error(t),this.Vd.reject(t)},t.prototype.Ql=function(t){this.pd=t,this.gd.next&&this.gd.next(t)}}();var cU,uU=n("/6Yf"),lU={Firestore:GF,GeoPoint:yj,Timestamp:OO,Blob:bO,Transaction:qF,WriteBatch:XF,DocumentReference:KF,DocumentSnapshot:QF,Query:eU,QueryDocumentSnapshot:tU,QuerySnapshot:rU,CollectionReference:iU,FieldPath:sU,FieldValue:aU,setLogLevel:function(t){JC.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new uU.a("firestore",(function(t){return function(t,e){return new GF(t,new oF(t,e),new VF)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},lU)))})(cU=KE.a),cU.registerVersion("@firebase/firestore","2.1.4"),n("tf+s");const hU=new i.q("angularfire2.auth.use-emulator");function dU(t,e){return function(t,e=Yt.a){return new Ut.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function fU(t,e){return dU(t,e).pipe(Object(Ht.a)(t=>({payload:t,type:"query"})))}function pU(t,e){return fU(t,e).pipe(pe(void 0),me(),Object(Ht.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function mU(t,e,n){return pU(t,n).pipe(ws((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return gU(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return gU(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return gU(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),Xt(),Object(Ht.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function gU(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function yU(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}class vU{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=pU(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(Ht.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(pe(void 0),me(),oe(([t,e])=>e.length>0||!t),Object(Ht.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(ws((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=yU(t);return mU(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return fU(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Ht.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(be.a)(this.query.get(t)).pipe(Object(Se.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new bU(this.ref.doc(t),this.afs)}}class bU{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=TU(n,e);return new vU(r,i,this.afs)}snapshotChanges(){return dU(this.ref,this.afs.schedulers.outsideAngular).pipe(pe(void 0),me(),Object(Ht.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(Ht.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(be.a)(this.ref.get(t)).pipe(Object(Se.b)(this.afs.schedulers.insideAngular))}}class _U{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?pU(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Ht.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),oe(t=>t.length>0),this.afs.keepUnstableUntilFirst):pU(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(ws((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=yU(t);return mU(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return fU(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Ht.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(be.a)(this.query.get(t)).pipe(Object(Se.b)(this.afs.schedulers.insideAngular))}}const wU=new i.q("angularfire2.enableFirestorePersistence"),xU=new i.q("angularfire2.firestore.persistenceSettings"),SU=new i.q("angularfire2.firestore.settings"),EU=new i.q("angularfire2.firestore.use-emulator");function TU(t,e=(t=>t)){return{query:e(t),ref:t}}let MU=(()=>{class t{constructor(t,e,n,r,i,o,s,a,c){this.schedulers=new XE.d(o),this.keepUnstableUntilFirst=Object(XE.h)(this.schedulers);const u=Object(XE.g)(t,o,e);!ZE.a.auth&&c&&Object(XE.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(XE.f)(`${u.name}.firestore`,"AngularFirestore",u,()=>{const t=o.runOutsideAngular(()=>u.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!function(t){return"server"===t}(i)){const e=()=>{try{return Object(be.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(cU){return"undefined"!=typeof console&&console.warn(cU),Object(Ft.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(Ft.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=TU(n,e),o=this.schedulers.ngZone.run(()=>r);return new vU(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new _U(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new bU(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(XE.c),i.Wb(XE.b,8),i.Wb(wU,8),i.Wb(SU,8),i.Wb(i.B),i.Wb(i.z),i.Wb(xU,8),i.Wb(EU,8),i.Wb(hU,8))},t.\u0275prov=Object(i.Kb)({factory:function(){return new t(Object(i.Wb)(XE.c),Object(i.Wb)(XE.b,8),Object(i.Wb)(wU,8),Object(i.Wb)(SU,8),Object(i.Wb)(i.B),Object(i.Wb)(i.z),Object(i.Wb)(xU,8),Object(i.Wb)(EU,8),Object(i.Wb)(hU,8))},token:t,providedIn:"any"}),t})();var AU=function(t){function e(n,r){var i=t.call(this,CU(n),"Firebase Storage: "+r+" ("+CU(n)+")")||this;return i.customData={serverResponse:null},Object.setPrototypeOf(i,e.prototype),i}return Object($C.c)(e,t),e.prototype.codeEquals=function(t){return CU(t)===this.code},Object.defineProperty(e.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t},enumerable:!1,configurable:!0}),e}($E.c);function CU(t){return"storage/"+t}function OU(){return new AU("unknown","An unknown error occurred, please check the error payload for server response.")}function RU(){return new AU("canceled","User canceled the upload/download.")}function IU(){return new AU("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function LU(t){return new AU("invalid-argument",t)}function PU(){return new AU("app-deleted","The Firebase app was deleted.")}function NU(t){return new AU("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function DU(t,e){return new AU("invalid-format","String does not match format '"+t+"': "+e)}function kU(t){throw new AU("internal-error","Internal error: "+t)}var jU={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},FU=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function UU(t,e){switch(t){case jU.RAW:return new FU(BU(e));case jU.BASE64:case jU.BASE64URL:return new FU(zU(t,e));case jU.DATA_URL:return new FU((n=new HU(e)).base64?zU(jU.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(cU){throw DU(jU.DATA_URL,"Malformed data URL.")}return BU(e)}(n.rest),function(t){return new HU(t).contentType}(e))}var n;throw OU()}function BU(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function zU(t,e){switch(t){case jU.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw DU(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case jU.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw DU(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(cU){throw DU(t,"Invalid character found")}for(var a=new Uint8Array(s.length),c=0;c<s.length;c++)a[c]=s.charCodeAt(c);return a}var HU=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw DU(jU.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r=e[1]||null;null!=r&&(this.base64=(n=r).length>=";base64".length&&";base64"===n.substring(n.length-";base64".length),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}}(),VU={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function GU(t){switch(t){case"running":case"pausing":case"canceling":return VU.RUNNING;case"paused":return VU.PAUSED;case"success":return VU.SUCCESS;case"canceled":return VU.CANCELED;case"error":default:return VU.ERROR}}var WU=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),qU=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=WU.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=WU.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=WU.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw kU("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw kU("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw kU("cannot .getStatus() before sending");try{return this.xhr_.status}catch(cU){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw kU("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),XU=function(){function t(){}return t.prototype.createXhrIo=function(){return new qU},t}();function ZU(t){return"string"==typeof t||t instanceof String}function KU(t){return YU()&&t instanceof Blob}function YU(){return"undefined"!=typeof Blob}function $U(t,e,n,r){if(r<e)throw new AU("invalid-argument","Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw new AU("invalid-argument","Invalid value for '"+t+"'. Expected "+n+" or less.")}function JU(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function QU(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=JU();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(YU())return new Blob(t);throw new AU("unsupported-environment","This browser doesn't seem to support creating Blobs")}var tB=function(){function t(t,e){var n=0,r="";KU(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(KU(this.data_)){var r=(o=e,s=n,(i=this.data_).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new t(r)}var i,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(YU()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(QU.apply(null,r))}var i=e.map((function(t){return ZU(t)?UU(jU.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var s=new Uint8Array(o),a=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]})),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}(),eB=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(cU){return new t(e,"")}if(""===n.path)return n;throw new AU("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e){var n=null,r=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i");function i(t){t.path_=decodeURIComponent(t.path)}for(var o="firebasestorage.googleapis.com".replace(/[.]/g,"\\."),s=[{regex:r,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+o+"/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/([A-Za-z0-9.\\-_]+)/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:i}],a=0;a<s.length;a++){var c=s[a],u=c.regex.exec(e);if(u){var l=u[c.indices.path];l||(l=""),n=new t(u[c.indices.bucket],l),c.postModify(n);break}}if(null==n)throw function(t){return new AU("invalid-url","Invalid URL '"+t+"'.")}(e);return n},t}();function nB(t){var e,n;try{e=JSON.parse(t)}catch(cU){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function rB(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function iB(t){return"https://firebasestorage.googleapis.com/v0"+t}function oB(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}function sB(t,e){return e}var aB=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||sB}}(),cB=null;function uB(){if(cB)return cB;var t=[];t.push(new aB("bucket")),t.push(new aB("generation")),t.push(new aB("metageneration")),t.push(new aB("name","fullPath",!0));var e=new aB("name");e.xform=function(t,e){return function(t){return!ZU(t)||t.length<2?t:rB(t)}(e)},t.push(e);var n=new aB("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new aB("timeCreated")),t.push(new aB("updated")),t.push(new aB("md5Hash",null,!0)),t.push(new aB("cacheControl",null,!0)),t.push(new aB("contentDisposition",null,!0)),t.push(new aB("contentEncoding",null,!0)),t.push(new aB("contentLanguage",null,!0)),t.push(new aB("contentType",null,!0)),t.push(new aB("metadata","customMetadata",!0)),cB=t}function lB(t,e,n){var r=nB(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new eB(t.bucket,t.fullPath);return e.makeStorageReference(n)}})}(r,t),r}(t,r,n)}function hB(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var dB=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function fB(t){if(!t)throw OU()}function pB(t,e){return function(n,r){var i=lB(t,r,e);return fB(null!==i),i}}function mB(t){return function(e,n){var r;return(r=401===e.getStatus()?new AU("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new AU("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new AU("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function gB(t){var e=mB(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new AU("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function yB(t,e,n){var r=iB(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new dB(r,"GET",pB(t,n),i);return o.errorHandler=gB(e),o}function vB(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var bB=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function _B(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(cU){fB(!1)}return fB(!!n&&-1!==(e||["active"]).indexOf(n)),n}var wB=function(){return function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}}}(),xB=function(){return function(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o}}();function SB(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var EB=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=uB(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t.codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t.codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;this._ref.storage.getAuthToken().then((function(n){switch(e._state){case"running":t(n);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=vB(e,r,i),a={name:s.fullPath},c=iB(o),u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=hB(s,n),h=new dB(c,"POST",(function(t){var e;_B(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(cU){fB(!1)}return fB(ZU(e)),e}),t.maxUploadRetryTime);return h.urlParams=a,h.headers=u,h.body=l,h.errorHandler=mB(e),h}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n){var r=function(t,e,n,r){var i=new dB(n,"POST",(function(t){var e=_B(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(cU){fB(!1)}n||fB(!1);var i=Number(n);return fB(!isNaN(i)),new bB(i,r.size(),"final"===e)}),t.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=mB(e),i}(t._ref.storage,t._ref._location,e,t._blob),i=t._ref.storage.makeRequest(r,n);t._request=i,i.getPromise().then((function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=262144*this._chunkMultiplier,n=new bB(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i){var o;try{o=function(t,e,n,r,i,o,s,a){var c=new bB(0,0);if(s?(c.current=s.current,c.total=s.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw new AU("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var u=c.total-c.current,l=u;i>0&&(l=Math.min(l,i));var h=c.current,d={"X-Goog-Upload-Command":l===u?"upload, finalize":"upload","X-Goog-Upload-Offset":c.current},f=r.slice(h,h+l);if(null===f)throw IU();var p=new dB(n,"POST",(function(t,n){var i,s=_B(t,["active","final"]),a=c.current+l,u=r.size();return i="final"===s?pB(e,o)(t,n):null,new bB(a,u,"final"===s,i)}),e.maxUploadRetryTime);return p.headers=d,p.body=f.uploadData(),p.progressCallback=a||null,p.errorHandler=mB(t),p}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(cU){return t._error=cU,void t._transition("error")}var s=t._ref.storage.makeRequest(o,i);t._request=s,s.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e){var n=yB(t._ref.storage,t._ref._location,t._mappings),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition("success")}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var c=vB(e,r,i),u=hB(c,n),l=tB.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+u+"\r\n--"+a+"\r\nContent-Type: "+c.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===l)throw IU();var h={name:c.fullPath},d=iB(o),f=t.maxUploadRetryTime,p=new dB(d,"POST",pB(t,n),f);return p.urlParams=h,p.headers=s,p.body=l.uploadData(),p.errorHandler=mB(e),p}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=RU(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=GU(this._state);return new xB(this._transferred,this._blob.size(),t,this._metadata,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new wB(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(GU(this._state)){case VU.SUCCESS:SB(this._resolve.bind(null,this.snapshot))();break;case VU.CANCELED:case VU.ERROR:SB(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(GU(this._state)){case VU.RUNNING:case VU.PAUSED:t.next&&SB(t.next.bind(t,this.snapshot))();break;case VU.SUCCESS:t.complete&&SB(t.complete.bind(t))();break;case VU.CANCELED:case VU.ERROR:t.error&&SB(t.error.bind(t,this._error))();break;default:t.error&&SB(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),TB=function(){function t(t,e){this._service=t,this._location=e instanceof eB?e:eB.makeFromUrl(e)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype.newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new eB(this._location.bucket,"");return this.newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return rB(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new eB(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw NU(t)},t}();function MB(t,e){return Object($C.b)(this,void 0,void 0,(function(){var n,r,i;return Object($C.d)(this,(function(o){switch(o.label){case 0:return null!=e&&"number"==typeof e.maxResults&&$U("options.maxResults",1,1e3,e.maxResults),[4,t.storage.getAuthToken()];case 1:return n=o.sent(),i=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=iB(e.bucketOnlyServerUrl()),a=t.maxOperationRetryTime,c=new dB(s,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=nB(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t.makeStorageReference(new eB(e,s));r.prefixes.push(a)}if(n.items)for(var c=0,u=n.items;c<u.length;c++)a=t.makeStorageReference(new eB(e,u[c].name)),r.items.push(a);return r}(t,e,r)}(t,e,r);return fB(null!==i),i}}(t,e.bucket),a);return c.urlParams=o,c.errorHandler=mB(e),c}(t.storage,t._location,"/",(r=e||{}).pageToken,r.maxResults),[2,t.storage.makeRequest(i,n).getPromise()]}}))}))}function AB(t,e){var n=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new eB(t._location.bucket,n);return new TB(t.storage,r)}var CB=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),OB=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate),this._snapshot=new CB(this._delegate.snapshot,this,this._ref)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return this._snapshot},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new CB(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new CB(t,i,i._ref))}:{next:e.next?function(t){return e.next(new CB(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),RB=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new IB(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new IB(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),IB=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(AB(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new OB(function(t,e,n){return void 0===n&&(n=null),t._throwIfRoot("uploadBytesResumable"),new EB(t,new tB(e),n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){return void 0===e&&(e=jU.RAW),this._throwIfRoot("putString"),new OB(function(t,e,n,r){void 0===n&&(n=jU.RAW),t._throwIfRoot("putString");var i=UU(n,e),o=Object($C.a)({},r);return null==o.contentType&&null!=i.contentType&&(o.contentType=i.contentType),new EB(t,new tB(i.data,!0),o)}(this._delegate,t,e,n),this)},t.prototype.listAll=function(){var t,e,n=this;return(t=this._delegate,e={prefixes:[],items:[]},function t(e,n,r){return Object($C.b)(this,void 0,void 0,(function(){var i,o,s;return Object($C.d)(this,(function(a){switch(a.label){case 0:return[4,MB(e,{pageToken:r})];case 1:return i=a.sent(),(o=n.prefixes).push.apply(o,i.prefixes),(s=n.items).push.apply(s,i.items),null==i.nextPageToken?[3,3]:[4,t(e,n,i.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}(t,e).then((function(){return e}))).then((function(t){return new RB(t,n.storage)}))},t.prototype.list=function(t){var e=this;return MB(this._delegate,t).then((function(t){return new RB(t,e.storage)}))},t.prototype.getMetadata=function(){return function(t){return Object($C.b)(this,void 0,void 0,(function(){var e,n;return Object($C.d)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("getMetadata"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=yB(t.storage,t._location,uB()),[2,t.storage.makeRequest(n,e).getPromise()]}}))}))}(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return Object($C.b)(this,void 0,void 0,(function(){var n,r;return Object($C.d)(this,(function(i){switch(i.label){case 0:return t._throwIfRoot("updateMetadata"),[4,t.storage.getAuthToken()];case 1:return n=i.sent(),r=function(t,e,n,r){var i=iB(e.fullServerUrl()),o=hB(n,r),s=t.maxOperationRetryTime,a=new dB(i,"PATCH",pB(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=gB(e),a}(t.storage,t._location,e,uB()),[2,t.storage.makeRequest(r,n).getPromise()]}}))}))}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return Object($C.b)(this,void 0,void 0,(function(){var e,n;return Object($C.d)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("getDownloadURL"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=function(t,e,n){var r=iB(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new dB(r,"GET",function(t,e){return function(n,r){var i=lB(t,r,e);return fB(null!==i),function(t,e){var n=nB(e);if(null===n)return null;if(!ZU(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map((function(e){var n=t.fullPath;return iB("/b/"+i(t.bucket)+"/o/"+i(n))+oB({alt:"media",token:e})}))[0]}(i,r)}}(t,n),i);return o.errorHandler=gB(e),o}(t.storage,t._location,uB()),[2,t.storage.makeRequest(n,e).getPromise().then((function(t){if(null===t)throw new AU("no-download-url","The given file does not have any download URLs.");return t}))]}}))}))}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return Object($C.b)(this,void 0,void 0,(function(){var e,n;return Object($C.d)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("deleteObject"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=function(t,e){var n=iB(e.fullServerUrl()),r=new dB(n,"DELETE",(function(t,e){}),t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=gB(e),r}(t.storage,t._location),[2,t.storage.makeRequest(n,e).getPromise()]}}))}))}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw NU(t)},t}(),LB=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}(),PB=function(){function t(t,e,n,r,i,o,s,a,c,u,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=u,this.timeout_=c,this.pool_=l,this.promise_=new Promise((function(t,e){h.resolve_=t,h.reject_=e,h.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());void 0!==a?i(a):i()}catch(cU){o(cU)}else null!==s?((r=OU()).serverResponse=s.getResponseText(),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?PU():RU():new AU("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new NB(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,s=!1,a=0;function c(){return 2===a}var u=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];u||(u=!0,n.apply(null,t))}function h(e){o=setTimeout((function(){o=null,function(e,n){if(n)e(!1,new NB(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===WU.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new NB(s,n))}else{var a=n.getErrorCode()===WU.ABORT;e(!1,new NB(!1,null,a))}}))}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(d,c())}),e)}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!u)if(t)l.call.apply(l,Object($C.g)([null,t],e));else{var r,o=c()||s;o?l.call.apply(l,Object($C.g)([null,t],e)):(i<64&&(i*=2),1===a?(a=2,r=0):r=1e3*(i+Math.random()),h(r))}}var f=!1;function p(t){f||(f=!0,u||(null!==o?(t||(a=2),clearTimeout(o),h(0)):t||(a=1)))}return h(0),setTimeout((function(){s=!0,p(!0)}),r),p}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),NB=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}();function DB(t){return/^[A-Za-z]+:\/\//.test(t)}function kB(t,e){if(e&&DB(e)){if(t instanceof UB)return new TB(t,e);throw LU("To use ref(service, url), the first argument must be a Storage instance.")}return function t(e,n){if(e instanceof UB){var r=e;if(null==r._bucket)throw new AU("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var i=new TB(r,r._bucket);return null!=n?t(i,n):i}if(void 0!==n){if(n.includes(".."))throw LU('`path` param cannot contain ".."');return AB(e,n)}return e}(t,e)}var jB,FB,UB=function(){function t(t,e,n,r){var i,o;this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._bucket=null,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?eB.makeFromBucketSpec(r):null==(o=null==(i=this.app.options)?void 0:i.storageBucket)?null:eB.makeFromBucketSpec(o)}return Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){$U("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){$U("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype.getAuthToken=function(){return Object($C.b)(this,void 0,void 0,(function(){var t,e;return Object($C.d)(this,(function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear(),Promise.resolve()},t.prototype.makeStorageReference=function(t){return new TB(this,t)},t.prototype.makeRequest=function(t,e){var n=this;if(this._deleted)return new LB(PU());var r=function(t,e,n,r){var i=oB(t.urlParams),o=t.url+i,s=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(s,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(s,n),function(t){t["X-Firebase-Storage-Version"]="webjs/"+(void 0!==KE.a?KE.a.SDK_VERSION:"AppManager")}(s),new PB(o,t.method,s,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}(t,this._appId,e,this._pool);return this._requests.add(r),r.getPromise().then((function(){return n._requests.delete(r)}),(function(){return n._requests.delete(r)})),r},t}(),BB=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(DB(t))throw LU("ref() expected a child path but got a URL, use refFromURL instead.");return new IB(kB(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!DB(t))throw LU("refFromURL() expected a full URL but got a child path, use ref() instead.");try{eB.makeFromUrl(t)}catch(cU){throw LU("refFromUrl() expected a valid full URL but got an invalid one.")}return new IB(kB(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t}();function zB(t){const e=function(t){return new Ut.a(e=>{const n=t=>e.next(t);n(t.snapshot);const r=t.on("state_changed",n);return t.then(t=>{n(t),e.complete()},r=>{n(t.snapshot),(t=>{e.error(t)})(r)}),function(){r()}}).pipe(ke(0))}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(Object(Ht.a)(t=>t.bytesTransferred/t.totalBytes*100))}}function HB(t,e,n){return{getDownloadURL:()=>Object(Ft.a)(void 0).pipe(Object(Se.b)(e.outsideAngular),_e(()=>t.getDownloadURL()),n),getMetadata:()=>Object(Ft.a)(void 0).pipe(Object(Se.b)(e.outsideAngular),_e(()=>t.getMetadata()),n),delete:()=>Object(be.a)(t.delete()),child:r=>HB(t.child(r),e,n),updateMetadata:e=>Object(be.a)(t.updateMetadata(e)),put:(e,n)=>zB(t.put(e,n)),putString:(e,n,r)=>zB(t.putString(e,n,r)),listAll:()=>Object(be.a)(t.listAll())}}FB={TaskState:VU,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:jU,Storage:UB,Reference:IB},(jB=KE.a).INTERNAL.registerComponent(new uU.a("storage",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new BB(n,new UB(n,r,new XU,e))}),"PUBLIC").setServiceProps(FB).setMultipleInstances(!0)),jB.registerVersion("@firebase/storage","0.4.2");const VB=new i.q("angularfire2.storageBucket"),GB=new i.q("angularfire2.storage.maxUploadRetryTime"),WB=new i.q("angularfire2.storage.maxOperationRetryTime");let qB=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new XE.d(i),this.keepUnstableUntilFirst=Object(XE.h)(this.schedulers);const a=Object(XE.g)(t,i,e);this.storage=Object(XE.f)(`${a.name}.storage.${n}`,"AngularFireStorage",a,()=>{const t=i.runOutsideAngular(()=>a.storage(n||void 0));return o&&t.setMaxUploadRetryTime(o),s&&t.setMaxOperationRetryTime(s),t},[o,s])}ref(t){return HB(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst)}refFromURL(t){return HB(this.storage.refFromURL(t),this.schedulers,this.keepUnstableUntilFirst)}upload(t,e,n){return HB(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst).put(e,n)}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(XE.c),i.Wb(XE.b,8),i.Wb(VB,8),i.Wb(i.B),i.Wb(i.z),i.Wb(GB,8),i.Wb(WB,8))},t.\u0275prov=Object(i.Kb)({factory:function(){return new t(Object(i.Wb)(XE.c),Object(i.Wb)(XE.b,8),Object(i.Wb)(VB,8),Object(i.Wb)(i.B),Object(i.Wb)(i.z),Object(i.Wb)(GB,8),Object(i.Wb)(WB,8))},token:t,providedIn:"any"}),t})(),XB=(()=>{class t{}return t.\u0275mod=i.Mb({type:t}),t.\u0275inj=i.Lb({factory:function(e){return new(e||t)}}),t})(),ZB=(()=>{class t{}return t.\u0275mod=i.Mb({type:t}),t.\u0275inj=i.Lb({factory:function(e){return new(e||t)},providers:[qB],imports:[XB]}),t})(),KB=(()=>{class t{constructor(t,e){this.angularFirestore=t,this.storage=e}getURL(t){const e=this.storage.ref(t);return this.profileUrl=e.getDownloadURL()}genRen(t){var e=this.storage.ref(t);return new Promise((function(){e.getDownloadURL()}))}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(MU),i.Wb(qB))},t.\u0275prov=i.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const YB=["*",[["mat-card-footer"]]],$B=["*","mat-card-footer"],JB=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],QB=["[mat-card-avatar], [matCardAvatar]","mat-card-title, mat-card-subtitle,\n      [mat-card-title], [mat-card-subtitle],\n      [matCardTitle], [matCardSubtitle]","*"];let tz=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=i.Jb({type:t,selectors:[["mat-card-content"],["","mat-card-content",""],["","matCardContent",""]],hostAttrs:[1,"mat-card-content"]}),t})(),ez=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=i.Jb({type:t,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),t})(),nz=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=i.Jb({type:t,selectors:[["","mat-card-image",""],["","matCardImage",""]],hostAttrs:[1,"mat-card-image"]}),t})(),rz=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=i.Jb({type:t,selectors:[["","mat-card-avatar",""],["","matCardAvatar",""]],hostAttrs:[1,"mat-card-avatar"]}),t})(),iz=(()=>{class t{constructor(t){this._animationMode=t}}return t.\u0275fac=function(e){return new(e||t)(i.Ob(Ti,8))},t.\u0275cmp=i.Ib({type:t,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,e){2&t&&i.Eb("_mat-animation-noopable","NoopAnimations"===e._animationMode)},exportAs:["matCard"],ngContentSelectors:$B,decls:2,vars:0,template:function(t,e){1&t&&(i.ic(YB),i.hc(0),i.hc(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions .mat-button:first-child,.mat-card-actions .mat-raised-button:first-child,.mat-card-actions .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),t})(),oz=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Ib({type:t,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-card-header"],ngContentSelectors:QB,decls:4,vars:0,consts:[[1,"mat-card-header-text"]],template:function(t,e){1&t&&(i.ic(JB),i.hc(0),i.Sb(1,"div",0),i.hc(2,1),i.Rb(),i.hc(3,2))},encapsulation:2,changeDetection:0}),t})(),sz=(()=>{class t{}return t.\u0275mod=i.Mb({type:t}),t.\u0275inj=i.Lb({factory:function(e){return new(e||t)},imports:[[Ii],Ii]}),t})();function az(t,e){if(1&t){const t=i.Tb();i.Sb(0,"div"),i.Sb(1,"mat-card",2),i.Sb(2,"mat-card-header"),i.Sb(3,"div",3),i.Pb(4,"img",4),i.Rb(),i.Sb(5,"mat-card-title"),i.xc(6),i.Rb(),i.Rb(),i.Sb(7,"div",5),i.Pb(8,"canvas",6),i.Rb(),i.Sb(9,"div",6),i.Sb(10,"div",7),i.Sb(11,"div",8),i.Sb(12,"div",9),i.Pb(13,"img",10),i.fc(14,"async"),i.Rb(),i.Sb(15,"div",11),i.Pb(16,"img",12),i.fc(17,"async"),i.Rb(),i.Sb(18,"div",11),i.Pb(19,"img",13),i.fc(20,"async"),i.Rb(),i.Rb(),i.Sb(21,"a",14),i.Pb(22,"span",15),i.Sb(23,"span",16),i.xc(24,"Previous"),i.Rb(),i.Rb(),i.Sb(25,"a",17),i.Pb(26,"span",18),i.Sb(27,"span",16),i.xc(28,"Next"),i.Rb(),i.Rb(),i.Sb(29,"a",19),i.ac("click",(function(){i.qc(t);const e=i.ec();return e.showCanvas=!e.showCanvas}))("click",(function(e){return i.qc(t),i.ec().loadCanvas(e)})),i.xc(30," settings_overscan "),i.Rb(),i.Rb(),i.Rb(),i.Sb(31,"mat-card-content"),i.Sb(32,"p"),i.xc(33," Lorem ipsum dolor sit amet consectetur adipisicing elit. "),i.Rb(),i.Rb(),i.Rb(),i.Rb()}if(2&t){const t=e.$implicit,n=i.ec();i.Cb(4),i.kc("src",t.picture.thumbnail,i.rc),i.Cb(2),i.yc(t.name.first),i.Cb(1),i.lc("id","containerC",t.name.first,""),i.Cb(1),i.lc("id","renderCanvas",t.name.first,""),i.Cb(1),i.lc("id","carouselName",t.name.first,""),i.Cb(1),i.lc("id","carousel",t.name.first,""),i.Cb(3),i.jc("src",i.gc(14,12,n.result),i.rc),i.Cb(3),i.jc("src",i.gc(17,14,n.result),i.rc),i.Cb(3),i.jc("src",i.gc(20,16,n.result),i.rc),i.Cb(2),i.lc("href","#carousel",t.name.first,"",i.rc),i.Cb(4),i.lc("href","#carousel",t.name.first,"",i.rc),i.Cb(4),i.kc("id",t.name.first)}}const cz=[{path:"",component:(()=>{class t{constructor(t,e){this.viewer=t,this.dbfireService=e,this.showCanvas=!1}ngOnInit(){this.result=this.dbfireService.getURL("/img/temporizador.PNG");for(const t in gu)this.jsusers=gu[t].results}loadCanvas(t){var e=(t.target||t.srcElement||t.currentTarget).attributes.id.nodeValue,n=document.querySelector("#renderCanvas"+e);$("#containerC"+e).removeAttr("hidden"),$("#carouselName"+e).hide().css("display","none"),this.lastId&&(this.viewer.clearScene(),$("#containerC"+this.lastId).attr("hidden","false"),$("#carouselName"+this.lastId).hide().css("display","block")),this.viewer.createScene(n,"https://cdn.coursesaver.com/files/Part26-4.STL",this.showCanvas),this.viewer.animate(),this.lastId=e}}return t.\u0275fac=function(e){return new(e||t)(i.Ob(qE),i.Ob(KB))},t.\u0275cmp=i.Ib({type:t,selectors:[["app-home"]],decls:2,vars:1,consts:[["id","cardContainer",1,"col-lg-10","col-md-10","col-sm-11","col-xs-11"],[4,"ngFor","ngForOf"],[1,"col-lg-2","col-md-5","col-sm-10","col-xs-11"],["mat-card-avatar","",1,"example-header-image"],["mat-card-image","","alt","Photo of users",3,"src"],["hidden","true",1,"engine-wrapper",3,"id"],[3,"id"],["data-ride","carousel",1,"carousel","slide",3,"id"],["role","listbox",1,"carousel-inner"],[1,"carousel-item","active"],["alt","First slide",3,"src"],[1,"carousel-item"],["alt","Second slide",3,"src"],["alt","Third slide",3,"src"],["role","button","data-slide","prev",1,"carousel-control-prev",3,"href"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"sr-only"],["role","button","data-slide","next",1,"carousel-control-next",3,"href"],["aria-hidden","true",1,"carousel-control-next-icon"],["href","#",1,"material-icons",3,"id","click"]],template:function(t,e){1&t&&(i.Sb(0,"div",0),i.vc(1,az,34,18,"div",1),i.Rb()),2&t&&(i.Cb(1),i.jc("ngForOf",e.jsusers.slice(0,10)))},directives:[R,iz,oz,rz,nz,ez,tz],pipes:[U],styles:[".mat-card[_ngcontent-%COMP%]{float:left;margin:1%;min-width:200px}#cardContainer[_ngcontent-%COMP%]{margin:auto;justify-content:center;align-items:center}canvas[_ngcontent-%COMP%]{display:block;z-index:101}canvas[_ngcontent-%COMP%], img[_ngcontent-%COMP%]{width:100%;height:200px}a[class=material-icons][_ngcontent-%COMP%]{position:absolute;right:0;top:0;color:#fff;z-index:100;text-decoration:none;background-color:rgba(0,0,0,.431)}.mat-card-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;border-radius:50%;float:left;margin-top:1%;margin-left:2%}"]}),t})()}];let uz=(()=>{class t{}return t.\u0275mod=i.Mb({type:t}),t.\u0275inj=i.Lb({factory:function(e){return new(e||t)},imports:[[nu.forRoot(cz)],nu]}),t})();n("WMd4");class lz{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Dt(-this._previousScrollPosition.left),t.style.top=Dt(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,e=t.style,n=this._document.body.style,r=e.scrollBehavior||"",i=n.scrollBehavior||"";this._isEnabled=!1,e.left=this._previousHTMLStyles.left,e.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),e.scrollBehavior=n.scrollBehavior="auto",window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),e.scrollBehavior=r,n.scrollBehavior=i}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,e=this._viewportRuler.getViewportSize();return t.scrollHeight>e.height||t.scrollWidth>e.width}}function hz(){return Error("Scroll strategy has already been attached.")}class dz{constructor(t,e,n,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){if(this._overlayRef)throw hz();this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class fz{enable(){}disable(){}attach(){}}function pz(t,e){return e.some(e=>t.bottom<e.top||t.top>e.bottom||t.right<e.left||t.left>e.right)}function mz(t,e){return e.some(e=>t.top<e.top||t.bottom>e.bottom||t.left<e.left||t.right>e.right)}class gz{constructor(t,e,n,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this._config=r,this._scrollSubscription=null}attach(t){if(this._overlayRef)throw hz();this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:e,height:n}=this._viewportRuler.getViewportSize();pz(t,[{width:e,height:n,bottom:n,right:e,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let yz=(()=>{class t{constructor(t,e,n,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this.noop=()=>new fz,this.close=t=>new dz(this._scrollDispatcher,this._ngZone,this._viewportRuler,t),this.block=()=>new lz(this._viewportRuler,this._document),this.reposition=t=>new gz(this._scrollDispatcher,this._viewportRuler,this._ngZone,t),this._document=r}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(Oe),i.Wb(Ie),i.Wb(i.z),i.Wb(a))},t.\u0275prov=Object(i.Kb)({factory:function(){return new t(Object(i.Wb)(Oe),Object(i.Wb)(Ie),Object(i.Wb)(i.z),Object(i.Wb)(a))},token:t,providedIn:"root"}),t})();class vz{constructor(t){if(this.scrollStrategy=new fz,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const n of e)void 0!==t[n]&&(this[n]=t[n])}}}class bz{constructor(t,e,n,r,i){this.offsetX=n,this.offsetY=r,this.panelClass=i,this.originX=t.originX,this.originY=t.originY,this.overlayX=e.overlayX,this.overlayY=e.overlayY}}class _z{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}function wz(t,e){if("top"!==e&&"bottom"!==e&&"center"!==e)throw Error(`ConnectedPosition: Invalid ${t} "${e}". `+'Expected "top", "bottom" or "center".')}function xz(t,e){if("start"!==e&&"end"!==e&&"center"!==e)throw Error(`ConnectedPosition: Invalid ${t} "${e}". `+'Expected "start", "end" or "center".')}let Sz=(()=>{class t{constructor(t){this._attachedOverlays=[],this._keydownListener=t=>{const e=this._attachedOverlays;for(let n=e.length-1;n>-1;n--)if(e[n]._keydownEvents.observers.length>0){e[n]._keydownEvents.next(t);break}},this._document=t}ngOnDestroy(){this._detach()}add(t){this.remove(t),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0),this._attachedOverlays.push(t)}remove(t){const e=this._attachedOverlays.indexOf(t);e>-1&&this._attachedOverlays.splice(e,1),0===this._attachedOverlays.length&&this._detach()}_detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(a))},t.\u0275prov=Object(i.Kb)({factory:function(){return new t(Object(i.Wb)(a))},token:t,providedIn:"root"}),t})();const Ez=!("undefined"==typeof window||!window||!window.__karma__&&!window.jasmine);let Tz=(()=>{class t{constructor(t,e){this._platform=e,this._document=t}ngOnDestroy(){const t=this._containerElement;t&&t.parentNode&&t.parentNode.removeChild(t)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._platform?this._platform.isBrowser:"undefined"!=typeof window;if(t||Ez){const t=this._document.querySelectorAll('.cdk-overlay-container[platform="server"], .cdk-overlay-container[platform="test"]');for(let e=0;e<t.length;e++)t[e].parentNode.removeChild(t[e])}const e=this._document.createElement("div");e.classList.add("cdk-overlay-container"),Ez?e.setAttribute("platform","test"):t||e.setAttribute("platform","server"),this._document.body.appendChild(e),this._containerElement=e}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(a),i.Wb(Ot))},t.\u0275prov=Object(i.Kb)({factory:function(){return new t(Object(i.Wb)(a),Object(i.Wb)(Ot))},token:t,providedIn:"root"}),t})();class Mz{constructor(t,e,n,r,i,o,s,a){this._portalOutlet=t,this._host=e,this._pane=n,this._config=r,this._ngZone=i,this._keyboardDispatcher=o,this._document=s,this._location=a,this._backdropElement=null,this._backdropClick=new jt.a,this._attachments=new jt.a,this._detachments=new jt.a,this._locationChanges=Wt.a.EMPTY,this._backdropClickHandler=t=>this._backdropClick.next(t),this._keydownEvents=new jt.a,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){let e=this._portalOutlet.attach(t);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.asObservable().pipe(He(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&this._location&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick.asObservable()}attachments(){return this._attachments.asObservable()}detachments(){return this._detachments.asObservable()}keydownEvents(){return this._keydownEvents.asObservable()}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=Object.assign(Object.assign({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Object.assign(Object.assign({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=Dt(this._config.width),t.height=Dt(this._config.height),t.minWidth=Dt(this._config.minWidth),t.minHeight=Dt(this._config.minHeight),t.maxWidth=Dt(this._config.maxWidth),t.maxHeight=Dt(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"auto":"none"}_attachBackdrop(){this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add("cdk-overlay-backdrop-showing")})}):this._backdropElement.classList.add("cdk-overlay-backdrop-showing")}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let t,e=this._backdropElement;if(!e)return;let n=()=>{e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",n),e.parentNode&&e.parentNode.removeChild(e)),this._backdropElement==e&&(this._backdropElement=null),this._config.backdropClass&&this._toggleClasses(e,this._config.backdropClass,!1),clearTimeout(t)};e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",n)}),e.style.pointerEvents="none",t=this._ngZone.runOutsideAngular(()=>setTimeout(n,500))}_toggleClasses(t,e,n){const r=t.classList;Nt(e).forEach(t=>{t&&(n?r.add(t):r.remove(t))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.asObservable().pipe(ce(Object(Gt.a)(this._attachments,this._detachments))).subscribe(()=>{this._pane&&this._host&&0!==this._pane.children.length||(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}}const Az=/([A-Za-z%]+)$/;class Cz{constructor(t,e,n,r,i){this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=i,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new jt.a,this._resizeSubscription=Wt.a.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges.asObservable(),this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){if(this._overlayRef&&t!==this._overlayRef)throw Error("This position strategy is already attached to an overlay");this._validatePositions(),t.hostElement.classList.add("cdk-overlay-connected-position-bounding-box"),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const t=this._originRect,e=this._overlayRect,n=this._viewportRect,r=[];let i;for(let o of this._preferredPositions){let s=this._getOriginPoint(t,o),a=this._getOverlayPoint(s,e,o),c=this._getOverlayFit(a,e,n,o);if(c.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(o,s);this._canFitWithFlexibleDimensions(c,a,n)?r.push({position:o,origin:s,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(s,o)}):(!i||i.overlayFit.visibleArea<c.visibleArea)&&(i={overlayFit:c,overlayPoint:a,originPoint:s,position:o,overlayRect:e})}if(r.length){let t=null,e=-1;for(const n of r){const r=n.boundingBoxRect.width*n.boundingBoxRect.height*(n.position.weight||1);r>e&&(e=r,t=n)}return this._isPushed=!1,void this._applyPosition(t.position,t.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(i.position,i.originPoint);this._applyPosition(i.position,i.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Oz(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove("cdk-overlay-connected-position-bounding-box"),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const t=this._lastPosition||this._preferredPositions[0],e=this._getOriginPoint(this._originRect,t);this._applyPosition(t,e)}}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e){let n,r;if("center"==e.originX)n=t.left+t.width/2;else{const r=this._isRtl()?t.right:t.left,i=this._isRtl()?t.left:t.right;n="start"==e.originX?r:i}return r="center"==e.originY?t.top+t.height/2:"top"==e.originY?t.top:t.bottom,{x:n,y:r}}_getOverlayPoint(t,e,n){let r,i;return r="center"==n.overlayX?-e.width/2:"start"===n.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,i="center"==n.overlayY?-e.height/2:"top"==n.overlayY?0:-e.height,{x:t.x+r,y:t.y+i}}_getOverlayFit(t,e,n,r){let{x:i,y:o}=t,s=this._getOffset(r,"x"),a=this._getOffset(r,"y");s&&(i+=s),a&&(o+=a);let c=0-o,u=o+e.height-n.height,l=this._subtractOverflows(e.width,0-i,i+e.width-n.width),h=this._subtractOverflows(e.height,c,u),d=l*h;return{visibleArea:d,isCompletelyWithinViewport:e.width*e.height===d,fitsInViewportVertically:h===e.height,fitsInViewportHorizontally:l==e.width}}_canFitWithFlexibleDimensions(t,e,n){if(this._hasFlexibleDimensions){const r=n.bottom-e.y,i=n.right-e.x,o=Rz(this._overlayRef.getConfig().minHeight),s=Rz(this._overlayRef.getConfig().minWidth),a=t.fitsInViewportHorizontally||null!=s&&s<=i;return(t.fitsInViewportVertically||null!=o&&o<=r)&&a}return!1}_pushOverlayOnScreen(t,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const r=this._viewportRect,i=Math.max(t.x+e.width-r.right,0),o=Math.max(t.y+e.height-r.bottom,0),s=Math.max(r.top-n.top-t.y,0),a=Math.max(r.left-n.left-t.x,0);let c=0,u=0;return c=e.width<=r.width?a||-i:t.x<this._viewportMargin?r.left-n.left-t.x:0,u=e.height<=r.height?s||-o:t.y<this._viewportMargin?r.top-n.top-t.y:0,this._previousPushAmount={x:c,y:u},{x:t.x+c,y:t.y+u}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const e=this._getScrollVisibility(),n=new _z(t,e);this._positionChanges.next(n)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,r=t.overlayY;n="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let i=0;i<e.length;i++)e[i].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(t,e){const n=this._viewportRect,r=this._isRtl();let i,o,s,a,c,u;if("top"===e.overlayY)o=t.y,i=n.height-o+this._viewportMargin;else if("bottom"===e.overlayY)s=n.height-t.y+2*this._viewportMargin,i=n.height-s+this._viewportMargin;else{const e=Math.min(n.bottom-t.y+n.top,t.y),r=this._lastBoundingBoxSize.height;i=2*e,o=t.y-e,i>r&&!this._isInitialRender&&!this._growAfterOpen&&(o=t.y-r/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)u=n.width-t.x+this._viewportMargin,a=t.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)c=t.x,a=n.right-t.x;else{const e=Math.min(n.right-t.x+n.left,t.x),r=this._lastBoundingBoxSize.width;a=2*e,c=t.x-e,a>r&&!this._isInitialRender&&!this._growAfterOpen&&(c=t.x-r/2)}return{top:o,left:c,bottom:s,right:u,width:a,height:i}}_setBoundingBoxStyles(t,e){const n=this._calculateBoundingBoxRect(t,e);this._isInitialRender||this._growAfterOpen||(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const t=this._overlayRef.getConfig().maxHeight,i=this._overlayRef.getConfig().maxWidth;r.height=Dt(n.height),r.top=Dt(n.top),r.bottom=Dt(n.bottom),r.width=Dt(n.width),r.left=Dt(n.left),r.right=Dt(n.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",t&&(r.maxHeight=Dt(t)),i&&(r.maxWidth=Dt(i))}this._lastBoundingBoxSize=n,Oz(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Oz(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Oz(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const n={},r=this._hasExactPosition(),i=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const r=this._viewportRuler.getViewportScrollPosition();Oz(n,this._getExactOverlayY(e,t,r)),Oz(n,this._getExactOverlayX(e,t,r))}else n.position="static";let s="",a=this._getOffset(e,"x"),c=this._getOffset(e,"y");a&&(s+=`translateX(${a}px) `),c&&(s+=`translateY(${c}px)`),n.transform=s.trim(),o.maxHeight&&(r?n.maxHeight=Dt(o.maxHeight):i&&(n.maxHeight="")),o.maxWidth&&(r?n.maxWidth=Dt(o.maxWidth):i&&(n.maxWidth="")),Oz(this._pane.style,n)}_getExactOverlayY(t,e,n){let r={top:"",bottom:""},i=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(i=this._pushOverlayOnScreen(i,this._overlayRect,n));let o=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return i.y-=o,"bottom"===t.overlayY?r.bottom=`${this._document.documentElement.clientHeight-(i.y+this._overlayRect.height)}px`:r.top=Dt(i.y),r}_getExactOverlayX(t,e,n){let r,i={left:"",right:""},o=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,n)),r=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===r?i.right=`${this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)}px`:i.left=Dt(o.x),i}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this._scrollables.map(t=>t.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:mz(t,n),isOriginOutsideView:pz(t,n),isOverlayClipped:mz(e,n),isOverlayOutsideView:pz(e,n)}}_subtractOverflows(t,...e){return e.reduce((t,e)=>t-Math.max(e,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+t-this._viewportMargin,bottom:n.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){if(!this._preferredPositions.length)throw Error("FlexibleConnectedPositionStrategy: At least one position is required.");this._preferredPositions.forEach(t=>{xz("originX",t.originX),wz("originY",t.originY),xz("overlayX",t.overlayX),wz("overlayY",t.overlayY)})}_addPanelClasses(t){this._pane&&Nt(t).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof i.l)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,n=t.height||0;return{top:t.y,bottom:t.y+n,left:t.x,right:t.x+e,height:n,width:e}}}function Oz(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function Rz(t){if("number"!=typeof t&&null!=t){const[e,n]=t.split(Az);return n&&"px"!==n?null:parseFloat(e)}return t||null}class Iz{constructor(t,e,n,r,i,o,s){this._preferredPositions=[],this._positionStrategy=new Cz(n,r,i,o,s).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(t,e)}get _isRtl(){return"rtl"===this._overlayRef.getDirection()}get onPositionChange(){return this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(t){this._overlayRef=t,this._positionStrategy.attach(t),this._direction&&(t.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(t){this._positionStrategy.withScrollableContainers(t)}withFallbackPosition(t,e,n,r){const i=new bz(t,e,n,r);return this._preferredPositions.push(i),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(t){return this._overlayRef?this._overlayRef.setDirection(t):this._direction=t,this}withOffsetX(t){return this._positionStrategy.withDefaultOffsetX(t),this}withOffsetY(t){return this._positionStrategy.withDefaultOffsetY(t),this}withLockedPosition(t){return this._positionStrategy.withLockedPosition(t),this}withPositions(t){return this._preferredPositions=t.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(t){return this._positionStrategy.setOrigin(t),this}}class Lz{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add("cdk-global-overlay-wrapper"),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:r,height:i,maxWidth:o,maxHeight:s}=n,a=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==i&&"100vh"!==i||s&&"100%"!==s&&"100vh"!==s);t.position=this._cssPosition,t.marginLeft=a?"0":this._leftOffset,t.marginTop=c?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,a?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove("cdk-global-overlay-wrapper"),n.justifyContent=n.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let Pz=(()=>{class t{constructor(t,e,n,r){this._viewportRuler=t,this._document=e,this._platform=n,this._overlayContainer=r}global(){return new Lz}connectedTo(t,e,n){return new Iz(e,n,t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(t){return new Cz(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(Ie),i.Wb(a),i.Wb(Ot),i.Wb(Tz))},t.\u0275prov=Object(i.Kb)({factory:function(){return new t(Object(i.Wb)(Ie),Object(i.Wb)(a),Object(i.Wb)(Ot),Object(i.Wb)(Tz))},token:t,providedIn:"root"}),t})(),Nz=0,Dz=(()=>{class t{constructor(t,e,n,r,i,o,s,a,c,u){this.scrollStrategies=t,this._overlayContainer=e,this._componentFactoryResolver=n,this._positionBuilder=r,this._keyboardDispatcher=i,this._injector=o,this._ngZone=s,this._document=a,this._directionality=c,this._location=u}create(t){const e=this._createHostElement(),n=this._createPaneElement(e),r=this._createPortalOutlet(n),i=new vz(t);return i.direction=i.direction||this._directionality.value,new Mz(r,e,n,i,this._ngZone,this._keyboardDispatcher,this._document,this._location)}position(){return this._positionBuilder}_createPaneElement(t){const e=this._document.createElement("div");return e.id=`cdk-overlay-${Nz++}`,e.classList.add("cdk-overlay-pane"),t.appendChild(e),e}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(i.g)),new Oo(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(yz),i.Wb(Tz),i.Wb(i.j),i.Wb(Pz),i.Wb(Sz),i.Wb(i.r),i.Wb(i.z),i.Wb(a),i.Wb(Me),i.Wb(x,8))},t.\u0275prov=i.Kb({token:t,factory:t.\u0275fac}),t})();const kz={provide:new i.q("cdk-connected-overlay-scroll-strategy"),deps:[Dz],useFactory:function(t){return()=>t.scrollStrategies.reposition()}};let jz=(()=>{class t{}return t.\u0275mod=i.Mb({type:t}),t.\u0275inj=i.Lb({factory:function(e){return new(e||t)},providers:[Dz,kz],imports:[[Ae,Io,Pe],Pe]}),t})();const Fz={provide:new i.q("mat-menu-scroll-strategy"),deps:[Dz],useFactory:function(t){return()=>t.scrollStrategies.reposition()}};let Uz=(()=>{class t{}return t.\u0275mod=i.Mb({type:t}),t.\u0275inj=i.Lb({factory:function(e){return new(e||t)},providers:[Fz],imports:[Ii]}),t})(),Bz=(()=>{class t{}return t.\u0275mod=i.Mb({type:t}),t.\u0275inj=i.Lb({factory:function(e){return new(e||t)},providers:[Fz],imports:[[B,Ii,Vi,jz,Uz],Le,Ii,Uz]}),t})();n("z6cu"),n("XoHu"),n("w1tV");let zz=(()=>{class t{}return t.\u0275mod=i.Mb({type:t}),t.\u0275inj=i.Lb({factory:function(e){return new(e||t)},imports:[[Ii],Ii]}),t})(),Hz=(()=>{class t extends ft{constructor(){super(...arguments),this.overrides={pinch:{enable:!1},rotate:{enable:!1}}}}return t.\u0275fac=function(e){return Vz(e||t)},t.\u0275prov=i.Kb({token:t,factory:t.\u0275fac}),t})();const Vz=i.Ub(Hz);let Gz=(()=>{class t{static forRoot(){return{ngModule:t,providers:[{provide:ht,useClass:Hz}]}}}return t.\u0275mod=i.Mb({type:t}),t.\u0275inj=i.Lb({factory:function(e){return new(e||t)},imports:[[B,yo,zz,mt]]}),t})(),Wz=(()=>{class t{}return t.\u0275mod=i.Mb({type:t}),t.\u0275inj=i.Lb({factory:function(e){return new(e||t)},imports:[[B,Ii],Ii]}),t})();const qz={apiKey:"AIzaSyA1X0uD1DdzwWnN1NpGNUKlKMwU1m5_u5g",authDomain:"tem3dshop.firebaseapp.com",projectId:"tem3dshop",storageBucket:"tem3dshop.appspot.com",messagingSenderId:"855306051966",appId:"1:855306051966:web:96430e0aa7db971f07932f"};let Xz=(()=>{class t{}return t.\u0275mod=i.Mb({type:t,bootstrap:[pu]}),t.\u0275inj=i.Lb({factory:function(e){return new(e||t)},providers:[],imports:[[Tt,Ai,uz,Bz,yo,uo,no,Zo,sz,Gz,Wz,XE.a.initializeApp(qz),ZB]]}),t})();Object(i.T)(),xt().bootstrapModule(Xz).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"}},[[0,0]]]);